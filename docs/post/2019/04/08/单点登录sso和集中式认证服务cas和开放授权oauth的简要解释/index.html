<!doctype html><html lang=zh-cn itemscope itemtype=http://schema.org/WebPage><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>单点登录SSO和集中式认证服务CAS和开放授权OAuth的简要解释 - itning</title><meta name=renderer content="webkit"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=MobileOptimized content="width"><meta name=HandheldFriendly content="true"><meta name=applicable-device content="pc,mobile"><meta name=theme-color content="#f8f5ec"><meta name=msapplication-navbutton-color content="#f8f5ec"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="#f8f5ec"><meta name=mobile-web-app-capable content="yes"><meta name=author content="itning"><meta name=description content="什么是SSO？  维基百科中对SSO的解释：
单点登录（英语：Single sign-on，缩写为 SSO），又译为单一签入，一种对于许多相互关连，但是又是各自独立的软件系统，提供访问控制的属性。当拥有这项属性时，当用户登录时，就可以获取所有系统的访问权限，不用对每个单一系统都逐一登录。这项功能通常是以轻型目录访问协议（LDAP）来实现，在服务器上会将用户信息存储到LDAP数据库中。相同的，单一退出（single sign-off）就是指，只需要单一的退出动作，就可以结束对于多个系统的访问权限。
 简单来说，单点登陆就是用户登陆过一个系统后访问其它需要认证的系统，不用用户再重复输入用户名和密码。
单点登陆包含 单点登陆 单点登出
可以看下单点登陆图解："><meta name=keywords content="itning,我们始终是路人,blog,java"><meta name=generator content="Hugo 0.68.1"><link rel=canonical href=https://blog.itning.top/post/2019/04/08/%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95sso%E5%92%8C%E9%9B%86%E4%B8%AD%E5%BC%8F%E8%AE%A4%E8%AF%81%E6%9C%8D%E5%8A%A1cas%E5%92%8C%E5%BC%80%E6%94%BE%E6%8E%88%E6%9D%83oauth%E7%9A%84%E7%AE%80%E8%A6%81%E8%A7%A3%E9%87%8A/><link rel=icon href=/favicon.ico><link rel=stylesheet href=/sass/jane.min.af20b78e95c84de86b00a0242a4a77bd2601700e1b250edf27537d957ac0041d.css integrity="sha256-ryC3jpXITehrAKAkKkp3vSYBcA4bJQ7fJ1N9lXrABB0=" media=screen crossorigin=anonymous><meta property="og:title" content="单点登录SSO和集中式认证服务CAS和开放授权OAuth的简要解释"><meta property="og:description" content="什么是SSO？

维基百科中对SSO的解释：
单点登录（英语：Single sign-on，缩写为 SSO），又译为单一签入，一种对于许多相互关连，但是又是各自独立的软件系统，提供访问控制的属性。当拥有这项属性时，当用户登录时，就可以获取所有系统的访问权限，不用对每个单一系统都逐一登录。这项功能通常是以轻型目录访问协议（LDAP）来实现，在服务器上会将用户信息存储到LDAP数据库中。相同的，单一退出（single sign-off）就是指，只需要单一的退出动作，就可以结束对于多个系统的访问权限。

简单来说，单点登陆就是用户登陆过一个系统后访问其它需要认证的系统，不用用户再重复输入用户名和密码。
单点登陆包含 单点登陆 单点登出
可以看下单点登陆图解："><meta property="og:type" content="article"><meta property="og:url" content="https://blog.itning.top/post/2019/04/08/%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95sso%E5%92%8C%E9%9B%86%E4%B8%AD%E5%BC%8F%E8%AE%A4%E8%AF%81%E6%9C%8D%E5%8A%A1cas%E5%92%8C%E5%BC%80%E6%94%BE%E6%8E%88%E6%9D%83oauth%E7%9A%84%E7%AE%80%E8%A6%81%E8%A7%A3%E9%87%8A/"><meta property="article:published_time" content="2019-04-08T14:15:42+08:00"><meta property="article:modified_time" content="2019-04-08T14:15:42+08:00"><meta itemprop=name content="单点登录SSO和集中式认证服务CAS和开放授权OAuth的简要解释"><meta itemprop=description content="什么是SSO？

维基百科中对SSO的解释：
单点登录（英语：Single sign-on，缩写为 SSO），又译为单一签入，一种对于许多相互关连，但是又是各自独立的软件系统，提供访问控制的属性。当拥有这项属性时，当用户登录时，就可以获取所有系统的访问权限，不用对每个单一系统都逐一登录。这项功能通常是以轻型目录访问协议（LDAP）来实现，在服务器上会将用户信息存储到LDAP数据库中。相同的，单一退出（single sign-off）就是指，只需要单一的退出动作，就可以结束对于多个系统的访问权限。

简单来说，单点登陆就是用户登陆过一个系统后访问其它需要认证的系统，不用用户再重复输入用户名和密码。
单点登陆包含 单点登陆 单点登出
可以看下单点登陆图解："><meta itemprop=datePublished content="2019-04-08T14:15:42+08:00"><meta itemprop=dateModified content="2019-04-08T14:15:42+08:00"><meta itemprop=wordCount content="282"><meta itemprop=keywords content="SSO,CAS,OAuth,OAuth2,"><meta name=twitter:card content="summary"><meta name=twitter:title content="单点登录SSO和集中式认证服务CAS和开放授权OAuth的简要解释"><meta name=twitter:description content="什么是SSO？

维基百科中对SSO的解释：
单点登录（英语：Single sign-on，缩写为 SSO），又译为单一签入，一种对于许多相互关连，但是又是各自独立的软件系统，提供访问控制的属性。当拥有这项属性时，当用户登录时，就可以获取所有系统的访问权限，不用对每个单一系统都逐一登录。这项功能通常是以轻型目录访问协议（LDAP）来实现，在服务器上会将用户信息存储到LDAP数据库中。相同的，单一退出（single sign-off）就是指，只需要单一的退出动作，就可以结束对于多个系统的访问权限。

简单来说，单点登陆就是用户登陆过一个系统后访问其它需要认证的系统，不用用户再重复输入用户名和密码。
单点登陆包含 单点登陆 单点登出
可以看下单点登陆图解："><!--[if lte IE 9]><script src=https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js></script><![endif]--><!--[if lt IE 9]><script src=https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js></script><script src=https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js></script><![endif]--></head><body><div id=mobile-navbar class=mobile-navbar><div class=mobile-header-logo><a href=/ class=logo>itning</a></div><div class=mobile-navbar-icon><span></span><span></span><span></span></div></div><nav id=mobile-menu class="mobile-menu slideout-menu"><ul class=mobile-menu-list><li class=mobile-menu-item><a class=menu-item-link href=https://blog.itning.top/>主页</a></li><li class=mobile-menu-item><a class=menu-item-link href=https://blog.itning.top/post/>归档</a></li><li class=mobile-menu-item><a class=menu-item-link href=https://blog.itning.top/tags/>标签</a></li><li class=mobile-menu-item><a class=menu-item-link href=https://blog.itning.top/categories/>分类</a></li><li class=mobile-menu-item><a class=menu-item-link href=https://github.com/itning rel=noopener target=_blank>GitHub
<i class=iconfont><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="18" height="18"><path d="M623.36 272.96 473.216 423.04C467.2 429.056 467.072 438.656 472.896 444.416c0 0-6.72-6.656 1.6 1.6C496.064 467.648 528.64 500.224 528.64 500.224 534.464 506.048 544 505.856 550.016 499.904l150.08-150.144 67.328 66.432c9.024 8.96 27.456 4.544 30.4-8.96 19.968-92.608 46.656-227.52 46.656-227.52 6.848-34.496-16.192-56.704-49.92-49.92.0.0-134.656 26.816-227.328 46.784C560.32 178.048 556.352 182.272 554.752 187.136c-3.2 6.208-3.008 14.208 3.776 20.992L623.36 272.96z"/><path d="M841.152 457.152c-30.528.0-54.784 24.512-54.784 54.656V786.56H237.696V237.696h206.016c6.656.0 10.752.0 13.248.0C487.68 237.696 512 213.184 512 182.848 512 152.32 487.36 128 456.96 128H183.04C153.216 128 128 152.576 128 182.848c0 3.136.256 6.272.768 9.28C128.256 195.136 128 198.272 128 201.408v639.488c0 .064.0.192.0.256.0.128.0.192.0.32.0 30.528 24.512 54.784 54.784 54.784H829.76c6.592.0 9.728.0 11.712.0 28.736.0 52.928-22.976 54.464-51.968C896 843.264 896 842.304 896 841.344v-20.352V561.408 512.128C896 481.792 871.424 457.152 841.152 457.152z"/></svg></i></a></li></ul></nav><link href=https://cdn.bootcss.com/photoswipe/4.1.3/photoswipe.min.css rel=stylesheet><link href=https://cdn.bootcss.com/photoswipe/4.1.3/default-skin/default-skin.min.css rel=stylesheet><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><header id=header class="header container"><div class=logo-wrapper><a href=/ class=logo>itning</a></div><nav class=site-navbar><ul id=menu class=menu><li class=menu-item><a class=menu-item-link href=https://blog.itning.top/>主页</a></li><li class=menu-item><a class=menu-item-link href=https://blog.itning.top/post/>归档</a></li><li class=menu-item><a class=menu-item-link href=https://blog.itning.top/tags/>标签</a></li><li class=menu-item><a class=menu-item-link href=https://blog.itning.top/categories/>分类</a></li><li class=menu-item><a class=menu-item-link href=https://github.com/itning rel=noopener target=_blank>GitHub
<i class=iconfont><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="18" height="18"><path d="M623.36 272.96 473.216 423.04C467.2 429.056 467.072 438.656 472.896 444.416c0 0-6.72-6.656 1.6 1.6C496.064 467.648 528.64 500.224 528.64 500.224 534.464 506.048 544 505.856 550.016 499.904l150.08-150.144 67.328 66.432c9.024 8.96 27.456 4.544 30.4-8.96 19.968-92.608 46.656-227.52 46.656-227.52 6.848-34.496-16.192-56.704-49.92-49.92.0.0-134.656 26.816-227.328 46.784C560.32 178.048 556.352 182.272 554.752 187.136c-3.2 6.208-3.008 14.208 3.776 20.992L623.36 272.96z"/><path d="M841.152 457.152c-30.528.0-54.784 24.512-54.784 54.656V786.56H237.696V237.696h206.016c6.656.0 10.752.0 13.248.0C487.68 237.696 512 213.184 512 182.848 512 152.32 487.36 128 456.96 128H183.04C153.216 128 128 152.576 128 182.848c0 3.136.256 6.272.768 9.28C128.256 195.136 128 198.272 128 201.408v639.488c0 .064.0.192.0.256.0.128.0.192.0.32.0 30.528 24.512 54.784 54.784 54.784H829.76c6.592.0 9.728.0 11.712.0 28.736.0 52.928-22.976 54.464-51.968C896 843.264 896 842.304 896 841.344v-20.352V561.408 512.128C896 481.792 871.424 457.152 841.152 457.152z"/></svg></i></a></li></ul></nav></header><div id=mobile-panel><main id=main class="main bg-llight"><div class=content-wrapper><div id=content class="content container"><article class="post bg-white"><header class=post-header><h1 class=post-title>单点登录SSO和集中式认证服务CAS和开放授权OAuth的简要解释</h1><div class=post-meta><time datetime=2019-04-08 class=post-time>2019年04月08日 14:15:42</time><div class=post-category><a href=https://blog.itning.top/categories/essays/>Essays</a></div><span class=more-meta>约 282 字</span>
<span class=more-meta>预计阅读 2 分钟</span>
<span id=busuanzi_container_page_pv>| 阅读 <span id=busuanzi_value_page_pv></span></span></div></header><div class=post-toc id=post-toc><h2 class=post-toc-title>文章目录</h2><div class=post-toc-content><nav id=TableOfContents><ul><li><a href=#什么是sso>什么是SSO？</a></li><li><a href=#什么是cas>什么是CAS？</a></li><li><a href=#oauth-oauth2-又是什么>OAuth OAuth2 又是什么？</a></li></ul></nav></div></div><div class=post-content><h2 id=什么是sso>什么是SSO？</h2><blockquote><p>维基百科中对<a href=https://zh.wikipedia.org/wiki/%E5%96%AE%E4%B8%80%E7%99%BB%E5%85%A5>SSO</a>的解释：</p><p><strong>单点登录</strong>（英语：Single sign-on，缩写为 SSO），又译为<strong>单一签入</strong>，一种对于许多相互关连，但是又是各自独立的软件系统，提供<a href=https://zh.wikipedia.org/wiki/%E5%AD%98%E5%8F%96%E6%8E%A7%E5%88%B6>访问控制</a>的属性。当拥有这项属性时，当用户<a href=https://zh.wikipedia.org/wiki/%E7%99%BB%E5%85%A5>登录</a>时，就可以获取所有系统的访问权限，不用对每个单一系统都逐一登录。这项功能通常是以<a href=https://zh.wikipedia.org/wiki/%E8%BD%BB%E5%9E%8B%E7%9B%AE%E5%BD%95%E8%AE%BF%E9%97%AE%E5%8D%8F%E8%AE%AE>轻型目录访问协议</a>（LDAP）来实现，在服务器上会将用户信息存储到LDAP数据库中。相同的，<strong>单一退出</strong>（single sign-off）就是指，只需要单一的退出动作，就可以结束对于多个系统的访问权限。</p></blockquote><p>简单来说，单点登陆就是用户登陆过一个系统后访问其它需要认证的系统，不用用户再重复输入用户名和密码。</p><p>单点登陆包含 单点登陆 单点登出</p><p>可以看下单点登陆图解：</p><p><img src=/images/2019-04-08-%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95SSO%E5%92%8C%E9%9B%86%E4%B8%AD%E5%BC%8F%E8%AE%A4%E8%AF%81%E6%9C%8D%E5%8A%A1CAS%E5%92%8C%E5%BC%80%E6%94%BE%E6%8E%88%E6%9D%83OAuth%E7%9A%84%E7%AE%80%E8%A6%81%E8%A7%A3%E9%87%8A/dandiandenglu.png alt=单点登陆图解></p><p><a href=https://www.cnblogs.com/ywlaker/p/6113927.html>单点登录原理与简单实现</a></p><p>那么CAS又是什么呢？</p><h2 id=什么是cas>什么是CAS？</h2><blockquote><p><strong>集中式认证服务</strong>（英语：Central Authentication Service，缩写<strong>CAS</strong>）是一种针对<a href=https://zh.wikipedia.org/wiki/%E4%B8%87%E7%BB%B4%E7%BD%91>万维网</a>的<a href=https://zh.wikipedia.org/wiki/%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95>单点登录</a>协议。它的目的是允许一个用户访问多个应用程序，而只需提供一次凭证（如用户名和密码）。它还允许web应用程序在没有获得用户的安全凭据（如密码）的情况下对用户进行身份验证。“CAS”也指实现了该协议的软件包。</p></blockquote><p>可以说CAS实现了SSO。</p><p>其中CAS定义了一些规范：</p><table><thead><tr><th align=center>定义</th><th align=center>描述</th></tr></thead><tbody><tr><td align=center>Client</td><td align=center>终端用户或者是 WEB 浏览器</td></tr><tr><td align=center>Server</td><td align=center>统一认证服务所在的服务器</td></tr><tr><td align=center>Service</td><td align=center>终端用户或者 WEB 浏览器试图访问的应用</td></tr><tr><td align=center>Proxy</td><td align=center>作为代理的服务，用户通过该服务（代理）访问Back-end service（后端应用）</td></tr><tr><td align=center>Back-end service</td><td align=center>用户通过代理访问的应用，这个应用就被称为后端服务（Back-end service） 。它也被称作“target service”目标服务</td></tr><tr><td align=center>TGT</td><td align=center>Ticket Grangting Ticket 。TGT是CAS为用户签发的登录票据，拥有了TGT，用户就可以证明自己在CAS成功登录过。TGT封装了Cookie值以及此Cookie值对应的用户信息。当HTTP请求到来时，CAS以此Cookie值为key查询缓存中有无TGT ，如果有的话，则相信用户已登录过。</td></tr><tr><td align=center>ST</td><td align=center>Service Ticket 。ST是CAS为用户签发的访问某一service的票据。用户访问service时，service发现用户没有ST，则要求用户去CAS获取ST。用户向CAS发出获取ST的请求，CAS发现用户有TGT，则签发一个ST，返回给用户。用户拿着ST去访问service，service拿ST去CAS验证，验证通过后，允许用户</td></tr><tr><td align=center>TGC</td><td align=center>Ticket Grangting Cookies 保持TGT信息的cookies，保存在使用浏览器的客户端</td></tr><tr><td align=center>PGT</td><td align=center>Proxy TicketGranting Ticket。Proxy Service认证成功后，CAS会生成PGT，并将值回传给Proxy Service 。Proxy Service拿到PGT后，就可以为Target Service做代理，为其申请PT。</td></tr><tr><td align=center>PGTIOU</td><td align=center>Proxy TicketGranting Ticket IOU。PGTIOU是CAS协议中定义的一种附加票据，它增强了传输、获取PGT的安全性。</td></tr><tr><td align=center>PT</td><td align=center>Proxy Ticket。PT是用户访问Target Serivce的票据。用户经由Proxy Service去CAS获取到PT后，再访问Target Serivce，Target Serivce去CAS验证PT成功后，才允许用户访问。</td></tr></tbody></table><p>CAS作为一个规范，规定了一系列需要暴露的服务端:</p><table><thead><tr><th align=center>地址</th><th align=center>描述</th></tr></thead><tbody><tr><td align=center>/login</td><td align=center>登录</td></tr><tr><td align=center>/logout</td><td align=center>登出</td></tr><tr><td align=center>/validate</td><td align=center>验证ST</td></tr><tr><td align=center>/serviceValidate</td><td align=center>验证ST [CAS 2.0]</td></tr><tr><td align=center>/proxyValidate</td><td align=center>验证PT [CAS 2.0]</td></tr><tr><td align=center>/p3/serviceValidate</td><td align=center>ST验证 [CAS 3.0]</td></tr><tr><td align=center>/p3/proxyValidate</td><td align=center>PT验证 [CAS 3.0]</td></tr></tbody></table><p><img src=/images/2019-04-08-%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95SSO%E5%92%8C%E9%9B%86%E4%B8%AD%E5%BC%8F%E8%AE%A4%E8%AF%81%E6%9C%8D%E5%8A%A1CAS%E5%92%8C%E5%BC%80%E6%94%BE%E6%8E%88%E6%9D%83OAuth%E7%9A%84%E7%AE%80%E8%A6%81%E8%A7%A3%E9%87%8A/cas.png alt=CAS时序图></p><p>CAS标准：<a href=https://apereo.github.io/cas/4.2.x/protocol/CAS-Protocol-Specification.html>https://apereo.github.io/cas/4.2.x/protocol/CAS-Protocol-Specification.html</a></p><p>CAS实现：<a href=https://www.apereo.org/projects/cas>https://www.apereo.org/projects/cas</a></p><h2 id=oauth-oauth2-又是什么>OAuth OAuth2 又是什么？</h2><blockquote><p><strong>开放授权</strong>（OAuth）是一个<a href=https://zh.wikipedia.org/wiki/%E5%BC%80%E6%94%BE%E6%A0%87%E5%87%86>开放标准</a>，允许用户让第三方应用访问该用户在某一网站上存储的私密的资源（如照片，视频，联系人列表），而无需将用户名和<a href=https://zh.wikipedia.org/wiki/%E5%AF%86%E7%A0%81>密码</a>提供给第三方应用。</p><p>OAuth 2.0是OAuth协议的下一版本，但不向下兼容OAuth 1.0。OAuth 2.0关注客户端开发者的简易性，同时为Web应用、桌面应用、手机和智能设备提供专门的认证流程。</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback> +--------+                               +---------------+
 |        |--(A)- Authorization Request -&gt;|   Resource    |
 |        |                               |     Owner     |
 |        |&lt;-(B)-- Authorization Grant ---|               |
 |        |                               +---------------+
 |        |
 |        |                               +---------------+
 |        |--(C)-- Authorization Grant --&gt;| Authorization |
 | Client |                               |     Server    |
 |        |&lt;-(D)----- Access Token -------|               |
 |        |                               +---------------+
 |        |
 |        |                               +---------------+
 |        |--(E)----- Access Token ------&gt;|    Resource   |
 |        |                               |     Server    |
 |        |&lt;-(F)--- Protected Resource ---|               |
 +--------+                               +---------------+
</code></pre></td></tr></table></div></div><ul><li>（A）用户打开客户端以后，客户端请求资源所有者（用户）的授权。</li><li>（B）用户同意给予客户端授权。</li><li>（C）客户端使用上一步获得的授权，向认证服务器申请访问令牌。</li><li>（D）认证服务器对客户端进行认证以后，确认无误，同意发放访问令牌。</li><li>（E）客户端使用访问令牌，向资源服务器申请获取资源。</li><li>（F）资源服务器确认令牌无误，同意向客户端开放资源。</li></ul><p>客户端必须得到用户的授权（authorization grant），才能获得令牌（access token）。OAuth 2.0定义了四种授权方式。</p><ul><li>授权码模式（authorization code）</li><li>简化模式（implicit）</li><li>密码模式（resource owner password credentials）</li><li>客户端模式（client credentials）</li></ul><p>使用GitHub的OAuth2的一个例子:</p><p>访问<a href=https://github.com/settings/applications/new>https://github.com/settings/applications/new</a>申请 Client ID 和 Client Secret</p><p><a href=https://developer.github.com/apps/building-oauth-apps/authorizing-oauth-apps/>GitHub的OAuth2文档</a></p><ol><li><p>使用浏览器访问</p><p><code>GET https://github.com/login/oauth/authorize</code></p><p>请求参数:</p><ul><li>response_type：表示授权类型，必选项，此处的值固定为"code&rdquo;</li><li>client_id：表示客户端的ID，必选项</li><li>redirect_uri：表示重定向URI，可选项</li><li>scope：表示申请的权限范围，可选项</li><li>state：表示客户端的当前状态，可以指定任意值，认证服务器会原封不动地返回这个值。</li></ul><p>例如:<code>https://github.com/login/oauth/authorize?response_type=code&client_id=f240fa1fb1eb47037def&redirect_uri=http://localhost:8080/&state=suijizifuchuan</code></p><p>访问后浏览器会返回一个授权页面:</p><p><img src=/images/2019-04-08-%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95SSO%E5%92%8C%E9%9B%86%E4%B8%AD%E5%BC%8F%E8%AE%A4%E8%AF%81%E6%9C%8D%E5%8A%A1CAS%E5%92%8C%E5%BC%80%E6%94%BE%E6%8E%88%E6%9D%83OAuth%E7%9A%84%E7%AE%80%E8%A6%81%E8%A7%A3%E9%87%8A/diyibu.png alt=授权页面></p><p>我们授权后浏览器会重定向到如下地址:</p><p><code>http://localhost:8080/?code=d83761f6f1297179075a&state=suijizifuchuan</code></p><ul><li>code：表示授权码，必选项。该码的有效期应该很短，通常设为10分钟，客户端只能使用该码一次，否则会被授权服务器拒绝。该码与客户端ID和重定向URI，是一一对应关系。</li><li>state：如果客户端的请求中包含这个参数，认证服务器的回应也必须一模一样包含这个参数。</li></ul></li><li><p>发送POST请求获取令牌</p><p><code>POST https://github.com/login/oauth/access_token</code></p><p>请求参数:</p><ul><li>grant_type：表示使用的授权模式，必选项，此处的值固定为"authorization_code&rdquo;。</li><li>code：表示上一步获得的授权码，必选项。</li><li>redirect_uri：表示重定向URI，必选项，且必须与A步骤中的该参数值保持一致。</li><li>client_id：表示客户端ID，必选项。</li></ul><p><strong>注意:GitHub的参数与以上参数有些不同</strong></p><table><thead><tr><th>参数</th><th>l类型</th><th>解释</th></tr></thead><tbody><tr><td><code>client_secret</code></td><td><code>string</code></td><td>**需要。**您从GitHub收到的GitHub应用程序的客户机密。</td></tr><tr><td><code>code</code></td><td><code>string</code></td><td>**需要。**您收到的代码作为对第1步的回复。</td></tr><tr><td><code>redirect_uri</code></td><td><code>string</code></td><td>应用程序中的URL，用于在授权后发送用户。</td></tr><tr><td><code>state</code></td><td><code>string</code></td><td>您在步骤1中提供的不可思议的随机字符串。</td></tr><tr><td><code>client_id</code></td><td><code>string</code></td><td>**需要。**您从GitHub收到的GitHub应用程序的客户端ID。</td></tr></tbody></table><p><img src=/images/2019-04-08-%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95SSO%E5%92%8C%E9%9B%86%E4%B8%AD%E5%BC%8F%E8%AE%A4%E8%AF%81%E6%9C%8D%E5%8A%A1CAS%E5%92%8C%E5%BC%80%E6%94%BE%E6%8E%88%E6%9D%83OAuth%E7%9A%84%E7%AE%80%E8%A6%81%E8%A7%A3%E9%87%8A/dierbu.png alt=令牌></p><p>其中:</p><p><code>1a4800d2903cab1e18b65d6489aadf407c06776e</code>就是你获取到的令牌</p></li><li><p>使用访问令牌访问API</p><p><code>GET https://api.github.com/user?access_token=...</code></p></li></ol><p><a href=https://waylau.com/principle-and-practice-of-oauth2/>OAuth 2.0 认证的原理与实践</a></p><p><a href=http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html>理解OAuth 2.0</a></p></div><div class=post-copyright><p class=copyright-item><span class=item-title>文章作者</span>
<span class=item-content>itning</span></p><p class=copyright-item><span class=item-title>上次更新</span>
<span class=item-content>2019年04月08日 14:15:42</span></p><p class=copyright-item><span class=item-title>许可协议</span>
<span class=item-content><a rel="license noopener" href=https://creativecommons.org/licenses/by-nc-nd/4.0/ target=_blank>CC BY-NC-ND 4.0</a></span></p></div><footer class=post-footer><div class=post-tags><a href=https://blog.itning.top/tags/sso/>SSO</a>
<a href=https://blog.itning.top/tags/cas/>CAS</a>
<a href=https://blog.itning.top/tags/oauth/>OAuth</a>
<a href=https://blog.itning.top/tags/oauth2/>OAuth2</a></div><nav class=post-nav><a class=prev href=/post/2019/04/23/java%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E4%B8%8B%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7%E4%B8%8E%E8%B0%83%E4%BC%98%E8%AF%A6%E8%A7%A3/><i class=iconfont><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="18" height="18"><path d="M691.908486 949.511495l75.369571-89.491197c10.963703-12.998035 10.285251-32.864502-1.499144-44.378743L479.499795 515.267417l277.93508-310.326815c11.338233-12.190647 11.035334-32.285311-.638543-44.850487l-80.46666-86.564541c-11.680017-12.583596-30.356378-12.893658-41.662889-.716314L257.233596 494.235404c-11.332093 12.183484-11.041474 32.266891.657986 44.844348l80.46666 86.564541c1.772366 1.910513 3.706415 3.533476 5.750981 4.877077l306.620399 321.703933C662.505829 963.726242 680.945807 962.528973 691.908486 949.511495z"/></svg></i><span class="prev-text nav-default">Java生产环境下性能监控与调优详解</span>
<span class="prev-text nav-mobile">上一篇</span></a>
<a class=next href=/post/2019/04/01/redis%E7%BC%93%E5%AD%98%E7%9B%B8%E5%85%B3%E9%9D%A2%E8%AF%95%E9%A2%98/><span class="next-text nav-default">Redis缓存相关面试题</span>
<span class="prev-text nav-mobile">下一篇</span>
<i class=iconfont><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="18" height="18"><path d="M332.091514 74.487481l-75.369571 89.491197c-10.963703 12.998035-10.285251 32.864502 1.499144 44.378743l286.278095 300.375162L266.565125 819.058374c-11.338233 12.190647-11.035334 32.285311.638543 44.850487l80.46666 86.564541c11.680017 12.583596 30.356378 12.893658 41.662889.716314l377.434212-421.426145c11.332093-12.183484 11.041474-32.266891-.657986-44.844348l-80.46666-86.564541c-1.772366-1.910513-3.706415-3.533476-5.750981-4.877077L373.270379 71.774697C361.493148 60.273758 343.054193 61.470003 332.091514 74.487481z"/></svg></i></a></nav></footer></article><div class="post bg-white"><script src=https://utteranc.es/client.js repo=itning/blog issue-term=pathname theme=github-light crossorigin=anonymous async></script></div></div></div></main><footer id=footer class=footer><div class=icon-links><a href=mailto:itning@itning.top rel="me noopener" class=iconfont title=email><svg class="icon" viewBox="0 0 1451 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="36" height="36"><path d="M664.781909 681.472759.0 97.881301C0 3.997201 71.046997.0 71.046997.0H474.477909 961.649408 1361.641813S1432.688811 3.997201 1432.688811 97.881301L771.345323 681.472759S764.482731 685.154773 753.594283 688.65053V688.664858C741.602731 693.493018 729.424896 695.068979 718.077952 694.839748 706.731093 695.068979 694.553173 693.493018 682.561621 688.664858V688.65053C671.644501 685.140446 664.781909 681.472759 664.781909 681.472759zM718.063616 811.603883C693.779541 811.016482 658.879232 802.205449 619.10784 767.734955 542.989056 701.759633.0 212.052267.0 212.052267V942.809523L83.726336 1024H682.532949 753.579947 1348.948139L1432.688811 942.809523V212.052267S893.138176 701.759633 817.019477 767.734955C777.248 802.205449 742.347691 811.03081 718.063616 811.603883z"/></svg></a><a href=http://github.com/itning rel="me noopener" class=iconfont title=github target=_blank><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="36" height="36"><path d="M512 12.672c-282.88.0-512 229.248-512 512 0 226.261333 146.688 418.133333 350.08 485.76 25.6 4.821333 34.986667-11.008 34.986667-24.618667.0-12.16-.426667-44.373333-.64-87.04-142.421333 30.890667-172.458667-68.693333-172.458667-68.693333C188.672 770.986667 155.008 755.2 155.008 755.2c-46.378667-31.744 3.584-31.104 3.584-31.104 51.413333 3.584 78.421333 52.736 78.421333 52.736 45.653333 78.293333 119.850667 55.68 149.12 42.581333 4.608-33.109333 17.792-55.68 32.426667-68.48-113.706667-12.8-233.216-56.832-233.216-253.013333.0-55.893333 19.84-101.546667 52.693333-137.386667-5.76-12.928-23.04-64.981333 4.48-135.509333.0.0 42.88-13.738667 140.8 52.48 40.96-11.392 84.48-17.024 128-17.28 43.52.256 87.04 5.888 128 17.28 97.28-66.218667 140.16-52.48 140.16-52.48 27.52 70.528 10.24 122.581333 5.12 135.509333 32.64 35.84 52.48 81.493333 52.48 137.386667.0 196.693333-119.68 240-233.6 252.586667 17.92 15.36 34.56 46.762667 34.56 94.72.0 68.522667-.64 123.562667-.64 140.202666.0 13.44 8.96 29.44 35.2 24.32C877.44 942.592 1024 750.592 1024 524.672c0-282.752-229.248-512-512-512"/></svg></a><a href=https://blog.itning.top/index.xml rel="noopener alternate" type=application/rss+xml class=iconfont title=rss target=_blank><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="30" height="30"><path d="M819.157333 1024C819.157333 574.592 449.408 204.8.0 204.8V0c561.706667.0 1024 462.293333 1024 1024H819.157333zM140.416 743.04a140.8 140.8.0 01140.501333 140.586667A140.928 140.928.0 01140.074667 1024C62.72 1024 0 961.109333.0 883.626667S62.933333 743.082667 140.416 743.04zM678.784 1024h-199.04c0-263.210667-216.533333-479.786667-479.744-479.786667V345.173333c372.352.0 678.784 306.517333 678.784 678.826667z"/></svg></a></div><div class=copyright><span class=copyright-year>&copy;
2016 -
2020
<span class=heart><i class=iconfont><svg class="icon" viewBox="0 0 1025 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="14"><path d="M1000.1 247.9c-15.5-37.3-37.6-70.6-65.7-98.9-54.4-54.8-125.8-85-201-85-85.7.0-166 39-221.4 107.4C456.6 103 376.3 64 290.6 64c-75.1.0-146.5 30.4-201.1 85.6-28.2 28.5-50.4 61.9-65.8 99.3-16 38.8-24 79.9-23.6 122.2.7 91.7 40.1 177.2 108.1 234.8 3.1 2.6 6 5.1 8.9 7.8 14.9 13.4 58 52.8 112.6 102.7 93.5 85.5 209.9 191.9 257.5 234.2 7 6.1 15.8 9.5 24.9 9.5 9.2.0 18.1-3.4 24.9-9.5 34.5-30.7 105.8-95.9 181.4-165 74.2-67.8 150.9-138 195.8-178.2 69.5-57.9 109.6-144.4 109.9-237.3.1-42.5-8-83.6-24-122.2z" fill="#8a8a8a"/></svg></i></span><span class=author>itning
</span><script type=text/javascript>document.write(unescape("%3Cspan id='cnzz_stat_icon_1278714977'%3E%3C/span%3E%3Cscript src='https://v1.cnzz.com/z_stat.php%3Fid%3D1278714977%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));</script></span><span id=busuanzi_container>访客数/访问量：<span id=busuanzi_value_site_uv></span>/<span id=busuanzi_value_site_pv></span></span>
<span>黑ICP备17003448号</span></div></footer><div class=back-to-top id=back-to-top><i class=iconfont><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="35" height="35"><path d="M510.866688 227.694839 95.449397 629.218702h235.761562L329.15309 958.01517h362.40389L691.55698 628.188232l241.942331-3.089361L510.866688 227.694839zM63.840492 63.962777h894.052392v131.813095H63.840492V63.962777zm0 0"/></svg></i></div></div><script src=https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js></script><script src=https://cdn.bootcss.com/slideout/1.0.1/slideout.min.js></script><script type=text/javascript src=/js/main.dee43230127a73d039a734510fa896c89c3c7ce0cf0be0c7a7433f8fd69b76dc.js crossorigin=anonymous></script><script type=text/javascript src=/js/load-photoswipe.js></script><script src=https://cdn.bootcss.com/photoswipe/4.1.3/photoswipe.min.js></script><script src=https://cdn.bootcss.com/photoswipe/4.1.3/photoswipe-ui-default.min.js></script><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script></body></html>