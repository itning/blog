<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>itning</title><link>https://blog.itning.top/</link><description>Recent content on itning</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Fri, 24 Apr 2020 11:30:12 +0800</lastBuildDate><atom:link href="https://blog.itning.top/index.xml" rel="self" type="application/rss+xml"/><item><title>Spring Annotations</title><link>https://blog.itning.top/post/2020/04/24/spring-annotations/</link><pubDate>Fri, 24 Apr 2020 11:30:12 +0800</pubDate><guid>https://blog.itning.top/post/2020/04/24/spring-annotations/</guid><description>&lt;h3 id="0å‰è¨€">0.å‰è¨€&lt;/h3>
&lt;p>è½¬è½½è‡ªï¼š&lt;a href="https://github.com/Snailclimb/JavaGuide">https://github.com/Snailclimb/JavaGuide&lt;/a>ã€‚&lt;/p>
&lt;p>å¯ä»¥æ¯«ä¸å¤¸å¼ åœ°è¯´ï¼Œè¿™ç¯‡æ–‡ç« ä»‹ç»çš„ Spring/SpringBoot å¸¸ç”¨æ³¨è§£åŸºæœ¬å·²ç»æ¶µç›–ä½ å·¥ä½œä¸­é‡åˆ°çš„å¤§éƒ¨åˆ†å¸¸ç”¨çš„åœºæ™¯ã€‚å¯¹äºŽæ¯ä¸€ä¸ªæ³¨è§£æˆ‘éƒ½è¯´äº†å…·ä½“ç”¨æ³•ï¼ŒæŽŒæ¡æžæ‡‚ï¼Œä½¿ç”¨ SpringBoot æ¥å¼€å‘é¡¹ç›®åŸºæœ¬æ²¡å•¥å¤§é—®é¢˜äº†ï¼&lt;/p>
&lt;h3 id="1-springbootapplication">1. &lt;code>@SpringBootApplication&lt;/code>&lt;/h3>
&lt;p>è¿™é‡Œå…ˆå•ç‹¬æ‹Žå‡º&lt;code>@SpringBootApplication&lt;/code> æ³¨è§£è¯´ä¸€ä¸‹ï¼Œè™½ç„¶æˆ‘ä»¬ä¸€èˆ¬ä¸ä¼šä¸»åŠ¨åŽ»ä½¿ç”¨å®ƒã€‚&lt;/p>
&lt;p>&lt;em>Guide å“¥ï¼šè¿™ä¸ªæ³¨è§£æ˜¯ Spring Boot é¡¹ç›®çš„åŸºçŸ³ï¼Œåˆ›å»º SpringBoot é¡¹ç›®ä¹‹åŽä¼šé»˜è®¤åœ¨ä¸»ç±»åŠ ä¸Šã€‚&lt;/em>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="nd">@SpringBootApplication&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kd">class&lt;/span> &lt;span class="nc">SpringSecurityJwtGuideApplication&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kd">static&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">java&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">lang&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">String&lt;/span>&lt;span class="o">[]&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">SpringApplication&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">run&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">SpringSecurityJwtGuideApplication&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ‘ä»¬å¯ä»¥æŠŠ &lt;code>@SpringBootApplication&lt;/code>çœ‹ä½œæ˜¯ &lt;code>@Configuration&lt;/code>ã€&lt;code>@EnableAutoConfiguration&lt;/code>ã€&lt;code>@ComponentScan&lt;/code> æ³¨è§£çš„é›†åˆã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="kn">package&lt;/span> &lt;span class="nn">org.springframework.boot.autoconfigure&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="nd">@Target&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">ElementType&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">TYPE&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="nd">@Retention&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">RetentionPolicy&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">RUNTIME&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="nd">@Documented&lt;/span>
&lt;span class="nd">@Inherited&lt;/span>
&lt;span class="nd">@SpringBootConfiguration&lt;/span>
&lt;span class="nd">@EnableAutoConfiguration&lt;/span>
&lt;span class="nd">@ComponentScan&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">excludeFilters&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="nd">@Filter&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">FilterType&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">CUSTOM&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">classes&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">TypeExcludeFilter&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="o">),&lt;/span>
&lt;span class="nd">@Filter&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">FilterType&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">CUSTOM&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">classes&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">AutoConfigurationExcludeFilter&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">})&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="nd">@interface&lt;/span> &lt;span class="n">SpringBootApplication&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="o">......&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="kn">package&lt;/span> &lt;span class="nn">org.springframework.boot&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="nd">@Target&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">ElementType&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">TYPE&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="nd">@Retention&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">RetentionPolicy&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">RUNTIME&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="nd">@Documented&lt;/span>
&lt;span class="nd">@Configuration&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="nd">@interface&lt;/span> &lt;span class="n">SpringBootConfiguration&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ ¹æ® SpringBoot å®˜ç½‘ï¼Œè¿™ä¸‰ä¸ªæ³¨è§£çš„ä½œç”¨åˆ†åˆ«æ˜¯ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>@EnableAutoConfiguration&lt;/code>ï¼šå¯ç”¨ SpringBoot çš„è‡ªåŠ¨é…ç½®æœºåˆ¶&lt;/li>
&lt;li>&lt;code>@ComponentScan&lt;/code>ï¼š æ‰«æè¢«&lt;code>@Component&lt;/code> (&lt;code>@Service&lt;/code>,&lt;code>@Controller&lt;/code>)æ³¨è§£çš„ beanï¼Œæ³¨è§£é»˜è®¤ä¼šæ‰«æè¯¥ç±»æ‰€åœ¨çš„åŒ…ä¸‹æ‰€æœ‰çš„ç±»ã€‚&lt;/li>
&lt;li>&lt;code>@Configuration&lt;/code>ï¼šå…è®¸åœ¨ Spring ä¸Šä¸‹æ–‡ä¸­æ³¨å†Œé¢å¤–çš„ bean æˆ–å¯¼å…¥å…¶ä»–é…ç½®ç±»&lt;/li>
&lt;/ul>
&lt;h3 id="2-spring-bean-ç›¸å…³">2. Spring Bean ç›¸å…³&lt;/h3>
&lt;h4 id="21-autowired">2.1. &lt;code>@Autowired&lt;/code>&lt;/h4>
&lt;p>è‡ªåŠ¨å¯¼å…¥å¯¹è±¡åˆ°ç±»ä¸­ï¼Œè¢«æ³¨å…¥è¿›çš„ç±»åŒæ ·è¦è¢« Spring å®¹å™¨ç®¡ç†æ¯”å¦‚ï¼šService ç±»æ³¨å…¥åˆ° Controller ç±»ä¸­ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="nd">@Service&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kd">class&lt;/span> &lt;span class="nc">UserService&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="o">......&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="nd">@RestController&lt;/span>
&lt;span class="nd">@RequestMapping&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;/users&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kd">class&lt;/span> &lt;span class="nc">UserController&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="nd">@Autowired&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">UserService&lt;/span> &lt;span class="n">userService&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="o">......&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="22-componentrepositoryservice-controller">2.2. &lt;code>Component&lt;/code>,&lt;code>@Repository&lt;/code>,&lt;code>@Service&lt;/code>, &lt;code>@Controller&lt;/code>&lt;/h4>
&lt;p>æˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨ &lt;code>@Autowired&lt;/code> æ³¨è§£è®© Spring å®¹å™¨å¸®æˆ‘ä»¬è‡ªåŠ¨è£…é… beanã€‚è¦æƒ³æŠŠç±»æ ‡è¯†æˆå¯ç”¨äºŽ &lt;code>@Autowired&lt;/code> æ³¨è§£è‡ªåŠ¨è£…é…çš„ bean çš„ç±»,å¯ä»¥é‡‡ç”¨ä»¥ä¸‹æ³¨è§£å®žçŽ°ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>@Component&lt;/code> ï¼šé€šç”¨çš„æ³¨è§£ï¼Œå¯æ ‡æ³¨ä»»æ„ç±»ä¸º &lt;code>Spring&lt;/code> ç»„ä»¶ã€‚å¦‚æžœä¸€ä¸ª Bean ä¸çŸ¥é“å±žäºŽå“ªä¸ªå±‚ï¼Œå¯ä»¥ä½¿ç”¨&lt;code>@Component&lt;/code> æ³¨è§£æ ‡æ³¨ã€‚&lt;/li>
&lt;li>&lt;code>@Repository&lt;/code> : å¯¹åº”æŒä¹…å±‚å³ Dao å±‚ï¼Œä¸»è¦ç”¨äºŽæ•°æ®åº“ç›¸å…³æ“ä½œã€‚&lt;/li>
&lt;li>&lt;code>@Service&lt;/code> : å¯¹åº”æœåŠ¡å±‚ï¼Œä¸»è¦æ¶‰åŠä¸€äº›å¤æ‚çš„é€»è¾‘ï¼Œéœ€è¦ç”¨åˆ° Dao å±‚ã€‚&lt;/li>
&lt;li>&lt;code>@Controller&lt;/code> : å¯¹åº” Spring MVC æŽ§åˆ¶å±‚ï¼Œä¸»è¦ç”¨æˆ·æŽ¥å—ç”¨æˆ·è¯·æ±‚å¹¶è°ƒç”¨ Service å±‚è¿”å›žæ•°æ®ç»™å‰ç«¯é¡µé¢ã€‚&lt;/li>
&lt;/ul>
&lt;h4 id="23-restcontroller">2.3. &lt;code>@RestController&lt;/code>&lt;/h4>
&lt;p>&lt;code>@RestController&lt;/code>æ³¨è§£æ˜¯&lt;code>@Controllerå’Œ&lt;/code>@&lt;code>ResponseBody&lt;/code>çš„åˆé›†,è¡¨ç¤ºè¿™æ˜¯ä¸ªæŽ§åˆ¶å™¨ bean,å¹¶ä¸”æ˜¯å°†å‡½æ•°çš„è¿”å›žå€¼ç›´ æŽ¥å¡«å…¥ HTTP å“åº”ä½“ä¸­,æ˜¯ REST é£Žæ ¼çš„æŽ§åˆ¶å™¨ã€‚&lt;/p>
&lt;p>&lt;em>Guide å“¥ï¼šçŽ°åœ¨éƒ½æ˜¯å‰åŽç«¯åˆ†ç¦»ï¼Œè¯´å®žè¯æˆ‘å·²ç»å¾ˆä¹…æ²¡æœ‰ç”¨è¿‡&lt;code>@Controller&lt;/code>ã€‚å¦‚æžœä½ çš„é¡¹ç›®å¤ªè€äº†çš„è¯ï¼Œå°±å½“æˆ‘æ²¡è¯´ã€‚&lt;/em>&lt;/p>
&lt;p>å•ç‹¬ä½¿ç”¨ &lt;code>@Controller&lt;/code> ä¸åŠ  &lt;code>@ResponseBody&lt;/code>çš„è¯ä¸€èˆ¬ä½¿ç”¨åœ¨è¦è¿”å›žä¸€ä¸ªè§†å›¾çš„æƒ…å†µï¼Œè¿™ç§æƒ…å†µå±žäºŽæ¯”è¾ƒä¼ ç»Ÿçš„ Spring MVC çš„åº”ç”¨ï¼Œå¯¹åº”äºŽå‰åŽç«¯ä¸åˆ†ç¦»çš„æƒ…å†µã€‚&lt;code>@Controller&lt;/code> +&lt;code>@ResponseBody&lt;/code> è¿”å›ž JSON æˆ– XML å½¢å¼æ•°æ®&lt;/p>
&lt;p>å…³äºŽ&lt;code>@RestController&lt;/code> å’Œ &lt;code>@Controller&lt;/code>çš„å¯¹æ¯”ï¼Œè¯·çœ‹è¿™ç¯‡æ–‡ç« ï¼š&lt;a href="https://mp.weixin.qq.com/s?__biz=Mzg2OTA0Njk0OA==&amp;amp;mid=2247485544&amp;amp;idx=1&amp;amp;sn=3cc95b88979e28fe3bfe539eb421c6d8&amp;amp;chksm=cea247a3f9d5ceb5e324ff4b8697adc3e828ecf71a3468445e70221cce768d1e722085359907&amp;amp;token=1725092312&amp;amp;lang=zh_CN#rd">@RestController vs @Controller&lt;/a>ã€‚&lt;/p>
&lt;h4 id="24-scope">2.4. &lt;code>@Scope&lt;/code>&lt;/h4>
&lt;p>å£°æ˜Ž Spring Bean çš„ä½œç”¨åŸŸï¼Œä½¿ç”¨æ–¹æ³•:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="nd">@Bean&lt;/span>
&lt;span class="nd">@Scope&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;singleton&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="n">Person&lt;/span> &lt;span class="nf">personSingleton&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">Person&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>å››ç§å¸¸è§çš„ Spring Bean çš„ä½œç”¨åŸŸï¼š&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>singleton : å”¯ä¸€ bean å®žä¾‹ï¼ŒSpring ä¸­çš„ bean é»˜è®¤éƒ½æ˜¯å•ä¾‹çš„ã€‚&lt;/li>
&lt;li>prototype : æ¯æ¬¡è¯·æ±‚éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ bean å®žä¾‹ã€‚&lt;/li>
&lt;li>request : æ¯ä¸€æ¬¡ HTTP è¯·æ±‚éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„ beanï¼Œè¯¥ bean ä»…åœ¨å½“å‰ HTTP request å†…æœ‰æ•ˆã€‚&lt;/li>
&lt;li>session : æ¯ä¸€æ¬¡ HTTP è¯·æ±‚éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„ beanï¼Œè¯¥ bean ä»…åœ¨å½“å‰ HTTP session å†…æœ‰æ•ˆã€‚&lt;/li>
&lt;/ul>
&lt;h4 id="25-configuration">2.5. &lt;code>Configuration&lt;/code>&lt;/h4>
&lt;p>ä¸€èˆ¬ç”¨æ¥å£°æ˜Žé…ç½®ç±»ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code>@Component&lt;/code>æ³¨è§£æ›¿ä»£ï¼Œä¸è¿‡ä½¿ç”¨&lt;code>Configuration&lt;/code>æ³¨è§£å£°æ˜Žé…ç½®ç±»æ›´åŠ è¯­ä¹‰åŒ–ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="nd">@Configuration&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kd">class&lt;/span> &lt;span class="nc">AppConfig&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="nd">@Bean&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="n">TransferService&lt;/span> &lt;span class="nf">transferService&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">TransferServiceImpl&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="3-å¤„ç†å¸¸è§çš„-http-è¯·æ±‚ç±»åž‹">3. å¤„ç†å¸¸è§çš„ HTTP è¯·æ±‚ç±»åž‹&lt;/h3>
&lt;p>&lt;strong>5 ç§å¸¸è§çš„è¯·æ±‚ç±»åž‹:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;strong>GET&lt;/strong> ï¼šè¯·æ±‚ä»ŽæœåŠ¡å™¨èŽ·å–ç‰¹å®šèµ„æºã€‚ä¸¾ä¸ªä¾‹å­ï¼š&lt;code>GET /users&lt;/code>ï¼ˆèŽ·å–æ‰€æœ‰å­¦ç”Ÿï¼‰&lt;/li>
&lt;li>&lt;strong>POST&lt;/strong> ï¼šåœ¨æœåŠ¡å™¨ä¸Šåˆ›å»ºä¸€ä¸ªæ–°çš„èµ„æºã€‚ä¸¾ä¸ªä¾‹å­ï¼š&lt;code>POST /users&lt;/code>ï¼ˆåˆ›å»ºå­¦ç”Ÿï¼‰&lt;/li>
&lt;li>&lt;strong>PUT&lt;/strong> ï¼šæ›´æ–°æœåŠ¡å™¨ä¸Šçš„èµ„æºï¼ˆå®¢æˆ·ç«¯æä¾›æ›´æ–°åŽçš„æ•´ä¸ªèµ„æºï¼‰ã€‚ä¸¾ä¸ªä¾‹å­ï¼š&lt;code>PUT /users/12&lt;/code>ï¼ˆæ›´æ–°ç¼–å·ä¸º 12 çš„å­¦ç”Ÿï¼‰&lt;/li>
&lt;li>&lt;strong>DELETE&lt;/strong> ï¼šä»ŽæœåŠ¡å™¨åˆ é™¤ç‰¹å®šçš„èµ„æºã€‚ä¸¾ä¸ªä¾‹å­ï¼š&lt;code>DELETE /users/12&lt;/code>ï¼ˆåˆ é™¤ç¼–å·ä¸º 12 çš„å­¦ç”Ÿï¼‰&lt;/li>
&lt;li>&lt;strong>PATCH&lt;/strong> ï¼šæ›´æ–°æœåŠ¡å™¨ä¸Šçš„èµ„æºï¼ˆå®¢æˆ·ç«¯æä¾›æ›´æ”¹çš„å±žæ€§ï¼Œå¯ä»¥çœ‹åšä½œæ˜¯éƒ¨åˆ†æ›´æ–°ï¼‰ï¼Œä½¿ç”¨çš„æ¯”è¾ƒå°‘ï¼Œè¿™é‡Œå°±ä¸ä¸¾ä¾‹å­äº†ã€‚&lt;/li>
&lt;/ul>
&lt;h4 id="31-get-è¯·æ±‚">3.1. GET è¯·æ±‚&lt;/h4>
&lt;p>&lt;code>@GetMapping(&amp;quot;users&amp;quot;)&lt;/code> ç­‰ä»·äºŽ&lt;code>@RequestMapping(value=&amp;quot;/users&amp;quot;,method=RequestMethod.GET)&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="nd">@GetMapping&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;/users&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="n">ResponseEntity&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">List&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">User&lt;/span>&lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="nf">getAllUsers&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="n">userRepository&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">findAll&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="32-post-è¯·æ±‚">3.2. POST è¯·æ±‚&lt;/h4>
&lt;p>&lt;code>@PostMapping(&amp;quot;users&amp;quot;)&lt;/code> ç­‰ä»·äºŽ&lt;code>@RequestMapping(value=&amp;quot;/users&amp;quot;,method=RequestMethod.POST)&lt;/code>&lt;/p>
&lt;p>å…³äºŽ&lt;code>@RequestBody&lt;/code>æ³¨è§£çš„ä½¿ç”¨ï¼Œåœ¨ä¸‹é¢çš„â€œå‰åŽç«¯ä¼ å€¼â€è¿™å—ä¼šè®²åˆ°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="nd">@PostMapping&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;/users&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="n">ResponseEntity&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">User&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="nf">createUser&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="nd">@Valid&lt;/span> &lt;span class="nd">@RequestBody&lt;/span> &lt;span class="n">UserCreateRequest&lt;/span> &lt;span class="n">userCreateRequest&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="n">userRespository&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">save&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">user&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="33-put-è¯·æ±‚">3.3. PUT è¯·æ±‚&lt;/h4>
&lt;p>&lt;code>@PutMapping(&amp;quot;/users/{userId}&amp;quot;)&lt;/code> ç­‰ä»·äºŽ&lt;code>@RequestMapping(value=&amp;quot;/users/{userId}&amp;quot;,method=RequestMethod.PUT)&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="nd">@PutMapping&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;/users/{userId}&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="n">ResponseEntity&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">User&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="nf">updateUser&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="nd">@PathVariable&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">value&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;userId&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="n">Long&lt;/span> &lt;span class="n">userId&lt;/span>&lt;span class="o">,&lt;/span>
&lt;span class="nd">@Valid&lt;/span> &lt;span class="nd">@RequestBody&lt;/span> &lt;span class="n">UserUpdateRequest&lt;/span> &lt;span class="n">userUpdateRequest&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="o">......&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="34-delete-è¯·æ±‚">3.4. &lt;strong>DELETE è¯·æ±‚&lt;/strong>&lt;/h4>
&lt;p>&lt;code>@DeleteMapping(&amp;quot;/users/{userId}&amp;quot;)&lt;/code>ç­‰ä»·äºŽ&lt;code>@RequestMapping(value=&amp;quot;/users/{userId}&amp;quot;,method=RequestMethod.DELETE)&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="nd">@DeleteMapping&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;/users/{userId}&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="n">ResponseEntity&lt;/span> &lt;span class="nf">deleteUser&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="nd">@PathVariable&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">value&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;userId&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="n">Long&lt;/span> &lt;span class="n">userId&lt;/span>&lt;span class="o">){&lt;/span>
&lt;span class="o">......&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="35-patch-è¯·æ±‚">3.5. &lt;strong>PATCH è¯·æ±‚&lt;/strong>&lt;/h4>
&lt;p>ä¸€èˆ¬å®žé™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬éƒ½æ˜¯ PUT ä¸å¤Ÿç”¨äº†ä¹‹åŽæ‰ç”¨ PATCH è¯·æ±‚åŽ»æ›´æ–°æ•°æ®ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java"> &lt;span class="nd">@PatchMapping&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;/profile&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="n">ResponseEntity&lt;/span> &lt;span class="nf">updateStudent&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="nd">@RequestBody&lt;/span> &lt;span class="n">StudentUpdateRequest&lt;/span> &lt;span class="n">studentUpdateRequest&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">studentRepository&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">updateDetail&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">studentUpdateRequest&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="n">ResponseEntity&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">ok&lt;/span>&lt;span class="o">().&lt;/span>&lt;span class="na">build&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="4-å‰åŽç«¯ä¼ å€¼">4. å‰åŽç«¯ä¼ å€¼&lt;/h3>
&lt;p>&lt;strong>æŽŒæ¡å‰åŽç«¯ä¼ å€¼çš„æ­£ç¡®å§¿åŠ¿ï¼Œæ˜¯ä½ å¼€å§‹ CRUD çš„ç¬¬ä¸€æ­¥ï¼&lt;/strong>&lt;/p>
&lt;h4 id="41-pathvariable-å’Œ-requestparam">4.1. &lt;code>@PathVariable&lt;/code> å’Œ &lt;code>@RequestParam&lt;/code>&lt;/h4>
&lt;p>&lt;code>@PathVariable&lt;/code>ç”¨äºŽèŽ·å–è·¯å¾„å‚æ•°ï¼Œ&lt;code>@RequestParam&lt;/code>ç”¨äºŽèŽ·å–æŸ¥è¯¢å‚æ•°ã€‚&lt;/p>
&lt;p>ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="nd">@GetMapping&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;/klasses/{klassId}/teachers&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="n">List&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Teacher&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="nf">getKlassRelatedTeachers&lt;/span>&lt;span class="o">(&lt;/span>
&lt;span class="nd">@PathVariable&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;klassId&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="n">Long&lt;/span> &lt;span class="n">klassId&lt;/span>&lt;span class="o">,&lt;/span>
&lt;span class="nd">@RequestParam&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">value&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">required&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">type&lt;/span> &lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="o">...&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æžœæˆ‘ä»¬è¯·æ±‚çš„ url æ˜¯ï¼š&lt;code>/klasses/{123456}/teachers?type=web&lt;/code>&lt;/p>
&lt;p>é‚£ä¹ˆæˆ‘ä»¬æœåŠ¡èŽ·å–åˆ°çš„æ•°æ®å°±æ˜¯ï¼š&lt;code>klassId=123456,type=web&lt;/code>ã€‚&lt;/p>
&lt;h4 id="42-requestbody">4.2. &lt;code>@RequestBody&lt;/code>&lt;/h4>
&lt;p>ç”¨äºŽè¯»å– Request è¯·æ±‚ï¼ˆå¯èƒ½æ˜¯ POST,PUT,DELETE,GET è¯·æ±‚ï¼‰çš„ body éƒ¨åˆ†å¹¶ä¸”&lt;strong>Content-Type ä¸º application/json&lt;/strong> æ ¼å¼çš„æ•°æ®ï¼ŒæŽ¥æ”¶åˆ°æ•°æ®ä¹‹åŽä¼šè‡ªåŠ¨å°†æ•°æ®ç»‘å®šåˆ° Java å¯¹è±¡ä¸ŠåŽ»ã€‚ç³»ç»Ÿä¼šä½¿ç”¨&lt;code>HttpMessageConverter&lt;/code>æˆ–è€…è‡ªå®šä¹‰çš„&lt;code>HttpMessageConverter&lt;/code>å°†è¯·æ±‚çš„ body ä¸­çš„ json å­—ç¬¦ä¸²è½¬æ¢ä¸º java å¯¹è±¡ã€‚&lt;/p>
&lt;p>æˆ‘ç”¨ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥ç»™æ¼”ç¤ºä¸€ä¸‹åŸºæœ¬ä½¿ç”¨ï¼&lt;/p>
&lt;p>æˆ‘ä»¬æœ‰ä¸€ä¸ªæ³¨å†Œçš„æŽ¥å£ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="nd">@PostMapping&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;/sign-up&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="n">ResponseEntity&lt;/span> &lt;span class="nf">signUp&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="nd">@RequestBody&lt;/span> &lt;span class="nd">@Valid&lt;/span> &lt;span class="n">UserRegisterRequest&lt;/span> &lt;span class="n">userRegisterRequest&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">userService&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">save&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">userRegisterRequest&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="n">ResponseEntity&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">ok&lt;/span>&lt;span class="o">().&lt;/span>&lt;span class="na">build&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>UserRegisterRequest&lt;/code>å¯¹è±¡ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="nd">@Data&lt;/span>
&lt;span class="nd">@AllArgsConstructor&lt;/span>
&lt;span class="nd">@NoArgsConstructor&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kd">class&lt;/span> &lt;span class="nc">UserRegisterRequest&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="nd">@NotBlank&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">userName&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="nd">@NotBlank&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">password&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="nd">@FullName&lt;/span>
&lt;span class="nd">@NotBlank&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">fullName&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ‘ä»¬å‘é€ post è¯·æ±‚åˆ°è¿™ä¸ªæŽ¥å£ï¼Œå¹¶ä¸” body æºå¸¦ JSON æ•°æ®ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="p">{&lt;/span>&lt;span class="nt">&amp;#34;userName&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s2">&amp;#34;coder&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nt">&amp;#34;fullName&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s2">&amp;#34;shuangkou&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nt">&amp;#34;password&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s2">&amp;#34;123456&amp;#34;&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™æ ·æˆ‘ä»¬çš„åŽç«¯å°±å¯ä»¥ç›´æŽ¥æŠŠ json æ ¼å¼çš„æ•°æ®æ˜ å°„åˆ°æˆ‘ä»¬çš„ &lt;code>UserRegisterRequest&lt;/code> ç±»ä¸Šã€‚&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/20200424113400.png" alt="">&lt;/p>
&lt;p>ðŸ‘‰ éœ€è¦æ³¨æ„çš„æ˜¯ï¼š&lt;strong>ä¸€ä¸ªè¯·æ±‚æ–¹æ³•åªå¯ä»¥æœ‰ä¸€ä¸ª&lt;code>@RequestBody&lt;/code>ï¼Œä½†æ˜¯å¯ä»¥æœ‰å¤šä¸ª&lt;code>@RequestParam&lt;/code>å’Œ&lt;code>@PathVariable&lt;/code>&lt;/strong>ã€‚ å¦‚æžœä½ çš„æ–¹æ³•å¿…é¡»è¦ç”¨ä¸¤ä¸ª &lt;code>@RequestBody&lt;/code>æ¥æŽ¥å—æ•°æ®çš„è¯ï¼Œå¤§æ¦‚çŽ‡æ˜¯ä½ çš„æ•°æ®åº“è®¾è®¡æˆ–è€…ç³»ç»Ÿè®¾è®¡å‡ºé—®é¢˜äº†ï¼&lt;/p>
&lt;h3 id="5-è¯»å–é…ç½®ä¿¡æ¯">5. è¯»å–é…ç½®ä¿¡æ¯&lt;/h3>
&lt;p>&lt;strong>å¾ˆå¤šæ—¶å€™æˆ‘ä»¬éœ€è¦å°†ä¸€äº›å¸¸ç”¨çš„é…ç½®ä¿¡æ¯æ¯”å¦‚é˜¿é‡Œäº‘ ossã€å‘é€çŸ­ä¿¡ã€å¾®ä¿¡è®¤è¯çš„ç›¸å…³é…ç½®ä¿¡æ¯ç­‰ç­‰æ”¾åˆ°é…ç½®æ–‡ä»¶ä¸­ã€‚&lt;/strong>&lt;/p>
&lt;p>&lt;strong>ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ Spring ä¸ºæˆ‘ä»¬æä¾›äº†å“ªäº›æ–¹å¼å¸®åŠ©æˆ‘ä»¬ä»Žé…ç½®æ–‡ä»¶ä¸­è¯»å–è¿™äº›é…ç½®ä¿¡æ¯ã€‚&lt;/strong>&lt;/p>
&lt;p>æˆ‘ä»¬çš„æ•°æ®æº&lt;code>application.yml&lt;/code>å†…å®¹å¦‚ä¸‹ï¼šï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="k">wuhan2020&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>2020å¹´åˆæ­¦æ±‰çˆ†å‘äº†æ–°åž‹å† çŠ¶ç—…æ¯’ï¼Œç–«æƒ…ä¸¥é‡ï¼Œä½†æ˜¯ï¼Œæˆ‘ç›¸ä¿¡ä¸€åˆ‡éƒ½ä¼šè¿‡åŽ»ï¼æ­¦æ±‰åŠ æ²¹ï¼ä¸­å›½åŠ æ²¹ï¼&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>my-profile&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>Guideå“¥&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">email&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>koushuangbwcx@&lt;span class="m">163.&lt;/span>com&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>library&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">location&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>æ¹–åŒ—æ­¦æ±‰åŠ æ²¹ä¸­å›½åŠ æ²¹&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>books&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="k">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>å¤©æ‰åŸºæœ¬æ³•&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">description&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>äºŒåäºŒå²çš„æž—æœå¤•åœ¨çˆ¶äº²ç¡®è¯Šé˜¿å°”èŒ¨æµ·é»˜ç—…è¿™å¤©ï¼Œå¾—çŸ¥è‡ªå·±æš—æ‹å¤šå¹´çš„æ ¡å›­ç”·ç¥žè£´ä¹‹å³å°†å‡ºå›½æ·±é€ çš„æ¶ˆæ¯â€”â€”å¯¹æ–¹è€ƒå–çš„å­¦æ ¡ï¼Œæ°æ˜¯çˆ¶äº²å½“å¹´ä¸ºå¥¹æ”¾å¼ƒçš„é‚£æ‰€ã€‚&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="k">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>æ—¶é—´çš„ç§©åº&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">description&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>ä¸ºä»€ä¹ˆæˆ‘ä»¬è®°å¾—è¿‡åŽ»ï¼Œè€Œéžæœªæ¥ï¼Ÿæ—¶é—´â€œæµé€â€æ„å‘³ç€ä»€ä¹ˆï¼Ÿæ˜¯æˆ‘ä»¬å­˜åœ¨äºŽæ—¶é—´ä¹‹å†…ï¼Œè¿˜æ˜¯æ—¶é—´å­˜åœ¨äºŽæˆ‘ä»¬ä¹‹ä¸­ï¼Ÿå¡æ´›Â·ç½—éŸ¦åˆ©ç”¨è¯—æ„çš„æ–‡å­—ï¼Œé‚€è¯·æˆ‘ä»¬æ€è€ƒè¿™ä¸€äº˜å¤éš¾é¢˜â€”â€”æ—¶é—´çš„æœ¬è´¨ã€‚&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="k">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>äº†ä¸èµ·çš„æˆ‘&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">description&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>å¦‚ä½•å…»æˆä¸€ä¸ªæ–°ä¹ æƒ¯ï¼Ÿå¦‚ä½•è®©å¿ƒæ™ºå˜å¾—æ›´æˆç†Ÿï¼Ÿå¦‚ä½•æ‹¥æœ‰é«˜è´¨é‡çš„å…³ç³»ï¼Ÿ&lt;span class="w"> &lt;/span>å¦‚ä½•èµ°å‡ºäººç”Ÿçš„è‰°éš¾æ—¶åˆ»ï¼Ÿ&lt;span class="w">
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="51-valueå¸¸ç”¨">5.1. &lt;code>@value&lt;/code>(å¸¸ç”¨)&lt;/h4>
&lt;p>ä½¿ç”¨ &lt;code>@Value(&amp;quot;${property}&amp;quot;)&lt;/code> è¯»å–æ¯”è¾ƒç®€å•çš„é…ç½®ä¿¡æ¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="nd">@Value&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;${wuhan2020}&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="n">String&lt;/span> &lt;span class="n">wuhan2020&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="52-configurationpropertieså¸¸ç”¨">5.2. &lt;code>@ConfigurationProperties&lt;/code>(å¸¸ç”¨)&lt;/h4>
&lt;p>é€šè¿‡&lt;code>@ConfigurationProperties&lt;/code>è¯»å–é…ç½®ä¿¡æ¯å¹¶ä¸Ž bean ç»‘å®šã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="nd">@Component&lt;/span>
&lt;span class="nd">@ConfigurationProperties&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">prefix&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;library&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="kd">class&lt;/span> &lt;span class="nc">LibraryProperties&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="nd">@NotEmpty&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">location&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">List&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Book&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">books&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="nd">@Setter&lt;/span>
&lt;span class="nd">@Getter&lt;/span>
&lt;span class="nd">@ToString&lt;/span>
&lt;span class="kd">static&lt;/span> &lt;span class="kd">class&lt;/span> &lt;span class="nc">Book&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">String&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="n">String&lt;/span> &lt;span class="n">description&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="n">çœç•¥getter&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">setter&lt;/span>
&lt;span class="o">......&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ å¯ä»¥åƒä½¿ç”¨æ™®é€šçš„ Spring bean ä¸€æ ·ï¼Œå°†å…¶æ³¨å…¥åˆ°ç±»ä¸­ä½¿ç”¨ã€‚&lt;/p>
&lt;h4 id="53-propertysourceä¸å¸¸ç”¨">5.3. &lt;code>PropertySource&lt;/code>ï¼ˆä¸å¸¸ç”¨ï¼‰&lt;/h4>
&lt;p>&lt;code>@PropertySource&lt;/code>è¯»å–æŒ‡å®š properties æ–‡ä»¶&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="nd">@Component&lt;/span>
&lt;span class="nd">@PropertySource&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;classpath:website.properties&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="kd">class&lt;/span> &lt;span class="nc">WebSite&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="nd">@Value&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;${url}&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">url&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="n">çœç•¥getter&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">setter&lt;/span>
&lt;span class="o">......&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ›´å¤šå†…å®¹è¯·æŸ¥çœ‹æˆ‘çš„è¿™ç¯‡æ–‡ç« ï¼šã€Š&lt;a href="https://mp.weixin.qq.com/s?__biz=Mzg2OTA0Njk0OA==&amp;amp;mid=2247486181&amp;amp;idx=2&amp;amp;sn=10db0ae64ef501f96a5b0dbc4bd78786&amp;amp;chksm=cea2452ef9d5cc384678e456427328600971180a77e40c13936b19369672ca3e342c26e92b50&amp;amp;token=816772476&amp;amp;lang=zh_CN#rd">10 åˆ†é’Ÿæžå®š SpringBoot å¦‚ä½•ä¼˜é›…è¯»å–é…ç½®æ–‡ä»¶ï¼Ÿ&lt;/a>ã€‹ ã€‚&lt;/p>
&lt;h3 id="6-å‚æ•°æ ¡éªŒ">6. å‚æ•°æ ¡éªŒ&lt;/h3>
&lt;p>&lt;strong>æ•°æ®çš„æ ¡éªŒçš„é‡è¦æ€§å°±ä¸ç”¨è¯´äº†ï¼Œå³ä½¿åœ¨å‰ç«¯å¯¹æ•°æ®è¿›è¡Œæ ¡éªŒçš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è¿˜æ˜¯è¦å¯¹ä¼ å…¥åŽç«¯çš„æ•°æ®å†è¿›è¡Œä¸€éæ ¡éªŒï¼Œé¿å…ç”¨æˆ·ç»•è¿‡æµè§ˆå™¨ç›´æŽ¥é€šè¿‡ä¸€äº› HTTP å·¥å…·ç›´æŽ¥å‘åŽç«¯è¯·æ±‚ä¸€äº›è¿æ³•æ•°æ®ã€‚&lt;/strong>&lt;/p>
&lt;p>&lt;strong>JSR(Java Specification Requestsï¼‰&lt;/strong> æ˜¯ä¸€å¥— JavaBean å‚æ•°æ ¡éªŒçš„æ ‡å‡†ï¼Œå®ƒå®šä¹‰äº†å¾ˆå¤šå¸¸ç”¨çš„æ ¡éªŒæ³¨è§£ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æŽ¥å°†è¿™äº›æ³¨è§£åŠ åœ¨æˆ‘ä»¬ JavaBean çš„å±žæ€§ä¸Šé¢ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨éœ€è¦æ ¡éªŒçš„æ—¶å€™è¿›è¡Œæ ¡éªŒäº†ï¼Œéžå¸¸æ–¹ä¾¿ï¼&lt;/p>
&lt;p>æ ¡éªŒçš„æ—¶å€™æˆ‘ä»¬å®žé™…ç”¨çš„æ˜¯ &lt;strong>Hibernate Validator&lt;/strong> æ¡†æž¶ã€‚Hibernate Validator æ˜¯ Hibernate å›¢é˜Ÿæœ€åˆçš„æ•°æ®æ ¡éªŒæ¡†æž¶ï¼ŒHibernate Validator 4.x æ˜¯ Bean Validation 1.0ï¼ˆJSR 303ï¼‰çš„å‚è€ƒå®žçŽ°ï¼ŒHibernate Validator 5.x æ˜¯ Bean Validation 1.1ï¼ˆJSR 349ï¼‰çš„å‚è€ƒå®žçŽ°ï¼Œç›®å‰æœ€æ–°ç‰ˆçš„ Hibernate Validator 6.x æ˜¯ Bean Validation 2.0ï¼ˆJSR 380ï¼‰çš„å‚è€ƒå®žçŽ°ã€‚&lt;/p>
&lt;p>SpringBoot é¡¹ç›®çš„ spring-boot-starter-web ä¾èµ–ä¸­å·²ç»æœ‰ hibernate-validator åŒ…ï¼Œä¸éœ€è¦å¼•ç”¨ç›¸å…³ä¾èµ–ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼ˆé€šè¿‡ idea æ’ä»¶â€”Maven Helper ç”Ÿæˆï¼‰ï¼š&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/20200424113300.png" alt="">&lt;/p>
&lt;p>éž SpringBoot é¡¹ç›®éœ€è¦è‡ªè¡Œå¼•å…¥ç›¸å…³ä¾èµ–åŒ…ï¼Œè¿™é‡Œä¸å¤šåšè®²è§£ï¼Œå…·ä½“å¯ä»¥æŸ¥çœ‹æˆ‘çš„è¿™ç¯‡æ–‡ç« ï¼šã€Š&lt;a href="https://mp.weixin.qq.com/s?__biz=Mzg2OTA0Njk0OA==&amp;amp;mid=2247485783&amp;amp;idx=1&amp;amp;sn=a407f3b75efa17c643407daa7fb2acd6&amp;amp;chksm=cea2469cf9d5cf8afbcd0a8a1c9cc4294d6805b8e01bee6f76bb2884c5bc15478e91459def49&amp;amp;token=292197051&amp;amp;lang=zh_CN#rd">å¦‚ä½•åœ¨ Spring/Spring Boot ä¸­åšå‚æ•°æ ¡éªŒï¼Ÿä½ éœ€è¦äº†è§£çš„éƒ½åœ¨è¿™é‡Œï¼&lt;/a>ã€‹ã€‚&lt;/p>
&lt;p>ðŸ‘‰ éœ€è¦æ³¨æ„çš„æ˜¯ï¼š &lt;strong>æ‰€æœ‰çš„æ³¨è§£ï¼ŒæŽ¨èä½¿ç”¨ JSR æ³¨è§£ï¼Œå³&lt;code>javax.validation.constraints&lt;/code>ï¼Œè€Œä¸æ˜¯&lt;code>org.hibernate.validator.constraints&lt;/code>&lt;/strong>&lt;/p>
&lt;h4 id="61-ä¸€äº›å¸¸ç”¨çš„å­—æ®µéªŒè¯çš„æ³¨è§£">6.1. ä¸€äº›å¸¸ç”¨çš„å­—æ®µéªŒè¯çš„æ³¨è§£&lt;/h4>
&lt;ul>
&lt;li>&lt;code>@NotEmpty&lt;/code> è¢«æ³¨é‡Šçš„å­—ç¬¦ä¸²çš„ä¸èƒ½ä¸º null ä¹Ÿä¸èƒ½ä¸ºç©º&lt;/li>
&lt;li>&lt;code>@NotBlank&lt;/code> è¢«æ³¨é‡Šçš„å­—ç¬¦ä¸²éž nullï¼Œå¹¶ä¸”å¿…é¡»åŒ…å«ä¸€ä¸ªéžç©ºç™½å­—ç¬¦&lt;/li>
&lt;li>&lt;code>@Null&lt;/code> è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»ä¸º null&lt;/li>
&lt;li>&lt;code>@NotNull&lt;/code> è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»ä¸ä¸º null&lt;/li>
&lt;li>&lt;code>@AssertTrue&lt;/code> è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»ä¸º true&lt;/li>
&lt;li>&lt;code>@AssertFalse&lt;/code> è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»ä¸º false&lt;/li>
&lt;li>&lt;code>@Pattern(regex=,flag=)&lt;/code>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»ç¬¦åˆæŒ‡å®šçš„æ­£åˆ™è¡¨è¾¾å¼&lt;/li>
&lt;li>&lt;code>@Email&lt;/code> è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ Email æ ¼å¼ã€‚&lt;/li>
&lt;li>&lt;code>@Min(value)&lt;/code>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå…¶å€¼å¿…é¡»å¤§äºŽç­‰äºŽæŒ‡å®šçš„æœ€å°å€¼&lt;/li>
&lt;li>&lt;code>@Max(value)&lt;/code>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå…¶å€¼å¿…é¡»å°äºŽç­‰äºŽæŒ‡å®šçš„æœ€å¤§å€¼&lt;/li>
&lt;li>&lt;code>@DecimalMin(value)&lt;/code>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå…¶å€¼å¿…é¡»å¤§äºŽç­‰äºŽæŒ‡å®šçš„æœ€å°å€¼&lt;/li>
&lt;li>&lt;code>@DecimalMax(value)&lt;/code> è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå…¶å€¼å¿…é¡»å°äºŽç­‰äºŽæŒ‡å®šçš„æœ€å¤§å€¼&lt;/li>
&lt;li>&lt;code>@Size(max=, min=)&lt;/code>è¢«æ³¨é‡Šçš„å…ƒç´ çš„å¤§å°å¿…é¡»åœ¨æŒ‡å®šçš„èŒƒå›´å†…&lt;/li>
&lt;li>&lt;code>@Digits (integer, fraction)&lt;/code>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå…¶å€¼å¿…é¡»åœ¨å¯æŽ¥å—çš„èŒƒå›´å†…&lt;/li>
&lt;li>&lt;code>@Past&lt;/code>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªè¿‡åŽ»çš„æ—¥æœŸ&lt;/li>
&lt;li>&lt;code>@Future&lt;/code> è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªå°†æ¥çš„æ—¥æœŸ&lt;/li>
&lt;li>&amp;hellip;&amp;hellip;&lt;/li>
&lt;/ul>
&lt;h4 id="62-éªŒè¯è¯·æ±‚ä½“requestbody">6.2. éªŒè¯è¯·æ±‚ä½“(RequestBody)&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="nd">@Data&lt;/span>
&lt;span class="nd">@AllArgsConstructor&lt;/span>
&lt;span class="nd">@NoArgsConstructor&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kd">class&lt;/span> &lt;span class="nc">Person&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="nd">@NotNull&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">message&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;classId ä¸èƒ½ä¸ºç©º&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">classId&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="nd">@Size&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">max&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">33&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="nd">@NotNull&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">message&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;name ä¸èƒ½ä¸ºç©º&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="nd">@Pattern&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">regexp&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;((^Man$|^Woman$|^UGM$))&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">message&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;sex å€¼ä¸åœ¨å¯é€‰èŒƒå›´&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="nd">@NotNull&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">message&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;sex ä¸èƒ½ä¸ºç©º&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">sex&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="nd">@Email&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">message&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;email æ ¼å¼ä¸æ­£ç¡®&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="nd">@NotNull&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">message&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;email ä¸èƒ½ä¸ºç©º&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">email&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ‘ä»¬åœ¨éœ€è¦éªŒè¯çš„å‚æ•°ä¸ŠåŠ ä¸Šäº†&lt;code>@Valid&lt;/code>æ³¨è§£ï¼Œå¦‚æžœéªŒè¯å¤±è´¥ï¼Œå®ƒå°†æŠ›å‡º&lt;code>MethodArgumentNotValidException&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="nd">@RestController&lt;/span>
&lt;span class="nd">@RequestMapping&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;/api&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kd">class&lt;/span> &lt;span class="nc">PersonController&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="nd">@PostMapping&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;/person&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="n">ResponseEntity&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Person&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="nf">getPerson&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="nd">@RequestBody&lt;/span> &lt;span class="nd">@Valid&lt;/span> &lt;span class="n">Person&lt;/span> &lt;span class="n">person&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="n">ResponseEntity&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">ok&lt;/span>&lt;span class="o">().&lt;/span>&lt;span class="na">body&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">person&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="63-éªŒè¯è¯·æ±‚å‚æ•°path-variables-å’Œ-request-parameters">6.3. éªŒè¯è¯·æ±‚å‚æ•°(Path Variables å’Œ Request Parameters)&lt;/h4>
&lt;p>&lt;strong>ä¸€å®šä¸€å®šä¸è¦å¿˜è®°åœ¨ç±»ä¸ŠåŠ ä¸Š &lt;code>Validated&lt;/code> æ³¨è§£äº†ï¼Œè¿™ä¸ªå‚æ•°å¯ä»¥å‘Šè¯‰ Spring åŽ»æ ¡éªŒæ–¹æ³•å‚æ•°ã€‚&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="nd">@RestController&lt;/span>
&lt;span class="nd">@RequestMapping&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;/api&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="nd">@Validated&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kd">class&lt;/span> &lt;span class="nc">PersonController&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="nd">@GetMapping&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;/person/{id}&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="n">ResponseEntity&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Integer&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="nf">getPersonByID&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="nd">@Valid&lt;/span> &lt;span class="nd">@PathVariable&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="nd">@Max&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">value&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">5&lt;/span>&lt;span class="o">,&lt;/span>&lt;span class="n">message&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;è¶…è¿‡ id çš„èŒƒå›´äº†&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="n">Integer&lt;/span> &lt;span class="n">id&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="n">ResponseEntity&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">ok&lt;/span>&lt;span class="o">().&lt;/span>&lt;span class="na">body&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ›´å¤šå…³äºŽå¦‚ä½•åœ¨ Spring é¡¹ç›®ä¸­è¿›è¡Œå‚æ•°æ ¡éªŒçš„å†…å®¹ï¼Œè¯·çœ‹ã€Š&lt;a href="https://mp.weixin.qq.com/s?__biz=Mzg2OTA0Njk0OA==&amp;amp;mid=2247485783&amp;amp;idx=1&amp;amp;sn=a407f3b75efa17c643407daa7fb2acd6&amp;amp;chksm=cea2469cf9d5cf8afbcd0a8a1c9cc4294d6805b8e01bee6f76bb2884c5bc15478e91459def49&amp;amp;token=292197051&amp;amp;lang=zh_CN#rd">å¦‚ä½•åœ¨ Spring/Spring Boot ä¸­åšå‚æ•°æ ¡éªŒï¼Ÿä½ éœ€è¦äº†è§£çš„éƒ½åœ¨è¿™é‡Œï¼&lt;/a>ã€‹è¿™ç¯‡æ–‡ç« ã€‚&lt;/p>
&lt;h3 id="7-å…¨å±€å¤„ç†-controller-å±‚å¼‚å¸¸">7. å…¨å±€å¤„ç† Controller å±‚å¼‚å¸¸&lt;/h3>
&lt;p>ä»‹ç»ä¸€ä¸‹æˆ‘ä»¬ Spring é¡¹ç›®å¿…å¤‡çš„å…¨å±€å¤„ç† Controller å±‚å¼‚å¸¸ã€‚&lt;/p>
&lt;p>&lt;strong>ç›¸å…³æ³¨è§£ï¼š&lt;/strong>&lt;/p>
&lt;ol>
&lt;li>&lt;code>@ControllerAdvice&lt;/code> :æ³¨è§£å®šä¹‰å…¨å±€å¼‚å¸¸å¤„ç†ç±»&lt;/li>
&lt;li>&lt;code>@ExceptionHandler&lt;/code> :æ³¨è§£å£°æ˜Žå¼‚å¸¸å¤„ç†æ–¹æ³•&lt;/li>
&lt;/ol>
&lt;p>å¦‚ä½•ä½¿ç”¨å‘¢ï¼Ÿæ‹¿æˆ‘ä»¬åœ¨ç¬¬ 5 èŠ‚å‚æ•°æ ¡éªŒè¿™å—æ¥ä¸¾ä¾‹å­ã€‚å¦‚æžœæ–¹æ³•å‚æ•°ä¸å¯¹çš„è¯å°±ä¼šæŠ›å‡º&lt;code>MethodArgumentNotValidException&lt;/code>ï¼Œæˆ‘ä»¬æ¥å¤„ç†è¿™ä¸ªå¼‚å¸¸ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="nd">@ControllerAdvice&lt;/span>
&lt;span class="nd">@ResponseBody&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kd">class&lt;/span> &lt;span class="nc">GlobalExceptionHandler&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="cm">/**
&lt;/span>&lt;span class="cm"> * è¯·æ±‚å‚æ•°å¼‚å¸¸å¤„ç†
&lt;/span>&lt;span class="cm"> */&lt;/span>
&lt;span class="nd">@ExceptionHandler&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">MethodArgumentNotValidException&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="n">ResponseEntity&lt;/span>&lt;span class="o">&amp;lt;?&amp;gt;&lt;/span> &lt;span class="n">handleMethodArgumentNotValidException&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">MethodArgumentNotValidException&lt;/span> &lt;span class="n">ex&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">HttpServletRequest&lt;/span> &lt;span class="n">request&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="o">......&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ›´å¤šå…³äºŽ Spring Boot å¼‚å¸¸å¤„ç†çš„å†…å®¹ï¼Œè¯·çœ‹æˆ‘çš„è¿™ä¸¤ç¯‡æ–‡ç« ï¼š&lt;/p>
&lt;ol>
&lt;li>&lt;a href="https://mp.weixin.qq.com/s?__biz=Mzg2OTA0Njk0OA==&amp;amp;mid=2247485568&amp;amp;idx=2&amp;amp;sn=c5ba880fd0c5d82e39531fa42cb036ac&amp;amp;chksm=cea2474bf9d5ce5dcbc6a5f6580198fdce4bc92ef577579183a729cb5d1430e4994720d59b34&amp;amp;token=2133161636&amp;amp;lang=zh_CN#rd">SpringBoot å¤„ç†å¼‚å¸¸çš„å‡ ç§å¸¸è§å§¿åŠ¿&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://mp.weixin.qq.com/s?__biz=Mzg2OTA0Njk0OA==&amp;amp;mid=2247486379&amp;amp;idx=2&amp;amp;sn=48c29ae65b3ed874749f0803f0e4d90e&amp;amp;chksm=cea24460f9d5cd769ed53ad7e17c97a7963a89f5350e370be633db0ae8d783c3a3dbd58c70f8&amp;amp;token=1054498516&amp;amp;lang=zh_CN#rd">ä½¿ç”¨æžšä¸¾ç®€å•å°è£…ä¸€ä¸ªä¼˜é›…çš„ Spring Boot å…¨å±€å¼‚å¸¸å¤„ç†ï¼&lt;/a>&lt;/li>
&lt;/ol>
&lt;h3 id="8-jpa-ç›¸å…³">8. JPA ç›¸å…³&lt;/h3>
&lt;h4 id="81-åˆ›å»ºè¡¨">8.1. åˆ›å»ºè¡¨&lt;/h4>
&lt;p>&lt;code>@Entity&lt;/code>å£°æ˜Žä¸€ä¸ªç±»å¯¹åº”ä¸€ä¸ªæ•°æ®åº“å®žä½“ã€‚&lt;/p>
&lt;p>&lt;code>@Table&lt;/code> è®¾ç½®è¡¨æ˜Ž&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="nd">@Entity&lt;/span>
&lt;span class="nd">@Table&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;role&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kd">class&lt;/span> &lt;span class="nc">Role&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="nd">@Id&lt;/span>
&lt;span class="nd">@GeneratedValue&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">strategy&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">GenerationType&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">IDENTITY&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">Long&lt;/span> &lt;span class="n">id&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">description&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="n">çœç•¥getter&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">setter&lt;/span>&lt;span class="o">......&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="82-åˆ›å»ºä¸»é”®">8.2. åˆ›å»ºä¸»é”®&lt;/h4>
&lt;p>&lt;code>@Id&lt;/code> ï¼šå£°æ˜Žä¸€ä¸ªå­—æ®µä¸ºä¸»é”®ã€‚&lt;/p>
&lt;p>ä½¿ç”¨&lt;code>@Id&lt;/code>å£°æ˜Žä¹‹åŽï¼Œæˆ‘ä»¬è¿˜éœ€è¦å®šä¹‰ä¸»é”®çš„ç”Ÿæˆç­–ç•¥ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ &lt;code>@GeneratedValue&lt;/code> æŒ‡å®šä¸»é”®ç”Ÿæˆç­–ç•¥ã€‚&lt;/p>
&lt;p>&lt;strong>1.é€šè¿‡ &lt;code>@GeneratedValue&lt;/code>ç›´æŽ¥ä½¿ç”¨ JPA å†…ç½®æä¾›çš„å››ç§ä¸»é”®ç”Ÿæˆç­–ç•¥æ¥æŒ‡å®šä¸»é”®ç”Ÿæˆç­–ç•¥ã€‚&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="nd">@Id&lt;/span>
&lt;span class="nd">@GeneratedValue&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">strategy&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">GenerationType&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">IDENTITY&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">Long&lt;/span> &lt;span class="n">id&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>JPA ä½¿ç”¨æžšä¸¾å®šä¹‰äº† 4 ä¸­å¸¸è§çš„ä¸»é”®ç”Ÿæˆç­–ç•¥ï¼Œå¦‚ä¸‹ï¼š&lt;/p>
&lt;p>&lt;em>Guide å“¥ï¼šæžšä¸¾æ›¿ä»£å¸¸é‡çš„ä¸€ç§ç”¨æ³•&lt;/em>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="kd">public&lt;/span> &lt;span class="kd">enum&lt;/span> &lt;span class="n">GenerationType&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="cm">/**
&lt;/span>&lt;span class="cm"> * ä½¿ç”¨ä¸€ä¸ªç‰¹å®šçš„æ•°æ®åº“è¡¨æ ¼æ¥ä¿å­˜ä¸»é”®
&lt;/span>&lt;span class="cm"> * æŒä¹…åŒ–å¼•æ“Žé€šè¿‡å…³ç³»æ•°æ®åº“çš„ä¸€å¼ ç‰¹å®šçš„è¡¨æ ¼æ¥ç”Ÿæˆä¸»é”®,
&lt;/span>&lt;span class="cm"> */&lt;/span>
&lt;span class="n">TABLE&lt;/span>&lt;span class="o">,&lt;/span>
&lt;span class="cm">/**
&lt;/span>&lt;span class="cm"> *åœ¨æŸäº›æ•°æ®åº“ä¸­,ä¸æ”¯æŒä¸»é”®è‡ªå¢žé•¿,æ¯”å¦‚Oracleã€PostgreSQLå…¶æä¾›äº†ä¸€ç§å«åš&amp;#34;åºåˆ—(sequence)&amp;#34;çš„æœºåˆ¶ç”Ÿæˆä¸»é”®
&lt;/span>&lt;span class="cm"> */&lt;/span>
&lt;span class="n">SEQUENCE&lt;/span>&lt;span class="o">,&lt;/span>
&lt;span class="cm">/**
&lt;/span>&lt;span class="cm"> * ä¸»é”®è‡ªå¢žé•¿
&lt;/span>&lt;span class="cm"> */&lt;/span>
&lt;span class="n">IDENTITY&lt;/span>&lt;span class="o">,&lt;/span>
&lt;span class="cm">/**
&lt;/span>&lt;span class="cm"> *æŠŠä¸»é”®ç”Ÿæˆç­–ç•¥äº¤ç»™æŒä¹…åŒ–å¼•æ“Ž(persistence engine),
&lt;/span>&lt;span class="cm"> *æŒä¹…åŒ–å¼•æ“Žä¼šæ ¹æ®æ•°æ®åº“åœ¨ä»¥ä¸Šä¸‰ç§ä¸»é”®ç”Ÿæˆ ç­–ç•¥ä¸­é€‰æ‹©å…¶ä¸­ä¸€ç§
&lt;/span>&lt;span class="cm"> */&lt;/span>
&lt;span class="n">AUTO&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>@GeneratedValue&lt;/code>æ³¨è§£é»˜è®¤ä½¿ç”¨çš„ç­–ç•¥æ˜¯&lt;code>GenerationType.AUTO&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="kd">public&lt;/span> &lt;span class="nd">@interface&lt;/span> &lt;span class="n">GeneratedValue&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">GenerationType&lt;/span> &lt;span class="nf">strategy&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="k">default&lt;/span> &lt;span class="n">AUTO&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="n">String&lt;/span> &lt;span class="nf">generator&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="k">default&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸€èˆ¬ä½¿ç”¨ MySQL æ•°æ®åº“çš„è¯ï¼Œä½¿ç”¨&lt;code>GenerationType.IDENTITY&lt;/code>ç­–ç•¥æ¯”è¾ƒæ™®éä¸€ç‚¹ï¼ˆåˆ†å¸ƒå¼ç³»ç»Ÿçš„è¯éœ€è¦å¦å¤–è€ƒè™‘ä½¿ç”¨åˆ†å¸ƒå¼ IDï¼‰ã€‚&lt;/p>
&lt;p>&lt;strong>2.é€šè¿‡ &lt;code>@GenericGenerator&lt;/code>å£°æ˜Žä¸€ä¸ªä¸»é”®ç­–ç•¥ï¼Œç„¶åŽ &lt;code>@GeneratedValue&lt;/code>ä½¿ç”¨è¿™ä¸ªç­–ç•¥&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="nd">@Id&lt;/span>
&lt;span class="nd">@GeneratedValue&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">generator&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;IdentityIdGenerator&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="nd">@GenericGenerator&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;IdentityIdGenerator&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">strategy&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;identity&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">Long&lt;/span> &lt;span class="n">id&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç­‰ä»·äºŽï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="nd">@Id&lt;/span>
&lt;span class="nd">@GeneratedValue&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">strategy&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">GenerationType&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">IDENTITY&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">Long&lt;/span> &lt;span class="n">id&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>jpa æä¾›çš„ä¸»é”®ç”Ÿæˆç­–ç•¥æœ‰å¦‚ä¸‹å‡ ç§ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="kd">public&lt;/span> &lt;span class="kd">class&lt;/span> &lt;span class="nc">DefaultIdentifierGeneratorFactory&lt;/span>
&lt;span class="kd">implements&lt;/span> &lt;span class="n">MutableIdentifierGeneratorFactory&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">Serializable&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">ServiceRegistryAwareService&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="nd">@SuppressWarnings&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;deprecation&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="nf">DefaultIdentifierGeneratorFactory&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">register&lt;/span>&lt;span class="o">(&lt;/span> &lt;span class="s">&amp;#34;uuid2&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">UUIDGenerator&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">class&lt;/span> &lt;span class="o">);&lt;/span>
&lt;span class="n">register&lt;/span>&lt;span class="o">(&lt;/span> &lt;span class="s">&amp;#34;guid&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">GUIDGenerator&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">class&lt;/span> &lt;span class="o">);&lt;/span> &lt;span class="c1">// can be done with UUIDGenerator + strategy
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="n">register&lt;/span>&lt;span class="o">(&lt;/span> &lt;span class="s">&amp;#34;uuid&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">UUIDHexGenerator&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">class&lt;/span> &lt;span class="o">);&lt;/span> &lt;span class="c1">// &amp;#34;deprecated&amp;#34; for new use
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="n">register&lt;/span>&lt;span class="o">(&lt;/span> &lt;span class="s">&amp;#34;uuid.hex&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">UUIDHexGenerator&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">class&lt;/span> &lt;span class="o">);&lt;/span> &lt;span class="c1">// uuid.hex is deprecated
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="n">register&lt;/span>&lt;span class="o">(&lt;/span> &lt;span class="s">&amp;#34;assigned&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">Assigned&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">class&lt;/span> &lt;span class="o">);&lt;/span>
&lt;span class="n">register&lt;/span>&lt;span class="o">(&lt;/span> &lt;span class="s">&amp;#34;identity&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">IdentityGenerator&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">class&lt;/span> &lt;span class="o">);&lt;/span>
&lt;span class="n">register&lt;/span>&lt;span class="o">(&lt;/span> &lt;span class="s">&amp;#34;select&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">SelectGenerator&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">class&lt;/span> &lt;span class="o">);&lt;/span>
&lt;span class="n">register&lt;/span>&lt;span class="o">(&lt;/span> &lt;span class="s">&amp;#34;sequence&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">SequenceStyleGenerator&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">class&lt;/span> &lt;span class="o">);&lt;/span>
&lt;span class="n">register&lt;/span>&lt;span class="o">(&lt;/span> &lt;span class="s">&amp;#34;seqhilo&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">SequenceHiLoGenerator&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">class&lt;/span> &lt;span class="o">);&lt;/span>
&lt;span class="n">register&lt;/span>&lt;span class="o">(&lt;/span> &lt;span class="s">&amp;#34;increment&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">IncrementGenerator&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">class&lt;/span> &lt;span class="o">);&lt;/span>
&lt;span class="n">register&lt;/span>&lt;span class="o">(&lt;/span> &lt;span class="s">&amp;#34;foreign&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">ForeignGenerator&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">class&lt;/span> &lt;span class="o">);&lt;/span>
&lt;span class="n">register&lt;/span>&lt;span class="o">(&lt;/span> &lt;span class="s">&amp;#34;sequence-identity&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">SequenceIdentityGenerator&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">class&lt;/span> &lt;span class="o">);&lt;/span>
&lt;span class="n">register&lt;/span>&lt;span class="o">(&lt;/span> &lt;span class="s">&amp;#34;enhanced-sequence&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">SequenceStyleGenerator&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">class&lt;/span> &lt;span class="o">);&lt;/span>
&lt;span class="n">register&lt;/span>&lt;span class="o">(&lt;/span> &lt;span class="s">&amp;#34;enhanced-table&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">TableGenerator&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">class&lt;/span> &lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">register&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">String&lt;/span> &lt;span class="n">strategy&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">Class&lt;/span> &lt;span class="n">generatorClass&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">LOG&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">debugf&lt;/span>&lt;span class="o">(&lt;/span> &lt;span class="s">&amp;#34;Registering IdentifierGenerator strategy [%s] -&amp;gt; [%s]&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">strategy&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">generatorClass&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getName&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="o">);&lt;/span>
&lt;span class="kd">final&lt;/span> &lt;span class="n">Class&lt;/span> &lt;span class="n">previous&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">generatorStrategyToClassNameMap&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">put&lt;/span>&lt;span class="o">(&lt;/span> &lt;span class="n">strategy&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">generatorClass&lt;/span> &lt;span class="o">);&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="o">(&lt;/span> &lt;span class="n">previous&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">null&lt;/span> &lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">LOG&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">debugf&lt;/span>&lt;span class="o">(&lt;/span> &lt;span class="s">&amp;#34; - overriding [%s]&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">previous&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getName&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="83-è®¾ç½®å­—æ®µç±»åž‹">8.3. è®¾ç½®å­—æ®µç±»åž‹&lt;/h4>
&lt;p>&lt;code>@Column&lt;/code> å£°æ˜Žå­—æ®µã€‚&lt;/p>
&lt;p>&lt;strong>ç¤ºä¾‹ï¼š&lt;/strong>&lt;/p>
&lt;p>è®¾ç½®å±žæ€§ userName å¯¹åº”çš„æ•°æ®åº“å­—æ®µåä¸º user_nameï¼Œé•¿åº¦ä¸º 32ï¼Œéžç©º&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="nd">@Column&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;user_name&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">nullable&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">length&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">32&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">userName&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è®¾ç½®å­—æ®µç±»åž‹å¹¶ä¸”åŠ é»˜è®¤å€¼ï¼Œè¿™ä¸ªè¿˜æ˜¯æŒºå¸¸ç”¨çš„ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="n">Column&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">columnDefinition&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;tinyint(1) default 1&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">Boolean&lt;/span> &lt;span class="n">enabled&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="84-æŒ‡å®šä¸æŒä¹…åŒ–ç‰¹å®šå­—æ®µ">8.4. æŒ‡å®šä¸æŒä¹…åŒ–ç‰¹å®šå­—æ®µ&lt;/h4>
&lt;p>&lt;code>@Transient&lt;/code> ï¼šå£°æ˜Žä¸éœ€è¦ä¸Žæ•°æ®åº“æ˜ å°„çš„å­—æ®µï¼Œåœ¨ä¿å­˜çš„æ—¶å€™ä¸éœ€è¦ä¿å­˜è¿›æ•°æ®åº“ ã€‚&lt;/p>
&lt;p>å¦‚æžœæˆ‘ä»¬æƒ³è®©&lt;code>secrect&lt;/code> è¿™ä¸ªå­—æ®µä¸è¢«æŒä¹…åŒ–ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code>@Transient&lt;/code>å…³é”®å­—å£°æ˜Žã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="n">Entity&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;USER&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kd">class&lt;/span> &lt;span class="nc">User&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="o">......&lt;/span>
&lt;span class="nd">@Transient&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">secrect&lt;/span>&lt;span class="o">;&lt;/span> &lt;span class="c1">// not persistent because of @Transient
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é™¤äº† &lt;code>@Transient&lt;/code>å…³é”®å­—å£°æ˜Žï¼Œ è¿˜å¯ä»¥é‡‡ç”¨ä¸‹é¢å‡ ç§æ–¹æ³•ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="kd">static&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">secrect&lt;/span>&lt;span class="o">;&lt;/span> &lt;span class="c1">// not persistent because of static
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="kd">final&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">secrect&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="err">â€œ&lt;/span>&lt;span class="n">Satish&lt;/span>&lt;span class="err">â€&lt;/span>&lt;span class="o">;&lt;/span> &lt;span class="c1">// not persistent because of final
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="kd">transient&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">secrect&lt;/span>&lt;span class="o">;&lt;/span> &lt;span class="c1">// not persistent because of transient
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸€èˆ¬ä½¿ç”¨æ³¨è§£çš„æ–¹å¼æ¯”è¾ƒå¤šã€‚&lt;/p>
&lt;h4 id="85-å£°æ˜Žå¤§å­—æ®µ">8.5. å£°æ˜Žå¤§å­—æ®µ&lt;/h4>
&lt;p>&lt;code>@Lob&lt;/code>:å£°æ˜ŽæŸä¸ªå­—æ®µä¸ºå¤§å­—æ®µã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="nd">@Lob&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">content&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ›´è¯¦ç»†çš„å£°æ˜Žï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="nd">@Lob&lt;/span>
&lt;span class="c1">//æŒ‡å®š Lob ç±»åž‹æ•°æ®çš„èŽ·å–ç­–ç•¥ï¼Œ FetchType.EAGER è¡¨ç¤ºéžå»¶è¿Ÿ åŠ è½½ï¼Œè€Œ FetchType. LAZY è¡¨ç¤ºå»¶è¿ŸåŠ è½½ ï¼›
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="nd">@Basic&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">fetch&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">FetchType&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">EAGER&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="c1">//columnDefinition å±žæ€§æŒ‡å®šæ•°æ®è¡¨å¯¹åº”çš„ Lob å­—æ®µç±»åž‹
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="nd">@Column&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;content&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">columnDefinition&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;LONGTEXT NOT NULL&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">content&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="86-åˆ›å»ºæžšä¸¾ç±»åž‹çš„å­—æ®µ">8.6. åˆ›å»ºæžšä¸¾ç±»åž‹çš„å­—æ®µ&lt;/h4>
&lt;p>å¯ä»¥ä½¿ç”¨æžšä¸¾ç±»åž‹çš„å­—æ®µï¼Œä¸è¿‡æžšä¸¾å­—æ®µè¦ç”¨&lt;code>@Enumerated&lt;/code>æ³¨è§£ä¿®é¥°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="kd">public&lt;/span> &lt;span class="kd">enum&lt;/span> &lt;span class="n">Gender&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">MALE&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;ç”·æ€§&amp;#34;&lt;/span>&lt;span class="o">),&lt;/span>
&lt;span class="n">FEMALE&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;å¥³æ€§&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">value&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="n">Gender&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">String&lt;/span> &lt;span class="n">str&lt;/span>&lt;span class="o">){&lt;/span>
&lt;span class="n">value&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">str&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="nd">@Entity&lt;/span>
&lt;span class="nd">@Table&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;role&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kd">class&lt;/span> &lt;span class="nc">Role&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="nd">@Id&lt;/span>
&lt;span class="nd">@GeneratedValue&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">strategy&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">GenerationType&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">IDENTITY&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">Long&lt;/span> &lt;span class="n">id&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">description&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="nd">@Enumerated&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">EnumType&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">STRING&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">Gender&lt;/span> &lt;span class="n">gender&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="n">çœç•¥getter&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">setter&lt;/span>&lt;span class="o">......&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ•°æ®åº“é‡Œé¢å¯¹åº”å­˜å‚¨çš„æ˜¯ MAIL/FEMAILã€‚&lt;/p>
&lt;h4 id="87-å¢žåŠ å®¡è®¡åŠŸèƒ½">8.7. å¢žåŠ å®¡è®¡åŠŸèƒ½&lt;/h4>
&lt;p>åªè¦ç»§æ‰¿äº† &lt;code>AbstractAuditBase&lt;/code>çš„ç±»éƒ½ä¼šé»˜è®¤åŠ ä¸Šä¸‹é¢å››ä¸ªå­—æ®µã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="nd">@Data&lt;/span>
&lt;span class="nd">@AllArgsConstructor&lt;/span>
&lt;span class="nd">@NoArgsConstructor&lt;/span>
&lt;span class="nd">@MappedSuperclass&lt;/span>
&lt;span class="nd">@EntityListeners&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">value&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">AuditingEntityListener&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kd">abstract&lt;/span> &lt;span class="kd">class&lt;/span> &lt;span class="nc">AbstractAuditBase&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="nd">@CreatedDate&lt;/span>
&lt;span class="nd">@Column&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">updatable&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="nd">@JsonIgnore&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">Instant&lt;/span> &lt;span class="n">createdAt&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="nd">@LastModifiedDate&lt;/span>
&lt;span class="nd">@JsonIgnore&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">Instant&lt;/span> &lt;span class="n">updatedAt&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="nd">@CreatedBy&lt;/span>
&lt;span class="nd">@Column&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">updatable&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="nd">@JsonIgnore&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">createdBy&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="nd">@LastModifiedBy&lt;/span>
&lt;span class="nd">@JsonIgnore&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">updatedBy&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ‘ä»¬å¯¹åº”çš„å®¡è®¡åŠŸèƒ½å¯¹åº”åœ°é…ç½®ç±»å¯èƒ½æ˜¯ä¸‹é¢è¿™æ ·çš„ï¼ˆSpring Security é¡¹ç›®ï¼‰:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">
&lt;span class="nd">@Configuration&lt;/span>
&lt;span class="nd">@EnableJpaAuditing&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kd">class&lt;/span> &lt;span class="nc">AuditSecurityConfiguration&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="nd">@Bean&lt;/span>
&lt;span class="n">AuditorAware&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="nf">auditorAware&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="o">()&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="n">Optional&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">ofNullable&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">SecurityContextHolder&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getContext&lt;/span>&lt;span class="o">())&lt;/span>
&lt;span class="o">.&lt;/span>&lt;span class="na">map&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">SecurityContext&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">getAuthentication&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="o">.&lt;/span>&lt;span class="na">filter&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">Authentication&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">isAuthenticated&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="o">.&lt;/span>&lt;span class="na">map&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">Authentication&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">getName&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç®€å•ä»‹ç»ä¸€ä¸‹ä¸Šé¢è®¾è®¡åˆ°çš„ä¸€äº›æ³¨è§£ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>&lt;code>@CreatedDate&lt;/code>: è¡¨ç¤ºè¯¥å­—æ®µä¸ºåˆ›å»ºæ—¶é—´æ—¶é—´å­—æ®µï¼Œåœ¨è¿™ä¸ªå®žä½“è¢« insert çš„æ—¶å€™ï¼Œä¼šè®¾ç½®å€¼&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>@CreatedBy&lt;/code> :è¡¨ç¤ºè¯¥å­—æ®µä¸ºåˆ›å»ºäººï¼Œåœ¨è¿™ä¸ªå®žä½“è¢« insert çš„æ—¶å€™ï¼Œä¼šè®¾ç½®å€¼&lt;/p>
&lt;p>&lt;code>@LastModifiedDate&lt;/code>ã€&lt;code>@LastModifiedBy&lt;/code>åŒç†ã€‚&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>&lt;code>@EnableJpaAuditing&lt;/code>ï¼šå¼€å¯ JPA å®¡è®¡åŠŸèƒ½ã€‚&lt;/p>
&lt;h4 id="88-åˆ é™¤ä¿®æ”¹æ•°æ®">8.8. åˆ é™¤/ä¿®æ”¹æ•°æ®&lt;/h4>
&lt;p>&lt;code>@Modifying&lt;/code> æ³¨è§£æç¤º JPA è¯¥æ“ä½œæ˜¯ä¿®æ”¹æ“ä½œ,æ³¨æ„è¿˜è¦é…åˆ&lt;code>@Transactional&lt;/code>æ³¨è§£ä½¿ç”¨ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="nd">@Repository&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kd">interface&lt;/span> &lt;span class="nc">UserRepository&lt;/span> &lt;span class="kd">extends&lt;/span> &lt;span class="n">JpaRepository&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">User&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">Integer&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="nd">@Modifying&lt;/span>
&lt;span class="nd">@Transactional&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">rollbackFor&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Exception&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="kt">void&lt;/span> &lt;span class="nf">deleteByUserName&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">String&lt;/span> &lt;span class="n">userName&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="89-å…³è”å…³ç³»">8.9. å…³è”å…³ç³»&lt;/h4>
&lt;ul>
&lt;li>&lt;code>@OneToOne&lt;/code> å£°æ˜Žä¸€å¯¹ä¸€å…³ç³»&lt;/li>
&lt;li>&lt;code>@OneToMany&lt;/code> å£°æ˜Žä¸€å¯¹å¤šå…³ç³»&lt;/li>
&lt;li>&lt;code>@ManyToOne&lt;/code>å£°æ˜Žå¤šå¯¹ä¸€å…³ç³»&lt;/li>
&lt;li>&lt;code>MangToMang&lt;/code>å£°æ˜Žå¤šå¯¹å¤šå…³ç³»&lt;/li>
&lt;/ul>
&lt;p>æ›´å¤šå…³äºŽ Spring Boot JPA çš„æ–‡ç« è¯·çœ‹æˆ‘çš„è¿™ç¯‡æ–‡ç« ï¼š&lt;a href="https://mp.weixin.qq.com/s?__biz=Mzg2OTA0Njk0OA==&amp;amp;mid=2247485689&amp;amp;idx=1&amp;amp;sn=061b32c2222869932be5631fb0bb5260&amp;amp;chksm=cea24732f9d5ce24a356fb3675170e7843addbfcc79ee267cfdb45c83fc7e90babf0f20d22e1&amp;amp;token=292197051&amp;amp;lang=zh_CN#rd">ä¸€æ–‡æžæ‡‚å¦‚ä½•åœ¨ Spring Boot æ­£ç¡®ä¸­ä½¿ç”¨ JPA&lt;/a> ã€‚&lt;/p>
&lt;h3 id="9-äº‹åŠ¡-transactional">9. äº‹åŠ¡ &lt;code>@Transactional&lt;/code>&lt;/h3>
&lt;p>åœ¨è¦å¼€å¯äº‹åŠ¡çš„æ–¹æ³•ä¸Šä½¿ç”¨&lt;code>@Transactional&lt;/code>æ³¨è§£å³å¯!&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="nd">@Transactional&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">rollbackFor&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Exception&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">save&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="o">......&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ‘ä»¬çŸ¥é“ Exception åˆ†ä¸ºè¿è¡Œæ—¶å¼‚å¸¸ RuntimeException å’Œéžè¿è¡Œæ—¶å¼‚å¸¸ã€‚åœ¨&lt;code>@Transactional&lt;/code>æ³¨è§£ä¸­å¦‚æžœä¸é…ç½®&lt;code>rollbackFor&lt;/code>å±žæ€§,é‚£ä¹ˆäº‹ç‰©åªä¼šåœ¨é‡åˆ°&lt;code>RuntimeException&lt;/code>çš„æ—¶å€™æ‰ä¼šå›žæ»š,åŠ ä¸Š&lt;code>rollbackFor=Exception.class&lt;/code>,å¯ä»¥è®©äº‹ç‰©åœ¨é‡åˆ°éžè¿è¡Œæ—¶å¼‚å¸¸æ—¶ä¹Ÿå›žæ»šã€‚&lt;/p>
&lt;p>&lt;code>@Transactional&lt;/code> æ³¨è§£ä¸€èˆ¬ç”¨åœ¨å¯ä»¥ä½œç”¨åœ¨&lt;code>ç±»&lt;/code>æˆ–è€…&lt;code>æ–¹æ³•&lt;/code>ä¸Šã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;strong>ä½œç”¨äºŽç±»&lt;/strong>ï¼šå½“æŠŠ&lt;code>@Transactional æ³¨è§£æ”¾åœ¨ç±»ä¸Šæ—¶ï¼Œè¡¨ç¤ºæ‰€æœ‰è¯¥ç±»çš„&lt;/code>public æ–¹æ³•éƒ½é…ç½®ç›¸åŒçš„äº‹åŠ¡å±žæ€§ä¿¡æ¯ã€‚&lt;/li>
&lt;li>&lt;strong>ä½œç”¨äºŽæ–¹æ³•&lt;/strong>ï¼šå½“ç±»é…ç½®äº†&lt;code>@Transactional&lt;/code>ï¼Œæ–¹æ³•ä¹Ÿé…ç½®äº†&lt;code>@Transactional&lt;/code>ï¼Œæ–¹æ³•çš„äº‹åŠ¡ä¼šè¦†ç›–ç±»çš„äº‹åŠ¡é…ç½®ä¿¡æ¯ã€‚&lt;/li>
&lt;/ul>
&lt;p>æ›´å¤šå…³äºŽå…³äºŽ Spring äº‹åŠ¡çš„å†…å®¹è¯·æŸ¥çœ‹ï¼š&lt;/p>
&lt;ol>
&lt;li>&lt;a href="https://mp.weixin.qq.com/s?__biz=Mzg2OTA0Njk0OA==&amp;amp;mid=2247484943&amp;amp;idx=1&amp;amp;sn=46b9082af4ec223137df7d1c8303ca24&amp;amp;chksm=cea249c4f9d5c0d2b8212a17252cbfb74e5fbe5488b76d829827421c53332326d1ec360f5d63&amp;amp;token=1082669959&amp;amp;lang=zh_CN#rd">å¯èƒ½æ˜¯æœ€æ¼‚äº®çš„ Spring äº‹åŠ¡ç®¡ç†è¯¦è§£&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://mp.weixin.qq.com/s?__biz=Mzg2OTA0Njk0OA==&amp;amp;mid=2247486483&amp;amp;idx=2&amp;amp;sn=77be488e206186803531ea5d7164ec53&amp;amp;chksm=cea243d8f9d5cacecaa5c5daae4cde4c697b9b5b21f96dfc6cce428cfcb62b88b3970c26b9c2&amp;amp;token=816772476&amp;amp;lang=zh_CN#rd">ä¸€å£æ°”è¯´å‡º 6 ç§ @Transactional æ³¨è§£å¤±æ•ˆåœºæ™¯&lt;/a>&lt;/li>
&lt;/ol>
&lt;h3 id="10-json-æ•°æ®å¤„ç†">10. json æ•°æ®å¤„ç†&lt;/h3>
&lt;h4 id="101-è¿‡æ»¤-json-æ•°æ®">10.1. è¿‡æ»¤ json æ•°æ®&lt;/h4>
&lt;p>&lt;strong>&lt;code>@JsonIgnoreProperties&lt;/code> ä½œç”¨åœ¨ç±»ä¸Šç”¨äºŽè¿‡æ»¤æŽ‰ç‰¹å®šå­—æ®µä¸è¿”å›žæˆ–è€…ä¸è§£æžã€‚&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="c1">//ç”Ÿæˆjsonæ—¶å°†userRoleså±žæ€§è¿‡æ»¤
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="nd">@JsonIgnoreProperties&lt;/span>&lt;span class="o">({&lt;/span>&lt;span class="s">&amp;#34;userRoles&amp;#34;&lt;/span>&lt;span class="o">})&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kd">class&lt;/span> &lt;span class="nc">User&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">userName&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">fullName&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">password&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="nd">@JsonIgnore&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">List&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">UserRole&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">userRoles&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">ArrayList&lt;/span>&lt;span class="o">&amp;lt;&amp;gt;();&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>&lt;code>@JsonIgnore&lt;/code>ä¸€èˆ¬ç”¨äºŽç±»çš„å±žæ€§ä¸Šï¼Œä½œç”¨å’Œä¸Šé¢çš„&lt;code>@JsonIgnoreProperties&lt;/code> ä¸€æ ·ã€‚&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">
&lt;span class="kd">public&lt;/span> &lt;span class="kd">class&lt;/span> &lt;span class="nc">User&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">userName&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">fullName&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">password&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="c1">//ç”Ÿæˆjsonæ—¶å°†userRoleså±žæ€§è¿‡æ»¤
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nd">@JsonIgnore&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">List&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">UserRole&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">userRoles&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">ArrayList&lt;/span>&lt;span class="o">&amp;lt;&amp;gt;();&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="102-æ ¼å¼åŒ–-json-æ•°æ®">10.2. æ ¼å¼åŒ– json æ•°æ®&lt;/h4>
&lt;p>&lt;code>@JsonFormat&lt;/code>ä¸€èˆ¬ç”¨æ¥æ ¼å¼åŒ– json æ•°æ®ã€‚ï¼š&lt;/p>
&lt;p>æ¯”å¦‚ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="nd">@JsonFormat&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">shape&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">JsonFormat&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">Shape&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">STRING&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">pattern&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;yyyy-MM-dd&amp;#39;T&amp;#39;HH:mm:ss.SSS&amp;#39;Z&amp;#39;&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">timezone&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;GMT&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">Date&lt;/span> &lt;span class="n">date&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="103-æ‰å¹³åŒ–å¯¹è±¡">10.3. æ‰å¹³åŒ–å¯¹è±¡&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="nd">@Getter&lt;/span>
&lt;span class="nd">@Setter&lt;/span>
&lt;span class="nd">@ToString&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kd">class&lt;/span> &lt;span class="nc">Account&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="nd">@JsonUnwrapped&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">Location&lt;/span> &lt;span class="n">location&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="nd">@JsonUnwrapped&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">PersonInfo&lt;/span> &lt;span class="n">personInfo&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="nd">@Getter&lt;/span>
&lt;span class="nd">@Setter&lt;/span>
&lt;span class="nd">@ToString&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kd">static&lt;/span> &lt;span class="kd">class&lt;/span> &lt;span class="nc">Location&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">provinceName&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">countyName&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="nd">@Getter&lt;/span>
&lt;span class="nd">@Setter&lt;/span>
&lt;span class="nd">@ToString&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kd">static&lt;/span> &lt;span class="kd">class&lt;/span> &lt;span class="nc">PersonInfo&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">userName&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">fullName&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æœªæ‰å¹³åŒ–ä¹‹å‰ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="p">{&lt;/span>
&lt;span class="nt">&amp;#34;location&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nt">&amp;#34;provinceName&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s2">&amp;#34;æ¹–åŒ—&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nt">&amp;#34;countyName&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s2">&amp;#34;æ­¦æ±‰&amp;#34;&lt;/span>
&lt;span class="p">},&lt;/span>
&lt;span class="nt">&amp;#34;personInfo&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nt">&amp;#34;userName&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;coder1234&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nt">&amp;#34;fullName&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;shaungkou&amp;#34;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½¿ç”¨&lt;code>@JsonUnwrapped&lt;/code> æ‰å¹³å¯¹è±¡ä¹‹åŽï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="nd">@Getter&lt;/span>
&lt;span class="nd">@Setter&lt;/span>
&lt;span class="nd">@ToString&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kd">class&lt;/span> &lt;span class="nc">Account&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="nd">@JsonUnwrapped&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">Location&lt;/span> &lt;span class="n">location&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="nd">@JsonUnwrapped&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">PersonInfo&lt;/span> &lt;span class="n">personInfo&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="o">......&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="p">{&lt;/span>
&lt;span class="nt">&amp;#34;provinceName&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s2">&amp;#34;æ¹–åŒ—&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nt">&amp;#34;countyName&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s2">&amp;#34;æ­¦æ±‰&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nt">&amp;#34;userName&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;coder1234&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nt">&amp;#34;fullName&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;shaungkou&amp;#34;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="11-æµ‹è¯•ç›¸å…³">11. æµ‹è¯•ç›¸å…³&lt;/h3>
&lt;p>&lt;strong>&lt;code>@ActiveProfiles&lt;/code>ä¸€èˆ¬ä½œç”¨äºŽæµ‹è¯•ç±»ä¸Šï¼Œ ç”¨äºŽå£°æ˜Žç”Ÿæ•ˆçš„ Spring é…ç½®æ–‡ä»¶ã€‚&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="nd">@SpringBootTest&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">webEnvironment&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">RANDOM_PORT&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="nd">@ActiveProfiles&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;test&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="nd">@Slf4j&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kd">abstract&lt;/span> &lt;span class="kd">class&lt;/span> &lt;span class="nc">TestBase&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="o">......&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>&lt;code>@Test&lt;/code>å£°æ˜Žä¸€ä¸ªæ–¹æ³•ä¸ºæµ‹è¯•æ–¹æ³•&lt;/strong>&lt;/p>
&lt;p>&lt;strong>&lt;code>@Transactional&lt;/code>è¢«å£°æ˜Žçš„æµ‹è¯•æ–¹æ³•çš„æ•°æ®ä¼šå›žæ»šï¼Œé¿å…æ±¡æŸ“æµ‹è¯•æ•°æ®ã€‚&lt;/strong>&lt;/p>
&lt;p>&lt;strong>&lt;code>@WithMockUser&lt;/code> Spring Security æä¾›çš„ï¼Œç”¨æ¥æ¨¡æ‹Ÿä¸€ä¸ªçœŸå®žç”¨æˆ·ï¼Œå¹¶ä¸”å¯ä»¥èµ‹äºˆæƒé™ã€‚&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java"> &lt;span class="nd">@Test&lt;/span>
&lt;span class="nd">@Transactional&lt;/span>
&lt;span class="nd">@WithMockUser&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">username&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;user-id-18163138155&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">authorities&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;ROLE_TEACHER&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="kt">void&lt;/span> &lt;span class="nf">should_import_student_success&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="kd">throws&lt;/span> &lt;span class="n">Exception&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="o">......&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;em>æš‚æ—¶æ€»ç»“åˆ°è¿™é‡Œå§ï¼è™½ç„¶èŠ±äº†æŒºé•¿æ—¶é—´æ‰å†™å®Œï¼Œä¸è¿‡å¯èƒ½è¿˜æ˜¯ä¼šä¸€äº›å¸¸ç”¨çš„æ³¨è§£çš„è¢«æ¼æŽ‰ï¼Œæ‰€ä»¥ï¼Œæˆ‘å°†æ–‡ç« ä¹ŸåŒæ­¥åˆ°äº† Github ä¸ŠåŽ»ï¼ŒGithub åœ°å€ï¼š æ¬¢è¿Žå®Œå–„ï¼&lt;/em>&lt;/p>
&lt;p>æœ¬æ–‡å·²ç»æ”¶å½•è¿›æˆ‘çš„ 75K Star çš„ Java å¼€æºé¡¹ç›® JavaGuideï¼š&lt;a href="https://github.com/Snailclimb/JavaGuide">https://github.com/Snailclimb/JavaGuide&lt;/a>ã€‚&lt;/p></description></item><item><title>é€šè¿‡explainæŸ¥è¯¢åˆ†æžSQLçš„æ‰§è¡Œè®¡åˆ’</title><link>https://blog.itning.top/post/2020/04/12/%E9%80%9A%E8%BF%87explain%E6%9F%A5%E8%AF%A2%E5%88%86%E6%9E%90sql%E7%9A%84%E6%89%A7%E8%A1%8C%E8%AE%A1%E5%88%92/</link><pubDate>Sun, 12 Apr 2020 21:06:25 +0800</pubDate><guid>https://blog.itning.top/post/2020/04/12/%E9%80%9A%E8%BF%87explain%E6%9F%A5%E8%AF%A2%E5%88%86%E6%9E%90sql%E7%9A%84%E6%89%A7%E8%A1%8C%E8%AE%A1%E5%88%92/</guid><description>&lt;p>&lt;strong>id&lt;/strong>åˆ—æ•°å­—è¶Šå¤§è¶Šå…ˆæ‰§è¡Œï¼Œå¦‚æžœè¯´æ•°å­—ä¸€æ ·å¤§ï¼Œé‚£ä¹ˆå°±ä»Žä¸Šå¾€ä¸‹ä¾æ¬¡æ‰§è¡Œï¼Œidåˆ—ä¸ºnullçš„å°±è¡¨æ˜¯è¿™æ˜¯ä¸€ä¸ªç»“æžœé›†ï¼Œä¸éœ€è¦ä½¿ç”¨å®ƒæ¥è¿›è¡ŒæŸ¥è¯¢ã€‚&lt;/p>
&lt;p>&lt;strong>select_type&lt;/strong>åˆ—å¸¸è§çš„æœ‰ï¼š&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>select_type&lt;/th>
&lt;th>æè¿°&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>simple&lt;/td>
&lt;td>è¡¨ç¤ºä¸éœ€è¦unionæ“ä½œæˆ–è€…ä¸åŒ…å«å­æŸ¥è¯¢çš„ç®€å•selectæŸ¥è¯¢ã€‚æœ‰è¿žæŽ¥æŸ¥è¯¢æ—¶ï¼Œå¤–å±‚çš„æŸ¥è¯¢ä¸ºsimpleï¼Œä¸”åªæœ‰ä¸€ä¸ª&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>primary&lt;/td>
&lt;td>ä¸€ä¸ªéœ€è¦unionæ“ä½œæˆ–è€…å«æœ‰å­æŸ¥è¯¢çš„selectï¼Œä½äºŽæœ€å¤–å±‚çš„å•ä½æŸ¥è¯¢çš„select_typeå³ä¸ºprimaryã€‚ä¸”åªæœ‰ä¸€ä¸ª&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>union&lt;/td>
&lt;td>unionè¿žæŽ¥çš„ä¸¤ä¸ªselectæŸ¥è¯¢ï¼Œç¬¬ä¸€ä¸ªæŸ¥è¯¢æ˜¯derviedæ´¾ç”Ÿè¡¨ï¼Œé™¤äº†ç¬¬ä¸€ä¸ªè¡¨å¤–ï¼Œç¬¬äºŒä¸ªä»¥åŽçš„è¡¨select_typeéƒ½æ˜¯union&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>dependent union&lt;/td>
&lt;td>ä¸Žunionä¸€æ ·ï¼Œå‡ºçŽ°åœ¨union æˆ–union allè¯­å¥ä¸­ï¼Œä½†æ˜¯è¿™ä¸ªæŸ¥è¯¢è¦å—åˆ°å¤–éƒ¨æŸ¥è¯¢çš„å½±å“&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>union result&lt;/td>
&lt;td>åŒ…å«unionçš„ç»“æžœé›†ï¼Œåœ¨unionå’Œunion allè¯­å¥ä¸­,å› ä¸ºå®ƒä¸éœ€è¦å‚ä¸ŽæŸ¥è¯¢ï¼Œæ‰€ä»¥idå­—æ®µä¸ºnull&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>subquery&lt;/td>
&lt;td>é™¤äº†fromå­å¥ä¸­åŒ…å«çš„å­æŸ¥è¯¢å¤–ï¼Œå…¶ä»–åœ°æ–¹å‡ºçŽ°çš„å­æŸ¥è¯¢éƒ½å¯èƒ½æ˜¯subquery&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>dependent subquery&lt;/td>
&lt;td>ä¸Ždependent unionç±»ä¼¼ï¼Œè¡¨ç¤ºè¿™ä¸ªsubqueryçš„æŸ¥è¯¢è¦å—åˆ°å¤–éƒ¨è¡¨æŸ¥è¯¢çš„å½±å“&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>derived&lt;/td>
&lt;td>fromå­—å¥ä¸­å‡ºçŽ°çš„å­æŸ¥è¯¢ï¼Œä¹Ÿå«åšæ´¾ç”Ÿè¡¨ï¼Œå…¶ä»–æ•°æ®åº“ä¸­å¯èƒ½å«åšå†…è”è§†å›¾æˆ–åµŒå¥—select&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;strong>table&lt;/strong>æ˜¾ç¤ºçš„æŸ¥è¯¢è¡¨åï¼Œå¦‚æžœæŸ¥è¯¢ä½¿ç”¨äº†åˆ«åï¼Œé‚£ä¹ˆè¿™é‡Œæ˜¾ç¤ºçš„æ˜¯åˆ«åï¼Œå¦‚æžœä¸æ¶‰åŠå¯¹æ•°æ®è¡¨çš„æ“ä½œï¼Œé‚£ä¹ˆè¿™æ˜¾ç¤ºä¸ºnullï¼Œå¦‚æžœæ˜¾ç¤ºä¸ºå°–æ‹¬å·æ‹¬èµ·æ¥çš„&lt;code>&amp;lt;derived N&amp;gt;&lt;/code>å°±è¡¨ç¤ºè¿™ä¸ªæ˜¯ä¸´æ—¶è¡¨ï¼ŒåŽè¾¹çš„Nå°±æ˜¯æ‰§è¡Œè®¡åˆ’ä¸­çš„idï¼Œè¡¨ç¤ºç»“æžœæ¥è‡ªäºŽè¿™ä¸ªæŸ¥è¯¢äº§ç”Ÿã€‚å¦‚æžœæ˜¯å°–æ‹¬å·æ‹¬èµ·æ¥çš„&lt;code>&amp;lt;union M,N&amp;gt;&lt;/code>ï¼Œä¸Ž&lt;code>&amp;lt;derived N&amp;gt;&lt;/code>ç±»ä¼¼ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªä¸´æ—¶è¡¨ï¼Œè¡¨ç¤ºè¿™ä¸ªç»“æžœæ¥è‡ªäºŽunionæŸ¥è¯¢çš„idä¸ºM,Nçš„ç»“æžœé›†ã€‚&lt;/p>
&lt;p>&lt;strong>type&lt;/strong>ä¾æ¬¡ä»Žå¥½åˆ°å·®ï¼š&lt;code>system&lt;/code>ï¼Œ&lt;code>const&lt;/code>ï¼Œ&lt;code>eq_ref&lt;/code>ï¼Œ&lt;code>ref&lt;/code>ï¼Œ&lt;code>fulltext&lt;/code>ï¼Œ&lt;code>ref_or_null&lt;/code>ï¼Œ&lt;code>unique_subquery&lt;/code>ï¼Œ&lt;code>index_subquery&lt;/code>ï¼Œ&lt;code>range&lt;/code>ï¼Œ&lt;code>index_merge&lt;/code>ï¼Œ&lt;code>index&lt;/code>ï¼Œ&lt;code>ALL&lt;/code>ï¼Œé™¤äº†allä¹‹å¤–ï¼Œå…¶ä»–çš„typeéƒ½å¯ä»¥ä½¿ç”¨åˆ°ç´¢å¼•ï¼Œé™¤äº†index_mergeä¹‹å¤–ï¼Œå…¶ä»–çš„typeåªå¯ä»¥ç”¨åˆ°ä¸€ä¸ªç´¢å¼•&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>type&lt;/th>
&lt;th>æè¿°&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>system&lt;/td>
&lt;td>è¡¨ä¸­åªæœ‰ä¸€è¡Œæ•°æ®æˆ–è€…æ˜¯ç©ºè¡¨ï¼Œä¸”åªèƒ½ç”¨äºŽmyisamå’Œmemoryè¡¨ã€‚å¦‚æžœæ˜¯Innodbå¼•æ“Žè¡¨ï¼Œtypeåˆ—åœ¨è¿™ä¸ªæƒ…å†µé€šå¸¸éƒ½æ˜¯allæˆ–è€…index&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>const&lt;/td>
&lt;td>ä½¿ç”¨å”¯ä¸€ç´¢å¼•æˆ–è€…ä¸»é”®ï¼Œè¿”å›žè®°å½•ä¸€å®šæ˜¯1è¡Œè®°å½•çš„ç­‰å€¼whereæ¡ä»¶æ—¶ï¼Œé€šå¸¸typeæ˜¯constã€‚å…¶ä»–æ•°æ®åº“ä¹Ÿå«åšå”¯ä¸€ç´¢å¼•æ‰«æ&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>eq_ref&lt;/td>
&lt;td>å‡ºçŽ°åœ¨è¦è¿žæŽ¥è¿‡ä¸ªè¡¨çš„æŸ¥è¯¢è®¡åˆ’ä¸­ï¼Œé©±åŠ¨è¡¨åªè¿”å›žä¸€è¡Œæ•°æ®ï¼Œä¸”è¿™è¡Œæ•°æ®æ˜¯ç¬¬äºŒä¸ªè¡¨çš„ä¸»é”®æˆ–è€…å”¯ä¸€ç´¢å¼•ï¼Œä¸”å¿…é¡»ä¸ºnot nullï¼Œå”¯ä¸€ç´¢å¼•å’Œä¸»é”®æ˜¯å¤šåˆ—æ—¶ï¼Œåªæœ‰æ‰€æœ‰çš„åˆ—éƒ½ç”¨ä½œæ¯”è¾ƒæ—¶æ‰ä¼šå‡ºçŽ°eq_ref&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ref&lt;/td>
&lt;td>ä¸åƒeq_refé‚£æ ·è¦æ±‚è¿žæŽ¥é¡ºåºï¼Œä¹Ÿæ²¡æœ‰ä¸»é”®å’Œå”¯ä¸€ç´¢å¼•çš„è¦æ±‚ï¼Œåªè¦ä½¿ç”¨ç›¸ç­‰æ¡ä»¶æ£€ç´¢æ—¶å°±å¯èƒ½å‡ºçŽ°ï¼Œå¸¸è§ä¸Žè¾…åŠ©ç´¢å¼•çš„ç­‰å€¼æŸ¥æ‰¾ã€‚æˆ–è€…å¤šåˆ—ä¸»é”®ã€å”¯ä¸€ç´¢å¼•ä¸­ï¼Œä½¿ç”¨ç¬¬ä¸€ä¸ªåˆ—ä¹‹å¤–çš„åˆ—ä½œä¸ºç­‰å€¼æŸ¥æ‰¾ä¹Ÿä¼šå‡ºçŽ°ï¼Œæ€»ä¹‹ï¼Œè¿”å›žæ•°æ®ä¸å”¯ä¸€çš„ç­‰å€¼æŸ¥æ‰¾å°±å¯èƒ½å‡ºçŽ°ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>fulltext&lt;/td>
&lt;td>å…¨æ–‡ç´¢å¼•æ£€ç´¢ï¼Œè¦æ³¨æ„ï¼Œå…¨æ–‡ç´¢å¼•çš„ä¼˜å…ˆçº§å¾ˆé«˜ï¼Œè‹¥å…¨æ–‡ç´¢å¼•å’Œæ™®é€šç´¢å¼•åŒæ—¶å­˜åœ¨æ—¶ï¼Œmysqlä¸ç®¡ä»£ä»·ï¼Œä¼˜å…ˆé€‰æ‹©ä½¿ç”¨å…¨æ–‡ç´¢å¼•&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ref_or_null&lt;/td>
&lt;td>ä¸Žrefæ–¹æ³•ç±»ä¼¼ï¼Œåªæ˜¯å¢žåŠ äº†nullå€¼çš„æ¯”è¾ƒã€‚å®žé™…ç”¨çš„ä¸å¤š&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>unique_subquery&lt;/td>
&lt;td>ç”¨äºŽwhereä¸­çš„inå½¢å¼å­æŸ¥è¯¢ï¼Œå­æŸ¥è¯¢è¿”å›žä¸é‡å¤å€¼å”¯ä¸€å€¼&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>index_subquery&lt;/td>
&lt;td>ç”¨äºŽinå½¢å¼å­æŸ¥è¯¢ä½¿ç”¨åˆ°äº†è¾…åŠ©ç´¢å¼•æˆ–è€…inå¸¸æ•°åˆ—è¡¨ï¼Œå­æŸ¥è¯¢å¯èƒ½è¿”å›žé‡å¤å€¼ï¼Œå¯ä»¥ä½¿ç”¨ç´¢å¼•å°†å­æŸ¥è¯¢åŽ»é‡ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>range&lt;/td>
&lt;td>ç´¢å¼•èŒƒå›´æ‰«æï¼Œå¸¸è§äºŽä½¿ç”¨&amp;gt;,&amp;lt;,is null,between ,in ,likeç­‰è¿ç®—ç¬¦çš„æŸ¥è¯¢ä¸­ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>index_merge&lt;/td>
&lt;td>è¡¨ç¤ºæŸ¥è¯¢ä½¿ç”¨äº†ä¸¤ä¸ªä»¥ä¸Šçš„ç´¢å¼•ï¼Œæœ€åŽå–äº¤é›†æˆ–è€…å¹¶é›†ï¼Œå¸¸è§and ï¼Œorçš„æ¡ä»¶ä½¿ç”¨äº†ä¸åŒçš„ç´¢å¼•ï¼Œå®˜æ–¹æŽ’åºè¿™ä¸ªåœ¨ref_or_nullä¹‹åŽï¼Œä½†æ˜¯å®žé™…ä¸Šç”±äºŽè¦è¯»å–æ‰€ä¸ªç´¢å¼•ï¼Œæ€§èƒ½å¯èƒ½å¤§éƒ¨åˆ†æ—¶é—´éƒ½ä¸å¦‚range&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>index&lt;/td>
&lt;td>ç´¢å¼•å…¨è¡¨æ‰«æï¼ŒæŠŠç´¢å¼•ä»Žå¤´åˆ°å°¾æ‰«ä¸€éï¼Œå¸¸è§äºŽä½¿ç”¨ç´¢å¼•åˆ—å°±å¯ä»¥å¤„ç†ä¸éœ€è¦è¯»å–æ•°æ®æ–‡ä»¶çš„æŸ¥è¯¢ã€å¯ä»¥ä½¿ç”¨ç´¢å¼•æŽ’åºæˆ–è€…åˆ†ç»„çš„æŸ¥è¯¢ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>all&lt;/td>
&lt;td>è¿™ä¸ªå°±æ˜¯å…¨è¡¨æ‰«ææ•°æ®æ–‡ä»¶ï¼Œç„¶åŽå†åœ¨serverå±‚è¿›è¡Œè¿‡æ»¤è¿”å›žç¬¦åˆè¦æ±‚çš„è®°å½•ã€‚&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;strong>possible_keys&lt;/strong>æŸ¥è¯¢å¯èƒ½ä½¿ç”¨åˆ°çš„ç´¢å¼•éƒ½ä¼šåœ¨è¿™é‡Œåˆ—å‡ºæ¥&lt;/p>
&lt;p>&lt;strong>key&lt;/strong>æŸ¥è¯¢çœŸæ­£ä½¿ç”¨åˆ°çš„ç´¢å¼•ï¼Œselect_typeä¸ºindex_mergeæ—¶ï¼Œè¿™é‡Œå¯èƒ½å‡ºçŽ°ä¸¤ä¸ªä»¥ä¸Šçš„ç´¢å¼•ï¼Œå…¶ä»–çš„select_typeè¿™é‡Œåªä¼šå‡ºçŽ°ä¸€ä¸ªã€‚&lt;/p>
&lt;p>&lt;strong>key_len&lt;/strong>ç”¨äºŽå¤„ç†æŸ¥è¯¢çš„ç´¢å¼•é•¿åº¦ï¼Œå¦‚æžœæ˜¯å•åˆ—ç´¢å¼•ï¼Œé‚£å°±æ•´ä¸ªç´¢å¼•é•¿åº¦ç®—è¿›åŽ»ï¼Œå¦‚æžœæ˜¯å¤šåˆ—ç´¢å¼•ï¼Œé‚£ä¹ˆæŸ¥è¯¢ä¸ä¸€å®šéƒ½èƒ½ä½¿ç”¨åˆ°æ‰€æœ‰çš„åˆ—ï¼Œå…·ä½“ä½¿ç”¨åˆ°äº†å¤šå°‘ä¸ªåˆ—çš„ç´¢å¼•ï¼Œè¿™é‡Œå°±ä¼šè®¡ç®—è¿›åŽ»ï¼Œæ²¡æœ‰ä½¿ç”¨åˆ°çš„åˆ—ï¼Œè¿™é‡Œä¸ä¼šè®¡ç®—è¿›åŽ»ã€‚ç•™æ„ä¸‹è¿™ä¸ªåˆ—çš„å€¼ï¼Œç®—ä¸€ä¸‹ä½ çš„å¤šåˆ—ç´¢å¼•æ€»é•¿åº¦å°±çŸ¥é“æœ‰æ²¡æœ‰ä½¿ç”¨åˆ°æ‰€æœ‰çš„åˆ—äº†ã€‚è¦æ³¨æ„ï¼Œmysqlçš„ICPç‰¹æ€§ä½¿ç”¨åˆ°çš„ç´¢å¼•ä¸ä¼šè®¡å…¥å…¶ä¸­ã€‚å¦å¤–ï¼Œkey_lenåªè®¡ç®—whereæ¡ä»¶ç”¨åˆ°çš„ç´¢å¼•é•¿åº¦ï¼Œè€ŒæŽ’åºå’Œåˆ†ç»„å°±ç®—ç”¨åˆ°äº†ç´¢å¼•ï¼Œä¹Ÿä¸ä¼šè®¡ç®—åˆ°key_lenä¸­ã€‚&lt;/p>
&lt;p>&lt;strong>ref&lt;/strong>å¦‚æžœæ˜¯ä½¿ç”¨çš„å¸¸æ•°ç­‰å€¼æŸ¥è¯¢ï¼Œè¿™é‡Œä¼šæ˜¾ç¤ºconstï¼Œå¦‚æžœæ˜¯è¿žæŽ¥æŸ¥è¯¢ï¼Œè¢«é©±åŠ¨è¡¨çš„æ‰§è¡Œè®¡åˆ’è¿™é‡Œä¼šæ˜¾ç¤ºé©±åŠ¨è¡¨çš„å…³è”å­—æ®µï¼Œå¦‚æžœæ˜¯æ¡ä»¶ä½¿ç”¨äº†è¡¨è¾¾å¼æˆ–è€…å‡½æ•°ï¼Œæˆ–è€…æ¡ä»¶åˆ—å‘ç”Ÿäº†å†…éƒ¨éšå¼è½¬æ¢ï¼Œè¿™é‡Œå¯èƒ½æ˜¾ç¤ºä¸ºfunc&lt;/p>
&lt;p>&lt;strong>rows&lt;/strong>è¿™é‡Œæ˜¯æ‰§è¡Œè®¡åˆ’ä¸­ä¼°ç®—çš„æ‰«æè¡Œæ•°ï¼Œä¸æ˜¯ç²¾ç¡®å€¼&lt;/p>
&lt;p>&lt;strong>extra&lt;/strong>è¿™ä¸ªåˆ—å¯ä»¥æ˜¾ç¤ºçš„ä¿¡æ¯éžå¸¸å¤šï¼Œæœ‰å‡ åç§ï¼Œå¸¸ç”¨çš„æœ‰&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>extra&lt;/th>
&lt;th>æè¿°&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>distinct&lt;/td>
&lt;td>åœ¨selectéƒ¨åˆ†ä½¿ç”¨äº†distincå…³é”®å­—&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>no tables used&lt;/td>
&lt;td>ä¸å¸¦fromå­—å¥çš„æŸ¥è¯¢æˆ–è€…From dualæŸ¥è¯¢&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>ä½¿ç”¨not in()å½¢å¼å­æŸ¥è¯¢æˆ–not existsè¿ç®—ç¬¦çš„è¿žæŽ¥æŸ¥è¯¢ï¼Œè¿™ç§å«åšåè¿žæŽ¥ã€‚å³ï¼Œä¸€èˆ¬è¿žæŽ¥æŸ¥è¯¢æ˜¯å…ˆæŸ¥è¯¢å†…è¡¨ï¼Œå†æŸ¥è¯¢å¤–è¡¨ï¼Œåè¿žæŽ¥å°±æ˜¯å…ˆæŸ¥è¯¢å¤–è¡¨ï¼Œå†æŸ¥è¯¢å†…è¡¨ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>using filesort&lt;/td>
&lt;td>æŽ’åºæ—¶æ— æ³•ä½¿ç”¨åˆ°ç´¢å¼•æ—¶ï¼Œå°±ä¼šå‡ºçŽ°è¿™ä¸ªã€‚å¸¸è§äºŽorder byå’Œgroup byè¯­å¥ä¸­&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>using index&lt;/td>
&lt;td>æŸ¥è¯¢æ—¶ä¸éœ€è¦å›žè¡¨æŸ¥è¯¢ï¼Œç›´æŽ¥é€šè¿‡ç´¢å¼•å°±å¯ä»¥èŽ·å–æŸ¥è¯¢çš„æ•°æ®ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>using join bufferï¼ˆblock nested loopï¼‰ï¼Œusing join bufferï¼ˆbatched key accssï¼‰&lt;/td>
&lt;td>5.6.xä¹‹åŽçš„ç‰ˆæœ¬ä¼˜åŒ–å…³è”æŸ¥è¯¢çš„BNLï¼ŒBKAç‰¹æ€§ã€‚ä¸»è¦æ˜¯å‡å°‘å†…è¡¨çš„å¾ªçŽ¯æ•°é‡ä»¥åŠæ¯”è¾ƒé¡ºåºåœ°æ‰«ææŸ¥è¯¢ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>using intersect&lt;/td>
&lt;td>è¡¨ç¤ºä½¿ç”¨andçš„å„ä¸ªç´¢å¼•çš„æ¡ä»¶æ—¶ï¼Œè¯¥ä¿¡æ¯è¡¨ç¤ºæ˜¯ä»Žå¤„ç†ç»“æžœèŽ·å–äº¤é›†&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>using union&lt;/td>
&lt;td>è¡¨ç¤ºä½¿ç”¨orè¿žæŽ¥å„ä¸ªä½¿ç”¨ç´¢å¼•çš„æ¡ä»¶æ—¶ï¼Œè¯¥ä¿¡æ¯è¡¨ç¤ºä»Žå¤„ç†ç»“æžœèŽ·å–å¹¶é›†&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>using sort_unionå’Œusing sort_intersection&lt;/td>
&lt;td>ä¸Žå‰é¢ä¸¤ä¸ªå¯¹åº”çš„ç±»ä¼¼ï¼Œåªæ˜¯ä»–ä»¬æ˜¯å‡ºçŽ°åœ¨ç”¨andå’ŒoræŸ¥è¯¢ä¿¡æ¯é‡å¤§æ—¶ï¼Œå…ˆæŸ¥è¯¢ä¸»é”®ï¼Œç„¶åŽè¿›è¡ŒæŽ’åºåˆå¹¶åŽï¼Œæ‰èƒ½è¯»å–è®°å½•å¹¶è¿”å›žã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>using temporary&lt;/td>
&lt;td>è¡¨ç¤ºä½¿ç”¨äº†ä¸´æ—¶è¡¨å­˜å‚¨ä¸­é—´ç»“æžœã€‚ä¸´æ—¶è¡¨å¯ä»¥æ˜¯å†…å­˜ä¸´æ—¶è¡¨å’Œç£ç›˜ä¸´æ—¶è¡¨ï¼Œæ‰§è¡Œè®¡åˆ’ä¸­çœ‹ä¸å‡ºæ¥ï¼Œéœ€è¦æŸ¥çœ‹statuså˜é‡ï¼Œused_tmp_tableï¼Œused_tmp_disk_tableæ‰èƒ½çœ‹å‡ºæ¥ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>using where&lt;/td>
&lt;td>è¡¨ç¤ºå­˜å‚¨å¼•æ“Žè¿”å›žçš„è®°å½•å¹¶ä¸æ˜¯æ‰€æœ‰çš„éƒ½æ»¡è¶³æŸ¥è¯¢æ¡ä»¶ï¼Œéœ€è¦åœ¨serverå±‚è¿›è¡Œè¿‡æ»¤ã€‚æŸ¥è¯¢æ¡ä»¶ä¸­åˆ†ä¸ºé™åˆ¶æ¡ä»¶å’Œæ£€æŸ¥æ¡ä»¶ï¼Œ5.6ä¹‹å‰ï¼Œå­˜å‚¨å¼•æ“Žåªèƒ½æ ¹æ®é™åˆ¶æ¡ä»¶æ‰«ææ•°æ®å¹¶è¿”å›žï¼Œç„¶åŽserverå±‚æ ¹æ®æ£€æŸ¥æ¡ä»¶è¿›è¡Œè¿‡æ»¤å†è¿”å›žçœŸæ­£ç¬¦åˆæŸ¥è¯¢çš„æ•°æ®ã€‚5.6.xä¹‹åŽæ”¯æŒICPç‰¹æ€§ï¼Œå¯ä»¥æŠŠæ£€æŸ¥æ¡ä»¶ä¹Ÿä¸‹æŽ¨åˆ°å­˜å‚¨å¼•æ“Žå±‚ï¼Œä¸ç¬¦åˆæ£€æŸ¥æ¡ä»¶å’Œé™åˆ¶æ¡ä»¶çš„æ•°æ®ï¼Œç›´æŽ¥ä¸è¯»å–ï¼Œè¿™æ ·å°±å¤§å¤§å‡å°‘äº†å­˜å‚¨å¼•æ“Žæ‰«æçš„è®°å½•æ•°é‡ã€‚extraåˆ—æ˜¾ç¤ºusing index condition&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>firstmatch(tb_name)&lt;/td>
&lt;td>5.6.xå¼€å§‹å¼•å…¥çš„ä¼˜åŒ–å­æŸ¥è¯¢çš„æ–°ç‰¹æ€§ä¹‹ä¸€ï¼Œå¸¸è§äºŽwhereå­—å¥å«æœ‰in()ç±»åž‹çš„å­æŸ¥è¯¢ã€‚å¦‚æžœå†…è¡¨çš„æ•°æ®é‡æ¯”è¾ƒå¤§ï¼Œå°±å¯èƒ½å‡ºçŽ°è¿™ä¸ª&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>loosescan(m..n)&lt;/td>
&lt;td>5.6.xä¹‹åŽå¼•å…¥çš„ä¼˜åŒ–å­æŸ¥è¯¢çš„æ–°ç‰¹æ€§ä¹‹ä¸€ï¼Œåœ¨in()ç±»åž‹çš„å­æŸ¥è¯¢ä¸­ï¼Œå­æŸ¥è¯¢è¿”å›žçš„å¯èƒ½æœ‰é‡å¤è®°å½•æ—¶ï¼Œå°±å¯èƒ½å‡ºçŽ°è¿™ä¸ª&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>é™¤äº†è¿™äº›ä¹‹å¤–ï¼Œè¿˜æœ‰å¾ˆå¤šæŸ¥è¯¢æ•°æ®å­—å…¸åº“ï¼Œæ‰§è¡Œè®¡åˆ’è¿‡ç¨‹ä¸­å°±å‘çŽ°ä¸å¯èƒ½å­˜åœ¨ç»“æžœçš„ä¸€äº›æç¤ºä¿¡æ¯&lt;/p>
&lt;p>&lt;strong>filtered&lt;/strong>ä½¿ç”¨explain extendedæ—¶ä¼šå‡ºçŽ°è¿™ä¸ªåˆ—ï¼Œ5.7ä¹‹åŽçš„ç‰ˆæœ¬é»˜è®¤å°±æœ‰è¿™ä¸ªå­—æ®µï¼Œä¸éœ€è¦ä½¿ç”¨explain extendedäº†ã€‚è¿™ä¸ªå­—æ®µè¡¨ç¤ºå­˜å‚¨å¼•æ“Žè¿”å›žçš„æ•°æ®åœ¨serverå±‚è¿‡æ»¤åŽï¼Œå‰©ä¸‹å¤šå°‘æ»¡è¶³æŸ¥è¯¢çš„è®°å½•æ•°é‡çš„æ¯”ä¾‹ï¼Œæ³¨æ„æ˜¯ç™¾åˆ†æ¯”ï¼Œä¸æ˜¯å…·ä½“è®°å½•æ•°ã€‚&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/20200412211800.png" alt="a">&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/20200412211900.png" alt="b">&lt;/p></description></item><item><title>JVMç³»åˆ—5 æ‰§è¡Œå­ç³»ç»Ÿ</title><link>https://blog.itning.top/post/2020/04/10/jvm%E7%B3%BB%E5%88%975-%E6%89%A7%E8%A1%8C%E5%AD%90%E7%B3%BB%E7%BB%9F/</link><pubDate>Fri, 10 Apr 2020 11:40:52 +0800</pubDate><guid>https://blog.itning.top/post/2020/04/10/jvm%E7%B3%BB%E5%88%975-%E6%89%A7%E8%A1%8C%E5%AD%90%E7%B3%BB%E7%BB%9F/</guid><description>&lt;blockquote>
&lt;p>å­—èŠ‚ç æ‰§è¡Œå¼•æ“Ž&lt;/p>
&lt;/blockquote>
&lt;h2 id="æ¦‚è¿°">æ¦‚è¿°&lt;/h2>
&lt;p>æ‰§è¡Œå¼•æ“Žæ˜¯Javaè™šæ‹Ÿæœºéžå¸¸æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œå¯¹äºŽç‰©ç†çº§çš„æ‰§è¡Œå¼•æ“Žæ˜¯ç›´æŽ¥å»ºç«‹åœ¨å¤„ç†å™¨ã€ç¡¬ä»¶ã€æŒ‡ä»¤é›†åˆæ“ä½œç³»ç»Ÿå±‚é¢ï¼Œè€Œè™šæ‹Ÿæœºæ‰§è¡Œå¼•æ“Žåˆ™æ˜¯ç”±è‡ªè¡Œå®šåˆ¶çš„æŒ‡ä»¤é›†ä¸Žæ‰§è¡Œå¼•æ“Žçš„ç»“æž„ä½“ç³»ã€‚æ‰§è¡Œå¼•æ“Žåœ¨æ‰§è¡ŒJavaä¼šæœ‰è§£é‡Šæ‰§è¡Œ(é€šè¿‡è§£é‡Šå™¨)å’Œç¼–è¯‘æ‰§è¡Œ(é€šè¿‡JITç”Ÿæˆçš„æœ¬åœ°ä»£ç )ä¸¤ç§é€‰æ‹©ï¼Œå¯¹äºŽAndroid ARTåˆå¤šäº†ä¸€ç§æå‰ç¼–è¯‘å™¨(AOT)ã€‚&lt;/p>
&lt;p>æŽ¥ä¸‹æ¥ï¼Œä¸»è¦è®²è§£è™šæ‹Ÿæœºçš„æ–¹æ³•æ‰§è¡Œè¿‡ç¨‹ï¼Œå¯¹äºŽJavaè™šæ‹Ÿæœºçš„è§£é‡Šå™¨çš„æ‰§è¡Œæ¨¡åž‹ï¼ˆä¸è€ƒè™‘å¼‚å¸¸å¤„ç†ï¼‰ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="k">do&lt;/span> &lt;span class="o">{&lt;/span>
atomically calculate pc and fetch opcode at pc&lt;span class="p">;&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="o">(&lt;/span>operands&lt;span class="o">)&lt;/span> fetch operands&lt;span class="p">;&lt;/span>
execute the action &lt;span class="k">for&lt;/span> the opcode&lt;span class="p">;&lt;/span>
&lt;span class="o">}&lt;/span> &lt;span class="k">while&lt;/span> &lt;span class="o">(&lt;/span>there is more to &lt;span class="k">do&lt;/span>&lt;span class="o">)&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨&lt;a href="https://blog.itning.top/post/2020/04/10/jvm%E7%B3%BB%E5%88%971-%E8%BF%90%E8%A1%8C%E6%97%B6%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84/">Jvmç³»åˆ—1â€”è¿è¡Œæ—¶å†…å­˜æ¨¡åž‹&lt;/a>ï¼Œæœ‰æåˆ°æ ˆå¸§(Stack Frame)ï¼Œè¿™æ˜¯ç”¨äºŽæ”¯æŒè™šæ‹Ÿæœºçš„æ–¹æ³•è°ƒç”¨å’Œæ–¹æ³•æ‰§è¡Œçš„é‡è¦æ•°æ®ç»“æž„ã€‚æ¯ä¸€ä¸ªæ–¹æ³•çš„è°ƒç”¨åˆ°æ‰§è¡Œå®Œæˆï¼Œéƒ½å¯¹ç€æ ˆå¸§çš„å…¥æ ˆå’Œå‡ºæ ˆè¿‡ç¨‹ã€‚&lt;/p>
&lt;h2 id="å¯¹è±¡åˆ›å»º">å¯¹è±¡åˆ›å»º&lt;/h2>
&lt;p>Javaä½œä¸ºä¸€é—¨é¢å‘å¯¹è±¡çš„è¯­è¨€ï¼Œå¯¹è±¡çš„åˆ›å»ºæ—¶åˆ»éƒ½åœ¨å‘ç”Ÿç€ï¼Œå¯¹äºŽJavaè¯­è¨€æ¥è¯´åˆ›å»ºå¯¹è±¡åªéœ€è¦ä¸€ä¸ªnewå…³é”®å­—å°±å¯ä»¥å®Œæˆï¼ŒæŽ¥ä¸‹æ¥çœ‹çœ‹ä»ŽJavaè™šæ‹Ÿæœºè§’åº¦åˆ›å»ºå¯¹è±¡æ˜¯æ€Žæ ·çš„ä¸€ä¸ªè¿‡ç¨‹ã€‚å¦‚ä¸‹ä»£ç ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="n">Person&lt;/span> &lt;span class="n">person&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">Person&lt;/span>&lt;span class="o">();&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å½“è™šæ‹Ÿæœºé‡åˆ°newæŒ‡ä»¤åŽï¼Œæ‰§è¡Œå¦‚ä¸‹æµç¨‹ï¼š&lt;/p>
&lt;ul>
&lt;li>å…ˆæ£€æŸ¥æŒ‡ä»¤å‚æ•°â€œPersonâ€èƒ½å¦åœ¨å¸¸é‡æ± ä¸­å®šä½åˆ°Personç±»çš„ç¬¦å·å¼•ç”¨ï¼›å¦‚æžœæ‰¾åˆ°ï¼Œåˆ™å¾€ä¸‹æ‰§è¡Œï¼›&lt;/li>
&lt;li>å†æ£€æŸ¥Personç±»æ˜¯å¦å·²ç»åŠ è½½ã€è§£æžå’Œåˆå§‹åŒ–ï¼›å¦‚æžœæ²¡æœ‰åˆå§‹åŒ–ï¼Œåˆ™å…ˆæ‰§è¡Œç±»åŠ è½½è¿‡ç¨‹ï¼›&lt;/li>
&lt;li>ç±»åŠ è½½åŽï¼Œè™šæ‹Ÿæœºä¸ºæ–°ç”Ÿæˆçš„personå¯¹è±¡åœ¨å †ä¸Šåˆ†é…ç›¸åº”å¤§å°çš„å†…å­˜ï¼›ï¼ˆå¯¹è±¡å¤§å°åœ¨ç±»åŠ è½½åŽç¡®å®šï¼‰&lt;/li>
&lt;li>å†…å­˜åˆ†é…åŽï¼Œè™šæ‹Ÿæœºå°†åˆ†é…çš„å†…å­˜ç©ºé—´éƒ½åˆå§‹åŒ–ä¸ºé›¶å€¼(ä¸åŒ…æ‹¬å¯¹è±¡å¤´)ï¼Œå®žä¾‹å˜é‡ä¸èµ‹åˆå€¼ä¹Ÿèƒ½ä½¿ç”¨å¯¹åº”çš„é›¶å€¼ï¼›&lt;/li>
&lt;li>è®¾ç½®å¯¹è±¡å¤´ä¿¡æ¯ï¼Œæ¯”å¦‚å¯¹è±¡çš„å“ˆå¸Œå€¼ï¼Œgcåˆ†ä»£å¹´é¾„ç­‰ã€‚&lt;/li>
&lt;/ul>
&lt;p>ä»Žè™šæ‹Ÿæœºè§’åº¦ï¼Œåˆ°æ­¤ä¸€ä¸ªæ–°çš„å¯¹è±¡å·²ç»åˆ›å»ºå®Œæˆã€‚ä½†ä»ŽJavaè§†è§’ï¼Œå¯¹è±¡æ‰åˆšåˆšå¼€å§‹ï¼Œinitæž„é€ æ–¹æ³•è¿˜æ²¡æœ‰æ‰§è¡Œï¼Œæ‰€æœ‰å­—æ®µè¿˜æ˜¯é›¶ã€‚æ‰§è¡Œå®Œinitæ–¹æ³•ï¼ŒæŒ‰javaç¨‹åºçš„æž„é€ æ–¹æ³•è¿›è¡Œåˆå§‹åŒ–åŽï¼Œå¯¹è±¡ä¾¿æ˜¯å½»åº•åˆ›å»ºå®Œæˆã€‚&lt;/p>
&lt;p>æœªå®Œï¼Œå¾…ç»­&lt;/p></description></item><item><title>JVMç³»åˆ—4 ç±»çš„åŠ è½½</title><link>https://blog.itning.top/post/2020/04/10/jvm%E7%B3%BB%E5%88%974-%E7%B1%BB%E7%9A%84%E5%8A%A0%E8%BD%BD/</link><pubDate>Fri, 10 Apr 2020 11:33:02 +0800</pubDate><guid>https://blog.itning.top/post/2020/04/10/jvm%E7%B3%BB%E5%88%974-%E7%B1%BB%E7%9A%84%E5%8A%A0%E8%BD%BD/</guid><description>&lt;h2 id="ä¸€æ¦‚è¿°">ä¸€ã€æ¦‚è¿°&lt;/h2>
&lt;p>æœ¬æ–‡ä¸»è¦è®²è¿°è™šæ‹Ÿæœºå¦‚ä½•æŠŠ Classæ–‡ä»¶åŠ è½½åˆ°å†…å­˜çš„è¿‡ç¨‹ã€‚æ ¡éªŒã€è½¬æ¢è§£æžå’Œåˆå§‹åŒ–ï¼Œæœ€ç»ˆå½¢æˆå¯è¢«è™šæ‹Ÿæœºä½¿ç”¨çš„Javaç±»åž‹ï¼Œè¿™å°±æ˜¯è™šæ‹Ÿæœºçš„ç±»åŠ è½½æœºåˆ¶ã€‚ç±»åž‹çš„åŠ è½½ã€è¿žæŽ¥å’Œåˆå§‹åŒ–éƒ½æ˜¯åœ¨ç¨‹åºè¿è¡ŒæœŸé—´å®Œæˆï¼Œè¿™æ ·åšçš„ä¼˜åŠ£åŠ¿ï¼Œå¦‚ä¸‹ï¼š&lt;/p>
&lt;ul>
&lt;li>ä¼˜åŠ¿ï¼šæé«˜Javaç¨‹åºçš„çµæ´»æ€§ï¼ŒJavaåŠ¨æ€æ‰©å±•çš„è¯­è¨€ç‰¹æ€§å°±æ˜¯ä¾èµ–è¿è¡ŒæœŸåŠ¨æ€åŠ è½½å’ŒåŠ¨æ€è¿žæŽ¥ã€‚å½“é¢å‘æŽ¥å£çš„åº”ç”¨ç¨‹åºï¼Œå¯ä»¥ç­‰åˆ°è¿è¡Œæ—¶æŒ‡å®šå®žçŽ°ç±»ï¼›å¯ä»¥é€šè¿‡ç±»åŠ è½½å™¨ï¼Œè®©ç¨‹åºè¿è¡Œæ—¶åŠ è½½ä¸€ä¸ªäºŒè¿›åˆ¶æµä½œä¸ºç¨‹åºä¸€éƒ¨åˆ†ã€‚&lt;/li>
&lt;li>åŠ£åŠ¿ï¼šå¢žåŠ ç±»åŠ è½½çš„æ€§èƒ½å¼€é”€ã€‚&lt;/li>
&lt;/ul>
&lt;h2 id="äºŒ-ç±»åŠ è½½çš„ç”Ÿå‘½å‘¨æœŸ">äºŒã€ ç±»åŠ è½½çš„ç”Ÿå‘½å‘¨æœŸ&lt;/h2>
&lt;p>ç±»çš„ç”Ÿå‘½å‘¨æœŸæ˜¯æŒ‡æŠŠClasså­—èŠ‚ç ä»Žæ–‡ä»¶ä¸­åŠ è½½åˆ°å†…å­˜ï¼Œç›´åˆ°å¸è½½å†…å­˜æ•´ä¸ªè¿‡ç¨‹ï¼Œåˆ†ä¸º7ä¸ªæ­¥éª¤ã€‚&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/20200410113400.png" alt="jvm_class_loading_2">&lt;/p>
&lt;p>å›¾ä¸­ç”¨çº¢è‰²è™šçº¿æ¡†èµ·æ¥çš„3ä¸ªè¿‡ç¨‹åˆ†åˆ«ä¸ºéªŒè¯ã€å‡†å¤‡ã€è§£æžï¼Œå®ƒä»¬åˆç§°ä¸ºé“¾æŽ¥(Linking)è¿‡ç¨‹ã€‚å¦å¤–å›¾ä¸­ç´«è‰²çš„5é¡¹æ˜¯ä¸¥æ ¼æŒ‰ç…§æ‰§è¡Œã€‚è€Œè“è‰²çš„è§£æžé˜¶æ®µä¸ä¸€å®šè¦åœ¨åˆå§‹åŒ–ä¹‹å‰ï¼Œ ä¹Ÿå¯ä»¥åœ¨åˆå§‹åŒ–ä¹‹åŽå†è§£æžï¼Œè¿™ç§æƒ…å†µç§°ä¸ºåŠ¨æ€ç»‘å®šæˆ–æ™šæœŸç»‘å®šã€‚&lt;/p>
&lt;h3 id="1-åŠ è½½">1. åŠ è½½&lt;/h3>
&lt;p>è™šæ‹Ÿæœºåœ¨åŠ è½½é˜¶æ®µï¼Œä¸»è¦å·¥ä½œå¦‚ä¸‹ï¼š&lt;/p>
&lt;ol>
&lt;li>é€šè¿‡&lt;code>ç±»çš„å…¨é™å®šå&lt;/code>èŽ·å–è¯¥ç±»çš„äºŒè¿›åˆ¶å­—èŠ‚æµï¼›&lt;/li>
&lt;li>å°†å­—èŠ‚æµæ‰€ä»£è¡¨çš„é™æ€å­˜å‚¨ç»“æž„ è½¬åŒ–ä¸º æ–¹æ³•åŒºçš„è¿è¡Œæ—¶æ•°æ®ç»“æž„ï¼›&lt;/li>
&lt;li>ç”Ÿæˆä»£è¡¨è¯¥ç±»çš„Classå¯¹è±¡å¹¶å­˜æ”¾æ–¹æ³•åŒºï¼Œä½œä¸ºæ–¹æ³•åŒºè¯¥ç±»çš„å„ç§æ•°æ®çš„è®¿é—®å…¥å£ã€‚&lt;/li>
&lt;/ol>
&lt;p>å¯¹äºŽä¸Šè¿°å­—èŠ‚æµï¼Œå¯èƒ½æ¥æºï¼š&lt;/p>
&lt;ul>
&lt;li>åŽ‹ç¼©åŒ…ï¼Œä¾‹å¦‚jar/warç­‰æ ¼å¼;&lt;/li>
&lt;li>ç½‘ç»œï¼Œå…¸åž‹åœºæ™¯applet;&lt;/li>
&lt;li>è¿è¡Œæ—¶è®¡ç®—ç”Ÿæˆï¼Œä¾‹å¦‚åŠ¨æ€ä»£ç†æŠ€æœ¯ï¼Œåœ¨java.lang.reflect.Proxyä¸­ï¼Œåˆ©ç”¨ProxyGenerator.generateProxyClassæ¥ä¸ºç‰¹å®šæŽ¥å£ç”Ÿæˆå½¢å¦‚â€œ*$Proxyâ€çš„ä»£ç†ç±»çš„äºŒè¿›åˆ¶å­—èŠ‚æµï¼›&lt;/li>
&lt;li>æ•°æ®åº“ï¼Œä¾‹å¦‚ä¸­é—´ä»¶æœåŠ¡å™¨(SAP Netweaver)ã€‚&lt;/li>
&lt;/ul>
&lt;p>æ³¨ï¼šå¯¹äºŽæ•°ç»„ç±»ï¼Œä¸é€šè¿‡ç±»åŠ è½½å™¨åˆ›å»ºï¼Œè€Œæ˜¯ç”±è™šæ‹Ÿæœºç›´æŽ¥åˆ›å»ºçš„ã€‚å¦å¤–åŠ è½½é˜¶æ®µå°šæœªå®Œæˆï¼Œè¿žæŽ¥é˜¶æ®µå¯èƒ½å·²ç»å¼€å§‹ã€‚&lt;/p>
&lt;h3 id="2-éªŒè¯">2. éªŒè¯&lt;/h3>
&lt;p>éªŒè¯æ˜¯è¿žæŽ¥é˜¶æ®µ(Linking)çš„ç¬¬ä¸€æ­¥ï¼Œç›®çš„æ˜¯ä¸ºäº†&lt;strong>ç¡®ä¿Classæ–‡ä»¶çš„å­—èŠ‚æµç¬¦åˆè™šæ‹Ÿæœºè§„èŒƒ&lt;/strong>ï¼Œä¸ä¼šå±å®³è™šæ‹Ÿæœºè‡ªèº«å®‰å…¨ã€‚æ¯”å¦‚ï¼šè®¿é—®æ•°ç»„è¶Šç•Œé—®é¢˜ï¼Œå°†å¯¹è±¡è½¬åž‹ä¸ºæœªå®žçŽ°çš„ç±»åž‹ï¼Œè·³è½¬åˆ°ä¸å­˜åœ¨çš„ä»£ç åŒºç­‰æƒ…ç»ªç¼–è¯‘å™¨éƒ½ä¼šæ‹’ç»ç¼–è¯‘ï¼Œä¹Ÿå°±æ˜¯æ— æ³•ç”ŸæˆClassæ–‡ä»¶ï¼Œæ—¢ç„¶å¦‚æ­¤ï¼Œä¸ºä»€ä¹ˆè¿˜è¦éªŒè¯å‘¢ï¼ŸåŽŸå› æ˜¯Classæ–‡ä»¶ä¸ä¸€å®šéƒ½æ˜¯ç”±javaæºç ç¼–è¯‘è€Œæˆï¼Œå¯ä»¥æ˜¯ä»»ä½•é€”å¾„ï¼Œæ‰€ä»¥éªŒè¯è¿˜æ˜¯å¾ˆæœ‰å¿…è¦çš„ï¼Œå°½å¯èƒ½ä¿è¯ç³»ç»Ÿèƒ½æ‰¿å—ä½æ¶æ„ä»£ç æ”»å‡»ã€‚&lt;/p>
&lt;p>éªŒè¯ä¸»è¦å·¥ä½œåˆ†4é˜¶æ®µï¼š&lt;/p>
&lt;ol>
&lt;li>æ–‡ä»¶æ ¼å¼éªŒè¯ï¼šéªŒè¯æ˜¯å¦ç¬¦åˆClassæ–‡ä»¶æ ¼å¼è§„èŒƒï¼›&lt;/li>
&lt;li>å…ƒæ•°æ®éªŒè¯ï¼šéªŒè¯æ˜¯å¦ç¬¦åˆJavaè¯­è¨€è§„èŒƒï¼›&lt;/li>
&lt;li>å­—èŠ‚ç éªŒè¯ï¼šéªŒè¯æ•°æ®æµå’ŒæŽ§åˆ¶æµåˆ†æžï¼›&lt;/li>
&lt;li>ç¬¦å·å¼•ç”¨éªŒè¯ï¼šéªŒè¯ç¬¦å·å¼•ç”¨è½¬åŒ–ä¸ºç›´æŽ¥å¼•ç”¨ã€‚&lt;/li>
&lt;/ol>
&lt;h4 id="21-æ–‡ä»¶æ ¼å¼éªŒè¯">2.1 æ–‡ä»¶æ ¼å¼éªŒè¯&lt;/h4>
&lt;p>éªŒè¯ç‚¹æœ‰æ¯”å¦‚æ˜¯å¦é­”æ•°0xCAFEBABEå¼€å¤´ï¼›ä¸»ã€æ¬¡ç‰ˆæœ¬å·æ˜¯å¦èŒƒå›´ä¹‹å†…ï¼›å¸¸é‡æ± ä¸­å¸¸é‡tagæ ‡ç¤ºæ˜¯å¦æ­£ç¡®ç­‰ç­‰ï¼Œåªæœ‰é€šè¿‡å…¨éƒ¨çš„éªŒè¯ï¼Œæ‰èƒ½æŠŠå­—èŠ‚æµå­˜å‚¨åˆ°å†…å­˜çš„æ–¹æ³•åŒºã€‚&lt;/p>
&lt;h4 id="22-å…ƒæ•°æ®éªŒè¯">2.2 å…ƒæ•°æ®éªŒè¯&lt;/h4>
&lt;p>ç»è¿‡æ–‡ä»¶æ ¼å¼éªŒè¯ï¼Œå­—èŠ‚æµå·²åŠ è½½åˆ°æ–¹æ³•åŒºï¼Œè¿™ä¸ªé˜¶æ®µå·¥ä½œæ˜¯å¯¹æ–¹æ³•åŒºçš„å­—èŠ‚ç è¿›è¡Œè¯­ä¹‰åˆ†æžï¼Œä¿è¯ç¬¦åˆJavaè¯­è¨€è§„èŒƒã€‚ éªŒè¯ç‚¹æ¯”å¦‚ï¼š&lt;/p>
&lt;ul>
&lt;li>è¯¥ç±»æ˜¯å¦æœ‰çˆ¶ç±»(é™¤Objectä¹‹å¤–ï¼Œæ‰€æœ‰ç±»éƒ½åº”è¯¥æœ‰çˆ¶ç±»)&lt;/li>
&lt;li>è¯¥ç±»æ˜¯å¦ç»§æ‰¿ä¸å…è®¸ç»§æ‰¿çš„ç±»(finalç±»)&lt;/li>
&lt;li>éžæŠ½è±¡ç±»ï¼Œæ˜¯å¦éƒ½å®žçŽ°å…¶çˆ¶ç±»çš„æŠ½è±¡æ–¹æ³•æˆ–æŽ¥å£ä¸­çš„æ–¹æ³•&lt;/li>
&lt;li>ç±»çš„å­—æ®µã€æ–¹æ³•æ˜¯å¦ä¸Žçˆ¶ç±»çŸ›ç›¾(ä¾‹å¦‚è¦†ç›–çˆ¶ç±»çš„finalå­—æ®µï¼Œæˆ–é‡è½½ä¸ç¬¦åˆè§„åˆ™)&lt;/li>
&lt;li>â€¦ é™¤ä¸Šé¢åˆ—ä¸¾å¤–ï¼Œè¿˜æœ‰å¾ˆå¤šã€‚ç»è¿‡å…ƒæ•°æ®éªŒè¯ï¼Œèƒ½ç¡®ä¿å…ƒæ•°æ®éƒ½æ˜¯ç¬¦åˆè§„èŒƒã€‚&lt;/li>
&lt;/ul>
&lt;h4 id="23-å­—èŠ‚ç éªŒè¯">2.3 å­—èŠ‚ç éªŒè¯&lt;/h4>
&lt;p>æ¯”å¦‚æ“ä½œæ•°æ ˆçš„æ•°æ®ç±»åž‹å’ŒæŒ‡ä»¤ä»£ç åºåˆ—é…åˆï¼Œè·³è½¬æŒ‡ä»¤ä¸ä¼šè·³åˆ°æ–¹æ³•ä½“ä¹‹å¤–ç­‰ã€‚HotSpotè™šæ‹Ÿæœºæä¾› -XX:-UseSplitVerifieré€‰é¡¹æ¥å…³é—­è¿™é¡¹ä¼˜åŒ–ã€‚&lt;/p>
&lt;h4 id="24-ç¬¦å·å¼•ç”¨éªŒè¯">2.4 ç¬¦å·å¼•ç”¨éªŒè¯&lt;/h4>
&lt;p>æ ¡éªŒç‚¹ï¼š&lt;/p>
&lt;ul>
&lt;li>ç¬¦å·å¼•ç”¨ä¸­é€šè¿‡å­—ç¬¦ä¸²æè¿°çš„å…¨é™å®šåæ˜¯å¦èƒ½æ‰¾åˆ°å¯¹åº”çš„ç±»ï¼›&lt;/li>
&lt;li>åœ¨æŒ‡å®šç±»æ˜¯å¦å­˜åœ¨ç¬¦åˆæ–¹æ³•çš„å­—æ®µæè¿°ç¬¦ä»¥åŠç®€å•åç§°æ‰€æè¿°çš„æ–¹æ³•å’Œå­—æ®µï¼›&lt;/li>
&lt;li>ç¬¦å·å¼•ç”¨ä¸­çš„ç±»ã€å­—æ®µã€æ–¹æ³•çš„è®¿é—®æƒé™æ£€æŸ¥ã€‚&lt;/li>
&lt;li>â€¦ç­‰ç­‰&lt;/li>
&lt;/ul>
&lt;p>å¯¹äºŽè™šæ‹Ÿæœºçš„ç±»åŠ è½½æœºåˆ¶æ¥è¯´ï¼ŒéªŒè¯é˜¶æ®µéžå¸¸é‡è¦çš„ï¼Œä½†ä¸æ˜¯ä¸€å®šå¿…è¦çš„ã€‚å¦‚æžœæ‰€è¿è¡Œçš„å…¨éƒ¨ä»£ç (åŒ…å«è‡ªå·±ç¼–å†™ä»¥åŠç¬¬ä¸‰æ–¹åŒ…çš„ä»£ç )éƒ½å·²ç»è¢«åå¤ä½¿ç”¨å’ŒéªŒè¯è¿‡ï¼Œé‚£ä¹ˆå¯ä»¥è€ƒè™‘ä½¿ç”¨ -Xverify:noneå‚æ•°æ¥å…³é—­å¤§éƒ¨åˆ†çš„ç±»éªŒè¯æŽªæ–½ï¼Œä»¥ç¼©çŸ­è™šæ‹Ÿæœºç±»åŠ è½½çš„æ—¶é—´ã€‚&lt;/p>
&lt;h3 id="3-å‡†å¤‡">3. å‡†å¤‡&lt;/h3>
&lt;p>ä¸»è¦å·¥ä½œï¼š&lt;code>staticå˜é‡&lt;/code>åˆ†é…å†…å­˜ï¼Œå¹¶è®¾ç½®ç±»å˜é‡çš„åˆå§‹å€¼çš„é˜¶æ®µã€‚&lt;/p>
&lt;p>&lt;strong>(1). ç±»å˜é‡ï¼šèµ‹äºˆé›¶å€¼&lt;/strong>&lt;/p>
&lt;p>æ•°æ®ç±»åž‹çš„é›¶å€¼è¡¨ï¼Œå¦‚ä¸‹ï¼š&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>ç±»åž‹&lt;/th>
&lt;th>é›¶å€¼&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>int&lt;/td>
&lt;td>0&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>long&lt;/td>
&lt;td>0L&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>float&lt;/td>
&lt;td>0.0f&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>double&lt;/td>
&lt;td>0.0d&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>short&lt;/td>
&lt;td>(short)0&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>byte&lt;/td>
&lt;td>(byte)0&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>char&lt;/td>
&lt;td>â€˜\u0000â€™&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>boolean&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>reference&lt;/td>
&lt;td>null&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>ä¾‹å¦‚ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="kd">public&lt;/span> &lt;span class="kd">static&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">value&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">10&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨å‡†å¤‡é˜¶æ®µï¼Œä¼šä¸ºå˜é‡&lt;code>value&lt;/code>åœ¨æ–¹æ³•åŒºåˆ†é…å†…å­˜å¹¶åˆå§‹åŒ–é›¶å€¼ï¼Œå³&lt;code>value=0&lt;/code>ï¼Œè€Œéž10ã€‚ å› ä¸ºå¯¹äºŽvalueçš„èµ‹å€¼10ï¼Œæ˜¯ç”±&lt;code>putstatic&lt;/code>æŒ‡ä»¤å®Œæˆã€‚è¯¥æŒ‡ä»¤æ˜¯åœ¨javaç¨‹åºè¢«ç¼–è¯‘åŽï¼Œå­˜æ”¾åœ¨ç±»æž„é€ å™¨&lt;code>&amp;lt;clinit&amp;gt;&lt;/code>æ–¹æ³•ä¹‹ä¸­ã€‚æ‰€ä»¥ &lt;code>value=10&lt;/code>çš„æ“ä½œæ˜¯åœ¨ç±»åˆå§‹åŒ–çš„æ—¶å€™æ‰å‘ç”Ÿï¼Œæ•…ç±»å˜é‡åœ¨å‡†å¤‡æœŸ&lt;code>value=0&lt;/code>ã€‚&lt;/p>
&lt;p>&lt;strong>(2). å¸¸é‡ï¼šèµ‹äºˆçœŸå®žå€¼&lt;/strong>&lt;/p>
&lt;p>ä¾‹å¦‚:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="kd">public&lt;/span> &lt;span class="kd">static&lt;/span> &lt;span class="kd">final&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">value&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">10&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯¹äºŽå¸¸é‡ï¼Œå‡†å¤‡é˜¶æ®µä¼šæŠŠç±»å­—æ®µçš„å­—æ®µå±žæ€§è¡¨ä¸­çš„ConstantValueå±žæ€§æ‰€æŒ‡å®šçš„å€¼ï¼ˆæ­¤å¤„æ˜¯10ï¼‰ï¼Œèµ‹ç»™å¸¸é‡ï¼ˆ&lt;code>value&lt;/code>ï¼‰ï¼Œæ•…å¸¸é‡åœ¨å‡†å¤‡æœŸé—´&lt;code>value =10&lt;/code>;&lt;/p>
&lt;p>&lt;strong>(3). å®žä¾‹å˜é‡ï¼šä¸èµ‹ä»»ä½•å€¼&lt;/strong>&lt;/p>
&lt;p>è¯¥é˜¶æ®µä»…å¯¹ç±»å˜é‡è¿›è¡Œå†…å­˜åˆ†é…ï¼Œè€Œå¯¹äºŽå®žä¾‹å˜é‡(æˆ–è€…ç§°å‘¼ä¸ºæˆå‘˜å˜é‡)å¹¶ä¸ä¼šåˆ†é…å†…å­˜ï¼Œä¹Ÿå°±æ›´ä¸ç”¨æèµ‹å€¼çš„äº‹ã€‚å®žä¾‹å˜é‡çš„åˆå§‹åŒ–ï¼Œæ˜¯éšç€å¯¹è±¡å®žä¾‹åŒ–æ—¶åœ¨Javaå †ä¸Šåˆ†é…å†…å­˜è€Œè¿›è¡Œçš„ã€‚&lt;/p>
&lt;h3 id="4-è§£æž">4. è§£æž&lt;/h3>
&lt;p>ä¸»è¦å·¥ä½œï¼šè™šæ‹Ÿæœºå°†å¸¸é‡æ± å†…çš„ç¬¦å·å¼•ç”¨æ›¿æ¢ä¸ºç›´æŽ¥å¼•ç”¨çš„é˜¶æ®µã€‚&lt;/p>
&lt;p>å…ˆè§£é‡Šä¸€ä¸‹ç¬¦å·å¼•ç”¨å’Œç›´æŽ¥å¼•ç”¨çš„æ¦‚å¿µ&lt;/p>
&lt;ul>
&lt;li>&lt;strong>ç¬¦å·å¼•ç”¨(Symbolic Reference)&lt;/strong>ï¼šä»¥ä¸€ç»„ç¬¦å·æ¥æè¿°å¼•ç”¨ç›®æ ‡ï¼Œç¬¦å·å¯ä»¥æ˜¯ä»»æ„å½¢å¼çš„å­—é¢é‡ã€‚åªèƒ½è¦å‡†ç¡®å®šä½åˆ°ç›®æ ‡å³å¯ã€‚ç¬¦å·å¼•ç”¨ä¸Žè™šæ‹Ÿæœºçš„å†…å­˜å¸ƒå±€æ— å…³ï¼Œå¼•ç”¨çš„ç›®æ ‡ä¹Ÿä¸ä¸€å®šå­˜åœ¨å†…å­˜ã€‚è¿™æ ·å…¼å®¹æ€§å¼ºï¼Œå„ç§è™šæ‹Ÿæœºåªéœ€è¦èƒ½æŽ¥å—ç¬¦å·å¼•ç”¨å³å¯ã€‚&lt;/li>
&lt;li>&lt;strong>ç›´æŽ¥å¼•ç”¨(Direct Reference)&lt;/strong>ï¼šç›´æŽ¥å¼•ç”¨å°±æ˜¯æŒ‡å‘ç›®æ ‡çš„æŒ‡é’ˆã€ç›¸å¯¹åç§»é‡æˆ–è€…èƒ½é—´æŽ¥å®šä½åˆ°ç›®æ ‡çš„å¥æŸ„ï¼Œç›´æŽ¥å¼•ç”¨å’Œè™šæ‹Ÿæœºå†…å­˜å¸ƒå±€æ¯æ¯ç›¸å…³ã€‚ç›´æŽ¥å¼•ç”¨çš„ç›®æ ‡å¿…ç„¶å­˜åœ¨ä¸Žå†…å­˜ä¸­ã€‚&lt;/li>
&lt;/ul>
&lt;p>åŒä¸€ä¸ªç¬¦å·å¼•ç”¨ åœ¨ä¸åŒçš„è™šæ‹Ÿæœºä¸­è§£æžå‡ºæ¥çš„ç›´æŽ¥å¼•ç”¨åœ°å€ä¸€èˆ¬éƒ½æ˜¯ä¸ç›¸åŒçš„ï¼›åŒä¸€ä¸ªç¬¦å·å¼•ç”¨ï¼Œåœ¨åŒä¸€ä¸ªè™šæ‹Ÿæœºä¸‹ï¼Œå¤šæ¬¡è§£æžæ—¶ï¼Œä¼šå¯¹ç¬¬ä¸€æ¬¡è§£æžç»“æžœè¿›è¡Œç¼“å­˜ï¼ˆå¸¸é‡æ± è®°å½•ç›´æŽ¥å¼•ç”¨ï¼Œå¹¶æ ‡è®°å·²è§£æžçŠ¶æ€ï¼‰ï¼Œä»Žè€Œé¿å…å¤šæ¬¡è§£æžã€‚&lt;/p>
&lt;p>åªæœ‰é™æ€æ–¹æ³•ã€ç§æœ‰æ–¹æ³•ã€å®žä¾‹æž„é€ å™¨ä»¥åŠfinalæ–¹æ³•ï¼Œè¿™äº›éƒ½å¯ä»¥ç»Ÿç§°ä¸ºéžè™šæ–¹æ³•ã€‚ä¸å¯èƒ½é€šè¿‡ç»§æ‰¿æˆ–å…¶ä»–æ–¹æ³•è¦†å†™ï¼Œåœ¨ç±»åŠ è½½é˜¶æ®µå°±å¯ä»¥ç¡®å®šåªæœ‰ä¸€ä¸ªç‰ˆæœ¬ã€‚ä¸Žä¹‹ç›¸åçš„å°±æ˜¯è™šæ–¹æ³•ï¼Œå¯èƒ½æœ‰å¤šä¸ªç‰ˆæœ¬åªæœ‰çœŸæ­£è¿è¡Œçš„æ—¶å€™æ‰å¯ç¡®å®šçš„ã€‚&lt;/p>
&lt;p>ç‰¹æ®Šæƒ…å½¢ï¼Œå¯¹äºŽinvokedynamicæŒ‡ä»¤ï¼Œä¸ä¼šè¿›è¡Œç¼“å­˜è¿‡ç¨‹ï¼Œæ¯æ¬¡ä½¿ç”¨å‰éƒ½ä¼šè¿›è¡Œè§£æžã€‚&lt;/p>
&lt;h3 id="5-åˆå§‹åŒ–">5. åˆå§‹åŒ–&lt;/h3>
&lt;p>ä¸»å·¥ä½œï¼šä¸»è¦æ˜¯æ‰§è¡Œç±»æž„é€ å™¨æ–¹æ³•clinitã€‚(class initçš„ç®€ç§°)&lt;/p>
&lt;p>ç±»åˆå§‹åŒ–é˜¶æ®µæ˜¯ç±»åŠ è½½çš„æœ€åŽä¸€ä¸ªé˜¶æ®µã€‚åœ¨åˆå§‹åŒ–ä¹‹å‰çš„è¿‡ç¨‹ä¸­ï¼Œç”¨æˆ·å¯æŽ§çš„åœ°æ–¹åªæœ‰é€šè¿‡è‡ªå®šä¹‰ç±»åŠ è½½å™¨å‚ä¸Žï¼Œå…¶ä½™éƒ½æ˜¯è™šæ‹Ÿæœºä¸»å¯¼å’ŒæŽ§åˆ¶ã€‚&lt;/p>
&lt;p>åˆ°äº†åˆå§‹åŒ–ï¼Œæ‰å¼€å§‹çœŸæ­£çš„æ‰§è¡Œç±»ä¸­å®šä¹‰çš„Javaç¨‹åºä»£ç ã€‚&lt;/p>
&lt;p>&lt;strong>(1). ç±»çš„æž„é€ æ–¹æ³•&lt;/strong>&lt;/p>
&lt;p>ç±»æž„é€ æ–¹æ³•æ˜¯ç”±ç¼–è¯‘å™¨è‡ªåŠ¨æ”¶é›†æºæ–‡ä»¶ä¸­çš„&lt;code>ç±»å˜é‡èµ‹å€¼æ“ä½œ&lt;/code>å’Œ&lt;code>é™æ€è¯­å¥å—&lt;/code>åˆå¹¶è€Œæˆçš„ã€‚æ”¶é›†é¡ºåºæ˜¯ç”±è¯­å¥åœ¨æºæ–‡ä»¶çš„é¡ºåºæ‰€å†³å®šã€‚æ•…é™æ€è¯­å¥å—åªèƒ½è®¿é—®å®šä¹‰ä¹‹å‰çš„é™æ€å˜é‡ï¼›å¯¹äºŽå®šä¹‰ä¹‹åŽçš„å˜é‡å¯ä»¥èµ‹å€¼ï¼Œä½†ä¸èƒ½è®¿é—®ã€‚&lt;/p>
&lt;ol>
&lt;li>clinitæ–¹æ³•ä¸Žç±»çš„å®žä¾‹æž„é€ æ–¹æ³•initä¸åŒï¼Œ&lt;code>clinitæ–¹æ³•ä¸éœ€è¦æ˜¾å¼è°ƒç”¨çˆ¶ç±»æž„é€ å™¨&lt;/code>ï¼Œè™šæ‹Ÿæœºä¼šä¿è¯å­ç±»çš„clinitæ–¹æ³•æ‰§è¡Œä¹‹å‰ï¼Œçˆ¶ç±»çš„clinitæ–¹æ³•å·²ç»æ‰§è¡Œå®Œæ¯•ã€‚æ•…ç¬¬ä¸€ä¸ªè¢«æ‰§è¡Œçš„clinitæ–¹æ³•çš„ç±»è‚¯å®šæ˜¯java.lang.Object;&lt;/li>
&lt;li>&lt;code>clinitæ–¹æ³•ä¸æ˜¯å¿…éœ€çš„&lt;/code>ï¼Œå¯¹äºŽæ²¡æœ‰é™æ€å—å’Œç±»å˜é‡èµ‹å€¼æ“ä½œï¼Œç¼–è¯‘å™¨ä¸ä¼šç”Ÿæˆclinitæ–¹æ³•ã€‚&lt;/li>
&lt;li>&lt;code>çˆ¶ç±»é™æ€è¯­å¥å’Œé™æ€å˜é‡èµ‹å€¼ä¼˜å…ˆäºŽå­ç±»&lt;/code>.&lt;/li>
&lt;li>&lt;code>interfaceä¸­ä¸èƒ½æœ‰é™æ€è¯­å¥å—&lt;/code>ï¼Œä½†ä»å¯ä»¥æœ‰å˜é‡åˆå§‹åŒ–çš„èµ‹å€¼æ“ä½œï¼Œä¹Ÿå¯ä»¥ç”Ÿæˆclinitæ–¹æ³•ã€‚ä½†æŽ¥å£å’Œç±»çš„ä¸åŒæ˜¯ï¼Œæ‰§è¡ŒæŽ¥å£çš„clinitæ–¹æ³•ä¸éœ€è¦å…ˆæ‰§è¡Œçˆ¶æŽ¥å£çš„clinitæ–¹æ³•ã€‚åªæœ‰å½“çˆ¶æŽ¥å£ä¸­å®šä¹‰çš„å˜é‡ä½¿ç”¨æ—¶ï¼Œçˆ¶æŽ¥å£æ‰ä¼šåˆå§‹åŒ–ã€‚&lt;/li>
&lt;li>è™šæ‹Ÿæœºä¿è¯ç±»æž„é€ æ–¹æ³•å¯ä»¥å¤šçº¿ç¨‹æ­£ç¡®æ‰§è¡Œï¼Œä¼šåŠ é”ã€åŒæ­¥çš„æ“ä½œã€‚ ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œç±»æž„é€ æ–¹æ³•ï¼Œå…¶ä»–çº¿ç¨‹&lt;code>é˜»å¡žç­‰å¾…&lt;/code>ï¼Œå½“ç±»æž„é€ æ–¹æ³•æœ‰è€—æ—¶æ“ä½œï¼Œä¼šé€ æˆå¤šè¿›ç¨‹çš„é˜»å¡ž,å¾€å¾€æ¯”è¾ƒéšè”½ã€‚&lt;/li>
&lt;/ol>
&lt;p>&lt;strong>(2). ç±»åˆå§‹åŒ–æ—¶æœº&lt;/strong>&lt;/p>
&lt;p>è™šæ‹Ÿæœºè§„èŒƒä¸­ä¸¥æ ¼è§„å®šæœ‰ä¸”åªæœ‰5ç§æƒ…å†µä¸‹ï¼Œå½“ç±»æ²¡æœ‰åˆå§‹åŒ–æ—¶å¿…é¡»ç«‹å³å¯¹ç±»è¿›è¡Œåˆå§‹åŒ–ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>é‡åˆ°&lt;code>new&lt;/code>ã€&lt;code>getstatic&lt;/code>ã€&lt;code>putstatic&lt;/code>æˆ–&lt;code>invokeStatic&lt;/code>&lt;/p>
&lt;p>è¿™4æ¡å­—èŠ‚ç æŒ‡ä»¤æ—¶ã€‚å¸¸è§åœºæ™¯ï¼š&lt;/p>
&lt;ol>
&lt;li>ä½¿ç”¨newå…³é”®å­—å®žä¾‹åŒ–å¯¹è±¡æ—¶ï¼Œè§¦å‘&lt;code>new&lt;/code>ï¼›&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>è¯»å–ç±»å˜é‡æ—¶ï¼Œè§¦å‘&lt;code>getstatic&lt;/code>ï¼›ï¼ˆfinalå¸¸é‡é™¤å¤–ï¼‰
3. è®¾ç½®ç±»å˜é‡æ—¶ï¼Œè§¦å‘&lt;code>putstatic&lt;/code>ï¼›
4. è°ƒç”¨ç±»çš„é™æ€æ–¹æ³•æ—¶ï¼Œè§¦å‘&lt;code>invokeStatic&lt;/code>ï¼›&lt;/p>
&lt;/li>
&lt;li>
&lt;p>è™šæ‹Ÿæœºå¯åŠ¨æ—¶ï¼Œéœ€æŒ‡å®šä¸€ä¸ªè¦æ‰§è¡Œçš„ä¸»ç±»(å«æœ‰&lt;code>main()&lt;/code>çš„ç±»)ï¼Œè™šæ‹Ÿæœºä¼šå…ˆåˆå§‹åŒ–è¯¥ç±»ï¼›&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åˆå§‹åŒ–ä¸€ä¸ªç±»æ—¶ï¼Œå½“å…¶çˆ¶ç±»æ²¡æœ‰åˆå§‹åŒ–ï¼Œåˆ™éœ€è¦å…ˆè§¦å‘å…¶çˆ¶ç±»çš„åˆå§‹åŒ–ï¼›&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ä½¿ç”¨&lt;code>java.lang.reflect&lt;/code>åŒ…ä¸­çš„æ–¹æ³•å¯¹ç±»è¿›è¡Œåå°„è°ƒç”¨æ—¶ï¼›&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å½“&lt;code>java.lang.invoke.MethodHandle&lt;/code>å®žä¾‹æœ€åŽçš„è§£æžç»“æžœä¸º&lt;code>REF_getStatic&lt;/code>ã€&lt;code>REF_putStatic&lt;/code>ã€&lt;code>REF_invokeStatic&lt;/code>çš„æ–¹æ³•å¥æŸ„ï¼Œå¹¶ä¸”è¯¥å¥æŸ„æ‰€å¯¹åº”çš„ç±»æ²¡æœ‰è¿›è¡Œè¿‡åˆå§‹åŒ–ï¼›&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>å¯¹äºŽfinalå¸¸é‡ä¸èƒ½è§¦å‘ç±»åˆå§‹åŒ–ï¼Œæ˜¯ç”±äºŽåœ¨ç¼–è¯‘æ—¶å·²æŠŠæ•°æ®æ”¾å…¥å¸¸é‡æ± çš„é™æ€å­—æ®µï¼Œå½“è¯»å–ç±»çš„&lt;code>static final&lt;/code>å­—æ®µæ—¶ï¼Œå¹¶ä¸éœ€è¦åˆå§‹åŒ–ç±»ï¼Œè€Œæ˜¯ä»Žå¸¸é‡æ± ä¸­åŽ»èŽ·å–ç›¸åº”çš„æ•°æ®ã€‚ä¸Šè¿°çš„5ç§åœºæ™¯çš„è¡Œä¸ºéƒ½æ˜¯å¯¹ç±»çš„ä¸€ä¸ªä¸»åŠ¨å¼•ç”¨è¿‡ç¨‹ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰è¢«åŠ¨å¼•ç”¨å¹¶ä¸ä¼šè§¦å‘ç±»çš„åˆå§‹åŒ–è¿‡ç¨‹ã€‚&lt;/p></description></item><item><title>JVMç³»åˆ—3 å­—èŠ‚ç æŒ‡ä»¤</title><link>https://blog.itning.top/post/2020/04/10/jvm%E7%B3%BB%E5%88%973-%E5%AD%97%E8%8A%82%E7%A0%81%E6%8C%87%E4%BB%A4/</link><pubDate>Fri, 10 Apr 2020 11:21:18 +0800</pubDate><guid>https://blog.itning.top/post/2020/04/10/jvm%E7%B3%BB%E5%88%973-%E5%AD%97%E8%8A%82%E7%A0%81%E6%8C%87%E4%BB%A4/</guid><description>&lt;blockquote>
&lt;p>ä»‹ç»javaè™šæ‹Ÿæœºçš„æŒ‡ä»¤åŠŸèƒ½ï¼Œè‡³å°‘èƒ½é˜…è¯»javaä»£ç ç”Ÿæˆçš„å­—èŠ‚ç æŒ‡ä»¤å«ä¹‰&lt;/p>
&lt;/blockquote>
&lt;h1 id="ä¸€æ¦‚è¿°">ä¸€ã€æ¦‚è¿°&lt;/h1>
&lt;p>Javaè™šæ‹Ÿæœºé‡‡ç”¨åŸºäºŽæ ˆçš„æž¶æž„ï¼Œå…¶æŒ‡ä»¤ç”±æ“ä½œç å’Œæ“ä½œæ•°ç»„æˆã€‚&lt;/p>
&lt;ul>
&lt;li>æ“ä½œç ï¼šä¸€ä¸ªå­—èŠ‚é•¿åº¦(0~255)ï¼Œæ„å‘³ç€æŒ‡ä»¤é›†çš„æ“ä½œç ä¸ªæ•°ä¸èƒ½æ“ä½œ256æ¡ã€‚&lt;/li>
&lt;li>æ“ä½œæ•°ï¼šä¸€æ¡æŒ‡ä»¤å¯ä»¥æœ‰é›¶æˆ–è€…å¤šä¸ªæ“ä½œæ•°ï¼Œä¸”æ“ä½œæ•°å¯ä»¥æ˜¯1ä¸ªæˆ–è€…å¤šä¸ªå­—èŠ‚ã€‚ç¼–è¯‘åŽçš„ä»£ç æ²¡æœ‰é‡‡ç”¨æ“ä½œæ•°é•¿åº¦å¯¹é½æ–¹å¼ï¼Œæ¯”å¦‚16ä½æ— ç¬¦å·æ•´æ•°éœ€ä½¿ç”¨ä¸¤ä¸ªå­—èŠ‚å‚¨å­˜(å‡è®¾ä¸ºbyte1å’Œbyte2)ï¼Œé‚£ä¹ˆçœŸå®žå€¼æ˜¯ &lt;code>(byte1 &amp;lt;&amp;lt; 8) | byte2&lt;/code>ã€‚&lt;/li>
&lt;/ul>
&lt;p>æ”¾å¼ƒæ“ä½œæ•°å¯¹é½æ“ä½œæ•°å¯¹é½æ–¹æ¡ˆï¼š&lt;/p>
&lt;ul>
&lt;li>ä¼˜åŠ¿ï¼šå¯ä»¥çœç•¥å¾ˆå¤šå¡«å……å’Œé—´éš”ç¬¦å·ï¼Œä»Žè€Œå‡å°‘æ•°æ®é‡ï¼Œå…·æœ‰æ›´é«˜çš„ä¼ è¾“æ•ˆçŽ‡ï¼›Javaèµ·åˆå°±æ˜¯ä¸ºäº†é¢å‘ç½‘ç»œã€æ™ºèƒ½å®¶å…·è€Œè®¾è®¡çš„ï¼Œæ•…æ›´åŠ æ³¨é‡ä¼ è¾“æ•ˆçŽ‡ã€‚&lt;/li>
&lt;li>åŠ£åŠ¿ï¼šè¿è¡Œæ—¶ä»Žå­—èŠ‚ç é‡Œæž„å»ºå‡ºå…·ä½“æ•°æ®ç»“æž„ï¼Œéœ€è¦èŠ±è´¹éƒ¨åˆ†CPUæ—¶é—´ï¼Œä»Žè€Œå¯¼è‡´è§£é‡Šæ‰§è¡Œå­—èŠ‚ç ä¼šæŸå¤±éƒ¨åˆ†æ€§èƒ½ã€‚&lt;/li>
&lt;/ul>
&lt;h2 id="äºŒæŒ‡ä»¤">äºŒã€æŒ‡ä»¤&lt;/h2>
&lt;p>å¤§å¤šæ•°æŒ‡ä»¤åŒ…å«äº†å…¶æ“ä½œæ‰€å¯¹åº”çš„æ•°æ®ç±»åž‹ä¿¡æ¯ï¼Œæ¯”å¦‚iloadï¼Œè¡¨ç¤ºä»Žå±€éƒ¨å˜é‡è¡¨ä¸­åŠ è½½intåž‹çš„æ•°æ®åˆ°æ“ä½œæ•°æ ˆï¼›è€Œfloadè¡¨ç¤ºåŠ è½½floatåž‹æ•°æ®åˆ°æ“ä½œæ•°æ ˆã€‚ç”±äºŽæ“ä½œç é•¿åº¦åªæœ‰1Byteï¼Œå› æ­¤Javaè™šæ‹Ÿæœºçš„æŒ‡ä»¤é›†å¯¹äºŽç‰¹å®šæ“ä½œåªæä¾›æœ‰é™çš„ç±»åž‹ç›¸å…³æŒ‡ä»¤ï¼Œå¹¶éžä¸ºæ¯ä¸€ç§æ•°æ®ç±»åž‹éƒ½æœ‰ç›¸åº”çš„æ“ä½œæŒ‡ä»¤ã€‚å¿…è¦æ—¶ï¼Œæœ‰äº›æŒ‡ä»¤å¯ç”¨äºŽå°†ä¸æ”¯æŒçš„ç±»åž‹è½¬æ¢ä¸ºå¯è¢«æ”¯æŒçš„ç±»åž‹ã€‚&lt;/p>
&lt;p>å¯¹äºŽbyte,short,char,booleanç±»åž‹ï¼Œå¾€å¾€æ²¡æœ‰å•ç‹¬çš„æ“ä½œç ï¼Œé€šè¿‡ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æœŸæˆ–è€…è¿è¡ŒæœŸå°†å…¶æ‰©å±•ã€‚å¯¹äºŽbyte,shorté‡‡ç”¨å¸¦ç¬¦å·æ‰©å±•ï¼Œchart,booleané‡‡ç”¨é›¶ä½æ‰©å±•ã€‚ç›¸åº”çš„æ•°ç»„ä¹Ÿæ˜¯é‡‡ç”¨ç±»ä¼¼çš„æ‰©å±•æ–¹å¼è½¬æ¢ä¸ºintç±»åž‹çš„å­—èŠ‚ç æ¥å¤„ç†ã€‚ ä¸‹é¢åˆ†é—¨åˆ«ç±»æ¥ä»‹ç»Javaè™šæ‹ŸæœºæŒ‡ä»¤ï¼Œéƒ½ä»¥intç±»åž‹çš„æ•°æ®æ“ä½œä¸ºä¾‹ã€‚&lt;/p>
&lt;p>æ ˆæ˜¯æŒ‡æ“ä½œæ•°æ ˆ&lt;/p>
&lt;h3 id="21-æ ˆæ“ä½œç›¸å…³">2.1 æ ˆæ“ä½œç›¸å…³&lt;/h3>
&lt;h4 id="loadå’Œstore">loadå’Œstore&lt;/h4>
&lt;ul>
&lt;li>load å‘½ä»¤ï¼šç”¨äºŽå°†å±€éƒ¨å˜é‡è¡¨çš„æŒ‡å®šä½ç½®çš„ç›¸åº”ç±»åž‹å˜é‡åŠ è½½åˆ°æ ˆé¡¶ï¼›&lt;/li>
&lt;li>storeå‘½ä»¤ï¼šç”¨äºŽå°†æ ˆé¡¶çš„ç›¸åº”ç±»åž‹æ•°æ®ä¿å…¥å±€éƒ¨å˜é‡è¡¨çš„æŒ‡å®šä½ç½®ï¼›&lt;/li>
&lt;/ul>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>å˜é‡è¿›æ ˆ&lt;/th>
&lt;th>å«ä¹‰&lt;/th>
&lt;th>å˜é‡ä¿å­˜&lt;/th>
&lt;th>å«ä¹‰&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>iload&lt;/td>
&lt;td>ç¬¬1ä¸ªintåž‹å˜é‡è¿›æ ˆ&lt;/td>
&lt;td>istore&lt;/td>
&lt;td>æ ˆé¡¶intæ•°å€¼å­˜å…¥ç¬¬1å±€éƒ¨å˜é‡&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>iload_0&lt;/td>
&lt;td>ç¬¬1ä¸ªintåž‹å˜é‡è¿›æ ˆ&lt;/td>
&lt;td>istore_0&lt;/td>
&lt;td>æ ˆé¡¶intæ•°å€¼å­˜å…¥ç¬¬1å±€éƒ¨å˜é‡&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>iload_1&lt;/td>
&lt;td>ç¬¬2ä¸ªintåž‹å˜é‡è¿›æ ˆ&lt;/td>
&lt;td>istore_1&lt;/td>
&lt;td>æ ˆé¡¶intæ•°å€¼å­˜å…¥ç¬¬2å±€éƒ¨å˜é‡&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>iload_2&lt;/td>
&lt;td>ç¬¬3ä¸ªintåž‹å˜é‡è¿›æ ˆ&lt;/td>
&lt;td>istore_2&lt;/td>
&lt;td>æ ˆé¡¶intæ•°å€¼å­˜å…¥ç¬¬3å±€éƒ¨å˜é‡&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>iload_3&lt;/td>
&lt;td>ç¬¬4ä¸ªintåž‹å˜é‡è¿›æ ˆ&lt;/td>
&lt;td>istore_3&lt;/td>
&lt;td>æ ˆé¡¶intæ•°å€¼å­˜å…¥ç¬¬4å±€éƒ¨å˜é‡&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>lload&lt;/td>
&lt;td>ç¬¬1ä¸ªlongåž‹å˜é‡è¿›æ ˆ&lt;/td>
&lt;td>lstore&lt;/td>
&lt;td>æ ˆé¡¶longæ•°å€¼å­˜å…¥ç¬¬1å±€éƒ¨å˜é‡&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>fload&lt;/td>
&lt;td>ç¬¬1ä¸ªfloatåž‹å˜é‡è¿›æ ˆ&lt;/td>
&lt;td>fstore&lt;/td>
&lt;td>æ ˆé¡¶floatæ•°å€¼å­˜å…¥ç¬¬1å±€éƒ¨å˜é‡&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>dload&lt;/td>
&lt;td>ç¬¬1ä¸ªdoubleåž‹å˜é‡è¿›æ ˆ&lt;/td>
&lt;td>dstore&lt;/td>
&lt;td>æ ˆé¡¶doubleæ•°å€¼å­˜å…¥ç¬¬1å±€éƒ¨å˜é‡&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>aload&lt;/td>
&lt;td>ç¬¬1ä¸ªrefåž‹å˜é‡è¿›æ ˆ&lt;/td>
&lt;td>astore&lt;/td>
&lt;td>æ ˆé¡¶refå¯¹è±¡å­˜å…¥ç¬¬1å±€éƒ¨å˜é‡&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h4 id="constpushå’Œldc">constã€pushå’Œldc&lt;/h4>
&lt;ul>
&lt;li>constã€pushï¼šå°†ç›¸åº”ç±»åž‹çš„å¸¸é‡æ”¾å…¥æ ˆé¡¶&lt;/li>
&lt;li>ldc:åˆ™æ˜¯ä»Žå¸¸é‡æ± ä¸­å°†å¸¸é‡&lt;/li>
&lt;/ul>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>å¸¸é‡è¿›æ ˆ&lt;/th>
&lt;th>å«ä¹‰&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>aconst_null&lt;/td>
&lt;td>nullè¿›æ ˆ&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>iconst_m1&lt;/td>
&lt;td>intåž‹å¸¸é‡-1è¿›æ ˆ&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>iconst_0&lt;/td>
&lt;td>intåž‹å¸¸é‡0è¿›æ ˆ&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>iconst_1&lt;/td>
&lt;td>intåž‹å¸¸é‡1è¿›æ ˆ&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>iconst_2&lt;/td>
&lt;td>intåž‹å¸¸é‡2è¿›æ ˆ&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>iconst_3&lt;/td>
&lt;td>intåž‹å¸¸é‡3è¿›æ ˆ&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>iconst_4&lt;/td>
&lt;td>intåž‹å¸¸é‡4è¿›æ ˆ&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>iconst_5&lt;/td>
&lt;td>intåž‹å¸¸é‡5è¿›æ ˆ&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>lconst_0&lt;/td>
&lt;td>longåž‹å¸¸é‡0è¿›æ ˆ&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>fconst_0&lt;/td>
&lt;td>floatåž‹å¸¸é‡0è¿›æ ˆ&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>dconst_0&lt;/td>
&lt;td>doubleåž‹å¸¸é‡0è¿›æ ˆ&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>bipush&lt;/td>
&lt;td>byteåž‹å¸¸é‡è¿›æ ˆ&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>sipush&lt;/td>
&lt;td>shortåž‹å¸¸é‡è¿›æ ˆ&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>å¸¸é‡æ± æ“ä½œ&lt;/th>
&lt;th>å«ä¹‰&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>ldc&lt;/td>
&lt;td>intã€floatæˆ–Stringåž‹å¸¸é‡ä»Žå¸¸é‡æ± æŽ¨é€è‡³æ ˆé¡¶&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ldc_w&lt;/td>
&lt;td>intã€floatæˆ–Stringåž‹å¸¸é‡ä»Žå¸¸é‡æ± æŽ¨é€è‡³æ ˆé¡¶ï¼ˆå®½ç´¢å¼•ï¼‰&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ldc2_w&lt;/td>
&lt;td>longæˆ–doubleåž‹å¸¸é‡ä»Žå¸¸é‡æ± æŽ¨é€è‡³æ ˆé¡¶ï¼ˆå®½ç´¢å¼•ï¼‰&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h4 id="popå’Œdup">popå’Œdup&lt;/h4>
&lt;ul>
&lt;li>popç”¨äºŽæ ˆé¡¶æ•°å€¼å‡ºæ ˆæ“ä½œï¼›&lt;/li>
&lt;li>dupç”¨äºŽèµ‹å€¼æ ˆé¡¶çš„æŒ‡å®šä¸ªæ•°çš„æ•°å€¼ï¼Œå¹¶å°†å…¶åŽ‹å…¥æ ˆé¡¶æŒ‡å®šæ¬¡æ•°ï¼›&lt;/li>
&lt;/ul>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>æ ˆé¡¶æ“ä½œ&lt;/th>
&lt;th>å«ä¹‰&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>pop&lt;/td>
&lt;td>æ ˆé¡¶æ•°å€¼å‡ºæ ˆ(ä¸èƒ½æ˜¯long/double)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>pop2&lt;/td>
&lt;td>æ ˆé¡¶æ•°å€¼å‡ºæ ˆ(long/doubleåž‹1ä¸ªï¼Œå…¶ä»–2ä¸ª)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>dup&lt;/td>
&lt;td>å¤åˆ¶æ ˆé¡¶æ•°å€¼ï¼Œå¹¶åŽ‹å…¥æ ˆé¡¶&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>dup_x1&lt;/td>
&lt;td>å¤åˆ¶æ ˆé¡¶æ•°å€¼ï¼Œå¹¶åŽ‹å…¥æ ˆé¡¶2æ¬¡&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>dup_x2&lt;/td>
&lt;td>å¤åˆ¶æ ˆé¡¶æ•°å€¼ï¼Œå¹¶åŽ‹å…¥æ ˆé¡¶3æ¬¡&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>dup2&lt;/td>
&lt;td>å¤åˆ¶æ ˆé¡¶2ä¸ªæ•°å€¼ï¼Œå¹¶åŽ‹å…¥æ ˆé¡¶&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>dup2_x1&lt;/td>
&lt;td>å¤åˆ¶æ ˆé¡¶2ä¸ªæ•°å€¼ï¼Œå¹¶åŽ‹å…¥æ ˆé¡¶2æ¬¡&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>dup2_x2&lt;/td>
&lt;td>å¤åˆ¶æ ˆé¡¶2ä¸ªæ•°å€¼ï¼Œå¹¶åŽ‹å…¥æ ˆé¡¶3æ¬¡&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>swap&lt;/td>
&lt;td>æ ˆé¡¶çš„ä¸¤ä¸ªæ•°å€¼äº’æ¢ï¼Œä¸”ä¸èƒ½æ˜¯long/double&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;strong>æ³¨æ„ï¼šdup2&lt;/strong>å¯¹äºŽlongã€doubleç±»åž‹çš„æ•°æ®å°±æ˜¯ä¸€ä¸ªï¼Œå¯¹äºŽå…¶ä»–ç±»åž‹çš„æ•°æ®ï¼Œæ‰æ˜¯çœŸæ­£çš„ä¸¤ä¸ªï¼Œè¿™ä¸ªçš„2ä»£è¡¨çš„æ˜¯2ä¸ªslotçš„æ•°æ®ã€‚&lt;/p>
&lt;h3 id="22-å¯¹è±¡ç›¸å…³">2.2 å¯¹è±¡ç›¸å…³&lt;/h3>
&lt;h4 id="å­—æ®µè°ƒç”¨">å­—æ®µè°ƒç”¨&lt;/h4>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>å­—æ®µè°ƒç”¨&lt;/th>
&lt;th>å«ä¹‰&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>getstatic&lt;/td>
&lt;td>èŽ·å–ç±»çš„é™æ€å­—æ®µï¼Œå°†å…¶å€¼åŽ‹å…¥æ ˆé¡¶&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>putstatic&lt;/td>
&lt;td>ç»™ç±»çš„é™æ€å­—æ®µèµ‹å€¼&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>getfield&lt;/td>
&lt;td>èŽ·å–å¯¹è±¡çš„å­—æ®µï¼Œå°†å…¶å€¼åŽ‹å…¥æ ˆé¡¶&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>putfield&lt;/td>
&lt;td>ç»™å¯¹è±¡çš„å­—æ®µèµ‹å€¼&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h4 id="æ–¹æ³•è°ƒç”¨">æ–¹æ³•è°ƒç”¨&lt;/h4>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>æ–¹æ³•è°ƒç”¨&lt;/th>
&lt;th>ä½œç”¨&lt;/th>
&lt;th>è§£é‡Š&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>invokevirtual&lt;/td>
&lt;td>è°ƒç”¨å®žä¾‹æ–¹æ³•&lt;/td>
&lt;td>è™šæ–¹æ³•åˆ†æ´¾&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>invokestatic&lt;/td>
&lt;td>è°ƒç”¨ç±»æ–¹æ³•&lt;/td>
&lt;td>staticæ–¹æ³•&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>invokeinterface&lt;/td>
&lt;td>è°ƒç”¨æŽ¥å£æ–¹æ³•&lt;/td>
&lt;td>è¿è¡Œæ—¶æœç´¢åˆé€‚æ–¹æ³•è°ƒç”¨&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>invokespecial&lt;/td>
&lt;td>è°ƒç”¨ç‰¹æ®Šå®žä¾‹æ–¹æ³•&lt;/td>
&lt;td>åŒ…æ‹¬å®žä¾‹åˆå§‹åŒ–æ–¹æ³•ã€çˆ¶ç±»æ–¹æ³•&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>invokedynamic&lt;/td>
&lt;td>ç”±ç”¨æˆ·å¼•å¯¼æ–¹æ³•å†³å®š&lt;/td>
&lt;td>è¿è¡Œæ—¶åŠ¨æ€è§£æžå‡ºè°ƒç”¨ç‚¹é™å®šç¬¦æ‰€å¼•ç”¨æ–¹æ³•&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h4 id="æ–¹æ³•è¿”å›ž">æ–¹æ³•è¿”å›ž&lt;/h4>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>æ–¹æ³•è¿”å›ž&lt;/th>
&lt;th>å«ä¹‰&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>ireturn&lt;/td>
&lt;td>å½“å‰æ–¹æ³•è¿”å›žint&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>lreturn&lt;/td>
&lt;td>å½“å‰æ–¹æ³•è¿”å›žlong&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>freturn&lt;/td>
&lt;td>å½“å‰æ–¹æ³•è¿”å›žfloat&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>dreturn&lt;/td>
&lt;td>å½“å‰æ–¹æ³•è¿”å›ždouble&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>areturn&lt;/td>
&lt;td>å½“å‰æ–¹æ³•è¿”å›žref&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h4 id="å¯¹è±¡å’Œæ•°ç»„">å¯¹è±¡å’Œæ•°ç»„&lt;/h4>
&lt;ul>
&lt;li>åˆ›å»ºç±»å®žä¾‹ï¼š new&lt;/li>
&lt;li>åˆ›å»ºæ•°ç»„ï¼šnewarrayã€anewarrayã€multianewarray&lt;/li>
&lt;li>æ•°ç»„å…ƒç´  åŠ è½½åˆ° æ“ä½œæ•°æ ˆï¼šxaload (xå¯ä¸ºb,c,s,i,l,f,d,a)&lt;/li>
&lt;li>æ“ä½œæ•°æ ˆçš„å€¼ å­˜å‚¨åˆ°æ•°ç»„å…ƒç´ ï¼š xastore (xå¯ä¸ºb,c,s,i,l,f,d,a)&lt;/li>
&lt;li>æ•°ç»„é•¿åº¦ï¼šarraylength&lt;/li>
&lt;li>ç±»å®žä¾‹ç±»åž‹ï¼šinstanceofã€checkcast&lt;/li>
&lt;/ul>
&lt;h3 id="23-è¿ç®—æŒ‡ä»¤">2.3 è¿ç®—æŒ‡ä»¤&lt;/h3>
&lt;p>è¿ç®—æŒ‡ä»¤æ˜¯ç”¨äºŽå¯¹æ“ä½œæ•°æ ˆä¸Šçš„ä¸¤ä¸ªæ•°å€¼è¿›è¡ŒæŸç§è¿ç®—ï¼Œå¹¶æŠŠç»“æžœé‡æ–°å­˜å…¥åˆ°æ“ä½œæ ˆé¡¶ã€‚Javaè™šæ‹Ÿæœºåªæ”¯æŒæ•´åž‹å’Œæµ®ç‚¹åž‹ä¸¤ç±»æ•°æ®çš„è¿ç®—æŒ‡ä»¤ï¼Œæ‰€æœ‰æŒ‡ä»¤å¦‚ä¸‹ï¼š&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>è¿ç®—&lt;/th>
&lt;th>int&lt;/th>
&lt;th>long&lt;/th>
&lt;th>float&lt;/th>
&lt;th>double&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>åŠ æ³•&lt;/td>
&lt;td>iadd&lt;/td>
&lt;td>ladd&lt;/td>
&lt;td>fadd&lt;/td>
&lt;td>dadd&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>å‡æ³•&lt;/td>
&lt;td>isub&lt;/td>
&lt;td>lsub&lt;/td>
&lt;td>fsub&lt;/td>
&lt;td>dsub&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ä¹˜æ³•&lt;/td>
&lt;td>imul&lt;/td>
&lt;td>lmul&lt;/td>
&lt;td>fmul&lt;/td>
&lt;td>dmul&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>é™¤æ³•&lt;/td>
&lt;td>idiv&lt;/td>
&lt;td>ldiv&lt;/td>
&lt;td>fdiv&lt;/td>
&lt;td>ddiv&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>æ±‚ä½™&lt;/td>
&lt;td>irem&lt;/td>
&lt;td>lrem&lt;/td>
&lt;td>frem&lt;/td>
&lt;td>drem&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>å–å&lt;/td>
&lt;td>ineg&lt;/td>
&lt;td>lneg&lt;/td>
&lt;td>fneg&lt;/td>
&lt;td>dneg&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;strong>å…¶ä»–è¿ç®—ï¼š&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>ä½ç§»ï¼šishl,ishr,iushr,lshl,lshr,lushr&lt;/li>
&lt;li>æŒ‰ä½æˆ–ï¼š ior,lor&lt;/li>
&lt;li>æŒ‰ä½ä¸Žï¼š iand, land&lt;/li>
&lt;li>æŒ‰ä½å¼‚æˆ–ï¼š ixor, lxor&lt;/li>
&lt;li>è‡ªå¢žï¼šiin&lt;/li>
&lt;li>æ¯”è¾ƒï¼šdcmpg,dcmpl,fcmpg,fcmpl,lcmp&lt;/li>
&lt;/ul>
&lt;h3 id="24-ç±»åž‹è½¬æ¢">2.4 ç±»åž‹è½¬æ¢&lt;/h3>
&lt;p>ç±»åž‹è½¬æ¢ç”¨äºŽå°†ä¸¤ç§ä¸åŒç±»åž‹çš„æ•°å€¼è¿›è¡Œè½¬æ¢ã€‚&lt;/p>
&lt;p>(1) å¯¹äºŽå®½åŒ–ç±»åž‹è½¬æ¢(å°èŒƒå›´å‘å¤§èŒƒå›´è½¬æ¢)ï¼Œæ— éœ€æ˜¾å¼çš„è½¬æ¢æŒ‡ä»¤ï¼Œå¹¶ä¸”æ˜¯å®‰å…¨çš„æ“ä½œã€‚å„ç§èŒƒå›´ä»Žå°åˆ°å¤§ä¾æ¬¡æŽ’åºï¼š int, long, float, doubleã€‚&lt;/p>
&lt;p>(2)å¯¹äºŽçª„åŒ–ç±»åž‹è½¬æ¢ï¼Œå¿…é¡»æ˜¾å¼åœ°è°ƒç”¨ç±»åž‹è½¬æ¢æŒ‡ä»¤ï¼Œå¹¶ä¸”è¯¥è¿‡ç¨‹å¾ˆå¯èƒ½å¯¼è‡´ç²¾åº¦ä¸¢å¤±ã€‚è½¬æ¢è§„åˆ™ä¸­éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯å½“æµ®ç‚¹å€¼ä¸ºNaN, åˆ™è½¬æ¢ç»“æžœä¸ºintæˆ–longçš„0ã€‚è™½ç„¶çª„åŒ–è¿ç®—å¯èƒ½ä¼šå‘ç”Ÿä¸Š/ä¸‹é™æº¢å‡ºå’Œç²¾åº¦ä¸¢å¤±ç­‰æƒ…å†µï¼Œä½†è™šæ‹Ÿæœºè§„èŒƒæ˜Žç¡®è§„å®šçª„åŒ–è½¬æ¢Uä¸å¯èƒ½å¯¼è‡´è™šæ‹ŸæœºæŠ›å‡ºå¼‚å¸¸ã€‚&lt;/p>
&lt;p>ç±»åž‹è½¬æ¢æŒ‡ä»¤ï¼š&lt;code>i2b, i2c,f2i&lt;/code>ç­‰ç­‰ã€‚&lt;/p>
&lt;h3 id="25-æµç¨‹æŽ§åˆ¶">2.5 æµç¨‹æŽ§åˆ¶&lt;/h3>
&lt;p>æŽ§åˆ¶æŒ‡ä»¤æ˜¯æŒ‡æœ‰æ¡ä»¶æˆ–æ— æ¡ä»¶åœ°ä¿®æ”¹PCå¯„å­˜å™¨çš„å€¼ï¼Œä»Žè€Œè¾¾åˆ°æŽ§åˆ¶æµç¨‹çš„ç›®æ ‡&lt;/p>
&lt;ul>
&lt;li>æ¡ä»¶åˆ†æ”¯ï¼šifeqã€ifltã€ifnullã€ifnonnullç­‰&lt;/li>
&lt;li>å¤åˆåˆ†æ”¯ï¼štableswitchã€lookupswitch&lt;/li>
&lt;li>æ— æ¡ä»¶åˆ†æ”¯ï¼šgotoã€goto_wã€jsrã€jsr_wã€ret&lt;/li>
&lt;/ul>
&lt;h3 id="26-åŒæ­¥ä¸Žå¼‚å¸¸">2.6 åŒæ­¥ä¸Žå¼‚å¸¸&lt;/h3>
&lt;p>&lt;strong>å¼‚å¸¸ï¼š&lt;/strong>&lt;/p>
&lt;p>Javaç¨‹åºæ˜¾å¼æŠ›å‡ºå¼‚å¸¸ï¼š athrowæŒ‡ä»¤ã€‚åœ¨Javaè™šæ‹Ÿæœºä¸­ï¼Œå¤„ç†å¼‚å¸¸(catchè¯­å¥)ä¸æ˜¯ç”±å­—èŠ‚ç æŒ‡ä»¤æ¥å®žçŽ°ï¼Œè€Œæ˜¯é‡‡ç”¨å¼‚å¸¸è¡¨æ¥å®Œæˆã€‚&lt;/p>
&lt;p>&lt;strong>åŒæ­¥ï¼š&lt;/strong>&lt;/p>
&lt;p>æ–¹æ³•çº§çš„åŒæ­¥å’Œæ–¹æ³•å†…éƒ¨åˆ†ä»£ç çš„åŒæ­¥ï¼Œéƒ½æ˜¯ä¾é ç®¡ç¨‹(Monitor)æ¥å®žçŽ°çš„ã€‚&lt;/p>
&lt;p>Javaè¯­è¨€ä½¿ç”¨synchronizedè¯­å¥å—ï¼Œé‚£ä¹ˆJavaè™šæ‹Ÿæœºçš„æŒ‡ä»¤é›†ä¸­é€šè¿‡monitorenterå’Œmonitorexitä¸¤æ¡æŒ‡ä»¤æ¥å®Œæˆsynchronizedçš„åŠŸèƒ½ã€‚ä¸ºäº†ä¿è¯monitorenterå’ŒmonitorexitæŒ‡ä»¤ä¸€å®šèƒ½æˆå¯¹çš„è°ƒç”¨ï¼ˆä¸ç®¡æ–¹æ³•æ­£å¸¸ç»“æŸè¿˜æ˜¯å¼‚å¸¸ç»“æŸï¼‰ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªå¼‚å¸¸å¤„ç†å™¨ï¼Œè¯¥å¼‚å¸¸å¤„ç†å™¨çš„ä¸»è¦ç›®çš„æ˜¯ç”¨äºŽæ‰§è¡ŒmonitorexitæŒ‡ä»¤ã€‚&lt;/p>
&lt;h3 id="27-å°ç»“">2.7 å°ç»“&lt;/h3>
&lt;p>åœ¨åŸºäºŽå †æ ˆçš„çš„è™šæ‹Ÿæœºä¸­ï¼ŒæŒ‡ä»¤çš„ä¸»æˆ˜åœºä¾¿æ˜¯æ“ä½œæ•°æ ˆï¼Œé™¤äº†loadæ˜¯ä»Žå±€éƒ¨å˜é‡è¡¨åŠ è½½æ•°æ®åˆ°æ“ä½œæ•°æ ˆä»¥åŠstoreå‚¨å­˜æ•°æ®åˆ°å±€éƒ¨å˜é‡è¡¨ï¼Œå…¶ä½™æŒ‡ä»¤åŸºæœ¬éƒ½æ˜¯ç”¨äºŽæ“ä½œæ•°æ ˆçš„ã€‚&lt;/p></description></item><item><title>JVMç³»åˆ—2 Classæ–‡ä»¶æ ¼å¼</title><link>https://blog.itning.top/post/2020/04/10/jvm%E7%B3%BB%E5%88%972-class%E6%96%87%E4%BB%B6%E6%A0%BC%E5%BC%8F/</link><pubDate>Fri, 10 Apr 2020 11:02:39 +0800</pubDate><guid>https://blog.itning.top/post/2020/04/10/jvm%E7%B3%BB%E5%88%972-class%E6%96%87%E4%BB%B6%E6%A0%BC%E5%BC%8F/</guid><description>&lt;blockquote>
&lt;p>Javaç¼–è¯‘è¿‡ç¨‹æ˜¯å°†Javaæ–‡ä»¶è½¬æ¢ä¸ºClaaaæ–‡ä»¶ï¼Œä»Žè€Œå®žçŽ°äº†è·¨å¹³å°çš„åŠŸèƒ½ï¼Œ æœ¬æ–‡è¯¦ç»†è®²è¿°Classæ–‡ä»¶ç»“æž„ã€‚&lt;/p>
&lt;/blockquote>
&lt;h2 id="ä¸€-æ¦‚è¿°">ä¸€ã€ æ¦‚è¿°&lt;/h2>
&lt;p>è®¡ç®—æœºåªèƒ½è¯†åˆ«0å’Œ1ï¼Œæ‰€ä»¥å¤§å®¶ç¼–å†™çš„ç¨‹åºéƒ½éœ€è¦ç»è¿‡ç¼–è¯‘å™¨ï¼Œè½¬æ¢ä¸ºç”±0å’Œ1ç»„æˆçš„äºŒè¿›åˆ¶æœ¬åœ°æœºå™¨ç (Native Code)ã€‚éšç€è™šæ‹Ÿæœºçš„ä¸æ–­å‘å±•ï¼Œå¾ˆå¤šç¨‹åºè¯­è¨€å¼€å§‹é€‰æ‹©ä¸Žæ“ä½œç³»ç»Ÿå’Œæœºå™¨æŒ‡ä»¤é›†æ— å…³çš„æ ¼å¼ä½œä¸ºç¼–è¯‘åŽçš„å­˜å‚¨æ ¼å¼ï¼ˆClassæ–‡ä»¶ï¼‰ï¼Œä»Žè€Œå®žçŽ°â€Write Once, Run Anywhereâ€ã€‚ Javaè®¾è®¡ä¹‹åˆï¼Œè€ƒè™‘åŽæœŸèƒ½è®©Javaè™šæ‹Ÿæœºè¿è¡Œå…¶ä»–è¯­è¨€ï¼Œç›®å‰æœ‰è¶Šæ¥è¶Šå¤šçš„å…¶ä»–è¯­è¨€éƒ½å¯ä»¥ç›´æŽ¥éœ€è¦åœ¨Javaè™šæ‹Ÿæœºï¼Œè™šæ‹Ÿæœºåªèƒ½è¯†åˆ«Classæ–‡ä»¶ï¼Œè‡³äºŽæ˜¯ç”±ä½•ç§è¯­è¨€ç¼–è¯‘è€Œæ¥çš„ï¼Œè™šæ‹Ÿæœºå¹¶ä¸å…³å¿ƒï¼Œå¦‚ä¸‹å›¾ï¼š&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/20200410110400.png" alt="Jvm_class_loading_1">&lt;/p>
&lt;p>å¯ä»¥çœ‹å‡ºä¸ç®¡æ˜¯ç”±Javaè¯­è¨€ï¼Œè¿˜æ˜¯JRubyç­‰å…¶ä»–è¯­è¨€ï¼Œåªèƒ½èƒ½ç”Ÿæˆ.classå­—èŠ‚ç æ–‡ä»¶ï¼Œå°±éƒ½å¯ä»¥è¿è¡Œåœ¨Javaè™šæ‹Ÿæœºä¸Šã€‚æ•…å‘å¸ƒè§„èŒƒæ–‡æ¡£æ—¶ï¼ŒJavaè§„èŒƒæ‹†åˆ†ä¸ºJavaè¯­è¨€è§„èŒƒå’ŒJavaè™šæ‹Ÿæœºè§„èŒƒã€‚&lt;/p>
&lt;p>Javaè¯­æ³•ä¸­å®šä¹‰å„ç§å˜é‡ã€å…³é”®å­—ã€è¿ç®—ç¬¦çš„è¯­ä¹‰æœ€ç»ˆç”±å¤šä¸ªå­—èŠ‚ç å‘½ä»¤ç»„åˆè€Œæˆã€‚å› æ­¤å­—èŠ‚ç å‘½ä»¤æ‰€èƒ½æä¾›çš„è¯­ä¹‰æè¿°èƒ½åŠ›å¿…ç„¶è¦æ¯”Javaè¯­è¨€æœ¬èº«æ›´åŠ å¼ºå¤§ã€‚&lt;/p>
&lt;h2 id="äºŒclassç»„æˆ">äºŒã€Classç»„æˆ&lt;/h2>
&lt;p>Classæ–‡ä»¶æ˜¯ä¸€ç»„ä»¥8ä½å­—èŠ‚ä¸ºå•ä½çš„äºŒè¿›åˆ¶æµï¼Œä¸­é—´æ²¡æœ‰ä»»ä½•åˆ†éš”ç¬¦ï¼Œéžå¸¸ç´§å‡‘ã€‚ å½“éœ€è¦å ç”¨8ä½ä»¥ä¸Šçš„æ•°æ®æ—¶ï¼Œä¼šæŒ‰ç…§Big-endiané¡ºåºï¼Œé«˜ä½åœ¨å‰ï¼Œä½Žä½åœ¨åŽçš„æ–¹å¼æ¥åˆ†å‰²æˆå¤šä¸ª8ä½å­—èŠ‚æ¥å­˜å‚¨ã€‚&lt;/p>
&lt;ul>
&lt;li>ä»»ä½•ä¸€ä¸ªClassæ–‡ä»¶éƒ½å¯¹åº”ç€å”¯ä¸€çš„ç±»æˆ–æŽ¥å£çš„å®šä¹‰ä¿¡æ¯ï¼›&lt;/li>
&lt;li>ç±»æˆ–æŽ¥å£å¹¶ä¸ä¸€å®šå®šä¹‰åœ¨æ–‡ä»¶é‡Œï¼Œä¹Ÿå¯ä»¥é€šè¿‡ç±»åŠ è½½å™¨ç›´æŽ¥ç”Ÿæˆã€‚&lt;/li>
&lt;/ul>
&lt;p>Javaè™šæ‹Ÿæœºè§„èŒƒè§„å®šï¼šClassæ–‡ä»¶æ ¼å¼é‡‡ç”¨ä¼ªç»“æž„æ¥å­˜å‚¨æ•°æ®ï¼Œä¼ªç»“æž„ä¸­åªæœ‰æ— ç¬¦å·æ•°å’Œè¡¨è¿™ä¸¤ç§æ•°æ®ç±»åž‹ã€‚&lt;/p>
&lt;ul>
&lt;li>æ— ç¬¦å·æ•°ï¼šæ˜¯åŸºæœ¬æ•°æ®ç±»åž‹ï¼Œä»¥u1ã€u2ã€u4ã€u8åˆ†åˆ«ä»£è¡¨1ä¸ªå­—èŠ‚ã€2ä¸ªå­—èŠ‚ã€4ä¸ªå­—èŠ‚ã€8ä¸ªå­—èŠ‚çš„æ— ç¬¦å·æ•°ã€‚æ— ç¬¦å·æ•°ç”¨äºŽæè¿°æ•°å­—ã€ç´¢å¼•å¼•ç”¨ã€æ•°é‡å€¼ã€å­—ç¬¦ä¸²å€¼ã€‚&lt;/li>
&lt;li>è¡¨ï¼šæ˜¯ç”±å¤šä¸ªæ— ç¬¦å·æ•°æˆ–è€…å­è¡¨ä½œä¸ºæ•°æ®é¡¹æž„æˆçš„ç¬¦åˆæ•°æ®ç±»åž‹ã€‚ç”¨äºŽæè¿°æœ‰å±‚æ¬¡å…³ç³»çš„å¤åˆç»“æž„çš„æ•°æ®ã€‚æ•´ä¸ªClasså…¶å®žå°±æ˜¯ä¸€å¼ è¡¨ã€‚&lt;/li>
&lt;/ul>
&lt;h3 id="21-ç›¸å…³æ¦‚å¿µ">2.1 ç›¸å…³æ¦‚å¿µ&lt;/h3>
&lt;p>ä¸‹é¢ä»‹ç»å‡ ä¸ªæ¦‚è¿°ï¼š&lt;/p>
&lt;h4 id="å…¨é™å®šå">å…¨é™å®šå&lt;/h4>
&lt;p>æ˜¯æŒ‡æŠŠç±»å…¨åä¸­çš„â€œ.â€å·ï¼Œç”¨â€œ/â€å·æ›¿æ¢ï¼Œå¹¶ä¸”åœ¨æœ€åŽåŠ å…¥ä¸€ä¸ªâ€œï¼›â€åˆ†å·åŽç”Ÿæˆçš„åç§°ã€‚æ¯”å¦‚&lt;code>java.lang.Object&lt;/code>å¯¹åº”çš„å…¨é™å®šåä¸º&lt;code>java/lang/Object;&lt;/code> ã€‚&lt;/p>
&lt;h4 id="ç®€å•å">ç®€å•å&lt;/h4>
&lt;p>è¿™ä¸ªæ¯”è¾ƒå¥½ç†è§£ï¼Œå°±æ˜¯ç›´æŽ¥çš„æ–¹æ³•åæˆ–è€…å­—æ®µã€‚æ¯”å¦‚&lt;code>toString()&lt;/code>æ–¹æ³•ï¼Œä¸éœ€è¦åŒ…åä½œä¸ºå‰ç¼€äº†ã€‚&lt;/p>
&lt;h4 id="å­—æ®µæè¿°ç¬¦">å­—æ®µæè¿°ç¬¦&lt;/h4>
&lt;p>ç”¨äºŽæè¿°å­—æ®µçš„æ•°æ®ç±»åž‹ã€‚&lt;/p>
&lt;p>è§„åˆ™å¦‚ä¸‹ï¼š&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>åŸºæœ¬ç±»åž‹å­—ç¬¦&lt;/th>
&lt;th>å¯¹åº”ç±»åž‹&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>B&lt;/td>
&lt;td>byte&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>C&lt;/td>
&lt;td>char&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>D&lt;/td>
&lt;td>double&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>F&lt;/td>
&lt;td>float&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>I&lt;/td>
&lt;td>int&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>S&lt;/td>
&lt;td>short&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>J&lt;/td>
&lt;td>long&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Z&lt;/td>
&lt;td>boolean&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>V&lt;/td>
&lt;td>void&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>L+classname +;&lt;/td>
&lt;td>å¯¹è±¡ç±»åž‹&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>[&lt;/td>
&lt;td>æ•°ç»„ç±»åž‹&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>ä¾‹å¦‚ï¼š&lt;/p>
&lt;ul>
&lt;li>åŸºæœ¬ç±»åž‹ï¼šint ==&amp;gt; I&lt;/li>
&lt;li>å¯¹è±¡ç±»åž‹ï¼šString ==&amp;gt; Ljava/lang/String;&lt;/li>
&lt;li>æ•°ç»„ç±»åž‹ï¼šlong[] ==&amp;gt; [J&lt;/li>
&lt;/ul>
&lt;h4 id="æ–¹æ³•æè¿°ç¬¦">æ–¹æ³•æè¿°ç¬¦&lt;/h4>
&lt;p>ç”¨æ¥æè¿°æ–¹æ³•çš„å‚æ•°åˆ—è¡¨(æ•°é‡ã€ç±»åž‹ä»¥åŠé¡ºåº)å’Œè¿”å›žå€¼ã€‚&lt;/p>
&lt;p>æ ¼å¼ï¼š(å‚æ•°æè¿°ç¬¦åˆ—è¡¨)è¿”å›žå€¼æè¿°ç¬¦:
ä¾‹å¦‚ï¼š&lt;code>Object m(int i, double d, Thread t) {..}&lt;/code> ==&amp;gt; &lt;code>IDLjava/lang/Thread;)Ljava/lang/Object;&lt;/code>&lt;/p>
&lt;h3 id="22-classfileç»“æž„">2.2 ClassFileç»“æž„&lt;/h3>
&lt;p>ä¸€ä¸ªClassç±»æ–‡ä»¶æ˜¯ç”±ä¸€ä¸ªClassFileç»“æž„ç»„æˆï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-shell" data-lang="shell">ClassFile &lt;span class="o">{&lt;/span>
u4 magic&lt;span class="p">;&lt;/span> //é­”æ•°ï¼Œå›ºå®šå€¼0xCAFEBABE
u2 minor_version&lt;span class="p">;&lt;/span> //æ¬¡ç‰ˆæœ¬å·
u2 major_version&lt;span class="p">;&lt;/span> //ä¸»ç‰ˆæœ¬å·
u2 constant_pool_count&lt;span class="p">;&lt;/span> //å¸¸é‡çš„ä¸ªæ•°
cp_info constant_pool&lt;span class="o">[&lt;/span>constant_pool_count-1&lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> //å…·ä½“çš„å¸¸é‡æ± å†…å®¹
u2 access_flags&lt;span class="p">;&lt;/span> //è®¿é—®æ ‡è¯†
u2 this_class&lt;span class="p">;&lt;/span> //å½“å‰ç±»ç´¢å¼•
u2 super_class&lt;span class="p">;&lt;/span> //çˆ¶ç±»ç´¢å¼•
u2 interfaces_count&lt;span class="p">;&lt;/span> //æŽ¥å£çš„ä¸ªæ•°
u2 interfaces&lt;span class="o">[&lt;/span>interfaces_count&lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> //å…·ä½“çš„æŽ¥å£å†…å®¹
u2 fields_count&lt;span class="p">;&lt;/span> //å­—æ®µçš„ä¸ªæ•°
field_info fields&lt;span class="o">[&lt;/span>fields_count&lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> //å…·ä½“çš„å­—æ®µå†…å®¹
u2 methods_count&lt;span class="p">;&lt;/span> //æ–¹æ³•çš„ä¸ªæ•°
method_info methods&lt;span class="o">[&lt;/span>methods_count&lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> //å…·ä½“çš„æ–¹æ³•å†…å®¹
u2 attributes_count&lt;span class="p">;&lt;/span> //å±žæ€§çš„ä¸ªæ•°
attribute_info attributes&lt;span class="o">[&lt;/span>attributes_count&lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> //å…·ä½“çš„å±žæ€§å†…å®¹
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸€ä¸ªClassæ–‡ä»¶çš„å¤§å°ï¼š26 + cp_info[] + u2[] + field_info[] + method_info[] + attribute_info[]&lt;/p>
&lt;p>æŽ¥ä¸‹æ¥ï¼Œå°†å…·ä½“æ¥ä»‹ç»ClassFileæ–‡ä»¶çš„å„ä¸ªç»„æˆéƒ¨åˆ†ã€‚&lt;/p>
&lt;h2 id="ä¸‰classfileæ–‡ä»¶ç»„æˆ">ä¸‰ã€ClassFileæ–‡ä»¶ç»„æˆ&lt;/h2>
&lt;h3 id="31-é­”æ•°">3.1 é­”æ•°&lt;/h3>
&lt;p>æ¯ä¸ªClassæ–‡ä»¶å¤´4ä¸ªå­—èŠ‚ç§°ä¸ºé­”æ•°(Magic Number),ä½œç”¨æ˜¯ç”¨äºŽç¡®å®šè¿™ä¸ªClassæ–‡ä»¶æ˜¯å¦èƒ½è¢«è™šæ‹Ÿæœºæ‰€æŽ¥å—ï¼Œé­”æ•°å›ºå®šå€¼0xCAFEBABEã€‚è¿™æ˜¯èº«ä»½è¯†åˆ«ï¼Œæ¯”å¦‚jpegç­‰å›¾ç‰‡æ–‡ä»¶å¤´ä¹Ÿä¼šæœ‰é­”æ•°ã€‚&lt;/p>
&lt;h3 id="32-ç‰ˆæœ¬å·">3.2 ç‰ˆæœ¬å·&lt;/h3>
&lt;p>ç´§è·Ÿé­”æ•°ï¼Œä¹Ÿå ç”¨4ä¸ªå­—èŠ‚ã€‚ä»Žç¬¬5å­—èŠ‚åˆ°ç¬¬8å­—èŠ‚å­˜å‚¨çš„åˆ†åˆ«æ˜¯ æ¬¡ç‰ˆæœ¬å·ï¼Œä¸»ç‰ˆæœ¬å·ã€‚&lt;/p>
&lt;h3 id="33-å¸¸é‡æ± ">3.3 å¸¸é‡æ± &lt;/h3>
&lt;p>å¸¸é‡æ± æ˜¯Classæ–‡ä»¶ç©ºé—´æœ€å¤§çš„æ•°æ®é¡¹ä¹‹ä¸€ï¼Œé•¿åº¦ä¸å›ºå®šã€‚&lt;/p>
&lt;p>a. å¸¸é‡æ± é•¿åº¦ ç”¨u2ç±»åž‹ä»£è¡¨å¸¸é‡æ± å®¹é‡è®¡æ•°å€¼ï¼Œu2ç´§è·Ÿç‰ˆæœ¬å·ã€‚u2çš„å¤§å°ç­‰äºŽå¸¸é‡æ± çš„å¸¸é‡ä¸ªæ•°+1ã€‚å¯¹äºŽu2=0çš„ç‰¹æ®Šæƒ…å†µï¼Œä»£è¡¨æ²¡æœ‰ä½¿ç”¨å¸¸é‡æ± ã€‚&lt;/p>
&lt;p>b. å¸¸é‡æ± å†…å®¹,æ ¼å¼å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-shell" data-lang="shell">cp_info &lt;span class="o">{&lt;/span>
u1 tag&lt;span class="p">;&lt;/span>
u1 info&lt;span class="o">[]&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åŒ…æ‹¬ä¸¤ä¸ªç±»å¸¸é‡ï¼Œå­—é¢é‡å’Œç¬¦å·å¼•ç”¨ï¼š&lt;/p>
&lt;ul>
&lt;li>å­—é¢é‡ï¼šä¸ŽJavaè¯­è¨€å±‚é¢çš„å¸¸é‡æ¦‚å¿µç›¸è¿‘ï¼ŒåŒ…å«æ–‡æœ¬å­—ç¬¦ä¸²ã€å£°æ˜Žä¸ºfinalçš„å¸¸é‡å€¼ç­‰ã€‚&lt;/li>
&lt;li>ç¬¦å·å¼•ç”¨ï¼šç¼–è¯‘è¯­è¨€å±‚é¢çš„æ¦‚å¿µï¼ŒåŒ…æ‹¬ä»¥ä¸‹3ç±»ï¼š
&lt;ul>
&lt;li>ç±»å’ŒæŽ¥å£çš„å…¨é™å®šå&lt;/li>
&lt;li>å­—æ®µçš„åç§°å’Œæè¿°ç¬¦&lt;/li>
&lt;li>æ–¹æ³•çš„åç§°å’Œæè¿°ç¬¦&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>å¸¸é‡æ± ä¸­æ¯ä¸€é¡¹å¸¸é‡éƒ½æ˜¯ä¸€ä¸ªè¡¨ç»“æž„ï¼Œæ¯ä¸ªè¡¨çš„å¼€å§‹ç¬¬ä¸€ä½æ˜¯u1ç±»åž‹çš„æ ‡å¿—ä½tag, ä»£è¡¨å½“å‰è¿™ä¸ªå¸¸é‡çš„ç±»åž‹ã€‚åœ¨JDK 1.7.ä¸­å…±æœ‰14ç§ä¸åŒçš„è¡¨ç»“æž„çš„ç±»åž‹ï¼Œå¦‚ä¸‹ï¼š&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/20200410110900.png" alt="constant_type">&lt;/p>
&lt;p>Classæ–‡ä»¶éƒ½æ˜¯äºŒè¿›åˆ¶æ ¼å¼ï¼Œå¯é€šè¿‡&lt;code>Jdk/bin/javap.exe&lt;/code>å·¥å…·ï¼Œåˆ†æžClassæ–‡ä»¶å­—èŠ‚ç ã€‚å…³äºŽjavapç”¨æ³•ï¼Œå¯é€šè¿‡&lt;code>javap --help&lt;/code>æ¥æŸ¥çœ‹ã€‚&lt;/p>
&lt;h3 id="34-è®¿é—®æ ‡è¯†">3.4 è®¿é—®æ ‡è¯†&lt;/h3>
&lt;p>2ä¸ªå­—èŠ‚ä»£è¡¨ï¼Œæ ‡ç¤ºç”¨äºŽè¯†åˆ«ä¸€äº›ç±»æˆ–è€…æŽ¥å£å±‚æ¬¡çš„è®¿é—®ä¿¡æ¯.&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>æ ‡è¯†å&lt;/th>
&lt;th>æ ‡è¯†å€¼&lt;/th>
&lt;th>è§£é‡Š&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>ACC_PUBLIC&lt;/td>
&lt;td>0x0001&lt;/td>
&lt;td>å£°æ˜Žä¸ºpublic;å¯ä»¥ä»ŽåŒ…å¤–éƒ¨è®¿é—®&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ACC_FINAL&lt;/td>
&lt;td>0x0010&lt;/td>
&lt;td>è¢«å£°æ˜Žä¸ºfinal;ä¸å…è®¸å­ç±»ä¿®æ”¹&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ACC_SUPER&lt;/td>
&lt;td>0x0020&lt;/td>
&lt;td>å½“è¢«invokespecialæŒ‡ä»¤è°ƒç”¨æ—¶ï¼Œå°†ç‰¹æ®Šå¯¹å¾…çˆ¶ç±»çš„æ–¹æ³•&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ACC_INTERFACE&lt;/td>
&lt;td>0x0200&lt;/td>
&lt;td>æŽ¥å£æ ‡è¯†ç¬¦&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ACC_ABSTRACT&lt;/td>
&lt;td>0x0400&lt;/td>
&lt;td>å£°æ˜Žä¸ºabstract;ä¸èƒ½è¢«å®žä¾‹åŒ–&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ACC_SYNTHETIC&lt;/td>
&lt;td>0x1000&lt;/td>
&lt;td>å£°æ˜Žä¸ºsynthetic;ä¸å­˜åœ¨äºŽæºä»£ç ï¼Œç”±ç¼–è¯‘å™¨ç”Ÿæˆ&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ACC_ANNOTATION&lt;/td>
&lt;td>0x2000&lt;/td>
&lt;td>å£°æ˜Žä¸ºæ³¨é‡Šç±»åž‹&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ACC_ENUM&lt;/td>
&lt;td>0x4000&lt;/td>
&lt;td>å£°æ˜Žä¸ºæžšä¸¾ç±»åž‹&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="35-ç±»çˆ¶ç±»ç´¢å¼•">3.5 ç±»/çˆ¶ç±»ç´¢å¼•&lt;/h3>
&lt;p>å½“å‰ç±»ç´¢å¼•å’Œçˆ¶ç±»ç´¢å¼•å ç”¨å¤§å°éƒ½ä¸ºu2ç±»åž‹ï¼Œç”±äºŽä¸€ä¸ªç±»æ™ºèƒ½ç»§æ‰¿ä¸€ä¸ªçˆ¶ç±»ï¼Œæ•…çˆ¶ç±»ç´¢å¼•åªæœ‰ä¸€ä¸ªã€‚é™¤äº†java.lang.Objectå¯¹è±¡çš„çˆ¶ç±»ç´¢å¼•ä¸º0ï¼Œå…¶ä»–æ‰€æœ‰ç±»éƒ½æœ‰çˆ¶ç±»ã€‚&lt;/p>
&lt;h3 id="36-æŽ¥å£ç´¢å¼•">3.6 æŽ¥å£ç´¢å¼•&lt;/h3>
&lt;p>ä¸€ä¸ªç±»å¯ä»¥å®žçŽ°å¤šä¸ªæŽ¥å£ï¼Œæ•…åˆ©ç”¨interfaces_countæ¥è®°å½•è¯¥ç±»æ‰€å®žçŽ°çš„æŽ¥å£ä¸ªæ•°ï¼Œinterfaces[interfaces_count]æ¥è®°å½•æ‰€æœ‰å®žçŽ°çš„æŽ¥å£å†…å®¹ã€‚&lt;/p>
&lt;h3 id="37-å­—æ®µè¡¨">3.7 å­—æ®µè¡¨&lt;/h3>
&lt;p>å­—æ®µè¡¨ç”¨äºŽæè¿°ç±»æˆ–æŽ¥å£ä¸­å£°æ˜Žçš„å˜é‡ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-shell" data-lang="shell">field_info &lt;span class="o">{&lt;/span>
u2 access_flags&lt;span class="p">;&lt;/span> //è®¿é—®æ ‡è¯†
u2 name_index&lt;span class="p">;&lt;/span> //åç§°ç´¢å¼•
u2 descriptor_index&lt;span class="p">;&lt;/span> //æè¿°ç¬¦ç´¢å¼•
u2 attributes_count&lt;span class="p">;&lt;/span> //å±žæ€§ä¸ªæ•°
attribute_info attributes&lt;span class="o">[&lt;/span>attributes_count&lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> //å±žæ€§è¡¨çš„å…·ä½“å†…å®¹
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å­—æ®µè®¿é—®æ ‡è¯†å¦‚ä¸‹ï¼š(è¡¨ä¸­åŠ ç²—é¡¹æ˜¯å­—æ®µç‹¬æœ‰çš„)&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>æ ‡è¯†å&lt;/th>
&lt;th>æ ‡è¯†å€¼&lt;/th>
&lt;th>è§£é‡Š&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>ACC_PUBLIC&lt;/td>
&lt;td>0x0001&lt;/td>
&lt;td>å£°æ˜Žä¸º public; å¯ä»¥ä»ŽåŒ…å¤–éƒ¨è®¿é—®&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ACC_PRIVATE&lt;/td>
&lt;td>0x0002&lt;/td>
&lt;td>å£°æ˜Žä¸º private; åªæœ‰å®šä¹‰çš„ç±»å¯ä»¥è®¿é—®&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ACC_PROTECTED&lt;/td>
&lt;td>0x0004&lt;/td>
&lt;td>å£°æ˜Žä¸º protected;åªæœ‰å­ç±»å’Œç›¸åŒpackageçš„ç±»å¯è®¿é—®&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ACC_STATIC&lt;/td>
&lt;td>0x0008&lt;/td>
&lt;td>å£°æ˜Žä¸º staticï¼›å±žäºŽç±»å˜é‡&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ACC_FINAL&lt;/td>
&lt;td>0x0010&lt;/td>
&lt;td>å£°æ˜Žä¸º final; å¯¹è±¡æž„é€ åŽæ— æ³•ç›´æŽ¥ä¿®æ”¹å€¼&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>ACC_VOLATILE&lt;/strong>&lt;/td>
&lt;td>0x0040&lt;/td>
&lt;td>å£°æ˜Žä¸º volatile; ä¸ä¼šè¢«ç¼“å­˜,ç›´æŽ¥åˆ·æ–°åˆ°ä¸»å±å¹•&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>ACC_TRANSIENT&lt;/strong>&lt;/td>
&lt;td>0x0080&lt;/td>
&lt;td>å£°æ˜Žä¸º transient; ä¸èƒ½è¢«åºåˆ—åŒ–&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ACC_SYNTHETIC&lt;/td>
&lt;td>0x1000&lt;/td>
&lt;td>å£°æ˜Žä¸º synthetic; ä¸å­˜åœ¨äºŽæºä»£ç ï¼Œç”±ç¼–è¯‘å™¨ç”Ÿæˆ&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ACC_ENUM&lt;/td>
&lt;td>0x4000&lt;/td>
&lt;td>å£°æ˜Žä¸ºenum&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>Javaè¯­æ³•ä¸­ï¼ŒæŽ¥å£ä¸­çš„å­—æ®µé»˜è®¤åŒ…å«ACC_PUBLIC, ACC_STATIC, ACC_FINALæ ‡è¯†ã€‚ACC_FINALï¼ŒACC_VOLATILEä¸èƒ½åŒæ—¶é€‰æ‹©ç­‰è§„åˆ™ã€‚&lt;/p>
&lt;p>ç´§è·Ÿå…¶åŽçš„name_indexå’Œdescriptor_indexæ˜¯å¯¹å¸¸é‡æ± çš„å¼•ç”¨ï¼Œåˆ†åˆ«ä»£è¡¨ç€å­—æ®µçš„ç®€å•åå’Œæ–¹æ³•çš„æè¿°ç¬¦ã€‚&lt;/p>
&lt;h3 id="38-æ–¹æ³•è¡¨">3.8 æ–¹æ³•è¡¨&lt;/h3>
&lt;p>æ–¹æ³•è¡¨ç”¨äºŽæè¿°ç±»æˆ–æŽ¥å£ä¸­å£°æ˜Žçš„æ–¹æ³•ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-shell" data-lang="shell">method_info &lt;span class="o">{&lt;/span>
u2 access_flags&lt;span class="p">;&lt;/span> //è®¿é—®æ ‡è¯†
u2 name_index&lt;span class="p">;&lt;/span> //åç§°ç´¢å¼•
u2 descriptor_index&lt;span class="p">;&lt;/span> //æè¿°ç¬¦ç´¢å¼•
u2 attributes_count&lt;span class="p">;&lt;/span> //å±žæ€§ä¸ªæ•°
attribute_info attributes&lt;span class="o">[&lt;/span>attributes_count&lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> //å±žæ€§è¡¨çš„å…·ä½“å†…å®¹
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ–¹æ³•è®¿é—®æ ‡è¯†å¦‚ä¸‹ï¼š(è¡¨ä¸­åŠ ç²—é¡¹æ˜¯æ–¹æ³•ç‹¬æœ‰çš„)&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>æ ‡è¯†å&lt;/th>
&lt;th>æ ‡è¯†å€¼&lt;/th>
&lt;th>è§£é‡Š&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>ACC_PUBLIC&lt;/td>
&lt;td>0x0001&lt;/td>
&lt;td>å£°æ˜Žä¸º public; å¯ä»¥ä»ŽåŒ…å¤–éƒ¨è®¿é—®&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ACC_PRIVATE&lt;/td>
&lt;td>0x0002&lt;/td>
&lt;td>å£°æ˜Žä¸º private; åªæœ‰å®šä¹‰çš„ç±»å¯ä»¥è®¿é—®&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ACC_PROTECTED&lt;/td>
&lt;td>0x0004&lt;/td>
&lt;td>å£°æ˜Žä¸º protected;åªæœ‰å­ç±»å’Œç›¸åŒpackageçš„ç±»å¯è®¿é—®&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ACC_STATIC&lt;/td>
&lt;td>0x0008&lt;/td>
&lt;td>å£°æ˜Žä¸º staticï¼›å±žäºŽç±»å˜é‡&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ACC_FINAL&lt;/td>
&lt;td>0x0010&lt;/td>
&lt;td>å£°æ˜Žä¸º final; ä¸èƒ½è¢«è¦†å†™&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>ACC_SYNCHRONIZED&lt;/strong>&lt;/td>
&lt;td>0x0020&lt;/td>
&lt;td>å£°æ˜Žä¸º synchronized; åŒæ­¥é”åŒ…è£¹&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ACC_BRIDGE&lt;/td>
&lt;td>0x0040&lt;/td>
&lt;td>æ¡¥æŽ¥æ–¹æ³•, ç”±ç¼–è¯‘å™¨ç”Ÿæˆ&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>ACC_VARARGS&lt;/strong>&lt;/td>
&lt;td>0x0080&lt;/td>
&lt;td>å£°æ˜Žä¸º æŽ¥æ”¶ä¸å®šé•¿å‚æ•°&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>ACC_NATIVE&lt;/strong>&lt;/td>
&lt;td>0x0100&lt;/td>
&lt;td>å£°æ˜Žä¸º native; ç”±éžJavaè¯­è¨€æ¥å®žçŽ°&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>ACC_ABSTRACT&lt;/strong>&lt;/td>
&lt;td>0x0400&lt;/td>
&lt;td>å£°æ˜Žä¸º abstract; æ²¡æœ‰æä¾›å®žçŽ°&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>ACC_STRICT&lt;/strong>&lt;/td>
&lt;td>0x0800&lt;/td>
&lt;td>å£°æ˜Žä¸º strictfp; æµ®ç‚¹æ¨¡å¼æ˜¯FP-strict&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ACC_SYNTHETIC&lt;/td>
&lt;td>0x1000&lt;/td>
&lt;td>å£°æ˜Žä¸º synthetic; ä¸å­˜åœ¨äºŽæºä»£ç ï¼Œç”±ç¼–è¯‘å™¨ç”Ÿæˆ&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;ul>
&lt;li>å¯¹äºŽæ–¹æ³•é‡Œçš„Javaä»£ç ï¼Œè¿›è¿‡ç¼–è¯‘å™¨ç¼–è¯‘æˆå­—èŠ‚ç æŒ‡ä»¤åŽï¼Œå­˜æ”¾åœ¨æ–¹æ³•å±žæ€§è¡¨é›†åˆä¸­â€œcodeâ€çš„å±žæ€§å†…ã€‚&lt;/li>
&lt;li>å½“å­ç±»æ²¡æœ‰è¦†å†™çˆ¶ç±»æ–¹æ³•ï¼Œåˆ™æ–¹æ³•é›†åˆä¸­ä¸ä¼šå‡ºçŽ°çˆ¶ç±»çš„æ–¹æ³•ä¿¡æ¯ã€‚&lt;/li>
&lt;li>Javaè¯­è¨€ä¸­é‡è½½æ–¹æ³•ï¼Œå¿…é¡»ä¸ŽåŽŸæ–¹æ³•åŒåï¼Œä¸”ç‰¹å¾ç­¾åä¸åŒã€‚ç‰¹å¾ç­¾åæ˜¯æŒ‡æ–¹æ³•ä¸­å„ä¸ªå‚æ•°åœ¨å¸¸é‡æ± çš„å­—æ®µç¬¦å·å¼•ç”¨çš„é›†åˆï¼Œä¸åŒ…æ‹¬è¿”å›žå€¼ã€‚å½“æ—¶Classæ–‡ä»¶æ ¼å¼ä¸­ï¼Œç‰¹å¾ç­¾åèŒƒå›´æ›´å¹¿ï¼Œå…è®¸æ–¹æ³•åå’Œç‰¹å¾ç­¾åéƒ½ç›¸åŒï¼Œä½†è¿”å›žå€¼ä¸åŒçš„æ–¹æ³•ï¼Œåˆæ³•åœ°å…±å­˜å­å•ŠåŒä¸€ä¸ªClassæ–‡ä»¶ä¸­&lt;/li>
&lt;/ul>
&lt;h3 id="39-å±žæ€§è¡¨">3.9 å±žæ€§è¡¨&lt;/h3>
&lt;p>å±žæ€§è¡¨æ ¼å¼ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-shell" data-lang="shell">attribute_info &lt;span class="o">{&lt;/span>
u2 attribute_name_index&lt;span class="p">;&lt;/span> //å±žæ€§åç´¢å¼•
u4 attribute_length&lt;span class="p">;&lt;/span> //å±žæ€§é•¿åº¦
u1 info&lt;span class="o">[&lt;/span>attribute_length&lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> //å±žæ€§çš„å…·ä½“å†…å®¹
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å±žæ€§è¡¨çš„é™åˆ¶ç›¸å¯¹å®½æ¾ï¼Œä¸éœ€è¦å„ä¸ªå±žæ€§è¡¨æœ‰ä¸¥æ ¼çš„é¡ºåºï¼Œåªæœ‰ä¸ä¸Žå·²æœ‰çš„å±žæ€§åé‡å¤ï¼Œä»»ä½•è‡ªå®šä¹‰çš„ç¼–è¯‘å™¨éƒ½å¯ä»¥å‘å±žæ€§è¡¨ä¸­å†™å…¥è‡ªå®šä¹‰çš„å±žæ€§ä¿¡æ¯ï¼ŒJavaè™šæ‹Ÿæœºè¿è¡Œæ—¶ä¼šå¿½ç•¥æŽ‰æ— æ³•è¯†åˆ«çš„å±žæ€§ã€‚ å…³äºŽè™šæ‹Ÿæœºè§„èŒƒä¸­é¢„å®šä¹‰çš„å±žæ€§ï¼Œè¿™é‡Œä¸å±•å¼€è®²äº†ï¼Œåˆ—ä¸¾å‡ ä¸ªå¸¸ç”¨çš„ã€‚&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>å±žæ€§å&lt;/th>
&lt;th>ä½¿ç”¨ä½ç½®&lt;/th>
&lt;th>è§£é‡Š&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Code&lt;/td>
&lt;td>æ–¹æ³•è¡¨&lt;/td>
&lt;td>æ–¹æ³•ä½“çš„å†…å®¹&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ConstantValue&lt;/td>
&lt;td>å­—æ®µè¡¨&lt;/td>
&lt;td>finalå…³é”®å­—å®šä¹‰çš„å¸¸é‡å€¼&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Deprecated&lt;/td>
&lt;td>ç±»ã€æ–¹æ³•è¡¨ã€å­—æ®µè¡¨&lt;/td>
&lt;td>å£°æ˜Žä¸ºdeprecated&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>InnerClasses&lt;/td>
&lt;td>ç±»æ–‡ä»¶&lt;/td>
&lt;td>å†…éƒ¨ç±»çš„åˆ—è¡¨&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>LineNumberTable&lt;/td>
&lt;td>Codeå±žæ€§&lt;/td>
&lt;td>Javaæºç çš„è¡Œå·ä¸Žå­—èŠ‚ç æŒ‡ä»¤çš„å¯¹åº”å…³ç³»&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>LocalVariableTable&lt;/td>
&lt;td>Codeå±žæ€§&lt;/td>
&lt;td>æ–¹æ³•çš„å±€éƒ¨å˜é‡æè¿°&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Signature&lt;/td>
&lt;td>ç±»ã€æ–¹æ³•è¡¨ã€å­—æ®µè¡¨&lt;/td>
&lt;td>ç”¨äºŽæ”¯æŒæ³›åž‹çš„æ–¹æ³•ç­¾åï¼Œç”±äºŽJavaçš„æ³›åž‹é‡‡ç”¨æ“¦é™¤æ³•ï¼Œé¿å…ç±»åž‹ä¿¡æ¯è¢«æ“¦é™¤åŽå¯¼è‡´ç­¾åæ··ä¹±ï¼ŒSignatureè®°å½•ç›¸å…³ä¿¡æ¯&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;strong>Codeå±žæ€§&lt;/strong> javaç¨‹åºæ–¹æ³•ä½“ä¸­çš„ä»£ç ï¼Œç»ç¼–è¯‘åŽå¾—åˆ°çš„å­—èŠ‚ç æŒ‡ä»¤å­˜å‚¨åœ¨Codeå±žæ€§å†…ï¼ŒCodeå±žæ€§ä½äºŽæ–¹æ³•è¡¨çš„å±žæ€§é›†åˆä¸­ã€‚ä½†ä¸Žnativeæˆ–è€…abstractçš„æ–¹æ³•åˆ™ä¸ä¼šå­˜åœ¨Codeå±žæ€§ä¸­ã€‚&lt;/p>
&lt;p>Codeå±žæ€§çš„æ ¼å¼å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-shell" data-lang="shell">Code_attribute &lt;span class="o">{&lt;/span>
u2 attribute_name_index&lt;span class="p">;&lt;/span> //å¸¸é‡æ± ä¸­çš„uft8ç±»åž‹çš„ç´¢å¼•ï¼Œå€¼å›ºå®šä¸ºâ€Codeâ€œ
u4 attribute_length&lt;span class="p">;&lt;/span> //å±žæ€§å€¼é•¿åº¦ï¼Œä¸ºæ•´ä¸ªå±žæ€§è¡¨é•¿åº¦-6
u2 max_stack&lt;span class="p">;&lt;/span> //æ“ä½œæ•°æ ˆçš„æœ€å¤§æ·±åº¦å€¼ï¼Œjvmè¿è¡Œæ—¶æ ¹æ®è¯¥å€¼ä½©æœæ ˆå¸§
u2 max_locals&lt;span class="p">;&lt;/span> //å±€éƒ¨å˜é‡è¡¨æœ€å¤§å­˜å‚¨ç©ºé—´ï¼Œå•ä½æ˜¯slot
u4 code_length&lt;span class="p">;&lt;/span> // å­—èŠ‚ç æŒ‡ä»¤çš„ä¸ªæ•°
u1 code&lt;span class="o">[&lt;/span>code_length&lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> // å…·ä½“çš„å­—èŠ‚ç æŒ‡ä»¤
u2 exception_table_length&lt;span class="p">;&lt;/span> //å¼‚å¸¸çš„ä¸ªæ•°
&lt;span class="o">{&lt;/span> u2 start_pc&lt;span class="p">;&lt;/span>
u2 end_pc&lt;span class="p">;&lt;/span>
u2 handler_pc&lt;span class="p">;&lt;/span> //å½“å­—èŠ‚ç åœ¨&lt;span class="o">[&lt;/span>start_pc, end_pc&lt;span class="o">)&lt;/span>åŒºé—´å‡ºçŽ°catch_typeæˆ–å­ç±»ï¼Œåˆ™è½¬åˆ°handler_pcè¡Œç»§ç»­å¤„ç†ã€‚
u2 catch_type&lt;span class="p">;&lt;/span> //å½“catch_type&lt;span class="o">=&lt;/span>0ï¼Œåˆ™ä»»æ„å¼‚å¸¸éƒ½éœ€è½¬åˆ°handler_pcå¤„ç†
&lt;span class="o">}&lt;/span> exception_table&lt;span class="o">[&lt;/span>exception_table_length&lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> //å…·ä½“çš„å¼‚å¸¸å†…å®¹
u2 attributes_count&lt;span class="p">;&lt;/span> //å±žæ€§çš„ä¸ªæ•°
attribute_info attributes&lt;span class="o">[&lt;/span>attributes_count&lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> //å…·ä½“çš„å±žæ€§å†…å®¹
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>slotæ˜¯è™šæ‹Ÿæœºæœªå±€éƒ¨å˜é‡åˆ†é…å†…å­˜ä½¿ç”¨çš„æœ€å°å•ä½ã€‚å¯¹äºŽbyte/char/float/int/short/boolean/returnAddressç­‰é•¿åº¦ä¸è¶…è¿‡32ä½çš„å±€éƒ¨å˜é‡ï¼Œæ¯ä¸ªå ç”¨1ä¸ªSlotï¼›å¯¹äºŽlongå’Œdoubleè¿™ä¸¤ç§64ä½çš„æ•°æ®ç±»åž‹åˆ™éœ€è¦2ä¸ªSlotæ¥å­˜æ”¾ã€‚&lt;/li>
&lt;li>å®žä¾‹æ–¹æ³•ä¸­æœ‰éšè—å‚æ•°this, æ˜¾å¼å¼‚å¸¸å¤„ç†å™¨çš„å‚æ•°ï¼Œæ–¹æ³•ä½“å®šä¹‰çš„å±€éƒ¨å˜é‡éƒ½ä½¿ç”¨å±€éƒ¨å˜é‡è¡¨æ¥å­˜æ”¾ã€‚&lt;/li>
&lt;li>max_localsï¼Œä¸æ˜¯æ‰€æœ‰å±€éƒ¨å˜é‡æ‰€å Slotä¹‹å’Œï¼Œå› ä¸ºSlotå¯ä»¥é‡ç”¨ï¼Œjavacç¼–è¯‘å™¨ä¼šæ ¹æ®å˜é‡çš„ä½œç”¨åŸŸæ¥åˆ†é…Slotç»™å„ä¸ªå˜é‡ä½¿ç”¨ï¼Œä»Žè€Œè®¡ç®—å‡ºmax_localså¤§å°ã€‚&lt;/li>
&lt;li>è™šæ‹Ÿæœºè§„èŒƒé™åˆ¶ä¸¥æ ¼æ–¹æ³•ä¸å…è®¸è¶…è¿‡65535ä¸ªå­—èŠ‚ç ï¼Œå¦åˆ™æ‹’ç»ç¼–è¯‘ã€‚&lt;/li>
&lt;/ul>
&lt;p>Codeå±žæ€§æ˜¯Classæ–‡ä»¶ä¸­æœ€é‡è¦çš„å±žæ€§ï¼ŒJavaç¨‹åºçš„å¹¸ç¦è¯¾åˆ†ä¸ºä»£ç (æ–¹æ³•ä½“ä¸­çš„Javaä»£ç )å’Œå…ƒæ•°æ®(åŒ…å«ç±»ã€æŽ¥å£ã€å­—æ®µã€æ–¹æ³•å®šä¹‰ä»¥åŠå…¶ä»–ä¿¡æ¯)ä¸¤éƒ¨åˆ†ã€‚&lt;/p>
&lt;p>&lt;strong>ConstantValueå±žæ€§&lt;/strong> ConstantValueå±žæ€§æ˜¯æŒ‡è¢«staticå…³é”®å­—ä¿®é¥°çš„å˜é‡ï¼ˆä¹Ÿç§°ä¸ºç±»å˜é‡ï¼‰ã€‚&lt;/p>
&lt;ul>
&lt;li>ç±»å˜é‡: åœ¨ç±»æž„é€ å™¨æ–¹æ³•æˆ–è€…ä½¿ç”¨ConstantValueå±žæ€§æ¥èµ‹å€¼&lt;/li>
&lt;li>å®žä¾‹å˜é‡ï¼šåœ¨å®žä¾‹æž„é€ å™¨æ–¹æ³•è¿›è¡Œèµ‹å€¼&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>å‚è€ƒèµ„æ–™&lt;/p>
&lt;ol>
&lt;li>&lt;a href="https://docs.oracle.com/javase/specs/jvms/se7/html/">https://docs.oracle.com/javase/specs/jvms/se7/html/&lt;/a>&lt;/li>
&lt;li>Javaè¯­è¨€è§„èŒƒã€ŠThe Java Language Specificationã€‹&lt;/li>
&lt;li>Javaè™šæ‹Ÿæœºè§„èŒƒã€ŠThe Java Virtual Machine Specificationã€‹&lt;/li>
&lt;/ol>
&lt;/blockquote></description></item><item><title>JVMç³»åˆ—1 è¿è¡Œæ—¶å†…å­˜ç»“æž„</title><link>https://blog.itning.top/post/2020/04/10/jvm%E7%B3%BB%E5%88%971-%E8%BF%90%E8%A1%8C%E6%97%B6%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84/</link><pubDate>Fri, 10 Apr 2020 10:50:16 +0800</pubDate><guid>https://blog.itning.top/post/2020/04/10/jvm%E7%B3%BB%E5%88%971-%E8%BF%90%E8%A1%8C%E6%97%B6%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84/</guid><description>&lt;blockquote>
&lt;p>javaæ˜¯åœ¨javaè™šæ‹Ÿæœºä¸Šè¿è¡Œï¼Œä¸€èˆ¬åœ°å¤§å®¶è®²åˆ°çš„Javaè¿è¡Œæ—¶å†…å­˜ç»“æž„å…¶å®žå°±æ˜¯Jvmå†…å­˜&lt;/p>
&lt;/blockquote>
&lt;h2 id="ä¸€è¿è¡Œæ—¶å†…å­˜ç»“æž„">ä¸€ã€è¿è¡Œæ—¶å†…å­˜ç»“æž„&lt;/h2>
&lt;p>Javaä»£ç æ˜¯è¿è¡Œåœ¨Javaè™šæ‹Ÿæœºä¹‹ä¸Šçš„ï¼Œç”±Javaè™šæ‹Ÿæœºé€šè¿‡è§£é‡Šæ‰§è¡Œ(è§£é‡Šå™¨)æˆ–ç¼–è¯‘æ‰§è¡Œ(å³æ—¶ç¼–è¯‘å™¨)æ¥å®Œæˆï¼Œæ•…Javaè¿è¡Œæ—¶å†…å­˜ç»“æž„ï¼Œä¹Ÿå°±æ˜¯æŒ‡Javaè™šæ‹Ÿæœºçš„è¿è¡Œæ—¶å†…å­˜ç»“æž„ã€‚&lt;/p>
&lt;p>ä½œä¸ºJavaå¼€å‘äººå‘˜æ¥è¯´ï¼Œå¹¶ä¸éœ€è¦åƒC/C++å¼€å‘äººå‘˜ï¼Œéœ€è¦æ—¶åˆ»æ³¨æ„å†…å­˜çš„é‡Šæ”¾ï¼Œè€Œæ˜¯å…¨æƒäº¤ç»™è™šæ‹ŸæœºåŽ»ç®¡ç†ï¼Œé‚£ä¹ˆæœ‰å°±å¿…è¦äº†è§£è™šæ‹Ÿæœºçš„è¿è¡Œæ—¶å†…å­˜æ˜¯å¦‚ä½•æž„æˆçš„ã€‚è¿è¡Œæ—¶å†…å­˜æ¨¡åž‹ï¼Œåˆ†ä¸ºçº¿ç¨‹ç§æœ‰å’Œå…±äº«æ•°æ®åŒºä¸¤å¤§ç±»ï¼Œå…¶ä¸­çº¿ç¨‹ç§æœ‰çš„æ•°æ®åŒºåŒ…å«ç¨‹åºè®¡æ•°å™¨ã€è™šæ‹Ÿæœºæ ˆã€æœ¬åœ°æ–¹æ³•åŒºï¼Œæ‰€æœ‰çº¿ç¨‹å…±äº«çš„æ•°æ®åŒºåŒ…å«Javaå †ã€æ–¹æ³•åŒºï¼Œåœ¨æ–¹æ³•åŒºå†…æœ‰ä¸€ä¸ªå¸¸é‡æ± ã€‚&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/20200329132205.png" alt="jvm_memory_1">&lt;/p>
&lt;p>ï¼ˆ1ï¼‰çº¿ç¨‹ç§æœ‰åŒºï¼š&lt;/p>
&lt;ul>
&lt;li>ç¨‹åºè®¡æ•°å™¨ï¼Œè®°å½•æ­£åœ¨æ‰§è¡Œçš„è™šæ‹Ÿæœºå­—èŠ‚ç çš„åœ°å€ï¼›&lt;/li>
&lt;li>è™šæ‹Ÿæœºæ ˆï¼šæ–¹æ³•æ‰§è¡Œçš„å†…å­˜åŒºï¼Œæ¯ä¸ªæ–¹æ³•æ‰§è¡Œæ—¶ä¼šåœ¨è™šæ‹Ÿæœºæ ˆä¸­åˆ›å»ºæ ˆå¸§ï¼›&lt;/li>
&lt;li>æœ¬åœ°æ–¹æ³•æ ˆï¼šè™šæ‹Ÿæœºçš„Nativeæ–¹æ³•æ‰§è¡Œçš„å†…å­˜åŒºï¼›&lt;/li>
&lt;/ul>
&lt;p>ï¼ˆ2ï¼‰çº¿ç¨‹å…±äº«åŒºï¼š&lt;/p>
&lt;ul>
&lt;li>Javaå †ï¼šå¯¹è±¡åˆ†é…å†…å­˜çš„åŒºåŸŸï¼›&lt;/li>
&lt;li>æ–¹æ³•åŒºï¼šå­˜æ”¾ç±»ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ã€ç¼–è¯‘å™¨ç¼–è¯‘åŽçš„ä»£ç ç­‰æ•°æ®ï¼›&lt;/li>
&lt;li>å¸¸é‡æ± ï¼šå­˜æ”¾ç¼–è¯‘å™¨ç”Ÿæˆçš„å„ç§å­—é¢é‡å’Œç¬¦å·å¼•ç”¨ï¼Œæ˜¯æ–¹æ³•åŒºçš„ä¸€éƒ¨åˆ†ã€‚&lt;/li>
&lt;/ul>
&lt;p>å¯¹äºŽå¤§å¤šæ•°çš„ç¨‹åºå‘˜æ¥è¯´ï¼ŒJavaå†…å­˜æ¯”è¾ƒæµè¡Œçš„è¯´æ³•ä¾¿æ˜¯å †å’Œæ ˆï¼Œè¿™å…¶å®žæ˜¯éžå¸¸ç²—ç•¥çš„ä¸€ç§åˆ’åˆ†ï¼Œè¿™ç§åˆ’åˆ†çš„â€å †â€å¯¹åº”å†…å­˜æ¨¡åž‹çš„Javaå †ï¼Œâ€æ ˆâ€æ˜¯æŒ‡è™šæ‹Ÿæœºæ ˆï¼Œç„¶è€ŒJavaå†…å­˜æ¨¡åž‹è¿œæ¯”è¿™æ›´å¤æ‚ï¼Œæƒ³æ·±å…¥äº†è§£Javaçš„å†…å­˜ï¼Œè¿˜æ˜¯æœ‰å¿…è¦æ˜Žç™½æ•´ä¸ªå†…å­˜æ¨¡åž‹ã€‚&lt;/p>
&lt;h2 id="äºŒ-ç»“æž„è¯¦è§£">äºŒã€ ç»“æž„è¯¦è§£&lt;/h2>
&lt;p>è¿è¡Œæ—¶å†…å­˜åˆ†ä¸ºäº”å¤§å—åŒºåŸŸï¼ˆå¸¸é‡æ± å±žäºŽæ–¹æ³•åŒºï¼Œç®—ä½œä¸€å—åŒºåŸŸï¼‰ï¼Œå‰é¢ç®€è¦ä»‹ç»äº†æ¯ä¸ªåŒºåŸŸçš„åŠŸèƒ½ï¼Œé‚£æŽ¥ä¸‹æ¥å†è¯¦ç»†è¯´æ˜Žæ¯ä¸ªåŒºåŸŸçš„å†…å®¹ï¼ŒJavaå†…å­˜æ€»ä½“ç»“æž„å›¾å¦‚ä¸‹ï¼š&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/20200410105300.png" alt="stack_heap_info">&lt;/p>
&lt;h3 id="21-ç¨‹åºè®¡æ•°å™¨pc">2.1 ç¨‹åºè®¡æ•°å™¨PC&lt;/h3>
&lt;p>ç¨‹åºè®¡æ•°å™¨PCï¼Œå½“å‰çº¿ç¨‹æ‰€æ‰§è¡Œçš„å­—èŠ‚ç è¡Œå·æŒ‡ç¤ºå™¨ã€‚æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±è®¡æ•°å™¨ï¼Œæ˜¯ç§æœ‰å†…å­˜ç©ºé—´ï¼Œè¯¥åŒºåŸŸæ˜¯æ•´ä¸ªå†…å­˜ä¸­è¾ƒå°çš„ä¸€å—ã€‚&lt;/p>
&lt;p>å½“çº¿ç¨‹æ­£åœ¨æ‰§è¡Œä¸€ä¸ªJavaæ–¹æ³•æ—¶ï¼ŒPCè®¡æ•°å™¨è®°å½•çš„æ˜¯æ­£åœ¨æ‰§è¡Œçš„è™šæ‹Ÿæœºå­—èŠ‚ç çš„åœ°å€ï¼›å½“çº¿ç¨‹æ­£åœ¨æ‰§è¡Œçš„ä¸€ä¸ªNativeæ–¹æ³•æ—¶ï¼ŒPCè®¡æ•°å™¨åˆ™ä¸ºç©ºï¼ˆUndefinedï¼‰ã€‚&lt;/p>
&lt;h3 id="22-è™šæ‹Ÿæœºæ ˆ">2.2 è™šæ‹Ÿæœºæ ˆ&lt;/h3>
&lt;p>è™šæ‹Ÿæœºæ ˆï¼Œç”Ÿå‘½å‘¨æœŸä¸Žçº¿ç¨‹ç›¸åŒï¼Œæ˜¯Javaæ–¹æ³•æ‰§è¡Œçš„å†…å­˜æ¨¡åž‹ã€‚æ¯ä¸ªæ–¹æ³•(ä¸åŒ…å«nativeæ–¹æ³•)æ‰§è¡Œçš„åŒæ—¶éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ ˆå¸§ç»“æž„ï¼Œæ–¹æ³•æ‰§è¡Œè¿‡ç¨‹ï¼Œå¯¹åº”ç€è™šæ‹Ÿæœºæ ˆçš„å…¥æ ˆåˆ°å‡ºæ ˆçš„è¿‡ç¨‹ã€‚&lt;/p>
&lt;p>&lt;strong>æ ˆå¸§(Stack Frame)ç»“æž„&lt;/strong>&lt;/p>
&lt;p>æ ˆå¸§æ˜¯ç”¨äºŽæ”¯æŒè™šæ‹Ÿæœºè¿›è¡Œæ–¹æ³•æ‰§è¡Œçš„æ•°æ®ç»“æž„ï¼Œæ˜¯å±žæ€§è¿è¡Œæ—¶æ•°æ®åŒºçš„è™šæ‹Ÿæœºæ ˆçš„æ ˆå…ƒç´ ã€‚è§ä¸Šå›¾ï¼Œ æ ˆå¸§åŒ…æ‹¬ï¼š&lt;/p>
&lt;ol>
&lt;li>å±€éƒ¨å˜é‡è¡¨ (localså¤§å°ï¼Œç¼–è¯‘æœŸç¡®å®š)ï¼Œä¸€ç»„å˜é‡å­˜å‚¨ç©ºé—´ï¼Œ å®¹é‡ä»¥slotä¸ºæœ€å°å•ä½ã€‚&lt;/li>
&lt;li>æ“ä½œæ ˆ(stackå¤§å°ï¼Œç¼–è¯‘æœŸç¡®å®š)ï¼Œæ“ä½œæ ˆå…ƒç´ çš„æ•°æ®ç±»åž‹å¿…é¡»ä¸Žå­—èŠ‚ç æŒ‡ä»¤åºåˆ—ä¸¥æ ¼åŒ¹é…&lt;/li>
&lt;li>åŠ¨æ€è¿žæŽ¥ï¼Œ æŒ‡å‘è¿è¡Œæ—¶å¸¸é‡æ± ä¸­è¯¥æ ˆå¸§æ‰€å±žæ–¹æ³•çš„å¼•ç”¨ï¼Œä¸ºäº† åŠ¨æ€è¿žæŽ¥ä½¿ç”¨ã€‚
&lt;ul>
&lt;li>å‰é¢çš„è§£æžè¿‡ç¨‹å…¶å®žæ˜¯é™æ€è§£æžï¼›&lt;/li>
&lt;li>å¯¹äºŽè¿è¡ŒæœŸè½¬åŒ–ä¸ºç›´æŽ¥å¼•ç”¨ï¼Œç§°ä¸ºåŠ¨æ€è§£æžã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>æ–¹æ³•è¿”å›žåœ°å€
&lt;ul>
&lt;li>æ­£å¸¸é€€å‡ºï¼Œæ‰§è¡Œå¼•æ“Žé‡åˆ°æ–¹æ³•è¿”å›žçš„å­—èŠ‚ç ï¼Œå°†è¿”å›žå€¼ä¼ é€’ç»™è°ƒç”¨è€…&lt;/li>
&lt;li>å¼‚å¸¸é€€å‡ºï¼Œé‡åˆ°Exception,å¹¶ä¸”æ–¹æ³•æœªæ•æ‰å¼‚å¸¸ï¼Œé‚£ä¹ˆä¸ä¼šæœ‰ä»»ä½•è¿”å›žå€¼ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>é¢å¤–é™„åŠ ä¿¡æ¯ï¼Œè™šæ‹Ÿæœºè§„èŒƒæ²¡æœ‰æ˜Žç¡®è§„å®šï¼Œç”±å…·ä½“è™šæ‹Ÿæœºå®žçŽ°ã€‚&lt;/li>
&lt;/ol>
&lt;p>&lt;strong>å¼‚å¸¸(Exception)&lt;/strong>&lt;/p>
&lt;p>Javaè™šæ‹Ÿæœºè§„èŒƒè§„å®šè¯¥åŒºåŸŸæœ‰ä¸¤ç§å¼‚å¸¸ï¼š&lt;/p>
&lt;ul>
&lt;li>StackOverFlowErrorï¼šå½“çº¿ç¨‹è¯·æ±‚æ ˆæ·±åº¦è¶…å‡ºè™šæ‹Ÿæœºæ ˆæ‰€å…è®¸çš„æ·±åº¦æ—¶æŠ›å‡º&lt;/li>
&lt;li>OutOfMemoryErrorï¼šå½“Javaè™šæ‹ŸæœºåŠ¨æ€æ‰©å±•åˆ°æ— æ³•ç”³è¯·è¶³å¤Ÿå†…å­˜æ—¶æŠ›å‡º&lt;/li>
&lt;/ul>
&lt;h3 id="23-æœ¬åœ°æ–¹æ³•æ ˆ">2.3 æœ¬åœ°æ–¹æ³•æ ˆ&lt;/h3>
&lt;p>æœ¬åœ°æ–¹æ³•æ ˆåˆ™ä¸ºè™šæ‹Ÿæœºä½¿ç”¨åˆ°çš„Nativeæ–¹æ³•æä¾›å†…å­˜ç©ºé—´ï¼Œè€Œå‰é¢è®²çš„è™šæ‹Ÿæœºæ ˆå¼ä¸ºJavaæ–¹æ³•æä¾›å†…å­˜ç©ºé—´ã€‚æœ‰äº›è™šæ‹Ÿæœºçš„å®žçŽ°ç›´æŽ¥æŠŠæœ¬åœ°æ–¹æ³•æ ˆå’Œè™šæ‹Ÿæœºæ ˆåˆäºŒä¸ºä¸€ï¼Œæ¯”å¦‚éžå¸¸å…¸åž‹çš„Sun HotSpotè™šæ‹Ÿæœºã€‚&lt;/p>
&lt;p>&lt;strong>å¼‚å¸¸(Exception)&lt;/strong>ï¼šJavaè™šæ‹Ÿæœºè§„èŒƒè§„å®šè¯¥åŒºåŸŸå¯æŠ›å‡ºStackOverFlowErrorå’ŒOutOfMemoryErrorã€‚&lt;/p>
&lt;h3 id="24-javaå †">2.4 Javaå †&lt;/h3>
&lt;p>Javaå †ï¼Œæ˜¯Javaè™šæ‹Ÿæœºç®¡ç†çš„æœ€å¤§çš„ä¸€å—å†…å­˜ï¼Œä¹Ÿæ˜¯GCçš„ä¸»æˆ˜åœºï¼Œé‡Œé¢å­˜æ”¾çš„æ˜¯å‡ ä¹Žæ‰€æœ‰çš„å¯¹è±¡å®žä¾‹å’Œæ•°ç»„æ•°æ®ã€‚JITç¼–è¯‘å™¨æœ‰æ ˆä¸Šåˆ†é…ã€æ ‡é‡æ›¿æ¢ç­‰ä¼˜åŒ–æŠ€æœ¯çš„å®žçŽ°å¯¼è‡´éƒ¨åˆ†å¯¹è±¡å®žä¾‹æ•°æ®ä¸å­˜åœ¨Javaå †ï¼Œè€Œæ˜¯æ ˆå†…å­˜ã€‚&lt;/p>
&lt;ul>
&lt;li>ä»Žå†…å­˜å›žæ”¶è§’åº¦ï¼ŒJavaå †è¢«åˆ†ä¸ºæ–°ç”Ÿä»£å’Œè€å¹´ä»£ï¼›è¿™æ ·åˆ’åˆ†çš„å¥½å¤„æ˜¯ä¸ºäº†æ›´å¿«çš„å›žæ”¶å†…å­˜ï¼›&lt;/li>
&lt;li>ä»Žå†…å­˜åˆ†é…è§’åº¦ï¼ŒJavaå †å¯ä»¥åˆ’åˆ†å‡ºçº¿ç¨‹ç§æœ‰çš„åˆ†é…ç¼“å†²åŒº(Thread Local Allocation Buffer,TLAB)ï¼›è¿™æ ·åˆ’åˆ†çš„å¥½å¤„æ˜¯ä¸ºäº†æ›´å¿«çš„åˆ†é…å†…å­˜ï¼›&lt;/li>
&lt;/ul>
&lt;p>å¯¹è±¡åˆ›å»ºçš„è¿‡ç¨‹æ˜¯åœ¨å †ä¸Šåˆ†é…ç€å®žä¾‹å¯¹è±¡ï¼Œé‚£ä¹ˆå¯¹è±¡å®žä¾‹çš„å…·ä½“ç»“æž„å¦‚ä¸‹ï¼š&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/20200410105400.png" alt="java_object">&lt;/p>
&lt;p>å¯¹äºŽå¡«å……æ•°æ®ä¸æ˜¯ä¸€å®šå­˜åœ¨çš„ï¼Œä»…ä»…æ˜¯ä¸ºäº†å­—èŠ‚å¯¹é½ã€‚HotSpot VMçš„è‡ªåŠ¨å†…å­˜ç®¡ç†è¦æ±‚å¯¹è±¡èµ·å§‹åœ°å€å¿…é¡»æ˜¯8å­—èŠ‚çš„æ•´æ•°å€ã€‚å¯¹è±¡å¤´æœ¬èº«æ˜¯8çš„å€æ•°ï¼Œå½“å¯¹è±¡çš„å®žä¾‹æ•°æ®ä¸æ˜¯8çš„å€æ•°ï¼Œä¾¿éœ€è¦å¡«å……æ•°æ®æ¥ä¿è¯8å­—èŠ‚çš„å¯¹é½ã€‚è¯¥åŠŸèƒ½ç±»ä¼¼äºŽé«˜é€Ÿç¼“å­˜è¡Œçš„å¯¹é½ã€‚&lt;/p>
&lt;p>å¦å¤–ï¼Œå…³äºŽåœ¨å †ä¸Šå†…å­˜åˆ†é…æ˜¯å¹¶å‘è¿›è¡Œçš„ï¼Œè™šæ‹Ÿæœºé‡‡ç”¨CASåŠ å¤±è´¥é‡è¯•ä¿è¯åŽŸå­æ“ä½œï¼Œæˆ–è€…æ˜¯é‡‡ç”¨æ¯ä¸ªçº¿ç¨‹é¢„å…ˆåˆ†é…TLABå†…å­˜.&lt;/p>
&lt;p>&lt;strong>å¼‚å¸¸(Exception)&lt;/strong>ï¼šJavaè™šæ‹Ÿæœºè§„èŒƒè§„å®šè¯¥åŒºåŸŸå¯æŠ›å‡ºOutOfMemoryErrorã€‚&lt;/p>
&lt;h3 id="25-æ–¹æ³•åŒº">2.5 æ–¹æ³•åŒº&lt;/h3>
&lt;p>æ–¹æ³•åŒºä¸»è¦å­˜æ”¾çš„æ˜¯å·²è¢«è™šæ‹ŸæœºåŠ è½½çš„ç±»ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ã€ç¼–è¯‘å™¨ç¼–è¯‘åŽçš„ä»£ç ç­‰æ•°æ®ã€‚GCåœ¨è¯¥åŒºåŸŸå‡ºçŽ°çš„æ¯”è¾ƒå°‘ã€‚&lt;/p>
&lt;p>&lt;strong>å¼‚å¸¸(Exception)&lt;/strong>ï¼šJavaè™šæ‹Ÿæœºè§„èŒƒè§„å®šè¯¥åŒºåŸŸå¯æŠ›å‡ºOutOfMemoryErrorã€‚&lt;/p>
&lt;h3 id="26-è¿è¡Œæ—¶å¸¸é‡æ± ">2.6 è¿è¡Œæ—¶å¸¸é‡æ± &lt;/h3>
&lt;p>è¿è¡Œæ—¶å¸¸é‡æ± ä¹Ÿæ˜¯æ–¹æ³•åŒºçš„ä¸€éƒ¨åˆ†ï¼Œç”¨äºŽå­˜æ”¾ç¼–è¯‘å™¨ç”Ÿæˆçš„å„ç§å­—é¢é‡å’Œç¬¦å·å¼•ç”¨ã€‚è¿è¡Œæ—¶å¸¸é‡æ± é™¤äº†ç¼–è¯‘æœŸäº§ç”Ÿçš„Classæ–‡ä»¶çš„å¸¸é‡æ± ï¼Œè¿˜å¯ä»¥åœ¨è¿è¡ŒæœŸé—´ï¼Œå°†æ–°çš„å¸¸é‡åŠ å…¥å¸¸é‡æ± ï¼Œæ¯”è¾ƒå¸¸è§çš„æ˜¯Stringç±»çš„intern()æ–¹æ³•ã€‚&lt;/p>
&lt;ul>
&lt;li>å­—é¢é‡ï¼šä¸ŽJavaè¯­è¨€å±‚é¢çš„å¸¸é‡æ¦‚å¿µç›¸è¿‘ï¼ŒåŒ…å«æ–‡æœ¬å­—ç¬¦ä¸²ã€å£°æ˜Žä¸ºfinalçš„å¸¸é‡å€¼ç­‰ã€‚&lt;/li>
&lt;li>ç¬¦å·å¼•ç”¨ï¼šç¼–è¯‘è¯­è¨€å±‚é¢çš„æ¦‚å¿µï¼ŒåŒ…æ‹¬ä»¥ä¸‹3ç±»ï¼š
&lt;ul>
&lt;li>ç±»å’ŒæŽ¥å£çš„å…¨é™å®šå&lt;/li>
&lt;li>å­—æ®µçš„åç§°å’Œæè¿°ç¬¦&lt;/li>
&lt;li>æ–¹æ³•çš„åç§°å’Œæè¿°ç¬¦&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>ä½†æ˜¯è¯¥åŒºåŸŸä¸ä¼šæŠ›å‡ºOutOfMemoryErrorå¼‚å¸¸ã€‚&lt;/p></description></item><item><title>SpringBootæ³¨è§£å¤§å…¨</title><link>https://blog.itning.top/post/2020/03/31/springboot%E6%B3%A8%E8%A7%A3%E5%A4%A7%E5%85%A8/</link><pubDate>Tue, 31 Mar 2020 10:15:41 +0800</pubDate><guid>https://blog.itning.top/post/2020/03/31/springboot%E6%B3%A8%E8%A7%A3%E5%A4%A7%E5%85%A8/</guid><description>&lt;h2 id="ä¸€æ³¨è§£annotationsåˆ—è¡¨">ä¸€ã€æ³¨è§£(annotations)åˆ—è¡¨&lt;/h2>
&lt;p>&lt;strong>@SpringBootApplication&lt;/strong>ï¼š&lt;/p>
&lt;p>åŒ…å«äº†@ComponentScanã€@Configurationå’Œ@EnableAutoConfigurationæ³¨è§£ã€‚&lt;/p>
&lt;p>å…¶ä¸­@ComponentScanè®©spring Bootæ‰«æåˆ°Configurationç±»å¹¶æŠŠå®ƒåŠ å…¥åˆ°ç¨‹åºä¸Šä¸‹æ–‡ã€‚&lt;/p>
&lt;p>&lt;strong>@Configuration&lt;/strong> ç­‰åŒäºŽspringçš„XMLé…ç½®æ–‡ä»¶ï¼›ä½¿ç”¨Javaä»£ç å¯ä»¥æ£€æŸ¥ç±»åž‹å®‰å…¨ã€‚&lt;/p>
&lt;p>&lt;strong>@EnableAutoConfiguration&lt;/strong> è‡ªåŠ¨é…ç½®ã€‚&lt;/p>
&lt;p>&lt;strong>@ComponentScan&lt;/strong> ç»„ä»¶æ‰«æï¼Œå¯è‡ªåŠ¨å‘çŽ°å’Œè£…é…ä¸€äº›Beanã€‚&lt;/p>
&lt;p>&lt;strong>@Component&lt;/strong>å¯é…åˆCommandLineRunnerä½¿ç”¨ï¼Œåœ¨ç¨‹åºå¯åŠ¨åŽæ‰§è¡Œä¸€äº›åŸºç¡€ä»»åŠ¡ã€‚&lt;/p>
&lt;p>&lt;strong>@RestController&lt;/strong>æ³¨è§£æ˜¯@Controllerå’Œ@ResponseBodyçš„åˆé›†,è¡¨ç¤ºè¿™æ˜¯ä¸ªæŽ§åˆ¶å™¨bean,å¹¶ä¸”æ˜¯å°†å‡½æ•°çš„è¿”å›žå€¼ç›´ æŽ¥å¡«å…¥HTTPå“åº”ä½“ä¸­,æ˜¯RESTé£Žæ ¼çš„æŽ§åˆ¶å™¨ã€‚&lt;/p>
&lt;p>&lt;strong>@Autowired&lt;/strong>è‡ªåŠ¨å¯¼å…¥ã€‚&lt;/p>
&lt;p>&lt;strong>@PathVariable&lt;/strong>èŽ·å–å‚æ•°ã€‚&lt;/p>
&lt;p>&lt;strong>@JsonBackReference&lt;/strong>è§£å†³åµŒå¥—å¤–é“¾é—®é¢˜ã€‚&lt;/p>
&lt;p>&lt;strong>@RepositoryRestResourcepublic&lt;/strong>é…åˆspring-boot-starter-data-restä½¿ç”¨ã€‚&lt;/p>
&lt;h2 id="äºŒæ³¨è§£annotationsè¯¦è§£">äºŒã€æ³¨è§£(annotations)è¯¦è§£&lt;/h2>
&lt;p>&lt;strong>@SpringBootApplication&lt;/strong>ï¼šç”³æ˜Žè®©spring bootè‡ªåŠ¨ç»™ç¨‹åºè¿›è¡Œå¿…è¦çš„é…ç½®ï¼Œè¿™ä¸ªé…ç½®ç­‰åŒäºŽï¼š@Configuration ï¼Œ@EnableAutoConfiguration å’Œ @ComponentScan ä¸‰ä¸ªé…ç½®ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="kn">package&lt;/span> &lt;span class="nn">com.example.myproject&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">org.springframework.boot.SpringApplication&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">org.springframework.boot.autoconfigure.SpringBootApplication&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="nd">@SpringBootApplication&lt;/span> &lt;span class="c1">// same as @Configuration @EnableAutoConfiguration @ComponentScan
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="kd">public&lt;/span> &lt;span class="kd">class&lt;/span> &lt;span class="nc">Application&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kd">static&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="o">[]&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">SpringApplication&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">run&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">Application&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>@ResponseBody&lt;/strong>ï¼šè¡¨ç¤ºè¯¥æ–¹æ³•çš„è¿”å›žç»“æžœç›´æŽ¥å†™å…¥HTTP response bodyä¸­ï¼Œä¸€èˆ¬åœ¨å¼‚æ­¥èŽ·å–æ•°æ®æ—¶ä½¿ç”¨ï¼Œç”¨äºŽæž„å»ºRESTfulçš„apiã€‚&lt;/p>
&lt;p>åœ¨ä½¿ç”¨@RequestMappingåŽï¼Œè¿”å›žå€¼é€šå¸¸è§£æžä¸ºè·³è½¬è·¯å¾„ï¼ŒåŠ ä¸Š@responsebodyåŽè¿”å›žç»“æžœä¸ä¼šè¢«è§£æžä¸ºè·³è½¬è·¯å¾„ï¼Œè€Œæ˜¯ç›´æŽ¥å†™å…¥HTTP response bodyä¸­ã€‚&lt;/p>
&lt;p>æ¯”å¦‚å¼‚æ­¥èŽ·å–jsonæ•°æ®ï¼ŒåŠ ä¸Š@responsebodyåŽï¼Œä¼šç›´æŽ¥è¿”å›žjsonæ•°æ®ã€‚&lt;/p>
&lt;p>è¯¥æ³¨è§£ä¸€èˆ¬ä¼šé…åˆ@RequestMappingä¸€èµ·ä½¿ç”¨ã€‚ç¤ºä¾‹ä»£ç ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="nd">@RequestMapping&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="err">â€œ&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">test&lt;/span>&lt;span class="err">â€&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="nd">@ResponseBody&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="nf">test&lt;/span>&lt;span class="o">(){&lt;/span>
&lt;span class="k">return&lt;/span>&lt;span class="err">â€&lt;/span>&lt;span class="n">ok&lt;/span>&lt;span class="err">â€&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>@Controller&lt;/strong>ï¼šç”¨äºŽå®šä¹‰æŽ§åˆ¶å™¨ç±»ï¼Œåœ¨spring é¡¹ç›®ä¸­ç”±æŽ§åˆ¶å™¨è´Ÿè´£å°†ç”¨æˆ·å‘æ¥çš„URLè¯·æ±‚è½¬å‘åˆ°å¯¹åº”çš„æœåŠ¡æŽ¥å£ï¼ˆserviceå±‚ï¼‰&lt;/p>
&lt;p>ä¸€èˆ¬è¿™ä¸ªæ³¨è§£åœ¨ç±»ä¸­ï¼Œé€šå¸¸æ–¹æ³•éœ€è¦é…åˆæ³¨è§£@RequestMappingã€‚&lt;/p>
&lt;p>ç¤ºä¾‹ä»£ç ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="nd">@Controller&lt;/span>
&lt;span class="nd">@RequestMapping&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="err">â€œ&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">demoInfo&lt;/span>&lt;span class="err">â€&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="n">publicclass&lt;/span> &lt;span class="n">DemoController&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="nd">@Autowired&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">DemoInfoService&lt;/span> &lt;span class="n">demoInfoService&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="nd">@RequestMapping&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;/hello&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="nf">hello&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">Map&lt;/span> &lt;span class="n">map&lt;/span>&lt;span class="o">){&lt;/span>
&lt;span class="n">System&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">out&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">println&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;DemoController.hello()&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">map&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">put&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;hello&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span>&lt;span class="s">&amp;#34;from TemplateController.helloHtml&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="c1">//ä¼šä½¿ç”¨hello.htmlæˆ–è€…hello.ftlæ¨¡æ¿è¿›è¡Œæ¸²æŸ“æ˜¾ç¤º.
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">return&lt;/span>&lt;span class="s">&amp;#34;/hello&amp;#34;&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>@RestController&lt;/strong>ï¼šç”¨äºŽæ ‡æ³¨æŽ§åˆ¶å±‚ç»„ä»¶(å¦‚strutsä¸­çš„action)ï¼Œ@ResponseBodyå’Œ@Controllerçš„åˆé›†ã€‚&lt;/p>
&lt;p>ç¤ºä¾‹ä»£ç ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="kn">package&lt;/span> &lt;span class="nn">com.kfit.demo.web&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">org.springframework.web.bind.annotation.RequestMapping&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">org.springframework.web.bind.annotation.RestController&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="nd">@RestController&lt;/span>
&lt;span class="nd">@RequestMapping&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="err">â€œ&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">demoInfo2&lt;/span>&lt;span class="err">â€&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="n">publicclass&lt;/span> &lt;span class="n">DemoController2&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="nd">@RequestMapping&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;/test&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="nf">test&lt;/span>&lt;span class="o">(){&lt;/span>
&lt;span class="k">return&lt;/span>&lt;span class="s">&amp;#34;ok&amp;#34;&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>@RequestMapping&lt;/strong>ï¼šæä¾›è·¯ç”±ä¿¡æ¯ï¼Œè´Ÿè´£URLåˆ°Controllerä¸­çš„å…·ä½“å‡½æ•°çš„æ˜ å°„ã€‚&lt;/p>
&lt;p>&lt;strong>@EnableAutoConfiguration&lt;/strong>ï¼šSpring Bootè‡ªåŠ¨é…ç½®ï¼ˆauto-configurationï¼‰ï¼šå°è¯•æ ¹æ®ä½ æ·»åŠ çš„jarä¾èµ–è‡ªåŠ¨é…ç½®ä½ çš„Springåº”ç”¨ã€‚&lt;/p>
&lt;p>ä¾‹å¦‚ï¼Œå¦‚æžœä½ çš„classpathä¸‹å­˜åœ¨HSQLDBï¼Œå¹¶ä¸”ä½ æ²¡æœ‰æ‰‹åŠ¨é…ç½®ä»»ä½•æ•°æ®åº“è¿žæŽ¥beansï¼Œé‚£ä¹ˆæˆ‘ä»¬å°†è‡ªåŠ¨é…ç½®ä¸€ä¸ªå†…å­˜åž‹ï¼ˆin-memoryï¼‰æ•°æ®åº“â€ã€‚&lt;/p>
&lt;p>ä½ å¯ä»¥å°†@EnableAutoConfigurationæˆ–è€…@SpringBootApplicationæ³¨è§£æ·»åŠ åˆ°ä¸€ä¸ª@Configurationç±»ä¸Šæ¥é€‰æ‹©è‡ªåŠ¨é…ç½®ã€‚&lt;/p>
&lt;p>å¦‚æžœå‘çŽ°åº”ç”¨äº†ä½ ä¸æƒ³è¦çš„ç‰¹å®šè‡ªåŠ¨é…ç½®ç±»ï¼Œä½ å¯ä»¥ä½¿ç”¨@EnableAutoConfigurationæ³¨è§£çš„æŽ’é™¤å±žæ€§æ¥ç¦ç”¨å®ƒä»¬ã€‚&lt;/p>
&lt;p>&lt;strong>@ComponentScan&lt;/strong>ï¼šè¡¨ç¤ºå°†è¯¥ç±»è‡ªåŠ¨å‘çŽ°æ‰«æç»„ä»¶ã€‚&lt;/p>
&lt;p>ä¸ªäººç†è§£ç›¸å½“äºŽï¼Œå¦‚æžœæ‰«æåˆ°æœ‰@Componentã€@Controllerã€@Serviceç­‰è¿™äº›æ³¨è§£çš„ç±»ï¼Œå¹¶æ³¨å†Œä¸ºBeanï¼Œå¯ä»¥è‡ªåŠ¨æ”¶é›†æ‰€æœ‰çš„Springç»„ä»¶ï¼ŒåŒ…æ‹¬@Configurationç±»ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬ç»å¸¸ä½¿ç”¨@ComponentScanæ³¨è§£æœç´¢beansï¼Œå¹¶ç»“åˆ@Autowiredæ³¨è§£å¯¼å…¥ã€‚å¯ä»¥è‡ªåŠ¨æ”¶é›†æ‰€æœ‰çš„Springç»„ä»¶ï¼ŒåŒ…æ‹¬@Configurationç±»ã€‚&lt;/p>
&lt;p>å¦‚æžœæ²¡æœ‰é…ç½®çš„è¯ï¼ŒSpring Bootä¼šæ‰«æå¯åŠ¨ç±»æ‰€åœ¨åŒ…ä¸‹ä»¥åŠå­åŒ…ä¸‹çš„ä½¿ç”¨äº†@Service,@Repositoryç­‰æ³¨è§£çš„ç±»ã€‚&lt;/p>
&lt;p>&lt;strong>@Configuration&lt;/strong>ï¼šç›¸å½“äºŽä¼ ç»Ÿçš„xmlé…ç½®æ–‡ä»¶ï¼Œå¦‚æžœæœ‰äº›ç¬¬ä¸‰æ–¹åº“éœ€è¦ç”¨åˆ°xmlæ–‡ä»¶ï¼Œå»ºè®®ä»ç„¶é€šè¿‡@Configurationç±»ä½œä¸ºé¡¹ç›®çš„é…ç½®ä¸»ç±»â€”â€”å¯ä»¥ä½¿ç”¨@ImportResourceæ³¨è§£åŠ è½½xmlé…ç½®æ–‡ä»¶ã€‚&lt;/p>
&lt;p>&lt;strong>@Import&lt;/strong>ï¼šç”¨æ¥å¯¼å…¥å…¶ä»–é…ç½®ç±»ã€‚&lt;/p>
&lt;p>&lt;strong>@ImportResource&lt;/strong>ï¼šç”¨æ¥åŠ è½½xmlé…ç½®æ–‡ä»¶ã€‚&lt;/p>
&lt;p>&lt;strong>@Autowired&lt;/strong>ï¼šè‡ªåŠ¨å¯¼å…¥ä¾èµ–çš„bean&lt;/p>
&lt;p>&lt;strong>@Service&lt;/strong>ï¼šä¸€èˆ¬ç”¨äºŽä¿®é¥°serviceå±‚çš„ç»„ä»¶&lt;/p>
&lt;p>&lt;strong>@Repository&lt;/strong>ï¼šä½¿ç”¨@Repositoryæ³¨è§£å¯ä»¥ç¡®ä¿DAOæˆ–è€…repositoriesæä¾›å¼‚å¸¸è½¬è¯‘ï¼Œè¿™ä¸ªæ³¨è§£ä¿®é¥°çš„DAOæˆ–è€…repositoriesç±»ä¼šè¢«ComponetScanå‘çŽ°å¹¶é…ç½®ï¼ŒåŒæ—¶ä¹Ÿä¸éœ€è¦ä¸ºå®ƒä»¬æä¾›XMLé…ç½®é¡¹ã€‚&lt;/p>
&lt;p>&lt;strong>@Bean&lt;/strong>ï¼šç”¨@Beanæ ‡æ³¨æ–¹æ³•ç­‰ä»·äºŽXMLä¸­é…ç½®çš„beanã€‚&lt;/p>
&lt;p>&lt;strong>@Value&lt;/strong>ï¼šæ³¨å…¥Spring boot application.propertiesé…ç½®çš„å±žæ€§çš„å€¼ã€‚ç¤ºä¾‹ä»£ç ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="nd">@Value&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">value&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="err">â€œ#&lt;/span>&lt;span class="o">{&lt;/span>&lt;span class="n">message&lt;/span>&lt;span class="o">}&lt;/span>&lt;span class="err">â€&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">message&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>@Inject&lt;/strong>ï¼šç­‰ä»·äºŽé»˜è®¤çš„@Autowiredï¼Œåªæ˜¯æ²¡æœ‰requiredå±žæ€§ï¼›&lt;/p>
&lt;p>&lt;strong>@Component&lt;/strong>ï¼šæ³›æŒ‡ç»„ä»¶ï¼Œå½“ç»„ä»¶ä¸å¥½å½’ç±»çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ³¨è§£è¿›è¡Œæ ‡æ³¨ã€‚&lt;/p>
&lt;p>&lt;strong>@Bean&lt;/strong>ï¼šç›¸å½“äºŽXMLä¸­çš„,æ”¾åœ¨æ–¹æ³•çš„ä¸Šé¢ï¼Œè€Œä¸æ˜¯ç±»ï¼Œæ„æ€æ˜¯äº§ç”Ÿä¸€ä¸ªbean,å¹¶äº¤ç»™springç®¡ç†ã€‚&lt;/p>
&lt;p>&lt;strong>@AutoWired&lt;/strong>ï¼šè‡ªåŠ¨å¯¼å…¥ä¾èµ–çš„beanã€‚byTypeæ–¹å¼ã€‚æŠŠé…ç½®å¥½çš„Beanæ‹¿æ¥ç”¨ï¼Œå®Œæˆå±žæ€§ã€æ–¹æ³•çš„ç»„è£…ï¼Œå®ƒå¯ä»¥å¯¹ç±»æˆå‘˜å˜é‡ã€æ–¹æ³•åŠæž„é€ å‡½æ•°è¿›è¡Œæ ‡æ³¨ï¼Œå®Œæˆè‡ªåŠ¨è£…é…çš„å·¥ä½œã€‚å½“åŠ ä¸Šï¼ˆrequired=falseï¼‰æ—¶ï¼Œå°±ç®—æ‰¾ä¸åˆ°beanä¹Ÿä¸æŠ¥é”™ã€‚&lt;/p>
&lt;p>&lt;strong>@Qualifier&lt;/strong>ï¼šå½“æœ‰å¤šä¸ªåŒä¸€ç±»åž‹çš„Beanæ—¶ï¼Œå¯ä»¥ç”¨@Qualifier(â€œnameâ€)æ¥æŒ‡å®šã€‚ä¸Ž@Autowiredé…åˆä½¿ç”¨ã€‚@Qualifieré™å®šæè¿°ç¬¦é™¤äº†èƒ½æ ¹æ®åå­—è¿›è¡Œæ³¨å…¥ï¼Œä½†èƒ½è¿›è¡Œæ›´ç»†ç²’åº¦çš„æŽ§åˆ¶å¦‚ä½•é€‰æ‹©å€™é€‰è€…ï¼Œå…·ä½“ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="nd">@Autowired&lt;/span>
&lt;span class="nd">@Qualifier&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">value&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="err">â€œ&lt;/span>&lt;span class="n">demoInfoService&lt;/span>&lt;span class="err">â€&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">DemoInfoService&lt;/span> &lt;span class="n">demoInfoService&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>@Resource&lt;/strong>(name=â€nameâ€,type=â€typeâ€)ï¼šæ²¡æœ‰æ‹¬å·å†…å†…å®¹çš„è¯ï¼Œé»˜è®¤byNameã€‚ä¸Ž@Autowiredå¹²ç±»ä¼¼çš„äº‹ã€‚&lt;/p>
&lt;h2 id="ä¸‰jpaæ³¨è§£">ä¸‰ã€JPAæ³¨è§£&lt;/h2>
&lt;p>&lt;strong>@Entity&lt;/strong>ï¼š@Table(name=â€â€œ)ï¼šè¡¨æ˜Žè¿™æ˜¯ä¸€ä¸ªå®žä½“ç±»ã€‚ä¸€èˆ¬ç”¨äºŽjpaè¿™ä¸¤ä¸ªæ³¨è§£ä¸€èˆ¬ä¸€å—ä½¿ç”¨ï¼Œä½†æ˜¯å¦‚æžœè¡¨åå’Œå®žä½“ç±»åç›¸åŒçš„è¯ï¼Œ@Tableå¯ä»¥çœç•¥&lt;/p>
&lt;p>&lt;strong>@MappedSuperClass&lt;/strong>:ç”¨åœ¨ç¡®å®šæ˜¯çˆ¶ç±»çš„entityä¸Šã€‚çˆ¶ç±»çš„å±žæ€§å­ç±»å¯ä»¥ç»§æ‰¿ã€‚&lt;/p>
&lt;p>&lt;strong>@NoRepositoryBean&lt;/strong>:ä¸€èˆ¬ç”¨ä½œçˆ¶ç±»çš„repositoryï¼Œæœ‰è¿™ä¸ªæ³¨è§£ï¼Œspringä¸ä¼šåŽ»å®žä¾‹åŒ–è¯¥repositoryã€‚&lt;/p>
&lt;p>&lt;strong>@Column&lt;/strong>ï¼šå¦‚æžœå­—æ®µåä¸Žåˆ—åç›¸åŒï¼Œåˆ™å¯ä»¥çœç•¥ã€‚&lt;/p>
&lt;p>&lt;strong>@Id&lt;/strong>ï¼šè¡¨ç¤ºè¯¥å±žæ€§ä¸ºä¸»é”®ã€‚&lt;/p>
&lt;p>&lt;strong>@GeneratedValue&lt;/strong>(strategy=GenerationType.SEQUENCE,generator= â€œrepair_seqâ€)ï¼šè¡¨ç¤ºä¸»é”®ç”Ÿæˆç­–ç•¥æ˜¯sequenceï¼ˆå¯ä»¥ä¸ºAutoã€IDENTITYã€nativeç­‰ï¼ŒAutoè¡¨ç¤ºå¯åœ¨å¤šä¸ªæ•°æ®åº“é—´åˆ‡æ¢ï¼‰ï¼ŒæŒ‡å®šsequenceçš„åå­—æ˜¯repair_seqã€‚&lt;/p>
&lt;p>&lt;strong>@SequenceGeneretor&lt;/strong>(name = â€œrepair_seqâ€, sequenceName = â€œseq_repairâ€, allocationSize = 1)ï¼šnameä¸ºsequenceçš„åç§°ï¼Œä»¥ä¾¿ä½¿ç”¨ï¼ŒsequenceNameä¸ºæ•°æ®åº“çš„sequenceåç§°ï¼Œä¸¤ä¸ªåç§°å¯ä»¥ä¸€è‡´ã€‚&lt;/p>
&lt;p>&lt;strong>@Transient&lt;/strong>ï¼šè¡¨ç¤ºè¯¥å±žæ€§å¹¶éžä¸€ä¸ªåˆ°æ•°æ®åº“è¡¨çš„å­—æ®µçš„æ˜ å°„,ORMæ¡†æž¶å°†å¿½ç•¥è¯¥å±žæ€§ã€‚&lt;/p>
&lt;p>å¦‚æžœä¸€ä¸ªå±žæ€§å¹¶éžæ•°æ®åº“è¡¨çš„å­—æ®µæ˜ å°„,å°±åŠ¡å¿…å°†å…¶æ ‡ç¤ºä¸º@Transient,å¦åˆ™,ORMæ¡†æž¶é»˜è®¤å…¶æ³¨è§£ä¸º@Basicã€‚@Basic(fetch=FetchType.LAZY)ï¼šæ ‡è®°å¯ä»¥æŒ‡å®šå®žä½“å±žæ€§çš„åŠ è½½æ–¹å¼&lt;/p>
&lt;p>&lt;strong>@JsonIgnore&lt;/strong>ï¼šä½œç”¨æ˜¯jsonåºåˆ—åŒ–æ—¶å°†Java beanä¸­çš„ä¸€äº›å±žæ€§å¿½ç•¥æŽ‰,åºåˆ—åŒ–å’Œååºåˆ—åŒ–éƒ½å—å½±å“ã€‚&lt;/p>
&lt;p>&lt;strong>@JoinColumn&lt;/strong>ï¼ˆname=â€loginIdâ€ï¼‰:ä¸€å¯¹ä¸€ï¼šæœ¬è¡¨ä¸­æŒ‡å‘å¦ä¸€ä¸ªè¡¨çš„å¤–é”®ã€‚ä¸€å¯¹å¤šï¼šå¦ä¸€ä¸ªè¡¨æŒ‡å‘æœ¬è¡¨çš„å¤–é”®ã€‚&lt;/p>
&lt;p>&lt;strong>@OneToOneã€@OneToManyã€@ManyToOne&lt;/strong>ï¼šå¯¹åº”hibernateé…ç½®æ–‡ä»¶ä¸­çš„ä¸€å¯¹ä¸€ï¼Œä¸€å¯¹å¤šï¼Œå¤šå¯¹ä¸€ã€‚&lt;/p>
&lt;h2 id="å››springmvcç›¸å…³æ³¨è§£">å››ã€springMVCç›¸å…³æ³¨è§£&lt;/h2>
&lt;p>&lt;strong>@RequestMapping&lt;/strong>ï¼š@RequestMapping(â€œ/pathâ€)è¡¨ç¤ºè¯¥æŽ§åˆ¶å™¨å¤„ç†æ‰€æœ‰â€œ/pathâ€çš„UR Lè¯·æ±‚ã€‚&lt;/p>
&lt;p>RequestMappingæ˜¯ä¸€ä¸ªç”¨æ¥å¤„ç†è¯·æ±‚åœ°å€æ˜ å°„çš„æ³¨è§£ï¼Œå¯ç”¨äºŽç±»æˆ–æ–¹æ³•ä¸Šã€‚&lt;/p>
&lt;p>ç”¨äºŽç±»ä¸Šï¼Œè¡¨ç¤ºç±»ä¸­çš„æ‰€æœ‰å“åº”è¯·æ±‚çš„æ–¹æ³•éƒ½æ˜¯ä»¥è¯¥åœ°å€ä½œä¸ºçˆ¶è·¯å¾„ã€‚è¯¥æ³¨è§£æœ‰å…­ä¸ªå±žæ€§ï¼š&lt;/p>
&lt;p>&lt;strong>params&lt;/strong>:æŒ‡å®šrequestä¸­å¿…é¡»åŒ…å«æŸäº›å‚æ•°å€¼æ˜¯ï¼Œæ‰è®©è¯¥æ–¹æ³•å¤„ç†ã€‚&lt;/p>
&lt;p>&lt;strong>headers&lt;/strong>:æŒ‡å®šrequestä¸­å¿…é¡»åŒ…å«æŸäº›æŒ‡å®šçš„headerå€¼ï¼Œæ‰èƒ½è®©è¯¥æ–¹æ³•å¤„ç†è¯·æ±‚ã€‚&lt;/p>
&lt;p>&lt;strong>value&lt;/strong>:æŒ‡å®šè¯·æ±‚çš„å®žé™…åœ°å€ï¼ŒæŒ‡å®šçš„åœ°å€å¯ä»¥æ˜¯URI Template æ¨¡å¼&lt;/p>
&lt;p>&lt;strong>method&lt;/strong>:æŒ‡å®šè¯·æ±‚çš„methodç±»åž‹ï¼Œ GETã€POSTã€PUTã€DELETEç­‰&lt;/p>
&lt;p>&lt;strong>consumes&lt;/strong>:æŒ‡å®šå¤„ç†è¯·æ±‚çš„æäº¤å†…å®¹ç±»åž‹ï¼ˆContent-Typeï¼‰ï¼Œå¦‚application/json,text/html;&lt;/p>
&lt;p>&lt;strong>produces&lt;/strong>:æŒ‡å®šè¿”å›žçš„å†…å®¹ç±»åž‹ï¼Œä»…å½“requestè¯·æ±‚å¤´ä¸­çš„(Accept)ç±»åž‹ä¸­åŒ…å«è¯¥æŒ‡å®šç±»åž‹æ‰è¿”å›ž&lt;/p>
&lt;p>&lt;strong>@RequestParam&lt;/strong>ï¼šç”¨åœ¨æ–¹æ³•çš„å‚æ•°å‰é¢ã€‚
@RequestParam
String a =request.getParameter(â€œaâ€)ã€‚&lt;/p>
&lt;p>&lt;strong>@PathVariable&lt;/strong>:è·¯å¾„å˜é‡ã€‚å¦‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="n">RequestMapping&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="err">â€œ&lt;/span>&lt;span class="n">user&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">mac&lt;/span>&lt;span class="o">/{&lt;/span>&lt;span class="n">macAddress&lt;/span>&lt;span class="o">}&lt;/span>&lt;span class="err">â€&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="nf">getByMacAddress&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="nd">@PathVariable&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">macAddress&lt;/span>&lt;span class="o">){&lt;/span>
&lt;span class="c1">//do something;
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å‚æ•°ä¸Žå¤§æ‹¬å·é‡Œçš„åå­—ä¸€æ ·è¦ç›¸åŒã€‚&lt;/p>
&lt;h2 id="äº”å…¨å±€å¼‚å¸¸å¤„ç†">äº”ã€å…¨å±€å¼‚å¸¸å¤„ç†&lt;/h2>
&lt;p>&lt;strong>@ControllerAdvice&lt;/strong>ï¼šåŒ…å«@Componentã€‚å¯ä»¥è¢«æ‰«æåˆ°ã€‚ç»Ÿä¸€å¤„ç†å¼‚å¸¸ã€‚&lt;/p>
&lt;p>&lt;strong>@ExceptionHandler&lt;/strong>ï¼ˆException.classï¼‰ï¼šç”¨åœ¨æ–¹æ³•ä¸Šé¢è¡¨ç¤ºé‡åˆ°è¿™ä¸ªå¼‚å¸¸å°±æ‰§è¡Œä»¥ä¸‹æ–¹æ³•ã€‚&lt;/p></description></item><item><title>æŽ¨è4æ¬¾MySQLè°ƒä¼˜å·¥å…·ï¼Œå¤§ç¥žéƒ½åœ¨ç”¨</title><link>https://blog.itning.top/post/2020/03/29/%E6%8E%A8%E8%8D%904%E6%AC%BEmysql%E8%B0%83%E4%BC%98%E5%B7%A5%E5%85%B7%E5%A4%A7%E7%A5%9E%E9%83%BD%E5%9C%A8%E7%94%A8/</link><pubDate>Sun, 29 Mar 2020 13:13:18 +0800</pubDate><guid>https://blog.itning.top/post/2020/03/29/%E6%8E%A8%E8%8D%904%E6%AC%BEmysql%E8%B0%83%E4%BC%98%E5%B7%A5%E5%85%B7%E5%A4%A7%E7%A5%9E%E9%83%BD%E5%9C%A8%E7%94%A8/</guid><description>&lt;p>å¯¹äºŽæ­£åœ¨è¿è¡Œçš„mysqlæ€§èƒ½å¦‚ä½•ï¼Ÿå‚æ•°è®¾ç½®çš„æ˜¯å¦åˆç†ï¼Ÿè´¦å·è®¾ç½®çš„æ˜¯å¦å­˜åœ¨å®‰å…¨éšæ‚£æ˜¯å¦äº†ç„¶äºŽèƒ¸ï¼Ÿ&lt;/p>
&lt;p>ä¿—è¯è¯´å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨ï¼Œå®šæœŸå¯¹ä½ çš„&lt;a href="http://mp.weixin.qq.com/s?__biz=MzI3ODcxMzQzMw==&amp;amp;mid=2247490727&amp;amp;idx=1&amp;amp;sn=4d64de037c0665c57ced6abf12a003ce&amp;amp;chksm=eb539991dc241087c19bd0e70dfda3d03861d00c7536066b09f0723d23d8562551975c44e851&amp;amp;scene=21#wechat_redirect">MYSQL&lt;/a>æ•°æ®åº“è¿›è¡Œä¸€ä¸ªä½“æ£€ï¼Œæ˜¯ä¿è¯æ•°æ®åº“å®‰å…¨è¿è¡Œçš„é‡è¦æ‰‹æ®µã€‚&lt;/p>
&lt;p>ä»Šå¤©å’Œå¤§å®¶åˆ†äº«å‡ ä¸ªmysql ä¼˜åŒ–çš„å·¥å…·ï¼Œä½ å¯ä»¥ä½¿ç”¨å®ƒä»¬å¯¹ä½ çš„mysqlè¿›è¡Œä¸€ä¸ªä½“æ£€ï¼Œç”ŸæˆawræŠ¥å‘Šï¼Œè®©ä½ ä»Žæ•´ä½“ä¸ŠæŠŠæ¡ä½ çš„æ•°æ®åº“çš„æ€§èƒ½æƒ…å†µã€‚&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/20200129131600.webp" alt="å½±å“æ•°æ®åº“çš„å› ç´ ">&lt;/p>
&lt;h3 id="1mysqltuner-pl">1ã€mysqltuner-pl&lt;/h3>
&lt;p>è¿™æ˜¯mysqlä¸€ä¸ªå¸¸ç”¨çš„æ•°æ®åº“æ€§èƒ½è¯Šæ–­å·¥å…·ï¼Œä¸»è¦æ£€æŸ¥å‚æ•°è®¾ç½®çš„åˆç†æ€§åŒ…æ‹¬æ—¥å¿—æ–‡ä»¶ã€å­˜å‚¨å¼•æ“Žã€å®‰å…¨å»ºè®®åŠæ€§èƒ½åˆ†æžã€‚é’ˆå¯¹æ½œåœ¨çš„é—®é¢˜ï¼Œç»™å‡ºæ”¹è¿›çš„å»ºè®®ï¼Œæ˜¯mysqlä¼˜åŒ–çš„å¥½å¸®æ‰‹ã€‚&lt;/p>
&lt;p>åœ¨ä¸Šä¸€ç‰ˆæœ¬ä¸­ï¼ŒMySQLTuneræ”¯æŒMySQL / MariaDB / Percona Serverçš„çº¦300ä¸ªæŒ‡æ ‡ã€‚&lt;/p>
&lt;p>é¡¹ç›®åœ°å€ï¼šhttps://github.com/major/MySQLTuner-perl&lt;/p>
&lt;p>&lt;strong>1.1 ä¸‹è½½&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="o">[&lt;/span>root@localhost ~&lt;span class="o">]&lt;/span>&lt;span class="c1">#wget https://raw.githubusercontent.com/major/MySQLTuner-perl/master/mysqltuner.pl&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>1.2 ä½¿ç”¨&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="o">[&lt;/span>root@localhost ~&lt;span class="o">]&lt;/span>&lt;span class="c1"># ./mysqltuner.pl --socket /var/lib/mysql/mysql.sock &amp;gt;&amp;gt; MySQLTuner 1.7.4 - Major Hayden &amp;lt;major@mhtx.net&amp;gt; &amp;gt;&amp;gt; Bug reports, feature requests, and downloads at http://mysqltuner.com/ &amp;gt;&amp;gt; Run with &amp;#39;--help&amp;#39; for additional options and output filtering\[--\] Skipped version check for MySQLTuner scriptPlease enter your MySQL administrative login: rootPlease enter your MySQL administrative password: \[OK\] Currently running supported MySQL version 5.7.23\[OK\] Operating on 64-bit architecture&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>1.3ã€æŠ¥å‘Šåˆ†æž&lt;/strong>&lt;/p>
&lt;p>1ï¼‰é‡è¦å…³æ³¨[!!]ï¼ˆä¸­æ‹¬å·æœ‰å¹å·çš„é¡¹ï¼‰ä¾‹å¦‚[!!] Maximum possible memory usage: 4.8G (244.13% of installed RAM)ï¼Œè¡¨ç¤ºå†…å­˜å·²ç»ä¸¥é‡ç”¨è¶…äº†ã€‚&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/20200329131801.png" alt="a">&lt;/p>
&lt;p>2ï¼‰å…³æ³¨æœ€åŽç»™çš„å»ºè®®â€œRecommendations â€ã€‚&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/20200329131902.png" alt="b">&lt;/p>
&lt;h3 id="2tuning-primersh">2ã€tuning-primer.sh&lt;/h3>
&lt;p>&lt;a href="http://mp.weixin.qq.com/s?__biz=MzI3ODcxMzQzMw==&amp;amp;mid=2247491744&amp;amp;idx=1&amp;amp;sn=5916fcf89d2f40065728c7c5dd1b258f&amp;amp;chksm=eb506596dc27ec801f487e7d6917e33cbc02eb59cc155fd1aed0cbde5e82d87ddb9bc1026bdb&amp;amp;scene=21#wechat_redirect">è¿™æ˜¯mysqlçš„å¦ä¸€ä¸ªä¼˜åŒ–å·¥å…·ï¼Œé’ˆäºŽmysqlçš„æ•´ä½“è¿›è¡Œä¸€ä¸ªä½“æ£€ï¼Œå¯¹æ½œåœ¨çš„é—®é¢˜ï¼Œç»™å‡ºä¼˜åŒ–çš„å»ºè®®ã€‚&lt;/a>&lt;/p>
&lt;p>é¡¹ç›®åœ°å€ï¼šhttps://github.com/BMDan/tuning-primer.sh&lt;/p>
&lt;p>ç›®å‰ï¼Œæ”¯æŒæ£€æµ‹å’Œä¼˜åŒ–å»ºè®®çš„å†…å®¹å¦‚ä¸‹ï¼š&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/20200329132003.webp" alt="c">&lt;/p>
&lt;p>&lt;strong>2.1 ä¸‹è½½&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="o">[&lt;/span>root@localhost ~&lt;span class="o">]&lt;/span>&lt;span class="c1">#wget https://launchpad.net/mysql-tuning-primer/trunk/1.6-r1/+download/tuning-primer.sh&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>2.2 ä½¿ç”¨&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="o">[&lt;/span>root@localhost ~&lt;span class="o">]&lt;/span>&lt;span class="c1"># [root@localhost dba]# ./tuning-primer.sh&lt;/span>
-- MYSQL PERFORMANCE TUNING PRIMER --
- By: Matthew Montgomery -
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>2.3 æŠ¥å‘Šåˆ†æž&lt;/strong>&lt;/p>
&lt;p>é‡ç‚¹æŸ¥çœ‹æœ‰çº¢è‰²å‘Šè­¦çš„é€‰é¡¹ï¼Œæ ¹æ®å»ºè®®ç»“åˆè‡ªå·±ç³»ç»Ÿçš„å®žé™…æƒ…å†µè¿›è¡Œä¿®æ”¹ï¼Œä¾‹å¦‚ï¼š&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/20200329132104.webp" alt="d">&lt;/p>
&lt;h3 id="3pt-variable-advisor">3ã€pt-variable-advisor&lt;/h3>
&lt;p>pt-variable-advisor å¯ä»¥åˆ†æžMySQLå˜é‡å¹¶å°±å¯èƒ½å‡ºçŽ°çš„é—®é¢˜æå‡ºå»ºè®®ã€‚&lt;/p>
&lt;p>&lt;strong>3.1 å®‰è£…&lt;/strong>&lt;/p>
&lt;p>&lt;a href="https://www.percona.com/downloads/percona-toolkit/LATEST/">https://www.percona.com/downloads/percona-toolkit/LATEST/&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="o">[&lt;/span>root@localhost ~&lt;span class="o">]&lt;/span>&lt;span class="c1">#wget https://www.percona.com/downloads/percona-toolkit/3.0.13/binary/redhat/7/x86\_64/percona-toolkit-3.0.13-re85ce15-el7-x86\_64-bundle.tar\[root@localhost ~\]#yum install percona-toolkit-3.0.13-1.el7.x86_64.rpm&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>3.2 ä½¿ç”¨&lt;/strong>&lt;/p>
&lt;p>pt-variable-advisoræ˜¯ptå·¥å…·é›†çš„ä¸€ä¸ªå­å·¥å…·ï¼Œä¸»è¦ç”¨æ¥è¯Šæ–­ä½ çš„å‚æ•°è®¾ç½®æ˜¯å¦åˆç†ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="o">[&lt;/span>root@localhost ~&lt;span class="o">]&lt;/span>&lt;span class="c1"># pt-variable-advisor localhost --socket /var/lib/mysql/mysql.sock&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>3.3 æŠ¥å‘Šåˆ†æž&lt;/strong>&lt;/p>
&lt;p>é‡ç‚¹å…³æ³¨æœ‰WARNçš„ä¿¡æ¯çš„æ¡ç›®ï¼Œä¾‹å¦‚ï¼š&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/20200329132205.png" alt="e">&lt;/p>
&lt;h3 id="4pt-qurey-digest">4ã€pt-qurey-digest&lt;/h3>
&lt;p>pt-query-digest ä¸»è¦åŠŸèƒ½æ˜¯ä»Žæ—¥å¿—ã€è¿›ç¨‹åˆ—è¡¨å’Œtcpdumpåˆ†æžMySQLæŸ¥è¯¢ã€‚å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼šJavaæŠ€æœ¯æ ˆï¼Œåœ¨åŽå°å›žå¤ï¼šmysqlï¼Œå¯ä»¥èŽ·å–æˆ‘æ•´ç†çš„ N ç¯‡ MySQL å¹²è´§ã€‚&lt;/p>
&lt;p>&lt;strong>4.1å®‰è£…&lt;/strong>&lt;/p>
&lt;p>å…·ä½“å‚è€ƒ3.1èŠ‚&lt;/p>
&lt;p>&lt;strong>4.2ä½¿ç”¨&lt;/strong>&lt;/p>
&lt;p>pt-query-digestä¸»è¦ç”¨æ¥åˆ†æžmysqlçš„æ…¢æ—¥å¿—ï¼Œä¸Žmysqldumpshowå·¥å…·ç›¸æ¯”ï¼Œpy-query_digest å·¥å…·çš„åˆ†æžç»“æžœæ›´å…·ä½“ï¼Œæ›´å®Œå–„ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="o">[&lt;/span>root@localhost ~&lt;span class="o">]&lt;/span>&lt;span class="c1"># pt-query-digest /var/lib/mysql/slowtest-slow.log&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>4.3 å¸¸è§ç”¨æ³•åˆ†æž&lt;/strong>&lt;/p>
&lt;p>1ï¼‰ç›´æŽ¥åˆ†æžæ…¢æŸ¥è¯¢æ–‡ä»¶:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-shell" data-lang="shell">pt-query-digest /var/lib/mysql/slowtest-slow.log &amp;gt; slow_report.log
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>2ï¼‰åˆ†æžæœ€è¿‘12å°æ—¶å†…çš„æŸ¥è¯¢ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-shell" data-lang="shell">pt-query-digest --since&lt;span class="o">=&lt;/span>12h /var/lib/mysql/slowtest-slow.log &amp;gt; slow_report2.log
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>3ï¼‰åˆ†æžæŒ‡å®šæ—¶é—´èŒƒå›´å†…çš„æŸ¥è¯¢ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-powershell" data-lang="powershell">&lt;span class="n">pt-query-digest&lt;/span> &lt;span class="p">/&lt;/span>&lt;span class="n">var&lt;/span>&lt;span class="p">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="p">/&lt;/span>&lt;span class="n">mysql&lt;/span>&lt;span class="p">/&lt;/span>&lt;span class="n">slowtest-slow&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">log&lt;/span> &lt;span class="p">-&lt;/span>&lt;span class="n">-since&lt;/span> &lt;span class="s1">&amp;#39;2017-01-07 09:30:00&amp;#39;&lt;/span> &lt;span class="p">-&lt;/span>&lt;span class="n">-until&lt;/span> &lt;span class="s1">&amp;#39;2017-01-07 10:00:00&amp;#39;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">slow_report3&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">log&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>4ï¼‰åˆ†æžæŒ‡å«æœ‰selectè¯­å¥çš„æ…¢æŸ¥è¯¢&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-shell" data-lang="shell">pt-query-digest --filter &lt;span class="s1">&amp;#39;$event-&amp;gt;{fingerprint} =~ m/^select/i&amp;#39;&lt;/span> /var/lib/mysql/slowtest-slow.log&amp;gt; slow_report4.log
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>5ï¼‰é’ˆå¯¹æŸä¸ªç”¨æˆ·çš„æ…¢æŸ¥è¯¢&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-shell" data-lang="shell">pt-query-digest --filter &lt;span class="s1">&amp;#39;($event-&amp;gt;{user} || &amp;#34;&amp;#34;) =~ m/^root/i&amp;#39;&lt;/span> /var/lib/mysql/slowtest-slow.log&amp;gt; slow_report5.log
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>6ï¼‰æŸ¥è¯¢æ‰€æœ‰æ‰€æœ‰çš„å…¨è¡¨æ‰«ææˆ–full joinçš„æ…¢æŸ¥è¯¢&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-shell" data-lang="shell">pt-query-digest --filter &lt;span class="s1">&amp;#39;(($event-&amp;gt;{Full\_scan} || &amp;#34;&amp;#34;) eq &amp;#34;yes&amp;#34;) ||(($event-&amp;gt;{Full\_join} || &amp;#34;&amp;#34;) eq &amp;#34;yes&amp;#34;)&amp;#39;&lt;/span> /var/lib/mysql/slowtest-slow.log&amp;gt; slow_report6.log
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>4.4 æŠ¥å‘Šåˆ†æž&lt;/strong>&lt;/p>
&lt;p>ç¬¬ä¸€éƒ¨åˆ†ï¼šæ€»ä½“ç»Ÿè®¡ç»“æžœ&lt;/p>
&lt;p>Overallï¼šæ€»å…±æœ‰å¤šå°‘æ¡æŸ¥è¯¢ Time rangeï¼šæŸ¥è¯¢æ‰§è¡Œçš„æ—¶é—´èŒƒå›´ uniqueï¼šå”¯ä¸€æŸ¥è¯¢æ•°é‡ï¼Œå³å¯¹æŸ¥è¯¢æ¡ä»¶è¿›è¡Œå‚æ•°åŒ–ä»¥åŽï¼Œæ€»å…±æœ‰å¤šå°‘ä¸ªä¸åŒçš„æŸ¥è¯¢ totalï¼šæ€»è®¡ minï¼šæœ€å° maxï¼šæœ€å¤§ avgï¼šå¹³å‡ 95%ï¼šæŠŠæ‰€æœ‰å€¼ä»Žå°åˆ°å¤§æŽ’åˆ—ï¼Œä½ç½®ä½äºŽ95%çš„é‚£ä¸ªæ•°ï¼Œè¿™ä¸ªæ•°ä¸€èˆ¬æœ€å…·æœ‰å‚è€ƒä»·å€¼ medianï¼šä¸­ä½æ•°ï¼ŒæŠŠæ‰€æœ‰å€¼ä»Žå°åˆ°å¤§æŽ’åˆ—ï¼Œä½ç½®ä½äºŽä¸­é—´é‚£ä¸ªæ•°&lt;/p>
&lt;p>ç¬¬äºŒéƒ¨åˆ†ï¼šæŸ¥è¯¢åˆ†ç»„ç»Ÿè®¡ç»“æžœ&lt;/p>
&lt;p>Rankï¼šæ‰€æœ‰è¯­å¥çš„æŽ’åï¼Œé»˜è®¤æŒ‰æŸ¥è¯¢æ—¶é—´é™åºæŽ’åˆ—ï¼Œé€šè¿‡&amp;ndash;order-byæŒ‡å®š Query IDï¼šè¯­å¥çš„IDï¼Œï¼ˆåŽ»æŽ‰å¤šä½™ç©ºæ ¼å’Œæ–‡æœ¬å­—ç¬¦ï¼Œè®¡ç®—hashå€¼ï¼‰ Responseï¼šæ€»çš„å“åº”æ—¶é—´ timeï¼šè¯¥æŸ¥è¯¢åœ¨æœ¬æ¬¡åˆ†æžä¸­æ€»çš„æ—¶é—´å æ¯” callsï¼šæ‰§è¡Œæ¬¡æ•°ï¼Œå³æœ¬æ¬¡åˆ†æžæ€»å…±æœ‰å¤šå°‘æ¡è¿™ç§ç±»åž‹çš„æŸ¥è¯¢è¯­å¥ R/Callï¼šå¹³å‡æ¯æ¬¡æ‰§è¡Œçš„å“åº”æ—¶é—´ V/Mï¼šå“åº”æ—¶é—´Variance-to-meançš„æ¯”çŽ‡ Itemï¼šæŸ¥è¯¢å¯¹è±¡&lt;/p>
&lt;p>ç¬¬ä¸‰éƒ¨åˆ†ï¼šæ¯ä¸€ç§æŸ¥è¯¢çš„è¯¦ç»†ç»Ÿè®¡ç»“æžœ&lt;/p>
&lt;p>IDï¼šæŸ¥è¯¢çš„IDå·ï¼Œå’Œä¸Šå›¾çš„Query IDå¯¹åº” Databasesï¼šæ•°æ®åº“å Usersï¼šå„ä¸ªç”¨æˆ·æ‰§è¡Œçš„æ¬¡æ•°ï¼ˆå æ¯”ï¼‰ Query_time distribution ï¼šæŸ¥è¯¢æ—¶é—´åˆ†å¸ƒ, é•¿çŸ­ä½“çŽ°åŒºé—´å æ¯”ã€‚Tablesï¼šæŸ¥è¯¢ä¸­æ¶‰åŠåˆ°çš„è¡¨ Explainï¼šSQLè¯­å¥ã€‚&lt;/p></description></item><item><title>JPAçº§è”æ“ä½œ</title><link>https://blog.itning.top/post/2020/03/26/jpa%E7%BA%A7%E8%81%94%E6%93%8D%E4%BD%9C/</link><pubDate>Thu, 26 Mar 2020 12:36:32 +0800</pubDate><guid>https://blog.itning.top/post/2020/03/26/jpa%E7%BA%A7%E8%81%94%E6%93%8D%E4%BD%9C/</guid><description>&lt;h2 id="çº§è”æ“ä½œæœ‰å“ªäº›">çº§è”æ“ä½œæœ‰å“ªäº›ï¼Ÿ&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="kn">package&lt;/span> &lt;span class="nn">javax.persistence&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kd">enum&lt;/span> &lt;span class="n">CascadeType&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="cm">/** Cascade all operations */&lt;/span>
&lt;span class="n">ALL&lt;/span>&lt;span class="o">,&lt;/span>
&lt;span class="cm">/** Cascade persist operation */&lt;/span>
&lt;span class="n">PERSIST&lt;/span>&lt;span class="o">,&lt;/span>
&lt;span class="cm">/** Cascade merge operation */&lt;/span>
&lt;span class="n">MERGE&lt;/span>&lt;span class="o">,&lt;/span>
&lt;span class="cm">/** Cascade remove operation */&lt;/span>
&lt;span class="n">REMOVE&lt;/span>&lt;span class="o">,&lt;/span>
&lt;span class="cm">/** Cascade refresh operation */&lt;/span>
&lt;span class="n">REFRESH&lt;/span>&lt;span class="o">,&lt;/span>
&lt;span class="cm">/**
&lt;/span>&lt;span class="cm"> * Cascade detach operation
&lt;/span>&lt;span class="cm"> *
&lt;/span>&lt;span class="cm"> * @since 2.0
&lt;/span>&lt;span class="cm"> *
&lt;/span>&lt;span class="cm"> */&lt;/span>
&lt;span class="n">DETACH&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="æµ‹è¯•çŽ¯å¢ƒ">æµ‹è¯•çŽ¯å¢ƒ&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-xml" data-lang="xml">&lt;span class="nt">&amp;lt;parent&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;groupId&amp;gt;&lt;/span>org.springframework.boot&lt;span class="nt">&amp;lt;/groupId&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;artifactId&amp;gt;&lt;/span>spring-boot-starter-parent&lt;span class="nt">&amp;lt;/artifactId&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;version&amp;gt;&lt;/span>2.2.5.RELEASE&lt;span class="nt">&amp;lt;/version&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;relativePath/&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;/parent&amp;gt;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="kn">import&lt;/span> &lt;span class="nn">lombok.Data&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">javax.persistence.*&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">java.util.List&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="cm">/**
&lt;/span>&lt;span class="cm"> * @author itning
&lt;/span>&lt;span class="cm"> * @date 2020/3/26 12:06
&lt;/span>&lt;span class="cm"> */&lt;/span>
&lt;span class="nd">@Entity&lt;/span>
&lt;span class="nd">@Data&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kd">class&lt;/span> &lt;span class="nc">Father&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="nd">@Id&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">id&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="nd">@Column&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="nd">@OneToMany&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">cascade&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">CascadeType&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">PERSIST&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="nd">@JoinColumn&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;father_id&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="n">List&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Son&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">sons&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="kn">import&lt;/span> &lt;span class="nn">lombok.Data&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">javax.persistence.Column&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">javax.persistence.Entity&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">javax.persistence.Id&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">javax.persistence.ManyToOne&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="cm">/**
&lt;/span>&lt;span class="cm"> * @author itning
&lt;/span>&lt;span class="cm"> * @date 2020/3/26 12:07
&lt;/span>&lt;span class="cm"> */&lt;/span>
&lt;span class="nd">@Data&lt;/span>
&lt;span class="nd">@Entity&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kd">class&lt;/span> &lt;span class="nc">Son&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="nd">@Id&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">sonId&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="nd">@Column&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">sonName&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="nd">@ManyToOne&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">Father&lt;/span> &lt;span class="n">father&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="nf">Son&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">String&lt;/span> &lt;span class="n">sonId&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">sonName&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">sonId&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">sonId&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">sonName&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">sonName&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="nf">Son&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="kn">import&lt;/span> &lt;span class="nn">org.springframework.data.jpa.repository.JpaRepository&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">top.itning.springboottest.entity.Father&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="cm">/**
&lt;/span>&lt;span class="cm"> * @author itning
&lt;/span>&lt;span class="cm"> * @date 2020/3/26 12:22
&lt;/span>&lt;span class="cm"> */&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kd">interface&lt;/span> &lt;span class="nc">FatherRepository&lt;/span> &lt;span class="kd">extends&lt;/span> &lt;span class="n">JpaRepository&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Father&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">String&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="kn">import&lt;/span> &lt;span class="nn">org.springframework.data.jpa.repository.JpaRepository&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">top.itning.springboottest.entity.Son&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="cm">/**
&lt;/span>&lt;span class="cm"> * @author itning
&lt;/span>&lt;span class="cm"> * @date 2020/3/26 12:23
&lt;/span>&lt;span class="cm"> */&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kd">interface&lt;/span> &lt;span class="nc">SonRepository&lt;/span> &lt;span class="kd">extends&lt;/span> &lt;span class="n">JpaRepository&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Son&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">String&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>â€‹&lt;/p>
&lt;h2 id="all">ALL&lt;/h2>
&lt;p>è¿™ä¸ªä¼šæ‰€æœ‰æƒ…å†µä¸‹å‡è¿›è¡Œå…³è”æ“ä½œï¼Œå³save-updateå’Œdelete&lt;/p>
&lt;h2 id="persistçº§è”æŒä¹…åŒ–">PERSISTï¼ˆçº§è”æŒä¹…åŒ–ï¼‰&lt;/h2>
&lt;p>å°†&lt;code>Father&lt;/code>ç±»ä¸­&lt;code>sons&lt;/code>å±žæ€§çš„æ³¨è§£æ”¹æˆ&lt;code>@OneToMany(cascade = CascadeType.PERSIST)&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="nd">@Test&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">test&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">ArrayList&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Son&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">sons&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Lists&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">newArrayList&lt;/span>&lt;span class="o">(&lt;/span>
&lt;span class="k">new&lt;/span> &lt;span class="n">Son&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;sa&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="s">&amp;#34;sa&amp;#34;&lt;/span>&lt;span class="o">),&lt;/span>
&lt;span class="k">new&lt;/span> &lt;span class="n">Son&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;sb&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="s">&amp;#34;sb&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="o">);&lt;/span>
&lt;span class="n">Father&lt;/span> &lt;span class="n">father&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">Father&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="n">father&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setId&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;a&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">father&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setName&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;a&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">father&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setSons&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">sons&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">fatherRepository&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">save&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">father&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æµ‹è¯•è¿è¡ŒåŽï¼Œ&lt;strong>ä¼šæŠ›å‡ºå¼‚å¸¸&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-shell" data-lang="shell">Caused by: javax.persistence.EntityNotFoundException: Unable to find top.itning.springboottest.entity.Son with id sa
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯çŸ¥ï¼šçº§è”æŒä¹…åŒ–æ—¶ï¼Œ&lt;strong>JPAä¸ä¼šæ–°å¢žä¿å­˜å¤–é”®&lt;/strong>&lt;/p>
&lt;p>å°†å¤–é”®å¯¹è±¡æ³¨é‡Šï¼Œé‡æ–°æµ‹è¯•ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="nd">@Test&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">test&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="cm">/*ArrayList&amp;lt;Son&amp;gt; sons = Lists.newArrayList(
&lt;/span>&lt;span class="cm"> new Son(&amp;#34;sa&amp;#34;, &amp;#34;sa&amp;#34;),
&lt;/span>&lt;span class="cm"> new Son(&amp;#34;sb&amp;#34;, &amp;#34;sb&amp;#34;)
&lt;/span>&lt;span class="cm"> );*/&lt;/span>
&lt;span class="n">Father&lt;/span> &lt;span class="n">father&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">Father&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="n">father&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setId&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;a&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">father&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setName&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;a&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="c1">//father.setSons(sons);
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="n">fatherRepository&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">save&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">father&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ­£å¸¸ä¿å­˜&lt;code>Father&lt;/code>ï¼ŒSQLå¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">select&lt;/span> &lt;span class="n">father0_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">id&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">id1_0_0_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">father0_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">name2_0_0_&lt;/span> &lt;span class="k">from&lt;/span> &lt;span class="n">father&lt;/span> &lt;span class="n">father0_&lt;/span> &lt;span class="k">where&lt;/span> &lt;span class="n">father0_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="o">=?&lt;/span>
&lt;span class="k">insert&lt;/span> &lt;span class="k">into&lt;/span> &lt;span class="n">father&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">id&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">values&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">?&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">?&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™æ—¶ï¼Œæˆ‘ä»¬å†™å…¥&lt;code>Son&lt;/code>è¡¨ä¸¤æ¡æ•°æ®ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="nd">@Test&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">test2&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">Father&lt;/span> &lt;span class="n">father&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">Father&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="n">father&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setId&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;a&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">Son&lt;/span> &lt;span class="n">son&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">Son&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="n">son&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setSonId&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;sa&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">son&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setSonName&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;sa&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">son&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setFather&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">father&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">Son&lt;/span> &lt;span class="n">son2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">Son&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="n">son2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setSonId&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;sb&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">son2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setSonName&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;sb&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">son2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setFather&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">father&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">sonRepository&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">save&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">son&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">sonRepository&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">save&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">son2&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å–æ¶ˆæ³¨é‡Šå¹¶é‡æ–°æ‰§è¡Œåˆšæ‰å‡ºçŽ°å¼‚å¸¸çš„æµ‹è¯•ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="nd">@Test&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">test&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">ArrayList&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Son&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">sons&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Lists&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">newArrayList&lt;/span>&lt;span class="o">(&lt;/span>
&lt;span class="k">new&lt;/span> &lt;span class="n">Son&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;sa&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="s">&amp;#34;sa1&amp;#34;&lt;/span>&lt;span class="o">),&lt;/span>
&lt;span class="k">new&lt;/span> &lt;span class="n">Son&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;sb&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="s">&amp;#34;sb1&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="o">);&lt;/span>
&lt;span class="n">Father&lt;/span> &lt;span class="n">father&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">Father&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="n">father&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setId&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;a&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">father&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setName&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;b&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">father&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setSons&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">sons&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">fatherRepository&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">save&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">father&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>æ³¨æ„ï¼šæˆ‘ä»¬æŠŠ&lt;code>Son&lt;/code>å¯¹è±¡çš„&lt;code>sonName&lt;/code>å±žæ€§å€¼å…¨éƒ¨å¢žåŠ äº†&lt;code>1&lt;/code>ï¼Œ&lt;code>father.setName(&amp;quot;b&amp;quot;);&lt;/code>&lt;/strong>&lt;/p>
&lt;p>æµ‹è¯•è¾“å‡ºçš„SQLï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">select&lt;/span> &lt;span class="n">father0_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">id&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">id1_0_0_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">father0_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">name2_0_0_&lt;/span> &lt;span class="k">from&lt;/span> &lt;span class="n">father&lt;/span> &lt;span class="n">father0_&lt;/span> &lt;span class="k">where&lt;/span> &lt;span class="n">father0_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="o">=?&lt;/span>
&lt;span class="k">select&lt;/span> &lt;span class="n">sons0_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">father_id&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">father_i3_1_0_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">sons0_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">son_id&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">son_id1_1_0_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">sons0_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">son_id&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">son_id1_1_1_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">sons0_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">father_id&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">father_i3_1_1_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">sons0_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">son_name&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">son_name2_1_1_&lt;/span> &lt;span class="k">from&lt;/span> &lt;span class="n">son&lt;/span> &lt;span class="n">sons0_&lt;/span> &lt;span class="k">where&lt;/span> &lt;span class="n">sons0_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">father_id&lt;/span>&lt;span class="o">=?&lt;/span>
&lt;span class="k">update&lt;/span> &lt;span class="n">father&lt;/span> &lt;span class="k">set&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="o">=?&lt;/span> &lt;span class="k">where&lt;/span> &lt;span class="n">id&lt;/span>&lt;span class="o">=?&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>åªå‘é€çš„ä¸¤æ¡æŸ¥è¯¢SQLå’Œä¸€æ¡æ›´æ–°&lt;code>Father&lt;/code>çš„SQLï¼Œå¹¶æ²¡æœ‰å°†&lt;code>Son&lt;/code>è¡¨çš„å€¼è¿›è¡Œæ›´æ”¹ã€‚&lt;/strong>&lt;/p>
&lt;p>æŽ¥ä¸‹æ¥çœ‹ä¸‹åˆ é™¤ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="nd">@Test&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">testDel&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">Father&lt;/span> &lt;span class="n">father&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">Father&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="n">father&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setId&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;a&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">fatherRepository&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">delete&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">father&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æµ‹è¯•è¾“å‡ºSQL:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">select&lt;/span> &lt;span class="n">father0_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">id&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">id1_0_0_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">father0_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">name2_0_0_&lt;/span> &lt;span class="k">from&lt;/span> &lt;span class="n">father&lt;/span> &lt;span class="n">father0_&lt;/span> &lt;span class="k">where&lt;/span> &lt;span class="n">father0_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="o">=?&lt;/span>
&lt;span class="k">update&lt;/span> &lt;span class="n">son&lt;/span> &lt;span class="k">set&lt;/span> &lt;span class="n">father_id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">null&lt;/span> &lt;span class="k">where&lt;/span> &lt;span class="n">father_id&lt;/span>&lt;span class="o">=?&lt;/span>
&lt;span class="k">delete&lt;/span> &lt;span class="k">from&lt;/span> &lt;span class="n">father&lt;/span> &lt;span class="k">where&lt;/span> &lt;span class="n">id&lt;/span>&lt;span class="o">=?&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯ä»¥çœ‹åˆ°ï¼Œ&lt;strong>åªä¼šå°†&lt;code>father&lt;/code>åˆ é™¤ï¼Œä¸ä¼šåˆ é™¤&lt;code>son&lt;/code>è€Œä¼šå°†å…¶å¤–é”®è®¾ä¸º&lt;code>null&lt;/code>&lt;/strong>&lt;/p>
&lt;h3 id="æ€»ç»“">æ€»ç»“&lt;/h3>
&lt;ol>
&lt;li>çº§è”æŒä¹…åŒ–æ–°å¢žæ—¶ä¸ä¼šå°†å¤–é”®å¯¹è±¡ä¿å­˜&lt;/li>
&lt;li>çº§è”æŒä¹…åŒ–æ›´æ–°æ—¶ä¸ä¼šæ›´æ–°å¤–é”®å¯¹è±¡&lt;/li>
&lt;li>çº§è”æŒä¹…åŒ–åˆ é™¤æ—¶ä¸ä¼šåˆ é™¤å¤–é”®å¯¹è±¡&lt;/li>
&lt;/ol>
&lt;p>æˆ‘ä»¬åˆšæ‰æŠŠ&lt;code>CascadeType.PERSIST&lt;/code>æ”¾åœ¨äº†&lt;code>father&lt;/code>ç±»ä¸­ï¼Œæˆ‘ä»¬è¿™å›žæ”¾åœ¨&lt;code>son&lt;/code>ä¸­è¯•è¯•ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="kn">import&lt;/span> &lt;span class="nn">lombok.Data&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">javax.persistence.*&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="cm">/**
&lt;/span>&lt;span class="cm"> * @author itning
&lt;/span>&lt;span class="cm"> * @date 2020/3/26 12:07
&lt;/span>&lt;span class="cm"> */&lt;/span>
&lt;span class="nd">@Data&lt;/span>
&lt;span class="nd">@Entity&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kd">class&lt;/span> &lt;span class="nc">Son&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="nd">@Id&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">sonId&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="nd">@Column&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">sonName&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="nd">@ManyToOne&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">cascade&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">CascadeType&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">PERSIST&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">Father&lt;/span> &lt;span class="n">father&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="nf">Son&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">String&lt;/span> &lt;span class="n">sonId&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">sonName&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">sonId&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">sonId&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">sonName&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">sonName&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="nf">Son&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¾ç…§åˆšæ‰çš„æµ‹è¯•ï¼Œç»“æžœæ²¡æœ‰åŒºåˆ«&lt;/p>
&lt;h2 id="mergeçº§è”æ›´æ–°åˆå¹¶">MERGEï¼ˆçº§è”æ›´æ–°ï¼ˆåˆå¹¶ï¼‰ï¼‰&lt;/h2>
&lt;p>å°†æ‰€æœ‰æ›´æ”¹é‡ç½®ï¼Œå¹¶å°†&lt;code>father&lt;/code>ç±»æ›´æ”¹å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="kn">import&lt;/span> &lt;span class="nn">lombok.Data&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">javax.persistence.*&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">java.util.List&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="cm">/**
&lt;/span>&lt;span class="cm"> * @author itning
&lt;/span>&lt;span class="cm"> * @date 2020/3/26 12:06
&lt;/span>&lt;span class="cm"> */&lt;/span>
&lt;span class="nd">@Entity&lt;/span>
&lt;span class="nd">@Data&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kd">class&lt;/span> &lt;span class="nc">Father&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="nd">@Id&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">id&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="nd">@Column&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="nd">@OneToMany&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">cascade&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">CascadeType&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">MERGE&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="nd">@JoinColumn&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;father_id&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="n">List&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Son&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">sons&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿è¡Œä»¥ä¸‹æµ‹è¯•ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="nd">@Test&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">test&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">ArrayList&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Son&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">sons&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Lists&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">newArrayList&lt;/span>&lt;span class="o">(&lt;/span>
&lt;span class="k">new&lt;/span> &lt;span class="n">Son&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;sa&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="s">&amp;#34;sa&amp;#34;&lt;/span>&lt;span class="o">),&lt;/span>
&lt;span class="k">new&lt;/span> &lt;span class="n">Son&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;sb&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="s">&amp;#34;sb&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="o">);&lt;/span>
&lt;span class="n">Father&lt;/span> &lt;span class="n">father&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">Father&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="n">father&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setId&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;a&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">father&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setName&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;a&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">father&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setSons&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">sons&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">fatherRepository&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">save&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">father&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>çœ‹åˆ°æ‰§è¡Œçš„SQLï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">select&lt;/span> &lt;span class="n">father0_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">id&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">id1_0_1_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">father0_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">name2_0_1_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">sons1_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">father_id&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">father_i3_1_3_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">sons1_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">son_id&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">son_id1_1_3_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">sons1_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">son_id&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">son_id1_1_0_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">sons1_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">father_id&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">father_i3_1_0_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">sons1_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">son_name&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">son_name2_1_0_&lt;/span> &lt;span class="k">from&lt;/span> &lt;span class="n">father&lt;/span> &lt;span class="n">father0_&lt;/span> &lt;span class="k">left&lt;/span> &lt;span class="k">outer&lt;/span> &lt;span class="k">join&lt;/span> &lt;span class="n">son&lt;/span> &lt;span class="n">sons1_&lt;/span> &lt;span class="k">on&lt;/span> &lt;span class="n">father0_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">sons1_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">father_id&lt;/span> &lt;span class="k">where&lt;/span> &lt;span class="n">father0_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="o">=?&lt;/span>
&lt;span class="k">select&lt;/span> &lt;span class="n">son0_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">son_id&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">son_id1_1_0_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">son0_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">father_id&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">father_i3_1_0_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">son0_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">son_name&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">son_name2_1_0_&lt;/span> &lt;span class="k">from&lt;/span> &lt;span class="n">son&lt;/span> &lt;span class="n">son0_&lt;/span> &lt;span class="k">where&lt;/span> &lt;span class="n">son0_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">son_id&lt;/span>&lt;span class="o">=?&lt;/span>
&lt;span class="k">select&lt;/span> &lt;span class="n">son0_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">son_id&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">son_id1_1_0_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">son0_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">father_id&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">father_i3_1_0_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">son0_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">son_name&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">son_name2_1_0_&lt;/span> &lt;span class="k">from&lt;/span> &lt;span class="n">son&lt;/span> &lt;span class="n">son0_&lt;/span> &lt;span class="k">where&lt;/span> &lt;span class="n">son0_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">son_id&lt;/span>&lt;span class="o">=?&lt;/span>
&lt;span class="k">insert&lt;/span> &lt;span class="k">into&lt;/span> &lt;span class="n">father&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">id&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">values&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">?&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">?&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">insert&lt;/span> &lt;span class="k">into&lt;/span> &lt;span class="n">son&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">father_id&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">son_name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">son_id&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">values&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">?&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">?&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">?&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">insert&lt;/span> &lt;span class="k">into&lt;/span> &lt;span class="n">son&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">father_id&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">son_name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">son_id&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">values&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">?&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">?&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">?&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">update&lt;/span> &lt;span class="n">son&lt;/span> &lt;span class="k">set&lt;/span> &lt;span class="n">father_id&lt;/span>&lt;span class="o">=?&lt;/span> &lt;span class="k">where&lt;/span> &lt;span class="n">son_id&lt;/span>&lt;span class="o">=?&lt;/span>
&lt;span class="k">update&lt;/span> &lt;span class="n">son&lt;/span> &lt;span class="k">set&lt;/span> &lt;span class="n">father_id&lt;/span>&lt;span class="o">=?&lt;/span> &lt;span class="k">where&lt;/span> &lt;span class="n">son_id&lt;/span>&lt;span class="o">=?&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯ä»¥çœ‹åˆ°&lt;strong>ä¸ä»…ä¿å­˜äº†&lt;code>father&lt;/code>ï¼Œè¿˜ä¿å­˜äº†&lt;code>son&lt;/code>&lt;/strong>&lt;/p>
&lt;p>æˆ‘ä»¬æ›´æ–°ä¸‹è¯•è¯•ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="nd">@Test&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">test&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">ArrayList&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Son&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">sons&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Lists&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">newArrayList&lt;/span>&lt;span class="o">(&lt;/span>
&lt;span class="k">new&lt;/span> &lt;span class="n">Son&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;sa&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="s">&amp;#34;sa2&amp;#34;&lt;/span>&lt;span class="o">),&lt;/span>
&lt;span class="k">new&lt;/span> &lt;span class="n">Son&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;sb&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="s">&amp;#34;sb2&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="o">);&lt;/span>
&lt;span class="n">Father&lt;/span> &lt;span class="n">father&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">Father&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="n">father&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setId&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;a&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">father&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setName&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;a&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">father&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setSons&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">sons&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">fatherRepository&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">save&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">father&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å°†&lt;code>Son&lt;/code>çš„&lt;code>sonName&lt;/code>å…¨åŠ ä¸ª&lt;code>2&lt;/code>&lt;/p>
&lt;p>æ‰§è¡ŒåŽæ­£å¸¸ä¿®æ”¹äº†&lt;code>sonName&lt;/code>ï¼Œ&lt;strong>ä½†æ˜¯æŠŠå¤–é”®è®¾ç½®æˆäº†&lt;code>null&lt;/code>äº†&lt;/strong>&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/20200326135659.png" alt="database_table">&lt;/p>
&lt;p>æˆ‘ä»¬ä¿®æ”¹ä¸‹æµ‹è¯•ä»£ç ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="nd">@Test&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">test&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">Father&lt;/span> &lt;span class="n">f&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">Father&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="n">f&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setId&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;a&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">ArrayList&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Son&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">sons&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Lists&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">newArrayList&lt;/span>&lt;span class="o">(&lt;/span>
&lt;span class="k">new&lt;/span> &lt;span class="n">Son&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;sa&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="s">&amp;#34;sa2&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">f&lt;/span>&lt;span class="o">),&lt;/span>
&lt;span class="k">new&lt;/span> &lt;span class="n">Son&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;sb&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="s">&amp;#34;sb2&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">f&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="o">);&lt;/span>
&lt;span class="n">Father&lt;/span> &lt;span class="n">father&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">Father&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="n">father&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setId&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;a&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">father&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setName&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;a&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">father&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setSons&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">sons&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">fatherRepository&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">save&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">father&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ä¸ªæ—¶å€™&lt;code>son&lt;/code>è¡¨çš„å¤–é”®å°±ä¸æ˜¯&lt;code>null&lt;/code>å•¦&lt;/p>
&lt;p>æŽ¥ä¸‹æ¥æµ‹è¯•åˆ é™¤ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="nd">@Test&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">testDel&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">Father&lt;/span> &lt;span class="n">father&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">Father&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="n">father&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setId&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;a&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">fatherRepository&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">delete&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">father&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ‰§è¡Œçš„SQLï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">select&lt;/span> &lt;span class="n">father0_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">id&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">id1_0_0_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">father0_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">name2_0_0_&lt;/span> &lt;span class="k">from&lt;/span> &lt;span class="n">father&lt;/span> &lt;span class="n">father0_&lt;/span> &lt;span class="k">where&lt;/span> &lt;span class="n">father0_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="o">=?&lt;/span>
&lt;span class="k">update&lt;/span> &lt;span class="n">son&lt;/span> &lt;span class="k">set&lt;/span> &lt;span class="n">father_id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">null&lt;/span> &lt;span class="k">where&lt;/span> &lt;span class="n">father_id&lt;/span>&lt;span class="o">=?&lt;/span>
&lt;span class="k">delete&lt;/span> &lt;span class="k">from&lt;/span> &lt;span class="n">father&lt;/span> &lt;span class="k">where&lt;/span> &lt;span class="n">id&lt;/span>&lt;span class="o">=?&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯ä»¥çœ‹åˆ°ï¼Œ&lt;strong>å¹¶æ²¡æœ‰åˆ é™¤&lt;code>son&lt;/code>è€Œåªæ˜¯æŠŠå…¶å¤–é”®è®¾ç½®ä¸º&lt;code>null&lt;/code>äº†&lt;/strong>&lt;/p>
&lt;h3 id="æ€»ç»“-1">æ€»ç»“&lt;/h3>
&lt;ol>
&lt;li>çº§è”æ›´æ–°ä¿å­˜æ—¶ä¼šä¿å­˜æ‰€æœ‰&lt;/li>
&lt;li>çº§è”æ›´æ–°æ—¶ä¼šæ›´æ–°æ‰€æœ‰&lt;/li>
&lt;li>çº§è”åˆ é™¤æ—¶ä¸ä¼šåˆ é™¤å¤šçš„é‚£æ–¹&lt;/li>
&lt;/ol>
&lt;p>å°†&lt;code>CascadeType.MERGE&lt;/code>æ”¾åœ¨&lt;code>Son&lt;/code>çš„æƒ…å†µæœ‰æ‰€ä¸åŒï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>æ–°å¢ž&lt;code>father&lt;/code>ä¸ä¼šæ–°å¢ž&lt;code>son&lt;/code>ï¼Œè€Œæ˜¯ä¼šæŠ›å‡ºå¼‚å¸¸&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ–°å¢ž&lt;code>son&lt;/code>ä¼šå°†&lt;code>father&lt;/code>ä¸€å¹¶æ–°å¢žï¼Œ&lt;strong>ä½†æ˜¯&lt;code>son&lt;/code>ä¸­å¤–é”®ä¸º&lt;code>null&lt;/code>&lt;/strong>ï¼Œæƒ³ä¸ä¸º&lt;code>null&lt;/code>éœ€è¦è®¾ç½®&lt;code>father.setSons(sons);&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="nd">@Test&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">test2&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">Father&lt;/span> &lt;span class="n">father&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">Father&lt;/span>
&lt;span class="n">father&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setId&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;a&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">father&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setName&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;a&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">Son&lt;/span> &lt;span class="n">son&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">Son&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="n">son&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setSonId&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;sa&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">son&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setSonName&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;sa&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">son&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setFather&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">father&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">Son&lt;/span> &lt;span class="n">son2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">Son&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="n">son2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setSonId&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;sb&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">son2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setSonName&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;sb&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">son2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setFather&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">father&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">sonRepository&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">save&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">son&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">sonRepository&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">save&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">son2&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>æ›´æ–°&lt;code>son&lt;/code>ä¹Ÿä¼šå°†&lt;code>father&lt;/code>è¿›è¡Œæ›´æ–°&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åˆ é™¤&lt;code>son&lt;/code>ä¹Ÿæ—¶ä»…ä»…åˆ é™¤&lt;code>son&lt;/code>ä¸ä¼šåŠ¨&lt;code>father&lt;/code>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="removeçº§è”åˆ é™¤">REMOVEï¼ˆçº§è”åˆ é™¤ï¼‰&lt;/h2>
&lt;p>å°†æ‰€æœ‰æ›´æ”¹é‡ç½®ï¼Œå¹¶å°†&lt;code>father&lt;/code>ç±»æ›´æ”¹å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="kn">import&lt;/span> &lt;span class="nn">lombok.Data&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">javax.persistence.*&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">java.util.List&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="cm">/**
&lt;/span>&lt;span class="cm"> * @author itning
&lt;/span>&lt;span class="cm"> * @date 2020/3/26 12:06
&lt;/span>&lt;span class="cm"> */&lt;/span>
&lt;span class="nd">@Entity&lt;/span>
&lt;span class="nd">@Data&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kd">class&lt;/span> &lt;span class="nc">Father&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="nd">@Id&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">id&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="nd">@Column&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="nd">@OneToMany&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">cascade&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">CascadeType&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">REMOVE&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="nd">@JoinColumn&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;father_id&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="n">List&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Son&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">sons&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿è¡Œä»¥ä¸‹æµ‹è¯•ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="nd">@Test&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">test&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">ArrayList&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Son&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">sons&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Lists&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">newArrayList&lt;/span>&lt;span class="o">(&lt;/span>
&lt;span class="k">new&lt;/span> &lt;span class="n">Son&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;sa&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="s">&amp;#34;sa&amp;#34;&lt;/span>&lt;span class="o">),&lt;/span>
&lt;span class="k">new&lt;/span> &lt;span class="n">Son&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;sb&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="s">&amp;#34;sb&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="o">);&lt;/span>
&lt;span class="n">Father&lt;/span> &lt;span class="n">father&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">Father&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="n">father&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setId&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;a&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">father&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setName&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;a&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">father&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setSons&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">sons&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">fatherRepository&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">save&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">father&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="nd">@Test&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">test2&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">Father&lt;/span> &lt;span class="n">father&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">Father&lt;/span>&lt;span class="o">()&lt;/span>
&lt;span class="n">father&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setId&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;a&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">Son&lt;/span> &lt;span class="n">son&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">Son&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="n">son&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setSonId&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;sa&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">son&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setSonName&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;sa&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">son&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setFather&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">father&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">Son&lt;/span> &lt;span class="n">son2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">Son&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="n">son2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setSonId&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;sb&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">son2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setSonName&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;sb&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">son2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setFather&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">father&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">sonRepository&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">save&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">son&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">sonRepository&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">save&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">son2&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä»¥ä¸Šä¸¤ä¸ªæµ‹è¯•ç”¨ä¾‹éƒ½ä¼šæŠ›å‡ºé”™è¯¯ã€‚&lt;/p>
&lt;p>æ‰€ä»¥&lt;strong>çº§è”åˆ é™¤ä¸ä¼šä¿å­˜å¤–é”®å¯¹è±¡&lt;/strong>&lt;/p>
&lt;p>æŽ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ­£å¸¸æ·»åŠ æ•°æ®ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="nd">@Test&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">test2&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">Father&lt;/span> &lt;span class="n">father&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">Father&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="n">father&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setId&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;a&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">father&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setName&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;a&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">fatherRepository&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">save&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">father&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">Son&lt;/span> &lt;span class="n">son&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">Son&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="n">son&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setSonId&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;sa&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">son&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setSonName&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;sa&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">son&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setFather&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">father&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">Son&lt;/span> &lt;span class="n">son2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">Son&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="n">son2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setSonId&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;sb&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">son2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setSonName&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;sb&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">son2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setFather&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">father&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">sonRepository&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">save&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">son&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">sonRepository&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">save&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">son2&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æµ‹è¯•ä¸‹æ›´æ–°æ—¶ä¼šä¸ä¼šæ›´æ–°å…³è”è¡¨ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="nd">@Test&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">test&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">ArrayList&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Son&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">sons&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Lists&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">newArrayList&lt;/span>&lt;span class="o">(&lt;/span>
&lt;span class="k">new&lt;/span> &lt;span class="n">Son&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;sa&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="s">&amp;#34;sa2&amp;#34;&lt;/span>&lt;span class="o">),&lt;/span>
&lt;span class="k">new&lt;/span> &lt;span class="n">Son&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;sb&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="s">&amp;#34;sb2&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="o">);&lt;/span>
&lt;span class="n">Father&lt;/span> &lt;span class="n">father&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">Father&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="n">father&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setId&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;a&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">father&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setName&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;a&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">father&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setSons&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">sons&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">fatherRepository&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">save&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">father&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æµ‹è¯•å‘å‡ºäº†ä¸¤æ¡æŸ¥è¯¢SQLï¼Œå¹¶æ²¡æœ‰æ›´æ–°è¯­å¥&lt;/p>
&lt;p>æ‰€ä»¥&lt;strong>çº§è”åˆ é™¤ä¸ä¼šæ›´æ–°å…³è”è¡¨&lt;/strong>&lt;/p>
&lt;p>æŽ¥ä¸‹æ¥æµ‹è¯•ä¸‹åˆ é™¤ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="nd">@Test&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">testDel&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">Father&lt;/span> &lt;span class="n">father&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">Father&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="n">father&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setId&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;a&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">fatherRepository&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">delete&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">father&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™æ ·ä»…ä»…åˆ é™¤äº†&lt;code>father&lt;/code>å¹¶ä¸ä¼šåˆ é™¤&lt;code>son&lt;/code>&lt;/p>
&lt;p>æƒ³è¦ä¹Ÿåˆ é™¤&lt;code>son&lt;/code>è¡¨ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="kn">import&lt;/span> &lt;span class="nn">lombok.Data&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">javax.persistence.*&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">java.util.List&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="cm">/**
&lt;/span>&lt;span class="cm"> * @author itning
&lt;/span>&lt;span class="cm"> * @date 2020/3/26 12:06
&lt;/span>&lt;span class="cm"> */&lt;/span>
&lt;span class="nd">@Entity&lt;/span>
&lt;span class="nd">@Data&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kd">class&lt;/span> &lt;span class="nc">Father&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="nd">@Id&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">id&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="nd">@Column&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="nd">@OneToMany&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">cascade&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">{&lt;/span>&lt;span class="n">CascadeType&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">REMOVE&lt;/span>&lt;span class="o">},&lt;/span> &lt;span class="n">mappedBy&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;father&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="n">List&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Son&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">sons&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="kn">import&lt;/span> &lt;span class="nn">lombok.Data&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">javax.persistence.*&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="cm">/**
&lt;/span>&lt;span class="cm"> * @author itning
&lt;/span>&lt;span class="cm"> * @date 2020/3/26 12:07
&lt;/span>&lt;span class="cm"> */&lt;/span>
&lt;span class="nd">@Data&lt;/span>
&lt;span class="nd">@Entity&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kd">class&lt;/span> &lt;span class="nc">Son&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="nd">@Id&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">sonId&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="nd">@Column&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">sonName&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="nd">@ManyToOne&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">optional&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="nd">@JoinColumn&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;father_id&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">Father&lt;/span> &lt;span class="n">father&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="nf">Son&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">String&lt;/span> &lt;span class="n">sonId&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">sonName&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">sonId&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">sonId&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">sonName&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">sonName&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="nf">Son&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">String&lt;/span> &lt;span class="n">sonId&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">sonName&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">Father&lt;/span> &lt;span class="n">father&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">sonId&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">sonId&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">sonName&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">sonName&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">father&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">father&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="nf">Son&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>æ³¨æ„&lt;code>mappedBy&lt;/code>å’Œ&lt;code>@JoinColumn&lt;/code>çš„ä½ç½®&lt;/strong>&lt;/p>
&lt;p>æ›´æ”¹æµ‹è¯•ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="nd">@Test&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">testDel&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">fatherRepository&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">deleteById&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;a&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ‰§è¡Œçš„SQLï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">select&lt;/span> &lt;span class="n">father0_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">id&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">id1_0_0_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">father0_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">name2_0_0_&lt;/span> &lt;span class="k">from&lt;/span> &lt;span class="n">father&lt;/span> &lt;span class="n">father0_&lt;/span> &lt;span class="k">where&lt;/span> &lt;span class="n">father0_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="o">=?&lt;/span>
&lt;span class="k">select&lt;/span> &lt;span class="n">sons0_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">father_id&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">father_i3_1_0_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">sons0_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">son_id&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">son_id1_1_0_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">sons0_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">son_id&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">son_id1_1_1_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">sons0_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">father_id&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">father_i3_1_1_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">sons0_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">son_name&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">son_name2_1_1_&lt;/span> &lt;span class="k">from&lt;/span> &lt;span class="n">son&lt;/span> &lt;span class="n">sons0_&lt;/span> &lt;span class="k">where&lt;/span> &lt;span class="n">sons0_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">father_id&lt;/span>&lt;span class="o">=?&lt;/span>
&lt;span class="k">delete&lt;/span> &lt;span class="k">from&lt;/span> &lt;span class="n">son&lt;/span> &lt;span class="k">where&lt;/span> &lt;span class="n">son_id&lt;/span>&lt;span class="o">=?&lt;/span>
&lt;span class="k">delete&lt;/span> &lt;span class="k">from&lt;/span> &lt;span class="n">son&lt;/span> &lt;span class="k">where&lt;/span> &lt;span class="n">son_id&lt;/span>&lt;span class="o">=?&lt;/span>
&lt;span class="k">delete&lt;/span> &lt;span class="k">from&lt;/span> &lt;span class="n">father&lt;/span> &lt;span class="k">where&lt;/span> &lt;span class="n">id&lt;/span>&lt;span class="o">=?&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="æ€»ç»“-2">æ€»ç»“&lt;/h3>
&lt;ol>
&lt;li>çº§è”åˆ é™¤æ–°å¢žä¸ä¼šæ–°å¢žå…³è”å¯¹è±¡&lt;/li>
&lt;li>çº§è”åˆ é™¤ä¿®æ”¹ä¸ä¼šä¿®æ”¹å…³è”å¯¹è±¡&lt;/li>
&lt;li>çº§è”åˆ é™¤åˆ é™¤ä¼šå°†æ‰€å…³è”å¯¹è±¡ä¸€å¹¶åˆ é™¤&lt;/li>
&lt;/ol>
&lt;h2 id="refreshçº§è”åˆ·æ–°">REFRESHï¼ˆçº§è”åˆ·æ–°ï¼‰&lt;/h2>
&lt;blockquote>
&lt;p>çº§è”åˆ·æ–°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ä½ åˆšå¼€å§‹èŽ·å–åˆ°äº†è¿™æ¡è®°å½•ï¼Œé‚£ä¹ˆåœ¨ä½ å¤„ç†ä¸šåŠ¡è¿‡ç¨‹ä¸­ï¼Œè¿™æ¡è®°å½•è¢«å¦ä¸€ä¸ªä¸šåŠ¡ç¨‹åºä¿®æ”¹äº†ï¼ˆæ•°æ®åº“è¿™æ¡è®°å½•è¢«ä¿®æ”¹äº†ï¼‰ï¼Œé‚£ä¹ˆä½ èŽ·å–çš„è¿™æ¡æ•°æ®å°±ä¸æ˜¯æœ€æ–°çš„æ•°æ®ï¼Œé‚£ä½ å°±è¦è°ƒç”¨å®žä½“ç®¡ç†å™¨é‡Œé¢çš„refreshæ–¹æ³•æ¥åˆ·æ–°å®žä½“ï¼Œæ‰€è°“åˆ·æ–°ï¼Œå¤§å®¶ä¸€å®šè¦è®°ä½æ–¹å‘ï¼Œå®ƒæ˜¯èŽ·å–æ•°æ®ï¼Œç›¸å½“äºŽæ‰§è¡Œselectè¯­å¥çš„ï¼ˆä½†ä¸èƒ½ç”¨selectï¼Œselectæ–¹æ³•è¿”å›žçš„æ˜¯EntityManagerç¼“å­˜ä¸­çš„æ•°æ®ï¼Œä¸æ˜¯æ•°æ®åº“é‡Œé¢æœ€æ–°çš„æ•°æ®ï¼‰ï¼Œä¹Ÿå°±æ˜¯é‡æ–°èŽ·å–æ•°æ®ã€‚&lt;/p>
&lt;/blockquote>
&lt;h2 id="detachçº§è”è„±ç®¡æ¸¸ç¦»">DETACHï¼ˆçº§è”è„±ç®¡/æ¸¸ç¦»ï¼‰&lt;/h2>
&lt;blockquote>
&lt;p>å¦‚æžœä½ è¦åˆ é™¤ä¸€ä¸ªå®žä½“ï¼Œä½†æ˜¯å®ƒæœ‰å¤–é”®æ— æ³•åˆ é™¤ï¼Œä½ å°±éœ€è¦è¿™ä¸ªçº§è”æƒé™äº†ã€‚å®ƒä¼šæ’¤é”€æ‰€æœ‰ç›¸å…³çš„å¤–é”®å…³è”ã€‚&lt;/p>
&lt;/blockquote></description></item><item><title>HibernateDialectè®¾ç½®</title><link>https://blog.itning.top/post/2020/03/26/hibernatedialect%E8%AE%BE%E7%BD%AE/</link><pubDate>Thu, 26 Mar 2020 12:15:05 +0800</pubDate><guid>https://blog.itning.top/post/2020/03/26/hibernatedialect%E8%AE%BE%E7%BD%AE/</guid><description>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-yaml" data-lang="yaml">spring&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>jpa&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">database-platform&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>org.hibernate.dialect.MySQL8Dialect&lt;span class="w">
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ–ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">spring.jpa.database-platform=org.hibernate.dialect.MySQL8Dialect
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>å¸¸è§é™æµç®—æ³• æ¼æ¡¶å’Œä»¤ç‰Œæ¡¶</title><link>https://blog.itning.top/post/2020/03/25/%E5%B8%B8%E8%A7%81%E9%99%90%E6%B5%81%E7%AE%97%E6%B3%95-%E6%BC%8F%E6%A1%B6%E5%92%8C%E4%BB%A4%E7%89%8C%E6%A1%B6/</link><pubDate>Wed, 25 Mar 2020 21:08:38 +0800</pubDate><guid>https://blog.itning.top/post/2020/03/25/%E5%B8%B8%E8%A7%81%E9%99%90%E6%B5%81%E7%AE%97%E6%B3%95-%E6%BC%8F%E6%A1%B6%E5%92%8C%E4%BB%A4%E7%89%8C%E6%A1%B6/</guid><description>&lt;h2 id="æ¼æ¡¶ç®—æ³•">æ¼æ¡¶ç®—æ³•&lt;/h2>
&lt;p>æ¼æ¡¶(Leaky Bucket)ç®—æ³•æ€è·¯å¾ˆç®€å•,æ°´(è¯·æ±‚)å…ˆè¿›å…¥åˆ°æ¼æ¡¶é‡Œ,æ¼æ¡¶ä»¥ä¸€å®šçš„é€Ÿåº¦å‡ºæ°´(æŽ¥å£æœ‰å“åº”é€ŸçŽ‡),å½“æ°´æµå…¥é€Ÿåº¦è¿‡å¤§ä¼šç›´æŽ¥æº¢å‡º(è®¿é—®é¢‘çŽ‡è¶…è¿‡æŽ¥å£å“åº”é€ŸçŽ‡),ç„¶åŽå°±æ‹’ç»è¯·æ±‚,å¯ä»¥çœ‹å‡ºæ¼æ¡¶ç®—æ³•èƒ½å¼ºè¡Œé™åˆ¶æ•°æ®çš„ä¼ è¾“é€ŸçŽ‡&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/20200325210400.png" alt="æ¼æ¡¶ç®—æ³•">&lt;/p>
&lt;h2 id="ä»¤ç‰Œæ¡¶ç®—æ³•">ä»¤ç‰Œæ¡¶ç®—æ³•&lt;/h2>
&lt;p>ä»¤ç‰Œæ¡¶ç®—æ³•(Token Bucket)å’Œ Leaky Bucket æ•ˆæžœä¸€æ ·ä½†æ–¹å‘ç›¸åçš„ç®—æ³•,æ›´åŠ å®¹æ˜“ç†è§£.éšç€æ—¶é—´æµé€,ç³»ç»Ÿä¼šæŒ‰æ’å®š1/QPSæ—¶é—´é—´éš”(å¦‚æžœQPS=100,åˆ™é—´éš”æ˜¯10ms)å¾€æ¡¶é‡ŒåŠ å…¥Token(æƒ³è±¡å’Œæ¼æ´žæ¼æ°´ç›¸å,æœ‰ä¸ªæ°´é¾™å¤´åœ¨ä¸æ–­çš„åŠ æ°´),å¦‚æžœæ¡¶å·²ç»æ»¡äº†å°±ä¸å†åŠ äº†.æ–°è¯·æ±‚æ¥ä¸´æ—¶,ä¼šå„è‡ªæ‹¿èµ°ä¸€ä¸ªToken,å¦‚æžœæ²¡æœ‰Tokenå¯æ‹¿äº†å°±é˜»å¡žæˆ–è€…æ‹’ç»æœåŠ¡.&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/20200325210500.jpg" alt="ä»¤ç‰Œæ¡¶ç®—æ³•">&lt;/p>
&lt;p>ä»¤ç‰Œæ¡¶ç®—æ³•å¯ä»¥ä½¿ç”¨Googleçš„&lt;code>guava&lt;/code>å·¥å…·åŒ…æ¥å®žçŽ°ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="kn">import&lt;/span> &lt;span class="nn">com.google.common.util.concurrent.RateLimiter&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">org.springframework.http.HttpStatus&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">org.springframework.lang.NonNull&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">org.springframework.stereotype.Component&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">org.springframework.web.filter.OncePerRequestFilter&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">javax.servlet.FilterChain&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">javax.servlet.ServletException&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">javax.servlet.http.HttpServletRequest&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">javax.servlet.http.HttpServletResponse&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">java.io.IOException&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">java.io.PrintWriter&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="cm">/**
&lt;/span>&lt;span class="cm"> * @author itning
&lt;/span>&lt;span class="cm"> * @date 2020/3/25 20:47
&lt;/span>&lt;span class="cm"> */&lt;/span>
&lt;span class="nd">@SuppressWarnings&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;UnstableApiUsage&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="nd">@Component&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kd">class&lt;/span> &lt;span class="nc">RateLimitFilter&lt;/span> &lt;span class="kd">extends&lt;/span> &lt;span class="n">OncePerRequestFilter&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">RateLimiter&lt;/span> &lt;span class="n">rateLimiter&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">RateLimiter&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">create&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">1&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="nd">@Override&lt;/span>
&lt;span class="kd">protected&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">doFilterInternal&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="nd">@NonNull&lt;/span> &lt;span class="n">HttpServletRequest&lt;/span> &lt;span class="n">request&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="nd">@NonNull&lt;/span> &lt;span class="n">HttpServletResponse&lt;/span> &lt;span class="n">response&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="nd">@NonNull&lt;/span> &lt;span class="n">FilterChain&lt;/span> &lt;span class="n">filterChain&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="kd">throws&lt;/span> &lt;span class="n">ServletException&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">IOException&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">rateLimiter&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">tryAcquire&lt;/span>&lt;span class="o">())&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">filterChain&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">doFilter&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">request&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">response&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">response&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setStatus&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">HttpStatus&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">TOO_MANY_REQUESTS&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">value&lt;/span>&lt;span class="o">());&lt;/span>
&lt;span class="n">PrintWriter&lt;/span> &lt;span class="n">writer&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">response&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getWriter&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="n">writer&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">write&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">HttpStatus&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">TOO_MANY_REQUESTS&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getReasonPhrase&lt;/span>&lt;span class="o">());&lt;/span>
&lt;span class="n">writer&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">flush&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="n">writer&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">close&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>RateLimiter.create(1);&lt;/code>è¡¨ç¤ºä¸€ç§’é’Ÿæœ€å¤šå¤„ç†ä¸€ä¸ªè¯·æ±‚&lt;/p>
&lt;p>&lt;code>rateLimiter.tryAcquire()&lt;/code>è¿”å›žçš„å¸ƒå°”å€¼ä¸º&lt;code>true&lt;/code>è¡¨ç¤ºèŽ·å–åˆ°äº†ä»¤ç‰Œï¼Œè€Œ&lt;code>false&lt;/code>åˆ™è¡¨ç¤ºæ²¡æœ‰èŽ·å–åˆ°ï¼Œè¢«é™æµã€‚&lt;/p>
&lt;p>ç»§æ‰¿çš„&lt;code>OncePerRequestFilter&lt;/code>ç±»æ˜¯&lt;code>Spring&lt;/code>æä¾›çš„è¿‡æ»¤å™¨ç±»ï¼Œèƒ½å¤Ÿä¿è¯æ¯ä¸ªè¯·æ±‚åªç»è¿‡ä¸€æ¬¡ã€‚&lt;/p></description></item><item><title>FFmpegä½¿ç”¨ç¡¬ä»¶åŠ é€Ÿè¿›è¡Œè§†é¢‘è½¬ç </title><link>https://blog.itning.top/post/2020/03/25/ffmpeg%E4%BD%BF%E7%94%A8%E7%A1%AC%E4%BB%B6%E5%8A%A0%E9%80%9F%E8%BF%9B%E8%A1%8C%E8%A7%86%E9%A2%91%E8%BD%AC%E7%A0%81/</link><pubDate>Wed, 25 Mar 2020 10:57:18 +0800</pubDate><guid>https://blog.itning.top/post/2020/03/25/ffmpeg%E4%BD%BF%E7%94%A8%E7%A1%AC%E4%BB%B6%E5%8A%A0%E9%80%9F%E8%BF%9B%E8%A1%8C%E8%A7%86%E9%A2%91%E8%BD%AC%E7%A0%81/</guid><description>&lt;h2 id="èŽ·å–è§†é¢‘ä¿¡æ¯">èŽ·å–è§†é¢‘ä¿¡æ¯&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-shell" data-lang="shell">ffprobe -v error -show_streams -print_format json &amp;lt;input&amp;gt;
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¾“å‡ºJSONæ ¼å¼çš„è§†é¢‘æ•°æ®ä¿¡æ¯&lt;/p>
&lt;h2 id="ç¡¬ä»¶è½¬ç ">ç¡¬ä»¶è½¬ç &lt;/h2>
&lt;p>æŸ¥çœ‹æ”¯æŒçš„ç¼–è§£ç å™¨&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-shell" data-lang="shell">ffmpeg -codecs &lt;span class="p">|&lt;/span> sls cuvid
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-shell" data-lang="shell">DEV.LS h264 H.264 / AVC / MPEG-4 AVC / MPEG-4 part &lt;span class="m">10&lt;/span> &lt;span class="o">(&lt;/span>decoders: h264 h264_qsv h264_cuvid &lt;span class="o">)&lt;/span> &lt;span class="o">(&lt;/span>encoders:libx264 libx264rgb h264_amf h264_nvenc h264_qsv nvenc nvenc_h264 &lt;span class="o">)&lt;/span>
DEV.L. hevc H.265 / HEVC &lt;span class="o">(&lt;/span>High Efficiency Video Coding&lt;span class="o">)&lt;/span> &lt;span class="o">(&lt;/span>decoders: hevc hevc_qsv hevc_cuvid &lt;span class="o">)&lt;/span> &lt;span class="o">(&lt;/span>encoders: libx265 nvenc_hevc hevc_amf hevc_nvenc hevc_qsv &lt;span class="o">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½¿ç”¨&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-shell" data-lang="shell">ffmpeg -i original.mov -vcodec hevc_nvenc cqx.mp4
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>MySQL8æ‰‹åŠ¨å®‰è£…æ•™ç¨‹</title><link>https://blog.itning.top/post/2020/03/24/mysql8%E6%89%8B%E5%8A%A8%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/</link><pubDate>Tue, 24 Mar 2020 19:36:03 +0800</pubDate><guid>https://blog.itning.top/post/2020/03/24/mysql8%E6%89%8B%E5%8A%A8%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/</guid><description>&lt;h2 id="ä¸‹è½½mysql">ä¸‹è½½MySQL&lt;/h2>
&lt;p>&lt;a href="https://mirrors.cloud.tencent.com/mysql/downloads/MySQL-8.0/">è…¾è®¯è½¯ä»¶æºä¸‹è½½&lt;/a>&lt;/p>
&lt;p>æœç´¢å…³é”®å­—ï¼š&lt;code>mysql-8.0.19-winx64.msi&lt;/code>ï¼Œå…¶ä¸­&lt;code>8.0.19&lt;/code>æ¢æˆæœ€æ–°ç‰ˆæœ¬&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/20200324194128.png" alt="ä¸‹è½½é¡µé¢æˆªå›¾">&lt;/p>
&lt;h2 id="å®‰è£…">å®‰è£…&lt;/h2>
&lt;p>å®‰è£…éžå¸¸ç®€å•ï¼Œä¸€è·¯&lt;code>ä¸‹ä¸€æ­¥&lt;/code>å³å¯&lt;/p>
&lt;p>å®‰è£…å®ŒæˆåŽæ‰¾åˆ°å®‰è£…ç›®å½•ï¼ˆåˆ«è·Ÿæˆ‘è¯´ä½ ä¸çŸ¥é“å®‰è£…åˆ°å“ªäº†&amp;hellip;ï¼‰&lt;/p>
&lt;h2 id="é…ç½®">é…ç½®&lt;/h2>
&lt;ol>
&lt;li>
&lt;p>åœ¨&lt;code>MySQL&lt;/code>æ ¹ç›®å½•æ–°å»ºæ–‡ä»¶å¤¹ï¼š&lt;code>data&lt;/code>ï¼Œæ–°å¢žä¸ªæ–‡ä»¶ï¼š&lt;code>my.ini&lt;/code>&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/20200324194455.png" alt="æ ¹ç›®å½•">&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å°†Â·&lt;code>my.ini&lt;/code>æ–‡ä»¶æ‰“å¼€ï¼Œç²˜è´´ä»¥ä¸‹å†…å®¹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-ini" data-lang="ini">&lt;span class="na">[mysql]
&lt;/span>
&lt;span class="na">default-character-set&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">utf8mb4
&lt;/span>
&lt;span class="na">[mysqld]
&lt;/span>
&lt;span class="na">port&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">3306
&lt;/span>
&lt;span class="na">basedir&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">D:\MySQL\MySQL Server 8.0
&lt;/span>
&lt;span class="na">datadir&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">D:\MySQL\MySQL Server 8.0\data
&lt;/span>
&lt;span class="na">default-storage-engine&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">INNODB
&lt;/span>
&lt;span class="na">character-set-server&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">utf8mb4
&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>&lt;strong>ä½ éœ€è¦å°†ä¸Šè¾¹çš„&lt;code>basedir&lt;/code>å’Œ&lt;code>datadir&lt;/code>æ¢æˆä½ è‡ªå·±çš„è·¯å¾„&lt;/strong>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ä¿å­˜æ–‡ä»¶&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åœ¨å¼€å§‹èœå•ä¸ŠæŒ‰å³é”®ï¼Œæ‰“å¼€&lt;code>Windows PowerShell(ç®¡ç†å‘˜)&lt;/code>&lt;/p>
&lt;p>æ³¨æ„æ˜¯&lt;strong>ç®¡ç†å‘˜&lt;/strong>ï¼Œä¸æ˜¯ä¸Šè¾¹é‚£ä¸ª&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/20200324_195151.gif" alt="ç¬¬å››æ­¥åŠ¨å›¾">&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¦‚æžœä½ æ­£ç¡®æ‰“å¼€ï¼Œæ ‡é¢˜åº”è¯¥æœ‰&lt;code>ç®¡ç†å‘˜&lt;/code>å­—æ ·&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/20200324195417.png" alt="ç®¡ç†å‘˜powershell">&lt;/p>
&lt;/li>
&lt;li>
&lt;p>è¿›å…¥&lt;code>MySQL&lt;/code>æ ¹ç›®å½•ï¼Œæ³¨æ„è·¯å¾„ä¸Šçš„&lt;strong>è‹±æ–‡&lt;/strong>åŒå¼•å·&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="nb">cd&lt;/span> &lt;span class="s2">&amp;#34;D:\MySQL\MySQL Server 8.0&amp;#34;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>cd åŽè¾¹çš„åŒå¼•å·åŒ…è£¹çš„å­—ç¬¦ä¸²æ¢æˆè‡ªå·±çš„&lt;code>MySQL&lt;/code>è·¯å¾„&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ‰§è¡Œåˆå§‹åŒ–&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-shell" data-lang="shell">./bin/mysqld --initialize --console
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™é‡Œç”±äºŽæˆ‘å®‰è£…è¿‡äº†æ‰€ä»¥æ”¾ä¸€å¼ ç½‘ä¸Šçš„å›¾ï¼š&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/20200324200100.jpg" alt="åˆå§‹åŒ–">&lt;/p>
&lt;p>æ³¨æ„çœ‹ç®­å¤´æŒ‡å‘çš„å­—ç¬¦ä¸²ï¼Œé‚£ä¸ªæ˜¯&lt;code>MySQL&lt;/code>åˆå§‹åŒ–ç”Ÿæˆçš„å¯†ç &lt;/p>
&lt;p>&lt;strong>ä½ å¿…é¡»å¤åˆ¶ä¸‹æ¥&lt;/strong>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å®‰è£…å¹¶è¿è¡ŒæœåŠ¡&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-shell" data-lang="shell">./bin/mysqld --install
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ä¸ªå‘½ä»¤æ˜¯å°†&lt;code>MySQL&lt;/code>ä½œä¸ºæœåŠ¡å®‰è£…åˆ°ç³»ç»Ÿä¸­&lt;/p>
&lt;p>å®‰è£…æˆåŠŸä¼šæœ‰&lt;code>successfully&lt;/code>æç¤º&lt;/p>
&lt;p>æŽ¥ä¸‹æ¥å¯åŠ¨æœåŠ¡ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-shell" data-lang="shell">net start mysql
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>ä¿®æ”¹MySQLå¯†ç &lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-shell" data-lang="shell">./bin/mysql -u root -p
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å›žè½¦åŽè¾“å…¥åˆšæ‰è®©ä½ å¤åˆ¶çš„å¯†ç &lt;/p>
&lt;p>è¾“å…¥ä»¥ä¸‹SQLï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">ALTER&lt;/span> &lt;span class="k">USER&lt;/span> &lt;span class="s1">&amp;#39;root&amp;#39;&lt;/span>&lt;span class="o">@&lt;/span>&lt;span class="s1">&amp;#39;localhost&amp;#39;&lt;/span> &lt;span class="n">IDENTIFIED&lt;/span> &lt;span class="k">BY&lt;/span> &lt;span class="s1">&amp;#39;æ–°å¯†ç &amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å…¶ä¸­&lt;code>æ–°å¯†ç &lt;/code>æ”¹æˆä½ è¦è®¾ç½®çš„&lt;code>MySQL&lt;/code>å¯†ç &lt;/p>
&lt;/li>
&lt;li>
&lt;p>å®Œæˆ&lt;/p>
&lt;/li>
&lt;/ol>
&lt;blockquote>
&lt;p>å¦‚æžœæœ‰å…¶å®ƒç–‘é—®ï¼Œä¹Ÿå¯ä»¥çœ‹è¿™ç¯‡æ•™ç¨‹&lt;/p>
&lt;p>&lt;a href="https://www.jb51.net/article/173105.htm?tdsourcetag=s_pctim_aiomsg">mysql 8.0.18.zipå®‰è£…é…ç½®æ–¹æ³•å›¾æ–‡æ•™ç¨‹(windows 64ä½)&lt;/a>&lt;/p>
&lt;/blockquote></description></item><item><title>éŸ³è§†é¢‘å¸¸è§æ ¼å¼</title><link>https://blog.itning.top/post/2020/03/24/%E9%9F%B3%E8%A7%86%E9%A2%91%E5%B8%B8%E8%A7%81%E6%A0%BC%E5%BC%8F/</link><pubDate>Tue, 24 Mar 2020 18:34:11 +0800</pubDate><guid>https://blog.itning.top/post/2020/03/24/%E9%9F%B3%E8%A7%86%E9%A2%91%E5%B8%B8%E8%A7%81%E6%A0%BC%E5%BC%8F/</guid><description>&lt;p>&lt;strong>éŸ³è§†é¢‘ç¼–ç å°è£…&lt;/strong>&lt;/p>
&lt;h2 id="å°è£…æ ¼å¼">å°è£…æ ¼å¼&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>å°è£…&lt;/th>
&lt;th>æè¿°&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>avi&lt;/td>
&lt;td>AVIè§†é¢‘æ ¼å¼çš„ä¼˜ç‚¹æ˜¯å›¾åƒè´¨é‡å¥½ï¼Œå¯ä»¥è·¨å¤šä¸ªå¹³å°ä½¿ç”¨ï¼Œä½†æ˜¯å…¶ç¼ºç‚¹æ˜¯ä½“ç§¯è¿‡äºŽåºžå¤§ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>3gp&lt;/td>
&lt;td>æ·˜æ±°&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>wmv&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>mp4&lt;/td>
&lt;td>MPEG-4ç¬¬14éƒ¨åˆ†çš„æ‰©å±•åä¸º.mp4ã€‚ä»…æœ‰éŸ³é¢‘çš„MPEG-4æ–‡ä»¶ä¼šä½¿ç”¨.m4aæ‰©å±•åã€‚åŽŸå§‹çš„MPEG-4è§†é¢‘æµä¼šä½¿ç”¨.m4væ‰©å±•åï¼Œä½†è¯¥æ‰©å±•åä¹Ÿè¢«ç”¨äºŽä»…æœ‰è§†é¢‘æµçš„MPEG-4æ–‡ä»¶&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>mkv&lt;/td>
&lt;td>è¿™ä¸ªå°è£…æ ¼å¼å¯æŠŠå¤šç§ä¸åŒç¼–ç çš„å½±åƒåŠ16æ¡æˆ–ä»¥ä¸Šä¸åŒæ ¼å¼çš„éŸ³é¢‘å’Œè¯­è¨€ä¸åŒçš„å­—å¹•å°è£…åˆ°ä¸€ä¸ªMatroska Mediaæ¡£å†…ã€‚å®ƒä¹Ÿæ˜¯å…¶ä¸­ä¸€ç§å¼€æ”¾æºä»£ç çš„å¤šåª’ä½“å°è£…æ ¼å¼ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>rm/rmvb&lt;/td>
&lt;td>æ·˜æ±°&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>mov&lt;/td>
&lt;td>MOV æ ¼å¼æ˜¯ QuickTime çš„ä¸€ç§å®¹å™¨ï¼Œä¸å…‰åŒ…æ‹¬è§†é¢‘éŸ³é¢‘ï¼Œè¿˜å¯ä»¥åŒ…å«Javaï¼Œè„šæœ¬ï¼ŒSkinï¼Œå›¾ç‰‡ç­‰ï¼Œæ˜¯ä¸€ç§å¾ˆå¤æ‚çš„å°è£…æ ¼å¼ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="è§†é¢‘ç¼–ç ">è§†é¢‘ç¼–ç &lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>ç¼–ç &lt;/th>
&lt;th>æè¿°&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>h264&lt;/td>
&lt;td>H.264 bitstream with start codes.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>avc1&lt;/td>
&lt;td>H.264 bitstream without start codes.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="éŸ³é¢‘ç¼–ç ">éŸ³é¢‘ç¼–ç &lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>ç¼–ç &lt;/th>
&lt;th>æè¿°&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>aac&lt;/td>
&lt;td>AACï¼ˆAdvanced Audio Codingï¼‰ï¼Œä¸­æ–‡åï¼šé«˜çº§éŸ³é¢‘ç¼–ç ï¼Œå‡ºçŽ°äºŽ1997å¹´ï¼ŒåŸºäºŽMPEG-2çš„éŸ³é¢‘ç¼–ç æŠ€æœ¯ã€‚ç”±Fraunhofer IISã€æœæ¯”å®žéªŒå®¤ã€AT&amp;amp;Tã€Sonyç­‰å…¬å¸å…±åŒå¼€å‘ï¼Œç›®çš„æ˜¯å–ä»£MP3æ ¼å¼ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ac3&lt;/td>
&lt;td>AC3(å…¨ç§°Audio Coding3éŸ³é¢‘ç¼–ç 3)æ˜¯æœæ¯”æ•°ç çš„åŒä¹‰è¯ï¼Œæœæ¯”æ•°ç æ˜¯ä¸€ç§é«˜çº§éŸ³é¢‘åŽ‹ç¼©æŠ€æœ¯ï¼Œå®ƒæœ€å¤šå¯ä»¥å¯¹6ä¸ªæ¯”ç‰¹çŽ‡æœ€é«˜ä¸º448kbpsçš„å•ç‹¬å£°é“è¿›è¡Œç¼–ç ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>flac&lt;/td>
&lt;td>FLACæ˜¯ä¸€æ¬¾çš„è‡ªç”±éŸ³é¢‘åŽ‹ç¼©ç¼–ç ï¼Œå…¶ç‰¹ç‚¹æ˜¯å¯ä»¥å¯¹éŸ³é¢‘æ–‡ä»¶æ— æŸåŽ‹ç¼©ã€‚ä¸åŒäºŽå…¶ä»–æœ‰æŸåŽ‹ç¼©ç¼–ç ï¼ˆå¦‚MP3ã€AACç­‰ï¼‰ï¼ŒåŽ‹ç¼©åŽä¸ä¼šæœ‰ä»»ä½•éŸ³è´¨æŸå¤±ï¼ŒçŽ°åœ¨å·²è¢«å¾ˆå¤šè½¯ä»¶åŠç¡¬ä»¶éŸ³é¢‘äº§å“æ‰€æ”¯æŒ&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="ffmpeg-support">ffmpeg support&lt;/h2>
&lt;h3 id="codec">codec&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;span class="lnt">102
&lt;/span>&lt;span class="lnt">103
&lt;/span>&lt;span class="lnt">104
&lt;/span>&lt;span class="lnt">105
&lt;/span>&lt;span class="lnt">106
&lt;/span>&lt;span class="lnt">107
&lt;/span>&lt;span class="lnt">108
&lt;/span>&lt;span class="lnt">109
&lt;/span>&lt;span class="lnt">110
&lt;/span>&lt;span class="lnt">111
&lt;/span>&lt;span class="lnt">112
&lt;/span>&lt;span class="lnt">113
&lt;/span>&lt;span class="lnt">114
&lt;/span>&lt;span class="lnt">115
&lt;/span>&lt;span class="lnt">116
&lt;/span>&lt;span class="lnt">117
&lt;/span>&lt;span class="lnt">118
&lt;/span>&lt;span class="lnt">119
&lt;/span>&lt;span class="lnt">120
&lt;/span>&lt;span class="lnt">121
&lt;/span>&lt;span class="lnt">122
&lt;/span>&lt;span class="lnt">123
&lt;/span>&lt;span class="lnt">124
&lt;/span>&lt;span class="lnt">125
&lt;/span>&lt;span class="lnt">126
&lt;/span>&lt;span class="lnt">127
&lt;/span>&lt;span class="lnt">128
&lt;/span>&lt;span class="lnt">129
&lt;/span>&lt;span class="lnt">130
&lt;/span>&lt;span class="lnt">131
&lt;/span>&lt;span class="lnt">132
&lt;/span>&lt;span class="lnt">133
&lt;/span>&lt;span class="lnt">134
&lt;/span>&lt;span class="lnt">135
&lt;/span>&lt;span class="lnt">136
&lt;/span>&lt;span class="lnt">137
&lt;/span>&lt;span class="lnt">138
&lt;/span>&lt;span class="lnt">139
&lt;/span>&lt;span class="lnt">140
&lt;/span>&lt;span class="lnt">141
&lt;/span>&lt;span class="lnt">142
&lt;/span>&lt;span class="lnt">143
&lt;/span>&lt;span class="lnt">144
&lt;/span>&lt;span class="lnt">145
&lt;/span>&lt;span class="lnt">146
&lt;/span>&lt;span class="lnt">147
&lt;/span>&lt;span class="lnt">148
&lt;/span>&lt;span class="lnt">149
&lt;/span>&lt;span class="lnt">150
&lt;/span>&lt;span class="lnt">151
&lt;/span>&lt;span class="lnt">152
&lt;/span>&lt;span class="lnt">153
&lt;/span>&lt;span class="lnt">154
&lt;/span>&lt;span class="lnt">155
&lt;/span>&lt;span class="lnt">156
&lt;/span>&lt;span class="lnt">157
&lt;/span>&lt;span class="lnt">158
&lt;/span>&lt;span class="lnt">159
&lt;/span>&lt;span class="lnt">160
&lt;/span>&lt;span class="lnt">161
&lt;/span>&lt;span class="lnt">162
&lt;/span>&lt;span class="lnt">163
&lt;/span>&lt;span class="lnt">164
&lt;/span>&lt;span class="lnt">165
&lt;/span>&lt;span class="lnt">166
&lt;/span>&lt;span class="lnt">167
&lt;/span>&lt;span class="lnt">168
&lt;/span>&lt;span class="lnt">169
&lt;/span>&lt;span class="lnt">170
&lt;/span>&lt;span class="lnt">171
&lt;/span>&lt;span class="lnt">172
&lt;/span>&lt;span class="lnt">173
&lt;/span>&lt;span class="lnt">174
&lt;/span>&lt;span class="lnt">175
&lt;/span>&lt;span class="lnt">176
&lt;/span>&lt;span class="lnt">177
&lt;/span>&lt;span class="lnt">178
&lt;/span>&lt;span class="lnt">179
&lt;/span>&lt;span class="lnt">180
&lt;/span>&lt;span class="lnt">181
&lt;/span>&lt;span class="lnt">182
&lt;/span>&lt;span class="lnt">183
&lt;/span>&lt;span class="lnt">184
&lt;/span>&lt;span class="lnt">185
&lt;/span>&lt;span class="lnt">186
&lt;/span>&lt;span class="lnt">187
&lt;/span>&lt;span class="lnt">188
&lt;/span>&lt;span class="lnt">189
&lt;/span>&lt;span class="lnt">190
&lt;/span>&lt;span class="lnt">191
&lt;/span>&lt;span class="lnt">192
&lt;/span>&lt;span class="lnt">193
&lt;/span>&lt;span class="lnt">194
&lt;/span>&lt;span class="lnt">195
&lt;/span>&lt;span class="lnt">196
&lt;/span>&lt;span class="lnt">197
&lt;/span>&lt;span class="lnt">198
&lt;/span>&lt;span class="lnt">199
&lt;/span>&lt;span class="lnt">200
&lt;/span>&lt;span class="lnt">201
&lt;/span>&lt;span class="lnt">202
&lt;/span>&lt;span class="lnt">203
&lt;/span>&lt;span class="lnt">204
&lt;/span>&lt;span class="lnt">205
&lt;/span>&lt;span class="lnt">206
&lt;/span>&lt;span class="lnt">207
&lt;/span>&lt;span class="lnt">208
&lt;/span>&lt;span class="lnt">209
&lt;/span>&lt;span class="lnt">210
&lt;/span>&lt;span class="lnt">211
&lt;/span>&lt;span class="lnt">212
&lt;/span>&lt;span class="lnt">213
&lt;/span>&lt;span class="lnt">214
&lt;/span>&lt;span class="lnt">215
&lt;/span>&lt;span class="lnt">216
&lt;/span>&lt;span class="lnt">217
&lt;/span>&lt;span class="lnt">218
&lt;/span>&lt;span class="lnt">219
&lt;/span>&lt;span class="lnt">220
&lt;/span>&lt;span class="lnt">221
&lt;/span>&lt;span class="lnt">222
&lt;/span>&lt;span class="lnt">223
&lt;/span>&lt;span class="lnt">224
&lt;/span>&lt;span class="lnt">225
&lt;/span>&lt;span class="lnt">226
&lt;/span>&lt;span class="lnt">227
&lt;/span>&lt;span class="lnt">228
&lt;/span>&lt;span class="lnt">229
&lt;/span>&lt;span class="lnt">230
&lt;/span>&lt;span class="lnt">231
&lt;/span>&lt;span class="lnt">232
&lt;/span>&lt;span class="lnt">233
&lt;/span>&lt;span class="lnt">234
&lt;/span>&lt;span class="lnt">235
&lt;/span>&lt;span class="lnt">236
&lt;/span>&lt;span class="lnt">237
&lt;/span>&lt;span class="lnt">238
&lt;/span>&lt;span class="lnt">239
&lt;/span>&lt;span class="lnt">240
&lt;/span>&lt;span class="lnt">241
&lt;/span>&lt;span class="lnt">242
&lt;/span>&lt;span class="lnt">243
&lt;/span>&lt;span class="lnt">244
&lt;/span>&lt;span class="lnt">245
&lt;/span>&lt;span class="lnt">246
&lt;/span>&lt;span class="lnt">247
&lt;/span>&lt;span class="lnt">248
&lt;/span>&lt;span class="lnt">249
&lt;/span>&lt;span class="lnt">250
&lt;/span>&lt;span class="lnt">251
&lt;/span>&lt;span class="lnt">252
&lt;/span>&lt;span class="lnt">253
&lt;/span>&lt;span class="lnt">254
&lt;/span>&lt;span class="lnt">255
&lt;/span>&lt;span class="lnt">256
&lt;/span>&lt;span class="lnt">257
&lt;/span>&lt;span class="lnt">258
&lt;/span>&lt;span class="lnt">259
&lt;/span>&lt;span class="lnt">260
&lt;/span>&lt;span class="lnt">261
&lt;/span>&lt;span class="lnt">262
&lt;/span>&lt;span class="lnt">263
&lt;/span>&lt;span class="lnt">264
&lt;/span>&lt;span class="lnt">265
&lt;/span>&lt;span class="lnt">266
&lt;/span>&lt;span class="lnt">267
&lt;/span>&lt;span class="lnt">268
&lt;/span>&lt;span class="lnt">269
&lt;/span>&lt;span class="lnt">270
&lt;/span>&lt;span class="lnt">271
&lt;/span>&lt;span class="lnt">272
&lt;/span>&lt;span class="lnt">273
&lt;/span>&lt;span class="lnt">274
&lt;/span>&lt;span class="lnt">275
&lt;/span>&lt;span class="lnt">276
&lt;/span>&lt;span class="lnt">277
&lt;/span>&lt;span class="lnt">278
&lt;/span>&lt;span class="lnt">279
&lt;/span>&lt;span class="lnt">280
&lt;/span>&lt;span class="lnt">281
&lt;/span>&lt;span class="lnt">282
&lt;/span>&lt;span class="lnt">283
&lt;/span>&lt;span class="lnt">284
&lt;/span>&lt;span class="lnt">285
&lt;/span>&lt;span class="lnt">286
&lt;/span>&lt;span class="lnt">287
&lt;/span>&lt;span class="lnt">288
&lt;/span>&lt;span class="lnt">289
&lt;/span>&lt;span class="lnt">290
&lt;/span>&lt;span class="lnt">291
&lt;/span>&lt;span class="lnt">292
&lt;/span>&lt;span class="lnt">293
&lt;/span>&lt;span class="lnt">294
&lt;/span>&lt;span class="lnt">295
&lt;/span>&lt;span class="lnt">296
&lt;/span>&lt;span class="lnt">297
&lt;/span>&lt;span class="lnt">298
&lt;/span>&lt;span class="lnt">299
&lt;/span>&lt;span class="lnt">300
&lt;/span>&lt;span class="lnt">301
&lt;/span>&lt;span class="lnt">302
&lt;/span>&lt;span class="lnt">303
&lt;/span>&lt;span class="lnt">304
&lt;/span>&lt;span class="lnt">305
&lt;/span>&lt;span class="lnt">306
&lt;/span>&lt;span class="lnt">307
&lt;/span>&lt;span class="lnt">308
&lt;/span>&lt;span class="lnt">309
&lt;/span>&lt;span class="lnt">310
&lt;/span>&lt;span class="lnt">311
&lt;/span>&lt;span class="lnt">312
&lt;/span>&lt;span class="lnt">313
&lt;/span>&lt;span class="lnt">314
&lt;/span>&lt;span class="lnt">315
&lt;/span>&lt;span class="lnt">316
&lt;/span>&lt;span class="lnt">317
&lt;/span>&lt;span class="lnt">318
&lt;/span>&lt;span class="lnt">319
&lt;/span>&lt;span class="lnt">320
&lt;/span>&lt;span class="lnt">321
&lt;/span>&lt;span class="lnt">322
&lt;/span>&lt;span class="lnt">323
&lt;/span>&lt;span class="lnt">324
&lt;/span>&lt;span class="lnt">325
&lt;/span>&lt;span class="lnt">326
&lt;/span>&lt;span class="lnt">327
&lt;/span>&lt;span class="lnt">328
&lt;/span>&lt;span class="lnt">329
&lt;/span>&lt;span class="lnt">330
&lt;/span>&lt;span class="lnt">331
&lt;/span>&lt;span class="lnt">332
&lt;/span>&lt;span class="lnt">333
&lt;/span>&lt;span class="lnt">334
&lt;/span>&lt;span class="lnt">335
&lt;/span>&lt;span class="lnt">336
&lt;/span>&lt;span class="lnt">337
&lt;/span>&lt;span class="lnt">338
&lt;/span>&lt;span class="lnt">339
&lt;/span>&lt;span class="lnt">340
&lt;/span>&lt;span class="lnt">341
&lt;/span>&lt;span class="lnt">342
&lt;/span>&lt;span class="lnt">343
&lt;/span>&lt;span class="lnt">344
&lt;/span>&lt;span class="lnt">345
&lt;/span>&lt;span class="lnt">346
&lt;/span>&lt;span class="lnt">347
&lt;/span>&lt;span class="lnt">348
&lt;/span>&lt;span class="lnt">349
&lt;/span>&lt;span class="lnt">350
&lt;/span>&lt;span class="lnt">351
&lt;/span>&lt;span class="lnt">352
&lt;/span>&lt;span class="lnt">353
&lt;/span>&lt;span class="lnt">354
&lt;/span>&lt;span class="lnt">355
&lt;/span>&lt;span class="lnt">356
&lt;/span>&lt;span class="lnt">357
&lt;/span>&lt;span class="lnt">358
&lt;/span>&lt;span class="lnt">359
&lt;/span>&lt;span class="lnt">360
&lt;/span>&lt;span class="lnt">361
&lt;/span>&lt;span class="lnt">362
&lt;/span>&lt;span class="lnt">363
&lt;/span>&lt;span class="lnt">364
&lt;/span>&lt;span class="lnt">365
&lt;/span>&lt;span class="lnt">366
&lt;/span>&lt;span class="lnt">367
&lt;/span>&lt;span class="lnt">368
&lt;/span>&lt;span class="lnt">369
&lt;/span>&lt;span class="lnt">370
&lt;/span>&lt;span class="lnt">371
&lt;/span>&lt;span class="lnt">372
&lt;/span>&lt;span class="lnt">373
&lt;/span>&lt;span class="lnt">374
&lt;/span>&lt;span class="lnt">375
&lt;/span>&lt;span class="lnt">376
&lt;/span>&lt;span class="lnt">377
&lt;/span>&lt;span class="lnt">378
&lt;/span>&lt;span class="lnt">379
&lt;/span>&lt;span class="lnt">380
&lt;/span>&lt;span class="lnt">381
&lt;/span>&lt;span class="lnt">382
&lt;/span>&lt;span class="lnt">383
&lt;/span>&lt;span class="lnt">384
&lt;/span>&lt;span class="lnt">385
&lt;/span>&lt;span class="lnt">386
&lt;/span>&lt;span class="lnt">387
&lt;/span>&lt;span class="lnt">388
&lt;/span>&lt;span class="lnt">389
&lt;/span>&lt;span class="lnt">390
&lt;/span>&lt;span class="lnt">391
&lt;/span>&lt;span class="lnt">392
&lt;/span>&lt;span class="lnt">393
&lt;/span>&lt;span class="lnt">394
&lt;/span>&lt;span class="lnt">395
&lt;/span>&lt;span class="lnt">396
&lt;/span>&lt;span class="lnt">397
&lt;/span>&lt;span class="lnt">398
&lt;/span>&lt;span class="lnt">399
&lt;/span>&lt;span class="lnt">400
&lt;/span>&lt;span class="lnt">401
&lt;/span>&lt;span class="lnt">402
&lt;/span>&lt;span class="lnt">403
&lt;/span>&lt;span class="lnt">404
&lt;/span>&lt;span class="lnt">405
&lt;/span>&lt;span class="lnt">406
&lt;/span>&lt;span class="lnt">407
&lt;/span>&lt;span class="lnt">408
&lt;/span>&lt;span class="lnt">409
&lt;/span>&lt;span class="lnt">410
&lt;/span>&lt;span class="lnt">411
&lt;/span>&lt;span class="lnt">412
&lt;/span>&lt;span class="lnt">413
&lt;/span>&lt;span class="lnt">414
&lt;/span>&lt;span class="lnt">415
&lt;/span>&lt;span class="lnt">416
&lt;/span>&lt;span class="lnt">417
&lt;/span>&lt;span class="lnt">418
&lt;/span>&lt;span class="lnt">419
&lt;/span>&lt;span class="lnt">420
&lt;/span>&lt;span class="lnt">421
&lt;/span>&lt;span class="lnt">422
&lt;/span>&lt;span class="lnt">423
&lt;/span>&lt;span class="lnt">424
&lt;/span>&lt;span class="lnt">425
&lt;/span>&lt;span class="lnt">426
&lt;/span>&lt;span class="lnt">427
&lt;/span>&lt;span class="lnt">428
&lt;/span>&lt;span class="lnt">429
&lt;/span>&lt;span class="lnt">430
&lt;/span>&lt;span class="lnt">431
&lt;/span>&lt;span class="lnt">432
&lt;/span>&lt;span class="lnt">433
&lt;/span>&lt;span class="lnt">434
&lt;/span>&lt;span class="lnt">435
&lt;/span>&lt;span class="lnt">436
&lt;/span>&lt;span class="lnt">437
&lt;/span>&lt;span class="lnt">438
&lt;/span>&lt;span class="lnt">439
&lt;/span>&lt;span class="lnt">440
&lt;/span>&lt;span class="lnt">441
&lt;/span>&lt;span class="lnt">442
&lt;/span>&lt;span class="lnt">443
&lt;/span>&lt;span class="lnt">444
&lt;/span>&lt;span class="lnt">445
&lt;/span>&lt;span class="lnt">446
&lt;/span>&lt;span class="lnt">447
&lt;/span>&lt;span class="lnt">448
&lt;/span>&lt;span class="lnt">449
&lt;/span>&lt;span class="lnt">450
&lt;/span>&lt;span class="lnt">451
&lt;/span>&lt;span class="lnt">452
&lt;/span>&lt;span class="lnt">453
&lt;/span>&lt;span class="lnt">454
&lt;/span>&lt;span class="lnt">455
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-shell" data-lang="shell">Codecs:
D..... &lt;span class="o">=&lt;/span> Decoding supported
.E.... &lt;span class="o">=&lt;/span> Encoding supported
..V... &lt;span class="o">=&lt;/span> Video codec
..A... &lt;span class="o">=&lt;/span> Audio codec
..S... &lt;span class="o">=&lt;/span> Subtitle codec
...I.. &lt;span class="o">=&lt;/span> Intra frame-only codec
....L. &lt;span class="o">=&lt;/span> Lossy compression
.....S &lt;span class="o">=&lt;/span> Lossless compression
-------
D.VI.S 012v Uncompressed 4:2:2 10-bit
D.V.L. 4xm 4X Movie
D.VI.S 8bps QuickTime 8BPS video
.EVIL. a64_multi Multicolor charset &lt;span class="k">for&lt;/span> Commodore &lt;span class="m">64&lt;/span> &lt;span class="o">(&lt;/span>encoders: a64multi &lt;span class="o">)&lt;/span>
.EVIL. a64_multi5 Multicolor charset &lt;span class="k">for&lt;/span> Commodore 64, extended with 5th color &lt;span class="o">(&lt;/span>colram&lt;span class="o">)&lt;/span> &lt;span class="o">(&lt;/span>encoders: a64multi5 &lt;span class="o">)&lt;/span>
D.V..S aasc Autodesk RLE
D.VIL. aic Apple Intermediate Codec
DEVI.S alias_pix Alias/Wavefront PIX image
DEVIL. amv AMV Video
D.V.L. anm Deluxe Paint Animation
D.V.L. ansi ASCII/ANSI art
DEV..S apng APNG &lt;span class="o">(&lt;/span>Animated Portable Network Graphics&lt;span class="o">)&lt;/span> image
DEVIL. asv1 ASUS V1
DEVIL. asv2 ASUS V2
D.VIL. aura Auravision AURA
D.VIL. aura2 Auravision Aura &lt;span class="m">2&lt;/span>
DEV.L. av1 Alliance &lt;span class="k">for&lt;/span> Open Media AV1 &lt;span class="o">(&lt;/span>decoders: libaom-av1 &lt;span class="o">)&lt;/span> &lt;span class="o">(&lt;/span>encoders: libaom-av1 &lt;span class="o">)&lt;/span>
D.V... avrn Avid AVI Codec
DEVI.S avrp Avid 1:1 10-bit RGB Packer
D.V.L. avs AVS &lt;span class="o">(&lt;/span>Audio Video Standard&lt;span class="o">)&lt;/span> video
..V.L. avs2 AVS2-P2/IEEE1857.4
DEVI.S avui Avid Meridien Uncompressed
DEVI.S ayuv Uncompressed packed MS 4:4:4:4
D.V.L. bethsoftvid Bethesda VID video
D.V.L. bfi Brute Force &lt;span class="p">&amp;amp;&lt;/span> Ignorance
D.V.L. binkvideo Bink video
D.VI.. bintext Binary text
D.VI.S bitpacked Bitpacked
DEVI.S bmp BMP &lt;span class="o">(&lt;/span>Windows and OS/2 bitmap&lt;span class="o">)&lt;/span>
D.V..S bmv_video Discworld II BMV video
D.VI.S brender_pix BRender PIX image
D.V.L. c93 Interplay C93
D.V.L. cavs Chinese AVS &lt;span class="o">(&lt;/span>Audio Video Standard&lt;span class="o">)&lt;/span> &lt;span class="o">(&lt;/span>AVS1-P2, JiZhun profile&lt;span class="o">)&lt;/span>
D.V.L. cdgraphics CD Graphics video
D.VIL. cdxl Commodore CDXL video
D.V.L. cfhd Cineform HD
DEV.L. cinepak Cinepak
D.V.L. clearvideo Iterated Systems ClearVideo
DEVIL. cljr Cirrus Logic AccuPak
D.VI.S cllc Canopus Lossless Codec
D.V.L. cmv Electronic Arts CMV video &lt;span class="o">(&lt;/span>decoders: eacmv &lt;span class="o">)&lt;/span>
D.V... cpia CPiA video format
D.V..S cscd CamStudio &lt;span class="o">(&lt;/span>decoders: camstudio &lt;span class="o">)&lt;/span>
D.VIL. cyuv Creative YUV &lt;span class="o">(&lt;/span>CYUV&lt;span class="o">)&lt;/span>
..V.LS daala Daala
D.VILS dds DirectDraw Surface image decoder
D.V.L. dfa Chronomaster DFA
DEV.LS dirac Dirac &lt;span class="o">(&lt;/span>encoders: vc2 &lt;span class="o">)&lt;/span>
DEVIL. dnxhd VC3/DNxHD
DEVI.S dpx DPX &lt;span class="o">(&lt;/span>Digital Picture Exchange&lt;span class="o">)&lt;/span> image
D.V.L. dsicinvideo Delphine Software International CIN video
DEVIL. dvvideo DV &lt;span class="o">(&lt;/span>Digital Video&lt;span class="o">)&lt;/span>
D.V..S dxa Feeble Files/ScummVM DXA
D.VI.S dxtory Dxtory
D.VIL. dxv Resolume DXV
D.V.L. escape124 Escape &lt;span class="m">124&lt;/span>
D.V.L. escape130 Escape &lt;span class="m">130&lt;/span>
D.VILS exr OpenEXR image
DEV..S ffv1 FFmpeg video codec &lt;span class="c1">#1&lt;/span>
DEVI.S ffvhuff Huffyuv FFmpeg variant
D.V.L. fic Mirillis FIC
DEVI.S fits FITS &lt;span class="o">(&lt;/span>Flexible Image Transport System&lt;span class="o">)&lt;/span>
DEV..S flashsv Flash Screen Video v1
DEV.L. flashsv2 Flash Screen Video v2
D.V..S flic Autodesk Animator Flic video
DEV.L. flv1 FLV / Sorenson Spark / Sorenson H.263 &lt;span class="o">(&lt;/span>Flash Video&lt;span class="o">)&lt;/span> &lt;span class="o">(&lt;/span>decoders: flv &lt;span class="o">)&lt;/span> &lt;span class="o">(&lt;/span>encoders: flv &lt;span class="o">)&lt;/span>
D.V..S fmvc FM Screen Capture Codec
D.VI.S fraps Fraps
D.VI.S frwu Forward Uncompressed
D.V.L. g2m Go2Meeting
D.V.L. gdv Gremlin Digital Video
DEV..S gif GIF &lt;span class="o">(&lt;/span>Graphics Interchange Format&lt;span class="o">)&lt;/span>
DEV.L. h261 H.261
DEV.L. h263 H.263 / H.263-1996, H.263+ / H.263-1998 / H.263 version &lt;span class="m">2&lt;/span>
D.V.L. h263i Intel H.263
DEV.L. h263p H.263+ / H.263-1998 / H.263 version &lt;span class="m">2&lt;/span>
DEV.LS h264 H.264 / AVC / MPEG-4 AVC / MPEG-4 part &lt;span class="m">10&lt;/span> &lt;span class="o">(&lt;/span>decoders: h264 h264_qsv h264_cuvid &lt;span class="o">)&lt;/span> &lt;span class="o">(&lt;/span>encoders: libx264 libx264rgb h264_amf h264_nvenc h264_qsv nvenc nvenc_h264 &lt;span class="o">)&lt;/span>
DEVIL. hap Vidvox Hap
DEV.L. hevc H.265 / HEVC &lt;span class="o">(&lt;/span>High Efficiency Video Coding&lt;span class="o">)&lt;/span> &lt;span class="o">(&lt;/span>decoders: hevc hevc_qsv hevc_cuvid &lt;span class="o">)&lt;/span> &lt;span class="o">(&lt;/span>encoders: libx265 nvenc_hevc hevc_amf hevc_nvenc hevc_qsv &lt;span class="o">)&lt;/span>
D.V.L. hnm4video HNM &lt;span class="m">4&lt;/span> video
D.VIL. hq_hqa Canopus HQ/HQA
D.VIL. hqx Canopus HQX
DEVI.S huffyuv HuffYUV
D.V.L. idcin id Quake II CIN video &lt;span class="o">(&lt;/span>decoders: idcinvideo &lt;span class="o">)&lt;/span>
D.VI.. idf iCEDraw text
D.V.L. iff_ilbm IFF ACBM/ANIM/DEEP/ILBM/PBM/RGB8/RGBN &lt;span class="o">(&lt;/span>decoders: iff &lt;span class="o">)&lt;/span>
D.V.L. imm4 Infinity IMM4
D.V.L. indeo2 Intel Indeo &lt;span class="m">2&lt;/span>
D.V.L. indeo3 Intel Indeo &lt;span class="m">3&lt;/span>
D.V.L. indeo4 Intel Indeo Video Interactive &lt;span class="m">4&lt;/span>
D.V.L. indeo5 Intel Indeo Video Interactive &lt;span class="m">5&lt;/span>
D.V.L. interplayvideo Interplay MVE video
DEVILS jpeg2000 JPEG &lt;span class="m">2000&lt;/span> &lt;span class="o">(&lt;/span>decoders: jpeg2000 libopenjpeg &lt;span class="o">)&lt;/span> &lt;span class="o">(&lt;/span>encoders: jpeg2000 libopenjpeg &lt;span class="o">)&lt;/span>
DEVILS jpegls JPEG-LS
D.VIL. jv Bitmap Brothers JV video
D.V.L. kgv1 Kega Game Video
D.V.L. kmvc Karl Morton&lt;span class="s1">&amp;#39;s video codec
&lt;/span>&lt;span class="s1"> D.VI.S lagarith Lagarith lossless
&lt;/span>&lt;span class="s1"> .EVI.S ljpeg Lossless JPEG
&lt;/span>&lt;span class="s1"> D.VI.S loco LOCO
&lt;/span>&lt;span class="s1"> D.VI.S m101 Matrox Uncompressed SD
&lt;/span>&lt;span class="s1"> D.V.L. mad Electronic Arts Madcow Video (decoders: eamad )
&lt;/span>&lt;span class="s1"> DEVI.S magicyuv MagicYUV video
&lt;/span>&lt;span class="s1"> D.VIL. mdec Sony PlayStation MDEC (Motion DECoder)
&lt;/span>&lt;span class="s1"> D.V.L. mimic Mimic
&lt;/span>&lt;span class="s1"> DEVIL. mjpeg Motion JPEG (decoders: mjpeg mjpeg_cuvid ) (encoders: mjpeg mjpeg_qsv )
&lt;/span>&lt;span class="s1"> D.VIL. mjpegb Apple MJPEG-B
&lt;/span>&lt;span class="s1"> D.V.L. mmvideo American Laser Games MM Video
&lt;/span>&lt;span class="s1"> D.V.L. motionpixels Motion Pixels video
&lt;/span>&lt;span class="s1"> DEV.L. mpeg1video MPEG-1 video (decoders: mpeg1video mpeg1_cuvid )
&lt;/span>&lt;span class="s1"> DEV.L. mpeg2video MPEG-2 video (decoders: mpeg2video mpegvideo mpeg2_qsv mpeg2_cuvid ) (encoders: mpeg2video mpeg2_qsv )
&lt;/span>&lt;span class="s1"> DEV.L. mpeg4 MPEG-4 part 2 (decoders: mpeg4 mpeg4_cuvid ) (encoders: mpeg4 libxvid )
&lt;/span>&lt;span class="s1"> D.V.L. msa1 MS ATC Screen
&lt;/span>&lt;span class="s1"> D.VI.S mscc Mandsoft Screen Capture Codec
&lt;/span>&lt;span class="s1"> D.V.L. msmpeg4v1 MPEG-4 part 2 Microsoft variant version 1
&lt;/span>&lt;span class="s1"> DEV.L. msmpeg4v2 MPEG-4 part 2 Microsoft variant version 2
&lt;/span>&lt;span class="s1"> DEV.L. msmpeg4v3 MPEG-4 part 2 Microsoft variant version 3 (decoders: msmpeg4 ) (encoders: msmpeg4 )
&lt;/span>&lt;span class="s1"> D.V..S msrle Microsoft RLE
&lt;/span>&lt;span class="s1"> D.V.L. mss1 MS Screen 1
&lt;/span>&lt;span class="s1"> D.VIL. mss2 MS Windows Media Video V9 Screen
&lt;/span>&lt;span class="s1"> DEV.L. msvideo1 Microsoft Video 1
&lt;/span>&lt;span class="s1"> D.VI.S mszh LCL (LossLess Codec Library) MSZH
&lt;/span>&lt;span class="s1"> D.V.L. mts2 MS Expression Encoder Screen
&lt;/span>&lt;span class="s1"> D.VIL. mvc1 Silicon Graphics Motion Video Compressor 1
&lt;/span>&lt;span class="s1"> D.VIL. mvc2 Silicon Graphics Motion Video Compressor 2
&lt;/span>&lt;span class="s1"> D.V..S mwsc MatchWare Screen Capture Codec
&lt;/span>&lt;span class="s1"> D.V.L. mxpeg Mobotix MxPEG video
&lt;/span>&lt;span class="s1"> D.V.L. nuv NuppelVideo/RTJPEG
&lt;/span>&lt;span class="s1"> D.V.L. paf_video Amazing Studio Packed Animation File Video
&lt;/span>&lt;span class="s1"> DEVI.S pam PAM (Portable AnyMap) image
&lt;/span>&lt;span class="s1"> DEVI.S pbm PBM (Portable BitMap) image
&lt;/span>&lt;span class="s1"> DEVI.S pcx PC Paintbrush PCX image
&lt;/span>&lt;span class="s1"> DEVI.S pgm PGM (Portable GrayMap) image
&lt;/span>&lt;span class="s1"> DEVI.S pgmyuv PGMYUV (Portable GrayMap YUV) image
&lt;/span>&lt;span class="s1"> D.VIL. pictor Pictor/PC Paint
&lt;/span>&lt;span class="s1"> D.VIL. pixlet Apple Pixlet
&lt;/span>&lt;span class="s1"> DEV..S png PNG (Portable Network Graphics) image
&lt;/span>&lt;span class="s1"> DEVI.S ppm PPM (Portable PixelMap) image
&lt;/span>&lt;span class="s1"> DEVIL. prores Apple ProRes (iCodec Pro) (encoders: prores prores_aw prores_ks )
&lt;/span>&lt;span class="s1"> D.VIL. prosumer Brooktree ProSumer Video
&lt;/span>&lt;span class="s1"> D.VI.S psd Photoshop PSD file
&lt;/span>&lt;span class="s1"> D.VIL. ptx V.Flash PTX image
&lt;/span>&lt;span class="s1"> D.VI.S qdraw Apple QuickDraw
&lt;/span>&lt;span class="s1"> D.V.L. qpeg Q-team QPEG
&lt;/span>&lt;span class="s1"> DEV..S qtrle QuickTime Animation (RLE) video
&lt;/span>&lt;span class="s1"> DEVI.S r10k AJA Kona 10-bit RGB Codec
&lt;/span>&lt;span class="s1"> DEVI.S r210 Uncompressed RGB 10-bit
&lt;/span>&lt;span class="s1"> D.V.L. rasc RemotelyAnywhere Screen Capture
&lt;/span>&lt;span class="s1"> DEVI.S rawvideo raw video
&lt;/span>&lt;span class="s1"> D.VIL. rl2 RL2 video
&lt;/span>&lt;span class="s1"> DEV.L. roq id RoQ video (decoders: roqvideo ) (encoders: roqvideo )
&lt;/span>&lt;span class="s1"> D.V.L. rpza QuickTime video (RPZA)
&lt;/span>&lt;span class="s1"> D.V..S rscc innoHeim/Rsupport Screen Capture Codec
&lt;/span>&lt;span class="s1"> DEV.L. rv10 RealVideo 1.0
&lt;/span>&lt;span class="s1"> DEV.L. rv20 RealVideo 2.0
&lt;/span>&lt;span class="s1"> D.V.L. rv30 RealVideo 3.0
&lt;/span>&lt;span class="s1"> D.V.L. rv40 RealVideo 4.0
&lt;/span>&lt;span class="s1"> D.V.L. sanm LucasArts SANM/SMUSH video
&lt;/span>&lt;span class="s1"> D.V.LS scpr ScreenPressor
&lt;/span>&lt;span class="s1"> D.V..S screenpresso Screenpresso
&lt;/span>&lt;span class="s1"> DEVI.S sgi SGI image
&lt;/span>&lt;span class="s1"> D.VI.S sgirle SGI RLE 8-bit
&lt;/span>&lt;span class="s1"> D.VI.S sheervideo BitJazz SheerVideo
&lt;/span>&lt;span class="s1"> D.V.L. smackvideo Smacker video (decoders: smackvid )
&lt;/span>&lt;span class="s1"> D.V.L. smc QuickTime Graphics (SMC)
&lt;/span>&lt;span class="s1"> D.V... smvjpeg Sigmatel Motion Video
&lt;/span>&lt;span class="s1"> DEV.LS snow Snow
&lt;/span>&lt;span class="s1"> D.VIL. sp5x Sunplus JPEG (SP5X)
&lt;/span>&lt;span class="s1"> D.VIL. speedhq NewTek SpeedHQ
&lt;/span>&lt;span class="s1"> D.VI.S srgc Screen Recorder Gold Codec
&lt;/span>&lt;span class="s1"> DEVI.S sunrast Sun Rasterfile image
&lt;/span>&lt;span class="s1"> ..V..S svg Scalable Vector Graphics
&lt;/span>&lt;span class="s1"> DEV.L. svq1 Sorenson Vector Quantizer 1 / Sorenson Video 1 / SVQ1
&lt;/span>&lt;span class="s1"> D.V.L. svq3 Sorenson Vector Quantizer 3 / Sorenson Video 3 / SVQ3
&lt;/span>&lt;span class="s1"> DEVI.S targa Truevision Targa image
&lt;/span>&lt;span class="s1"> D.VI.S targa_y216 Pinnacle TARGA CineWave YUV16
&lt;/span>&lt;span class="s1"> D.V.L. tdsc TDSC
&lt;/span>&lt;span class="s1"> D.V.L. tgq Electronic Arts TGQ video (decoders: eatgq )
&lt;/span>&lt;span class="s1"> D.V.L. tgv Electronic Arts TGV video (decoders: eatgv )
&lt;/span>&lt;span class="s1"> DEV.L. theora Theora (encoders: libtheora )
&lt;/span>&lt;span class="s1"> D.VIL. thp Nintendo Gamecube THP video
&lt;/span>&lt;span class="s1"> D.V.L. tiertexseqvideo Tiertex Limited SEQ video
&lt;/span>&lt;span class="s1"> DEVI.S tiff TIFF image
&lt;/span>&lt;span class="s1"> D.VIL. tmv 8088flex TMV
&lt;/span>&lt;span class="s1"> D.V.L. tqi Electronic Arts TQI video (decoders: eatqi )
&lt;/span>&lt;span class="s1"> D.V.L. truemotion1 Duck TrueMotion 1.0
&lt;/span>&lt;span class="s1"> D.V.L. truemotion2 Duck TrueMotion 2.0
&lt;/span>&lt;span class="s1"> D.VIL. truemotion2rt Duck TrueMotion 2.0 Real Time
&lt;/span>&lt;span class="s1"> D.V..S tscc TechSmith Screen Capture Codec (decoders: camtasia )
&lt;/span>&lt;span class="s1"> D.V.L. tscc2 TechSmith Screen Codec 2
&lt;/span>&lt;span class="s1"> D.VIL. txd Renderware TXD (TeXture Dictionary) image
&lt;/span>&lt;span class="s1"> D.V.L. ulti IBM UltiMotion (decoders: ultimotion )
&lt;/span>&lt;span class="s1"> DEVI.S utvideo Ut Video
&lt;/span>&lt;span class="s1"> DEVI.S v210 Uncompressed 4:2:2 10-bit
&lt;/span>&lt;span class="s1"> D.VI.S v210x Uncompressed 4:2:2 10-bit
&lt;/span>&lt;span class="s1"> DEVI.S v308 Uncompressed packed 4:4:4
&lt;/span>&lt;span class="s1"> DEVI.S v408 Uncompressed packed QT 4:4:4:4
&lt;/span>&lt;span class="s1"> DEVI.S v410 Uncompressed 4:4:4 10-bit
&lt;/span>&lt;span class="s1"> D.V.L. vb Beam Software VB
&lt;/span>&lt;span class="s1"> D.VI.S vble VBLE Lossless Codec
&lt;/span>&lt;span class="s1"> D.V.L. vc1 SMPTE VC-1 (decoders: vc1 vc1_qsv vc1_cuvid )
&lt;/span>&lt;span class="s1"> D.V.L. vc1image Windows Media Video 9 Image v2
&lt;/span>&lt;span class="s1"> D.VIL. vcr1 ATI VCR1
&lt;/span>&lt;span class="s1"> D.VIL. vixl Miro VideoXL (decoders: xl )
&lt;/span>&lt;span class="s1"> D.V.L. vmdvideo Sierra VMD video
&lt;/span>&lt;span class="s1"> D.V..S vmnc VMware Screen Codec / VMware Video
&lt;/span>&lt;span class="s1"> D.V.L. vp3 On2 VP3
&lt;/span>&lt;span class="s1"> D.V.L. vp5 On2 VP5
&lt;/span>&lt;span class="s1"> D.V.L. vp6 On2 VP6
&lt;/span>&lt;span class="s1"> D.V.L. vp6a On2 VP6 (Flash version, with alpha channel)
&lt;/span>&lt;span class="s1"> D.V.L. vp6f On2 VP6 (Flash version)
&lt;/span>&lt;span class="s1"> D.V.L. vp7 On2 VP7
&lt;/span>&lt;span class="s1"> DEV.L. vp8 On2 VP8 (decoders: vp8 libvpx vp8_cuvid vp8_qsv ) (encoders: libvpx )
&lt;/span>&lt;span class="s1"> DEV.L. vp9 Google VP9 (decoders: vp9 libvpx-vp9 vp9_cuvid ) (encoders: libvpx-vp9 )
&lt;/span>&lt;span class="s1"> D.V..S wcmv WinCAM Motion Video
&lt;/span>&lt;span class="s1"> DEVILS webp WebP (encoders: libwebp )
&lt;/span>&lt;span class="s1"> DEV.L. wmv1 Windows Media Video 7
&lt;/span>&lt;span class="s1"> DEV.L. wmv2 Windows Media Video 8
&lt;/span>&lt;span class="s1"> D.V.L. wmv3 Windows Media Video 9
&lt;/span>&lt;span class="s1"> D.V.L. wmv3image Windows Media Video 9 Image
&lt;/span>&lt;span class="s1"> D.VIL. wnv1 Winnov WNV1
&lt;/span>&lt;span class="s1"> DEV..S wrapped_avframe AVFrame to AVPacket passthrough
&lt;/span>&lt;span class="s1"> D.V.L. ws_vqa Westwood Studios VQA (Vector Quantized Animation) video (decoders: vqavideo )
&lt;/span>&lt;span class="s1"> D.V.L. xan_wc3 Wing Commander III / Xan
&lt;/span>&lt;span class="s1"> D.V.L. xan_wc4 Wing Commander IV / Xxan
&lt;/span>&lt;span class="s1"> D.VI.. xbin eXtended BINary text
&lt;/span>&lt;span class="s1"> DEVI.S xbm XBM (X BitMap) image
&lt;/span>&lt;span class="s1"> DEVIL. xface X-face image
&lt;/span>&lt;span class="s1"> D.VI.S xpm XPM (X PixMap) image
&lt;/span>&lt;span class="s1"> DEVI.S xwd XWD (X Window Dump) image
&lt;/span>&lt;span class="s1"> DEVI.S y41p Uncompressed YUV 4:1:1 12-bit
&lt;/span>&lt;span class="s1"> D.VI.S ylc YUY2 Lossless Codec
&lt;/span>&lt;span class="s1"> D.V.L. yop Psygnosis YOP Video
&lt;/span>&lt;span class="s1"> DEVI.S yuv4 Uncompressed packed 4:2:0
&lt;/span>&lt;span class="s1"> D.V..S zerocodec ZeroCodec Lossless Video
&lt;/span>&lt;span class="s1"> DEVI.S zlib LCL (LossLess Codec Library) ZLIB
&lt;/span>&lt;span class="s1"> DEV..S zmbv Zip Motion Blocks Video
&lt;/span>&lt;span class="s1"> ..A.L. 4gv 4GV (Fourth Generation Vocoder)
&lt;/span>&lt;span class="s1"> D.A.L. 8svx_exp 8SVX exponential
&lt;/span>&lt;span class="s1"> D.A.L. 8svx_fib 8SVX fibonacci
&lt;/span>&lt;span class="s1"> DEA.L. aac AAC (Advanced Audio Coding) (decoders: aac aac_fixed )
&lt;/span>&lt;span class="s1"> D.A.L. aac_latm AAC LATM (Advanced Audio Coding LATM syntax)
&lt;/span>&lt;span class="s1"> DEA.L. ac3 ATSC A/52A (AC-3) (decoders: ac3 ac3_fixed ) (encoders: ac3 ac3_fixed )
&lt;/span>&lt;span class="s1"> D.A.L. adpcm_4xm ADPCM 4X Movie
&lt;/span>&lt;span class="s1"> DEA.L. adpcm_adx SEGA CRI ADX ADPCM
&lt;/span>&lt;span class="s1"> D.A.L. adpcm_afc ADPCM Nintendo Gamecube AFC
&lt;/span>&lt;span class="s1"> D.A.L. adpcm_aica ADPCM Yamaha AICA
&lt;/span>&lt;span class="s1"> D.A.L. adpcm_ct ADPCM Creative Technology
&lt;/span>&lt;span class="s1"> D.A.L. adpcm_dtk ADPCM Nintendo Gamecube DTK
&lt;/span>&lt;span class="s1"> D.A.L. adpcm_ea ADPCM Electronic Arts
&lt;/span>&lt;span class="s1"> D.A.L. adpcm_ea_maxis_xa ADPCM Electronic Arts Maxis CDROM XA
&lt;/span>&lt;span class="s1"> D.A.L. adpcm_ea_r1 ADPCM Electronic Arts R1
&lt;/span>&lt;span class="s1"> D.A.L. adpcm_ea_r2 ADPCM Electronic Arts R2
&lt;/span>&lt;span class="s1"> D.A.L. adpcm_ea_r3 ADPCM Electronic Arts R3
&lt;/span>&lt;span class="s1"> D.A.L. adpcm_ea_xas ADPCM Electronic Arts XAS
&lt;/span>&lt;span class="s1"> DEA.L. adpcm_g722 G.722 ADPCM (decoders: g722 ) (encoders: g722 )
&lt;/span>&lt;span class="s1"> DEA.L. adpcm_g726 G.726 ADPCM (decoders: g726 ) (encoders: g726 )
&lt;/span>&lt;span class="s1"> DEA.L. adpcm_g726le G.726 ADPCM little-endian (decoders: g726le ) (encoders: g726le )
&lt;/span>&lt;span class="s1"> D.A.L. adpcm_ima_amv ADPCM IMA AMV
&lt;/span>&lt;span class="s1"> D.A.L. adpcm_ima_apc ADPCM IMA CRYO APC
&lt;/span>&lt;span class="s1"> D.A.L. adpcm_ima_dat4 ADPCM IMA Eurocom DAT4
&lt;/span>&lt;span class="s1"> D.A.L. adpcm_ima_dk3 ADPCM IMA Duck DK3
&lt;/span>&lt;span class="s1"> D.A.L. adpcm_ima_dk4 ADPCM IMA Duck DK4
&lt;/span>&lt;span class="s1"> D.A.L. adpcm_ima_ea_eacs ADPCM IMA Electronic Arts EACS
&lt;/span>&lt;span class="s1"> D.A.L. adpcm_ima_ea_sead ADPCM IMA Electronic Arts SEAD
&lt;/span>&lt;span class="s1"> D.A.L. adpcm_ima_iss ADPCM IMA Funcom ISS
&lt;/span>&lt;span class="s1"> D.A.L. adpcm_ima_oki ADPCM IMA Dialogic OKI
&lt;/span>&lt;span class="s1"> DEA.L. adpcm_ima_qt ADPCM IMA QuickTime
&lt;/span>&lt;span class="s1"> D.A.L. adpcm_ima_rad ADPCM IMA Radical
&lt;/span>&lt;span class="s1"> D.A.L. adpcm_ima_smjpeg ADPCM IMA Loki SDL MJPEG
&lt;/span>&lt;span class="s1"> DEA.L. adpcm_ima_wav ADPCM IMA WAV
&lt;/span>&lt;span class="s1"> D.A.L. adpcm_ima_ws ADPCM IMA Westwood
&lt;/span>&lt;span class="s1"> DEA.L. adpcm_ms ADPCM Microsoft
&lt;/span>&lt;span class="s1"> D.A.L. adpcm_mtaf ADPCM MTAF
&lt;/span>&lt;span class="s1"> D.A.L. adpcm_psx ADPCM Playstation
&lt;/span>&lt;span class="s1"> D.A.L. adpcm_sbpro_2 ADPCM Sound Blaster Pro 2-bit
&lt;/span>&lt;span class="s1"> D.A.L. adpcm_sbpro_3 ADPCM Sound Blaster Pro 2.6-bit
&lt;/span>&lt;span class="s1"> D.A.L. adpcm_sbpro_4 ADPCM Sound Blaster Pro 4-bit
&lt;/span>&lt;span class="s1"> DEA.L. adpcm_swf ADPCM Shockwave Flash
&lt;/span>&lt;span class="s1"> D.A.L. adpcm_thp ADPCM Nintendo THP
&lt;/span>&lt;span class="s1"> D.A.L. adpcm_thp_le ADPCM Nintendo THP (Little-Endian)
&lt;/span>&lt;span class="s1"> D.A.L. adpcm_vima LucasArts VIMA audio
&lt;/span>&lt;span class="s1"> D.A.L. adpcm_xa ADPCM CDROM XA
&lt;/span>&lt;span class="s1"> DEA.L. adpcm_yamaha ADPCM Yamaha
&lt;/span>&lt;span class="s1"> DEAI.S alac ALAC (Apple Lossless Audio Codec)
&lt;/span>&lt;span class="s1"> DEA.L. amr_nb AMR-NB (Adaptive Multi-Rate NarrowBand) (decoders: amrnb libopencore_amrnb ) (encoders: libopencore_amrnb )
&lt;/span>&lt;span class="s1"> DEA.L. amr_wb AMR-WB (Adaptive Multi-Rate WideBand) (decoders: amrwb libopencore_amrwb ) (encoders: libvo_amrwbenc )
&lt;/span>&lt;span class="s1"> D.A..S ape Monkey&amp;#39;&lt;/span>s Audio
DEA.L. aptx aptX &lt;span class="o">(&lt;/span>Audio Processing Technology &lt;span class="k">for&lt;/span> Bluetooth&lt;span class="o">)&lt;/span>
DEA.L. aptx_hd aptX HD &lt;span class="o">(&lt;/span>Audio Processing Technology &lt;span class="k">for&lt;/span> Bluetooth&lt;span class="o">)&lt;/span>
D.A.L. atrac1 ATRAC1 &lt;span class="o">(&lt;/span>Adaptive TRansform Acoustic Coding&lt;span class="o">)&lt;/span>
D.A.L. atrac3 ATRAC3 &lt;span class="o">(&lt;/span>Adaptive TRansform Acoustic Coding 3&lt;span class="o">)&lt;/span>
D.A..S atrac3al ATRAC3 AL &lt;span class="o">(&lt;/span>Adaptive TRansform Acoustic Coding &lt;span class="m">3&lt;/span> Advanced Lossless&lt;span class="o">)&lt;/span>
D.A.L. atrac3p ATRAC3+ &lt;span class="o">(&lt;/span>Adaptive TRansform Acoustic Coding 3+&lt;span class="o">)&lt;/span> &lt;span class="o">(&lt;/span>decoders: atrac3plus &lt;span class="o">)&lt;/span>
D.A..S atrac3pal ATRAC3+ AL &lt;span class="o">(&lt;/span>Adaptive TRansform Acoustic Coding 3+ Advanced Lossless&lt;span class="o">)&lt;/span> &lt;span class="o">(&lt;/span>decoders: atrac3plusal &lt;span class="o">)&lt;/span>
D.A.L. atrac9 ATRAC9 &lt;span class="o">(&lt;/span>Adaptive TRansform Acoustic Coding 9&lt;span class="o">)&lt;/span>
D.A.L. avc On2 Audio &lt;span class="k">for&lt;/span> Video Codec &lt;span class="o">(&lt;/span>decoders: on2avc &lt;span class="o">)&lt;/span>
D.A.L. binkaudio_dct Bink Audio &lt;span class="o">(&lt;/span>DCT&lt;span class="o">)&lt;/span>
D.A.L. binkaudio_rdft Bink Audio &lt;span class="o">(&lt;/span>RDFT&lt;span class="o">)&lt;/span>
D.A.L. bmv_audio Discworld II BMV audio
..A.L. celt Constrained Energy Lapped Transform &lt;span class="o">(&lt;/span>CELT&lt;span class="o">)&lt;/span>
..A.L. codec2 codec2 &lt;span class="o">(&lt;/span>very low bitrate speech codec&lt;span class="o">)&lt;/span>
DEA.L. comfortnoise RFC &lt;span class="m">3389&lt;/span> Comfort Noise
D.A.L. cook Cook / Cooker / Gecko &lt;span class="o">(&lt;/span>RealAudio G2&lt;span class="o">)&lt;/span>
D.A.L. dolby_e Dolby E
D.A.L. dsd_lsbf DSD &lt;span class="o">(&lt;/span>Direct Stream Digital&lt;span class="o">)&lt;/span>, least significant bit first
D.A.L. dsd_lsbf_planar DSD &lt;span class="o">(&lt;/span>Direct Stream Digital&lt;span class="o">)&lt;/span>, least significant bit first, planar
D.A.L. dsd_msbf DSD &lt;span class="o">(&lt;/span>Direct Stream Digital&lt;span class="o">)&lt;/span>, most significant bit first
D.A.L. dsd_msbf_planar DSD &lt;span class="o">(&lt;/span>Direct Stream Digital&lt;span class="o">)&lt;/span>, most significant bit first, planar
D.A.L. dsicinaudio Delphine Software International CIN audio
D.A.L. dss_sp Digital Speech Standard - Standard Play mode &lt;span class="o">(&lt;/span>DSS SP&lt;span class="o">)&lt;/span>
D.A..S dst DST &lt;span class="o">(&lt;/span>Direct Stream Transfer&lt;span class="o">)&lt;/span>
DEA.LS dts DCA &lt;span class="o">(&lt;/span>DTS Coherent Acoustics&lt;span class="o">)&lt;/span> &lt;span class="o">(&lt;/span>decoders: dca &lt;span class="o">)&lt;/span> &lt;span class="o">(&lt;/span>encoders: dca &lt;span class="o">)&lt;/span>
D.A.L. dvaudio DV audio
DEA.L. eac3 ATSC A/52B &lt;span class="o">(&lt;/span>AC-3, E-AC-3&lt;span class="o">)&lt;/span>
D.A.L. evrc EVRC &lt;span class="o">(&lt;/span>Enhanced Variable Rate Codec&lt;span class="o">)&lt;/span>
DEAI.S flac FLAC &lt;span class="o">(&lt;/span>Free Lossless Audio Codec&lt;span class="o">)&lt;/span>
DEA.L. g723_1 G.723.1
D.A.L. g729 G.729
D.A.L. gremlin_dpcm DPCM Gremlin
D.A.L. gsm GSM
D.A.L. gsm_ms GSM Microsoft variant
D.A.L. iac IAC &lt;span class="o">(&lt;/span>Indeo Audio Coder&lt;span class="o">)&lt;/span>
D.A.L. ilbc iLBC &lt;span class="o">(&lt;/span>Internet Low Bitrate Codec&lt;span class="o">)&lt;/span>
D.A.L. imc IMC &lt;span class="o">(&lt;/span>Intel Music Coder&lt;span class="o">)&lt;/span>
D.A.L. interplay_dpcm DPCM Interplay
D.A.L. interplayacm Interplay ACM
D.A.L. mace3 MACE &lt;span class="o">(&lt;/span>Macintosh Audio Compression/Expansion&lt;span class="o">)&lt;/span> 3:1
D.A.L. mace6 MACE &lt;span class="o">(&lt;/span>Macintosh Audio Compression/Expansion&lt;span class="o">)&lt;/span> 6:1
D.A.L. metasound Voxware MetaSound
DEA..S mlp MLP &lt;span class="o">(&lt;/span>Meridian Lossless Packing&lt;span class="o">)&lt;/span>
D.A.L. mp1 MP1 &lt;span class="o">(&lt;/span>MPEG audio layer 1&lt;span class="o">)&lt;/span> &lt;span class="o">(&lt;/span>decoders: mp1 mp1float &lt;span class="o">)&lt;/span>
DEA.L. mp2 MP2 &lt;span class="o">(&lt;/span>MPEG audio layer 2&lt;span class="o">)&lt;/span> &lt;span class="o">(&lt;/span>decoders: mp2 mp2float &lt;span class="o">)&lt;/span> &lt;span class="o">(&lt;/span>encoders: mp2 mp2fixed libtwolame &lt;span class="o">)&lt;/span>
DEA.L. mp3 MP3 &lt;span class="o">(&lt;/span>MPEG audio layer 3&lt;span class="o">)&lt;/span> &lt;span class="o">(&lt;/span>decoders: mp3float mp3 &lt;span class="o">)&lt;/span> &lt;span class="o">(&lt;/span>encoders: libmp3lame libshine &lt;span class="o">)&lt;/span>
D.A.L. mp3adu ADU &lt;span class="o">(&lt;/span>Application Data Unit&lt;span class="o">)&lt;/span> MP3 &lt;span class="o">(&lt;/span>MPEG audio layer 3&lt;span class="o">)&lt;/span> &lt;span class="o">(&lt;/span>decoders: mp3adufloat mp3adu &lt;span class="o">)&lt;/span>
D.A.L. mp3on4 MP3onMP4 &lt;span class="o">(&lt;/span>decoders: mp3on4float mp3on4 &lt;span class="o">)&lt;/span>
D.A..S mp4als MPEG-4 Audio Lossless Coding &lt;span class="o">(&lt;/span>ALS&lt;span class="o">)&lt;/span> &lt;span class="o">(&lt;/span>decoders: als &lt;span class="o">)&lt;/span>
D.A.L. musepack7 Musepack SV7 &lt;span class="o">(&lt;/span>decoders: mpc7 &lt;span class="o">)&lt;/span>
D.A.L. musepack8 Musepack SV8 &lt;span class="o">(&lt;/span>decoders: mpc8 &lt;span class="o">)&lt;/span>
DEA.L. nellymoser Nellymoser Asao
DEA.L. opus Opus &lt;span class="o">(&lt;/span>Opus Interactive Audio Codec&lt;span class="o">)&lt;/span> &lt;span class="o">(&lt;/span>decoders: opus libopus &lt;span class="o">)&lt;/span> &lt;span class="o">(&lt;/span>encoders: opus libopus &lt;span class="o">)&lt;/span>
D.A.L. paf_audio Amazing Studio Packed Animation File Audio
DEA.L. pcm_alaw PCM A-law / G.711 A-law
D.A..S pcm_bluray PCM signed 16&lt;span class="p">|&lt;/span>20&lt;span class="p">|&lt;/span>24-bit big-endian &lt;span class="k">for&lt;/span> Blu-ray media
D.A..S pcm_dvd PCM signed 20&lt;span class="p">|&lt;/span>24-bit big-endian
D.A..S pcm_f16le PCM 16.8 floating point little-endian
D.A..S pcm_f24le PCM 24.0 floating point little-endian
DEA..S pcm_f32be PCM 32-bit floating point big-endian
DEA..S pcm_f32le PCM 32-bit floating point little-endian
DEA..S pcm_f64be PCM 64-bit floating point big-endian
DEA..S pcm_f64le PCM 64-bit floating point little-endian
D.A..S pcm_lxf PCM signed 20-bit little-endian planar
DEA.L. pcm_mulaw PCM mu-law / G.711 mu-law
DEA..S pcm_s16be PCM signed 16-bit big-endian
DEA..S pcm_s16be_planar PCM signed 16-bit big-endian planar
DEA..S pcm_s16le PCM signed 16-bit little-endian
DEA..S pcm_s16le_planar PCM signed 16-bit little-endian planar
DEA..S pcm_s24be PCM signed 24-bit big-endian
DEA..S pcm_s24daud PCM D-Cinema audio signed 24-bit
DEA..S pcm_s24le PCM signed 24-bit little-endian
DEA..S pcm_s24le_planar PCM signed 24-bit little-endian planar
DEA..S pcm_s32be PCM signed 32-bit big-endian
DEA..S pcm_s32le PCM signed 32-bit little-endian
DEA..S pcm_s32le_planar PCM signed 32-bit little-endian planar
DEA..S pcm_s64be PCM signed 64-bit big-endian
DEA..S pcm_s64le PCM signed 64-bit little-endian
DEA..S pcm_s8 PCM signed 8-bit
DEA..S pcm_s8_planar PCM signed 8-bit planar
DEA..S pcm_u16be PCM unsigned 16-bit big-endian
DEA..S pcm_u16le PCM unsigned 16-bit little-endian
DEA..S pcm_u24be PCM unsigned 24-bit big-endian
DEA..S pcm_u24le PCM unsigned 24-bit little-endian
DEA..S pcm_u32be PCM unsigned 32-bit big-endian
DEA..S pcm_u32le PCM unsigned 32-bit little-endian
DEA..S pcm_u8 PCM unsigned 8-bit
DEA.L. pcm_vidc PCM Archimedes VIDC
D.A.L. pcm_zork PCM Zork
D.A.L. qcelp QCELP / PureVoice
D.A.L. qdm2 QDesign Music Codec &lt;span class="m">2&lt;/span>
D.A.L. qdmc QDesign Music
DEA.L. ra_144 RealAudio 1.0 &lt;span class="o">(&lt;/span>14.4K&lt;span class="o">)&lt;/span> &lt;span class="o">(&lt;/span>decoders: real_144 &lt;span class="o">)&lt;/span> &lt;span class="o">(&lt;/span>encoders: real_144 &lt;span class="o">)&lt;/span>
D.A.L. ra_288 RealAudio 2.0 &lt;span class="o">(&lt;/span>28.8K&lt;span class="o">)&lt;/span> &lt;span class="o">(&lt;/span>decoders: real_288 &lt;span class="o">)&lt;/span>
D.A..S ralf RealAudio Lossless
DEA.L. roq_dpcm DPCM id RoQ
DEA..S s302m SMPTE 302M
DEA.L. sbc SBC &lt;span class="o">(&lt;/span>low-complexity subband codec&lt;span class="o">)&lt;/span>
D.A.L. sdx2_dpcm DPCM Squareroot-Delta-Exact
D.A..S shorten Shorten
D.A.L. sipr RealAudio SIPR / ACELP.NET
D.A.L. smackaudio Smacker audio &lt;span class="o">(&lt;/span>decoders: smackaud &lt;span class="o">)&lt;/span>
..A.L. smv SMV &lt;span class="o">(&lt;/span>Selectable Mode Vocoder&lt;span class="o">)&lt;/span>
D.A.L. sol_dpcm DPCM Sol
DEA... sonic Sonic
.EA... sonicls Sonic lossless
DEA.L. speex Speex &lt;span class="o">(&lt;/span>decoders: libspeex &lt;span class="o">)&lt;/span> &lt;span class="o">(&lt;/span>encoders: libspeex &lt;span class="o">)&lt;/span>
D.AI.S tak TAK &lt;span class="o">(&lt;/span>Tom&lt;span class="err">&amp;#39;&lt;/span>s lossless Audio Kompressor&lt;span class="o">)&lt;/span>
DEA..S truehd TrueHD
D.A.L. truespeech DSP Group TrueSpeech
DEAI.S tta TTA &lt;span class="o">(&lt;/span>True Audio&lt;span class="o">)&lt;/span>
D.A.L. twinvq VQF TwinVQ
D.A.L. vmdaudio Sierra VMD audio
DEA.L. vorbis Vorbis &lt;span class="o">(&lt;/span>decoders: vorbis libvorbis &lt;span class="o">)&lt;/span> &lt;span class="o">(&lt;/span>encoders: vorbis libvorbis &lt;span class="o">)&lt;/span>
D.A... wavesynth Wave synthesis pseudo-codec
DEAILS wavpack WavPack &lt;span class="o">(&lt;/span>encoders: wavpack libwavpack &lt;span class="o">)&lt;/span>
D.A.L. westwood_snd1 Westwood Audio &lt;span class="o">(&lt;/span>SND1&lt;span class="o">)&lt;/span> &lt;span class="o">(&lt;/span>decoders: ws_snd1 &lt;span class="o">)&lt;/span>
D.A..S wmalossless Windows Media Audio Lossless
D.A.L. wmapro Windows Media Audio &lt;span class="m">9&lt;/span> Professional
DEA.L. wmav1 Windows Media Audio &lt;span class="m">1&lt;/span>
DEA.L. wmav2 Windows Media Audio &lt;span class="m">2&lt;/span>
D.A.L. wmavoice Windows Media Audio Voice
D.A.L. xan_dpcm DPCM Xan
D.A.L. xma1 Xbox Media Audio &lt;span class="m">1&lt;/span>
D.A.L. xma2 Xbox Media Audio &lt;span class="m">2&lt;/span>
..D... bin_data binary data
..D... dvd_nav_packet DVD Nav packet
..D... klv SMPTE 336M Key-Length-Value &lt;span class="o">(&lt;/span>KLV&lt;span class="o">)&lt;/span> metadata
..D... otf OpenType font
..D... scte_35 SCTE &lt;span class="m">35&lt;/span> Message Queue
..D... timed_id3 timed ID3 metadata
..D... ttf TrueType font
DES... ass ASS &lt;span class="o">(&lt;/span>Advanced SSA&lt;span class="o">)&lt;/span> subtitle &lt;span class="o">(&lt;/span>decoders: ssa ass &lt;span class="o">)&lt;/span> &lt;span class="o">(&lt;/span>encoders: ssa ass &lt;span class="o">)&lt;/span>
DES... dvb_subtitle DVB subtitles &lt;span class="o">(&lt;/span>decoders: dvbsub &lt;span class="o">)&lt;/span> &lt;span class="o">(&lt;/span>encoders: dvbsub &lt;span class="o">)&lt;/span>
..S... dvb_teletext DVB teletext
DES... dvd_subtitle DVD subtitles &lt;span class="o">(&lt;/span>decoders: dvdsub &lt;span class="o">)&lt;/span> &lt;span class="o">(&lt;/span>encoders: dvdsub &lt;span class="o">)&lt;/span>
D.S... eia_608 EIA-608 closed captions &lt;span class="o">(&lt;/span>decoders: cc_dec &lt;span class="o">)&lt;/span>
D.S... hdmv_pgs_subtitle HDMV Presentation Graphic Stream subtitles &lt;span class="o">(&lt;/span>decoders: pgssub &lt;span class="o">)&lt;/span>
..S... hdmv_text_subtitle HDMV Text subtitle
D.S... jacosub JACOsub subtitle
D.S... microdvd MicroDVD subtitle
DES... mov_text MOV text
D.S... mpl2 MPL2 subtitle
D.S... pjs PJS &lt;span class="o">(&lt;/span>Phoenix Japanimation Society&lt;span class="o">)&lt;/span> subtitle
D.S... realtext RealText subtitle
D.S... sami SAMI subtitle
..S... srt SubRip subtitle with embedded timing
..S... ssa SSA &lt;span class="o">(&lt;/span>SubStation Alpha&lt;span class="o">)&lt;/span> subtitle
D.S... stl Spruce subtitle format
DES... subrip SubRip subtitle &lt;span class="o">(&lt;/span>decoders: srt subrip &lt;span class="o">)&lt;/span> &lt;span class="o">(&lt;/span>encoders: srt subrip &lt;span class="o">)&lt;/span>
D.S... subviewer SubViewer subtitle
D.S... subviewer1 SubViewer v1 subtitle
DES... text raw UTF-8 text
..S... ttml Timed Text Markup Language
D.S... vplayer VPlayer subtitle
DES... webvtt WebVTT subtitle
DES... xsub XSUB
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="formats">formats&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;span class="lnt">102
&lt;/span>&lt;span class="lnt">103
&lt;/span>&lt;span class="lnt">104
&lt;/span>&lt;span class="lnt">105
&lt;/span>&lt;span class="lnt">106
&lt;/span>&lt;span class="lnt">107
&lt;/span>&lt;span class="lnt">108
&lt;/span>&lt;span class="lnt">109
&lt;/span>&lt;span class="lnt">110
&lt;/span>&lt;span class="lnt">111
&lt;/span>&lt;span class="lnt">112
&lt;/span>&lt;span class="lnt">113
&lt;/span>&lt;span class="lnt">114
&lt;/span>&lt;span class="lnt">115
&lt;/span>&lt;span class="lnt">116
&lt;/span>&lt;span class="lnt">117
&lt;/span>&lt;span class="lnt">118
&lt;/span>&lt;span class="lnt">119
&lt;/span>&lt;span class="lnt">120
&lt;/span>&lt;span class="lnt">121
&lt;/span>&lt;span class="lnt">122
&lt;/span>&lt;span class="lnt">123
&lt;/span>&lt;span class="lnt">124
&lt;/span>&lt;span class="lnt">125
&lt;/span>&lt;span class="lnt">126
&lt;/span>&lt;span class="lnt">127
&lt;/span>&lt;span class="lnt">128
&lt;/span>&lt;span class="lnt">129
&lt;/span>&lt;span class="lnt">130
&lt;/span>&lt;span class="lnt">131
&lt;/span>&lt;span class="lnt">132
&lt;/span>&lt;span class="lnt">133
&lt;/span>&lt;span class="lnt">134
&lt;/span>&lt;span class="lnt">135
&lt;/span>&lt;span class="lnt">136
&lt;/span>&lt;span class="lnt">137
&lt;/span>&lt;span class="lnt">138
&lt;/span>&lt;span class="lnt">139
&lt;/span>&lt;span class="lnt">140
&lt;/span>&lt;span class="lnt">141
&lt;/span>&lt;span class="lnt">142
&lt;/span>&lt;span class="lnt">143
&lt;/span>&lt;span class="lnt">144
&lt;/span>&lt;span class="lnt">145
&lt;/span>&lt;span class="lnt">146
&lt;/span>&lt;span class="lnt">147
&lt;/span>&lt;span class="lnt">148
&lt;/span>&lt;span class="lnt">149
&lt;/span>&lt;span class="lnt">150
&lt;/span>&lt;span class="lnt">151
&lt;/span>&lt;span class="lnt">152
&lt;/span>&lt;span class="lnt">153
&lt;/span>&lt;span class="lnt">154
&lt;/span>&lt;span class="lnt">155
&lt;/span>&lt;span class="lnt">156
&lt;/span>&lt;span class="lnt">157
&lt;/span>&lt;span class="lnt">158
&lt;/span>&lt;span class="lnt">159
&lt;/span>&lt;span class="lnt">160
&lt;/span>&lt;span class="lnt">161
&lt;/span>&lt;span class="lnt">162
&lt;/span>&lt;span class="lnt">163
&lt;/span>&lt;span class="lnt">164
&lt;/span>&lt;span class="lnt">165
&lt;/span>&lt;span class="lnt">166
&lt;/span>&lt;span class="lnt">167
&lt;/span>&lt;span class="lnt">168
&lt;/span>&lt;span class="lnt">169
&lt;/span>&lt;span class="lnt">170
&lt;/span>&lt;span class="lnt">171
&lt;/span>&lt;span class="lnt">172
&lt;/span>&lt;span class="lnt">173
&lt;/span>&lt;span class="lnt">174
&lt;/span>&lt;span class="lnt">175
&lt;/span>&lt;span class="lnt">176
&lt;/span>&lt;span class="lnt">177
&lt;/span>&lt;span class="lnt">178
&lt;/span>&lt;span class="lnt">179
&lt;/span>&lt;span class="lnt">180
&lt;/span>&lt;span class="lnt">181
&lt;/span>&lt;span class="lnt">182
&lt;/span>&lt;span class="lnt">183
&lt;/span>&lt;span class="lnt">184
&lt;/span>&lt;span class="lnt">185
&lt;/span>&lt;span class="lnt">186
&lt;/span>&lt;span class="lnt">187
&lt;/span>&lt;span class="lnt">188
&lt;/span>&lt;span class="lnt">189
&lt;/span>&lt;span class="lnt">190
&lt;/span>&lt;span class="lnt">191
&lt;/span>&lt;span class="lnt">192
&lt;/span>&lt;span class="lnt">193
&lt;/span>&lt;span class="lnt">194
&lt;/span>&lt;span class="lnt">195
&lt;/span>&lt;span class="lnt">196
&lt;/span>&lt;span class="lnt">197
&lt;/span>&lt;span class="lnt">198
&lt;/span>&lt;span class="lnt">199
&lt;/span>&lt;span class="lnt">200
&lt;/span>&lt;span class="lnt">201
&lt;/span>&lt;span class="lnt">202
&lt;/span>&lt;span class="lnt">203
&lt;/span>&lt;span class="lnt">204
&lt;/span>&lt;span class="lnt">205
&lt;/span>&lt;span class="lnt">206
&lt;/span>&lt;span class="lnt">207
&lt;/span>&lt;span class="lnt">208
&lt;/span>&lt;span class="lnt">209
&lt;/span>&lt;span class="lnt">210
&lt;/span>&lt;span class="lnt">211
&lt;/span>&lt;span class="lnt">212
&lt;/span>&lt;span class="lnt">213
&lt;/span>&lt;span class="lnt">214
&lt;/span>&lt;span class="lnt">215
&lt;/span>&lt;span class="lnt">216
&lt;/span>&lt;span class="lnt">217
&lt;/span>&lt;span class="lnt">218
&lt;/span>&lt;span class="lnt">219
&lt;/span>&lt;span class="lnt">220
&lt;/span>&lt;span class="lnt">221
&lt;/span>&lt;span class="lnt">222
&lt;/span>&lt;span class="lnt">223
&lt;/span>&lt;span class="lnt">224
&lt;/span>&lt;span class="lnt">225
&lt;/span>&lt;span class="lnt">226
&lt;/span>&lt;span class="lnt">227
&lt;/span>&lt;span class="lnt">228
&lt;/span>&lt;span class="lnt">229
&lt;/span>&lt;span class="lnt">230
&lt;/span>&lt;span class="lnt">231
&lt;/span>&lt;span class="lnt">232
&lt;/span>&lt;span class="lnt">233
&lt;/span>&lt;span class="lnt">234
&lt;/span>&lt;span class="lnt">235
&lt;/span>&lt;span class="lnt">236
&lt;/span>&lt;span class="lnt">237
&lt;/span>&lt;span class="lnt">238
&lt;/span>&lt;span class="lnt">239
&lt;/span>&lt;span class="lnt">240
&lt;/span>&lt;span class="lnt">241
&lt;/span>&lt;span class="lnt">242
&lt;/span>&lt;span class="lnt">243
&lt;/span>&lt;span class="lnt">244
&lt;/span>&lt;span class="lnt">245
&lt;/span>&lt;span class="lnt">246
&lt;/span>&lt;span class="lnt">247
&lt;/span>&lt;span class="lnt">248
&lt;/span>&lt;span class="lnt">249
&lt;/span>&lt;span class="lnt">250
&lt;/span>&lt;span class="lnt">251
&lt;/span>&lt;span class="lnt">252
&lt;/span>&lt;span class="lnt">253
&lt;/span>&lt;span class="lnt">254
&lt;/span>&lt;span class="lnt">255
&lt;/span>&lt;span class="lnt">256
&lt;/span>&lt;span class="lnt">257
&lt;/span>&lt;span class="lnt">258
&lt;/span>&lt;span class="lnt">259
&lt;/span>&lt;span class="lnt">260
&lt;/span>&lt;span class="lnt">261
&lt;/span>&lt;span class="lnt">262
&lt;/span>&lt;span class="lnt">263
&lt;/span>&lt;span class="lnt">264
&lt;/span>&lt;span class="lnt">265
&lt;/span>&lt;span class="lnt">266
&lt;/span>&lt;span class="lnt">267
&lt;/span>&lt;span class="lnt">268
&lt;/span>&lt;span class="lnt">269
&lt;/span>&lt;span class="lnt">270
&lt;/span>&lt;span class="lnt">271
&lt;/span>&lt;span class="lnt">272
&lt;/span>&lt;span class="lnt">273
&lt;/span>&lt;span class="lnt">274
&lt;/span>&lt;span class="lnt">275
&lt;/span>&lt;span class="lnt">276
&lt;/span>&lt;span class="lnt">277
&lt;/span>&lt;span class="lnt">278
&lt;/span>&lt;span class="lnt">279
&lt;/span>&lt;span class="lnt">280
&lt;/span>&lt;span class="lnt">281
&lt;/span>&lt;span class="lnt">282
&lt;/span>&lt;span class="lnt">283
&lt;/span>&lt;span class="lnt">284
&lt;/span>&lt;span class="lnt">285
&lt;/span>&lt;span class="lnt">286
&lt;/span>&lt;span class="lnt">287
&lt;/span>&lt;span class="lnt">288
&lt;/span>&lt;span class="lnt">289
&lt;/span>&lt;span class="lnt">290
&lt;/span>&lt;span class="lnt">291
&lt;/span>&lt;span class="lnt">292
&lt;/span>&lt;span class="lnt">293
&lt;/span>&lt;span class="lnt">294
&lt;/span>&lt;span class="lnt">295
&lt;/span>&lt;span class="lnt">296
&lt;/span>&lt;span class="lnt">297
&lt;/span>&lt;span class="lnt">298
&lt;/span>&lt;span class="lnt">299
&lt;/span>&lt;span class="lnt">300
&lt;/span>&lt;span class="lnt">301
&lt;/span>&lt;span class="lnt">302
&lt;/span>&lt;span class="lnt">303
&lt;/span>&lt;span class="lnt">304
&lt;/span>&lt;span class="lnt">305
&lt;/span>&lt;span class="lnt">306
&lt;/span>&lt;span class="lnt">307
&lt;/span>&lt;span class="lnt">308
&lt;/span>&lt;span class="lnt">309
&lt;/span>&lt;span class="lnt">310
&lt;/span>&lt;span class="lnt">311
&lt;/span>&lt;span class="lnt">312
&lt;/span>&lt;span class="lnt">313
&lt;/span>&lt;span class="lnt">314
&lt;/span>&lt;span class="lnt">315
&lt;/span>&lt;span class="lnt">316
&lt;/span>&lt;span class="lnt">317
&lt;/span>&lt;span class="lnt">318
&lt;/span>&lt;span class="lnt">319
&lt;/span>&lt;span class="lnt">320
&lt;/span>&lt;span class="lnt">321
&lt;/span>&lt;span class="lnt">322
&lt;/span>&lt;span class="lnt">323
&lt;/span>&lt;span class="lnt">324
&lt;/span>&lt;span class="lnt">325
&lt;/span>&lt;span class="lnt">326
&lt;/span>&lt;span class="lnt">327
&lt;/span>&lt;span class="lnt">328
&lt;/span>&lt;span class="lnt">329
&lt;/span>&lt;span class="lnt">330
&lt;/span>&lt;span class="lnt">331
&lt;/span>&lt;span class="lnt">332
&lt;/span>&lt;span class="lnt">333
&lt;/span>&lt;span class="lnt">334
&lt;/span>&lt;span class="lnt">335
&lt;/span>&lt;span class="lnt">336
&lt;/span>&lt;span class="lnt">337
&lt;/span>&lt;span class="lnt">338
&lt;/span>&lt;span class="lnt">339
&lt;/span>&lt;span class="lnt">340
&lt;/span>&lt;span class="lnt">341
&lt;/span>&lt;span class="lnt">342
&lt;/span>&lt;span class="lnt">343
&lt;/span>&lt;span class="lnt">344
&lt;/span>&lt;span class="lnt">345
&lt;/span>&lt;span class="lnt">346
&lt;/span>&lt;span class="lnt">347
&lt;/span>&lt;span class="lnt">348
&lt;/span>&lt;span class="lnt">349
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-shell" data-lang="shell">File formats:
D. &lt;span class="o">=&lt;/span> Demuxing supported
.E &lt;span class="o">=&lt;/span> Muxing supported
--
D 3dostr 3DO STR
E 3g2 3GP2 &lt;span class="o">(&lt;/span>3GPP2 file format&lt;span class="o">)&lt;/span>
E 3gp 3GP &lt;span class="o">(&lt;/span>3GPP file format&lt;span class="o">)&lt;/span>
D 4xm 4X Technologies
E a64 a64 - video &lt;span class="k">for&lt;/span> Commodore &lt;span class="m">64&lt;/span>
D aa Audible AA format files
D aac raw ADTS AAC &lt;span class="o">(&lt;/span>Advanced Audio Coding&lt;span class="o">)&lt;/span>
DE ac3 raw AC-3
D acm Interplay ACM
D act ACT Voice file format
D adf Artworx Data Format
D adp ADP
D ads Sony PS2 ADS
E adts ADTS AAC &lt;span class="o">(&lt;/span>Advanced Audio Coding&lt;span class="o">)&lt;/span>
DE adx CRI ADX
D aea MD STUDIO audio
D afc AFC
DE aiff Audio IFF
D aix CRI AIX
DE alaw PCM A-law
D alias_pix Alias/Wavefront PIX image
DE amr 3GPP AMR
D amrnb raw AMR-NB
D amrwb raw AMR-WB
D anm Deluxe Paint Animation
D apc CRYO APC
D ape Monkey&lt;span class="err">&amp;#39;&lt;/span>s Audio
DE apng Animated Portable Network Graphics
DE aptx raw aptX &lt;span class="o">(&lt;/span>Audio Processing Technology &lt;span class="k">for&lt;/span> Bluetooth&lt;span class="o">)&lt;/span>
DE aptx_hd raw aptX HD &lt;span class="o">(&lt;/span>Audio Processing Technology &lt;span class="k">for&lt;/span> Bluetooth&lt;span class="o">)&lt;/span>
D aqtitle AQTitle subtitles
DE asf ASF &lt;span class="o">(&lt;/span>Advanced / Active Streaming Format&lt;span class="o">)&lt;/span>
D asf_o ASF &lt;span class="o">(&lt;/span>Advanced / Active Streaming Format&lt;span class="o">)&lt;/span>
E asf_stream ASF &lt;span class="o">(&lt;/span>Advanced / Active Streaming Format&lt;span class="o">)&lt;/span>
DE ass SSA &lt;span class="o">(&lt;/span>SubStation Alpha&lt;span class="o">)&lt;/span> subtitle
DE ast AST &lt;span class="o">(&lt;/span>Audio Stream&lt;span class="o">)&lt;/span>
DE au Sun AU
DE avi AVI &lt;span class="o">(&lt;/span>Audio Video Interleaved&lt;span class="o">)&lt;/span>
D avisynth AviSynth script
E avm2 SWF &lt;span class="o">(&lt;/span>ShockWave Flash&lt;span class="o">)&lt;/span> &lt;span class="o">(&lt;/span>AVM2&lt;span class="o">)&lt;/span>
D avr AVR &lt;span class="o">(&lt;/span>Audio Visual Research&lt;span class="o">)&lt;/span>
D avs Argonaut Games Creature Shock
DE avs2 raw AVS2-P2/IEEE1857.4 video
D bethsoftvid Bethesda Softworks VID
D bfi Brute Force &lt;span class="p">&amp;amp;&lt;/span> Ignorance
D bfstm BFSTM &lt;span class="o">(&lt;/span>Binary Cafe Stream&lt;span class="o">)&lt;/span>
D bin Binary text
D bink Bink
DE bit G.729 BIT file format
D bmp_pipe piped bmp sequence
D bmv Discworld II BMV
D boa Black Ops Audio
D brender_pix BRender PIX image
D brstm BRSTM &lt;span class="o">(&lt;/span>Binary Revolution Stream&lt;span class="o">)&lt;/span>
D c93 Interplay C93
DE caf Apple CAF &lt;span class="o">(&lt;/span>Core Audio Format&lt;span class="o">)&lt;/span>
DE cavsvideo raw Chinese AVS &lt;span class="o">(&lt;/span>Audio Video Standard&lt;span class="o">)&lt;/span> video
D cdg CD Graphics
D cdxl Commodore CDXL video
D cine Phantom Cine
DE codec2 codec2 .c2 muxer
DE codec2raw raw codec2 muxer
D concat Virtual concatenation script
E crc CRC testing
DE dash DASH Muxer
DE data raw data
DE daud D-Cinema audio
D dcstr Sega DC STR
D dds_pipe piped dds sequence
D dfa Chronomaster DFA
DE dirac raw Dirac
DE dnxhd raw DNxHD &lt;span class="o">(&lt;/span>SMPTE VC-3&lt;span class="o">)&lt;/span>
D dpx_pipe piped dpx sequence
D dsf DSD Stream File &lt;span class="o">(&lt;/span>DSF&lt;span class="o">)&lt;/span>
D dshow DirectShow capture
D dsicin Delphine Software International CIN
D dss Digital Speech Standard &lt;span class="o">(&lt;/span>DSS&lt;span class="o">)&lt;/span>
DE dts raw DTS
D dtshd raw DTS-HD
DE dv DV &lt;span class="o">(&lt;/span>Digital Video&lt;span class="o">)&lt;/span>
D dvbsub raw dvbsub
D dvbtxt dvbtxt
E dvd MPEG-2 PS &lt;span class="o">(&lt;/span>DVD VOB&lt;span class="o">)&lt;/span>
D dxa DXA
D ea Electronic Arts Multimedia
D ea_cdata Electronic Arts cdata
DE eac3 raw E-AC-3
D epaf Ensoniq Paris Audio File
D exr_pipe piped exr sequence
DE f32be PCM 32-bit floating-point big-endian
DE f32le PCM 32-bit floating-point little-endian
E f4v F4V Adobe Flash Video
DE f64be PCM 64-bit floating-point big-endian
DE f64le PCM 64-bit floating-point little-endian
DE ffmetadata FFmpeg metadata in text
E fifo FIFO queue pseudo-muxer
E fifo_test Fifo &lt;span class="nb">test&lt;/span> muxer
DE film_cpk Sega FILM / CPK
DE filmstrip Adobe Filmstrip
DE fits Flexible Image Transport System
DE flac raw FLAC
D flic FLI/FLC/FLX animation
DE flv FLV &lt;span class="o">(&lt;/span>Flash Video&lt;span class="o">)&lt;/span>
E framecrc framecrc testing
E framehash Per-frame &lt;span class="nb">hash&lt;/span> testing
E framemd5 Per-frame MD5 testing
D frm Megalux Frame
D fsb FMOD Sample Bank
DE g722 raw G.722
DE g723_1 raw G.723.1
DE g726 raw big-endian G.726 &lt;span class="o">(&lt;/span>&lt;span class="s2">&amp;#34;left-justified&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
DE g726le raw little-endian G.726 &lt;span class="o">(&lt;/span>&lt;span class="s2">&amp;#34;right-justified&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
D g729 G.729 raw format demuxer
D gdigrab GDI API Windows frame grabber
D gdv Gremlin Digital Video
D genh GENeric Header
DE gif GIF Animation
DE gsm raw GSM
DE gxf GXF &lt;span class="o">(&lt;/span>General eXchange Format&lt;span class="o">)&lt;/span>
DE h261 raw H.261
DE h263 raw H.263
DE h264 raw H.264 video
E &lt;span class="nb">hash&lt;/span> Hash testing
E hds HDS Muxer
DE hevc raw HEVC video
E hls Apple HTTP Live Streaming
D hls,applehttp Apple HTTP Live Streaming
D hnm Cryo HNM v4
DE ico Microsoft Windows ICO
D idcin id Cinematic
D idf iCE Draw File
D iff IFF &lt;span class="o">(&lt;/span>Interchange File Format&lt;span class="o">)&lt;/span>
DE ilbc iLBC storage
DE image2 image2 sequence
DE image2pipe piped image2 sequence
D ingenient raw Ingenient MJPEG
D ipmovie Interplay MVE
E ipod iPod H.264 MP4 &lt;span class="o">(&lt;/span>MPEG-4 Part 14&lt;span class="o">)&lt;/span>
DE ircam Berkeley/IRCAM/CARL Sound Format
E ismv ISMV/ISMA &lt;span class="o">(&lt;/span>Smooth Streaming&lt;span class="o">)&lt;/span>
D iss Funcom ISS
D iv8 IndigoVision &lt;span class="m">8000&lt;/span> video
DE ivf On2 IVF
D ivr IVR &lt;span class="o">(&lt;/span>Internet Video Recording&lt;span class="o">)&lt;/span>
D j2k_pipe piped j2k sequence
DE jacosub JACOsub subtitle format
D jpeg_pipe piped jpeg sequence
D jpegls_pipe piped jpegls sequence
D jv Bitmap Brothers JV
E latm LOAS/LATM
D lavfi Libavfilter virtual input device
D live_flv live RTMP FLV &lt;span class="o">(&lt;/span>Flash Video&lt;span class="o">)&lt;/span>
D lmlm4 raw lmlm4
D loas LOAS AudioSyncStream
DE lrc LRC lyrics
D lvf LVF
D lxf VR native stream &lt;span class="o">(&lt;/span>LXF&lt;span class="o">)&lt;/span>
DE m4v raw MPEG-4 video
E matroska Matroska
D matroska,webm Matroska / WebM
E md5 MD5 testing
D mgsts Metal Gear Solid: The Twin Snakes
DE microdvd MicroDVD subtitle format
DE mjpeg raw MJPEG video
D mjpeg_2000 raw MJPEG &lt;span class="m">2000&lt;/span> video
E mkvtimestamp_v2 extract pts as timecode v2 format, as defined by mkvtoolnix
DE mlp raw MLP
D mlv Magic Lantern Video &lt;span class="o">(&lt;/span>MLV&lt;span class="o">)&lt;/span>
D mm American Laser Games MM
DE mmf Yamaha SMAF
E mov QuickTime / MOV
D mov,mp4,m4a,3gp,3g2,mj2 QuickTime / MOV
E mp2 MP2 &lt;span class="o">(&lt;/span>MPEG audio layer 2&lt;span class="o">)&lt;/span>
DE mp3 MP3 &lt;span class="o">(&lt;/span>MPEG audio layer 3&lt;span class="o">)&lt;/span>
E mp4 MP4 &lt;span class="o">(&lt;/span>MPEG-4 Part 14&lt;span class="o">)&lt;/span>
D mpc Musepack
D mpc8 Musepack SV8
DE mpeg MPEG-1 Systems / MPEG program stream
E mpeg1video raw MPEG-1 video
E mpeg2video raw MPEG-2 video
DE mpegts MPEG-TS &lt;span class="o">(&lt;/span>MPEG-2 Transport Stream&lt;span class="o">)&lt;/span>
D mpegtsraw raw MPEG-TS &lt;span class="o">(&lt;/span>MPEG-2 Transport Stream&lt;span class="o">)&lt;/span>
D mpegvideo raw MPEG video
DE mpjpeg MIME multipart JPEG
D mpl2 MPL2 subtitles
D mpsub MPlayer subtitles
D msf Sony PS3 MSF
D msnwctcp MSN TCP Webcam stream
D mtaf Konami PS2 MTAF
D mtv MTV
DE mulaw PCM mu-law
D musx Eurocom MUSX
D mv Silicon Graphics Movie
D mvi Motion Pixels MVI
DE mxf MXF &lt;span class="o">(&lt;/span>Material eXchange Format&lt;span class="o">)&lt;/span>
E mxf_d10 MXF &lt;span class="o">(&lt;/span>Material eXchange Format&lt;span class="o">)&lt;/span> D-10 Mapping
E mxf_opatom MXF &lt;span class="o">(&lt;/span>Material eXchange Format&lt;span class="o">)&lt;/span> Operational Pattern Atom
D mxg MxPEG clip
D nc NC camera feed
D nistsphere NIST SPeech HEader REsources
D nsp Computerized Speech Lab NSP
D nsv Nullsoft Streaming Video
E null raw null video
DE nut NUT
D nuv NuppelVideo
E oga Ogg Audio
DE ogg Ogg
E ogv Ogg Video
DE oma Sony OpenMG audio
E opus Ogg Opus
D paf Amazing Studio Packed Animation File
D pam_pipe piped pam sequence
D pbm_pipe piped pbm sequence
D pcx_pipe piped pcx sequence
D pgm_pipe piped pgm sequence
D pgmyuv_pipe piped pgmyuv sequence
D pictor_pipe piped pictor sequence
D pjs PJS &lt;span class="o">(&lt;/span>Phoenix Japanimation Society&lt;span class="o">)&lt;/span> subtitles
D pmp Playstation Portable PMP
D png_pipe piped png sequence
D ppm_pipe piped ppm sequence
D psd_pipe piped psd sequence
E psp PSP MP4 &lt;span class="o">(&lt;/span>MPEG-4 Part 14&lt;span class="o">)&lt;/span>
D psxstr Sony Playstation STR
D pva TechnoTrend PVA
D pvf PVF &lt;span class="o">(&lt;/span>Portable Voice Format&lt;span class="o">)&lt;/span>
D qcp QCP
D qdraw_pipe piped qdraw sequence
D r3d REDCODE R3D
DE rawvideo raw video
D realtext RealText subtitle format
D redspark RedSpark
D rl2 RL2
DE rm RealMedia
DE roq raw id RoQ
D rpl RPL / ARMovie
D rsd GameCube RSD
DE rso Lego Mindstorms RSO
DE rtp RTP output
E rtp_mpegts RTP/mpegts output format
DE rtsp RTSP output
DE s16be PCM signed 16-bit big-endian
DE s16le PCM signed 16-bit little-endian
DE s24be PCM signed 24-bit big-endian
DE s24le PCM signed 24-bit little-endian
DE s32be PCM signed 32-bit big-endian
DE s32le PCM signed 32-bit little-endian
D s337m SMPTE 337M
DE s8 PCM signed 8-bit
D sami SAMI subtitle format
DE sap SAP output
DE sbc raw SBC
D sbg SBaGen binaural beats script
DE scc Scenarist Closed Captions
E sdl,sdl2 SDL2 output device
D sdp SDP
D sdr2 SDR2
D sds MIDI Sample Dump Standard
D sdx Sample Dump eXchange
E segment segment
D ser SER &lt;span class="o">(&lt;/span>Simple uncompressed video format &lt;span class="k">for&lt;/span> astronomical capturing&lt;span class="o">)&lt;/span>
D sgi_pipe piped sgi sequence
D shn raw Shorten
D siff Beam Software SIFF
E singlejpeg JPEG single image
D sln Asterisk raw pcm
DE smjpeg Loki SDL MJPEG
D smk Smacker
E smoothstreaming Smooth Streaming Muxer
D smush LucasArts Smush
D sol Sierra SOL
DE sox SoX native
DE spdif IEC &lt;span class="m">61937&lt;/span> &lt;span class="o">(&lt;/span>used on S/PDIF - IEC958&lt;span class="o">)&lt;/span>
E spx Ogg Speex
DE srt SubRip subtitle
D stl Spruce subtitle format
E stream_segment,ssegment streaming segment muxer
D subviewer SubViewer subtitle format
D subviewer1 SubViewer v1 subtitle format
D sunrast_pipe piped sunrast sequence
DE sup raw HDMV Presentation Graphic Stream subtitles
D svag Konami PS2 SVAG
E svcd MPEG-2 PS &lt;span class="o">(&lt;/span>SVCD&lt;span class="o">)&lt;/span>
D svg_pipe piped svg sequence
DE swf SWF &lt;span class="o">(&lt;/span>ShockWave Flash&lt;span class="o">)&lt;/span>
D tak raw TAK
D tedcaptions TED Talks captions
E tee Multiple muxer tee
D thp THP
D tiertexseq Tiertex Limited SEQ
D tiff_pipe piped tiff sequence
D tmv 8088flex TMV
DE truehd raw TrueHD
DE tta TTA &lt;span class="o">(&lt;/span>True Audio&lt;span class="o">)&lt;/span>
D tty Tele-typewriter
D txd Renderware TeXture Dictionary
D ty TiVo TY Stream
DE u16be PCM unsigned 16-bit big-endian
DE u16le PCM unsigned 16-bit little-endian
DE u24be PCM unsigned 24-bit big-endian
DE u24le PCM unsigned 24-bit little-endian
DE u32be PCM unsigned 32-bit big-endian
DE u32le PCM unsigned 32-bit little-endian
DE u8 PCM unsigned 8-bit
E uncodedframecrc uncoded framecrc testing
D v210 Uncompressed 4:2:2 10-bit
D v210x Uncompressed 4:2:2 10-bit
D vag Sony PS2 VAG
DE vc1 raw VC-1 video
DE vc1test VC-1 &lt;span class="nb">test&lt;/span> bitstream
E vcd MPEG-1 Systems / MPEG program stream &lt;span class="o">(&lt;/span>VCD&lt;span class="o">)&lt;/span>
D vfwcap VfW video capture
DE vidc PCM Archimedes VIDC
D vivo Vivo
D vmd Sierra VMD
E vob MPEG-2 PS &lt;span class="o">(&lt;/span>VOB&lt;span class="o">)&lt;/span>
D vobsub VobSub subtitle format
DE voc Creative Voice
D vpk Sony PS2 VPK
D vplayer VPlayer subtitles
D vqf Nippon Telegraph and Telephone Corporation &lt;span class="o">(&lt;/span>NTT&lt;span class="o">)&lt;/span> TwinVQ
DE w64 Sony Wave64
DE wav WAV / WAVE &lt;span class="o">(&lt;/span>Waveform Audio&lt;span class="o">)&lt;/span>
D wc3movie Wing Commander III movie
E webm WebM
E webm_chunk WebM Chunk Muxer
DE webm_dash_manifest WebM DASH Manifest
E webp WebP
D webp_pipe piped webp sequence
DE webvtt WebVTT subtitle
D wsaud Westwood Studios audio
D wsd Wideband Single-bit Data &lt;span class="o">(&lt;/span>WSD&lt;span class="o">)&lt;/span>
D wsvqa Westwood Studios VQA
DE wtv Windows Television &lt;span class="o">(&lt;/span>WTV&lt;span class="o">)&lt;/span>
DE wv raw WavPack
D wve Psion &lt;span class="m">3&lt;/span> audio
D xa Maxis XA
D xbin eXtended BINary text &lt;span class="o">(&lt;/span>XBIN&lt;span class="o">)&lt;/span>
D xmv Microsoft XMV
D xpm_pipe piped xpm sequence
D xvag Sony PS3 XVAG
D xwd_pipe piped xwd sequence
D xwma Microsoft xWMA
D yop Psygnosis YOP
DE yuv4mpegpipe YUV4MPEG pipe
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>æˆ‘çš„ç§‹æ‹›é¢è¯•é—®é¢˜é›†</title><link>https://blog.itning.top/post/2019/12/02/%E6%88%91%E7%9A%84%E7%A7%8B%E6%8B%9B%E9%9D%A2%E8%AF%95%E9%97%AE%E9%A2%98%E9%9B%86/</link><pubDate>Mon, 02 Dec 2019 16:33:56 +0800</pubDate><guid>https://blog.itning.top/post/2019/12/02/%E6%88%91%E7%9A%84%E7%A7%8B%E6%8B%9B%E9%9D%A2%E8%AF%95%E9%97%AE%E9%A2%98%E9%9B%86/</guid><description>&lt;h2 id="ç¬¬ä¸€å®¶">ç¬¬ä¸€å®¶&lt;/h2>
&lt;ol>
&lt;li>è¯´è¯´ä½ æ€Žä¹ˆç†è§£threadlocalçš„ï¼Ÿ&lt;/li>
&lt;li>ReentrantLockåŽŸç†ï¼Ÿ&lt;/li>
&lt;li>[1ï¼Œ2ï¼Œ3ï¼Œ4ï¼Œ4ï¼Œ5] æ•°ç»„æ‰¾å‡º4æ‰€åœ¨çš„æ‰€æœ‰ä¸‹æ ‡ï¼Ÿ&lt;/li>
&lt;/ol>
&lt;h2 id="ç¬¬äºŒå®¶">ç¬¬äºŒå®¶&lt;/h2>
&lt;p>ï¼ˆä¸€é¢ï¼‰&lt;/p>
&lt;ol>
&lt;li>BIO,NIO,AIO å…·ä½“å®žçŽ°åŽŸç†ï¼Ÿ&lt;/li>
&lt;li>NIO æœ‰å“ªäº›ç±»ï¼Œæ€Žä¹ˆå®žçŽ°çš„ï¼Ÿ&lt;/li>
&lt;li>JVMæœ‰å“ªäº›åŒºåŸŸï¼Œéƒ½åšä»€ä¹ˆçš„ï¼Ÿ&lt;/li>
&lt;li>è¯´ä¸€ä¸‹G1åžƒåœ¾å›žæ”¶å™¨ï¼Ÿ&lt;/li>
&lt;li>å¯é‡å…¥é”ï¼ˆReentrantLockï¼‰å’ŒåŒæ­¥é”ï¼ˆsynchronizedï¼‰åŒºåˆ«ï¼Ÿï¼ˆåº•å±‚åŽŸç†ï¼‰&lt;/li>
&lt;li>AQSæ¡†æž¶åŽŸç†ï¼Ÿ&lt;/li>
&lt;li>ä½ çŸ¥é“Conditionå—ï¼Ÿè¯´ä¸€ä¸‹æ€Žä¹ˆä½¿ç”¨ã€‚&lt;/li>
&lt;li>ä½ ç”¨è¿‡ä»€ä¹ˆæ•°æ®åº“ï¼Ÿ&lt;/li>
&lt;li>è¯´ä¸€ä¸‹mysqlæœ‰å“ªäº›å¼•æ“Žï¼Ÿ&lt;/li>
&lt;li>myisamå’Œinnodbæœ‰å“ªäº›åŒºåˆ«ï¼Ÿ&lt;/li>
&lt;li>mysqlä½ ç”¨çš„æ€Žä¹ˆæ ·ï¼Ÿ&lt;/li>
&lt;li>mysqlç´¢å¼•æ€Žä¹ˆå®žçŽ°çš„ï¼Ÿ&lt;/li>
&lt;li>rediséƒ½æ”¯æŒå“ªäº›æ•°æ®ç±»åž‹ï¼Ÿ&lt;/li>
&lt;li>redisä½ éƒ½å¹²ä»€ä¹ˆç”¨ï¼Ÿ&lt;/li>
&lt;li>spring cloudéƒ½æœ‰å“ªäº›ç»„ä»¶ï¼Œå¹²ä»€ä¹ˆç”¨ï¼Ÿ&lt;/li>
&lt;li>spring aop å®žçŽ°åŽŸç†ï¼Ÿ&lt;/li>
&lt;li>è¯´ä¸€ä¸‹å•ç‚¹ç™»å½•æ€Žä¹ˆåšçš„ï¼ŸåŽŸç†ï¼Ÿ&lt;/li>
&lt;li>ä½ æœ‰ä»€ä¹ˆé—®é¢˜è¦é—®æˆ‘ï¼Ÿ
ï¼ˆäºŒé¢ï¼‰&lt;/li>
&lt;li>è‡ªæˆ‘ä»‹ç»&lt;/li>
&lt;li>ä»‹ç»ä½ çš„é¡¹ç›®&lt;/li>
&lt;li>é¡¹ç›®ç ”å‘è¿‡ç¨‹ä¸­ä½ é‡åˆ°æœ€å¤§çš„å›°éš¾æ˜¯ä»€ä¹ˆï¼Ÿæ€Žä¹ˆè§£å†³çš„ï¼Ÿ&lt;/li>
&lt;li>ä½ ä¸ºä»€ä¹ˆé€‰æ‹©æˆ‘ä»¬å…¬å¸ï¼Ÿ&lt;/li>
&lt;li>ä½ æœ‰ä»€ä¹ˆé—®é¢˜è¦é—®æˆ‘ï¼Ÿ&lt;/li>
&lt;/ol>
&lt;h2 id="ç¬¬ä¸‰å®¶">ç¬¬ä¸‰å®¶&lt;/h2>
&lt;ol>
&lt;li>ä½ è§‰å¾—ä½ åšçš„å¯¹å—ï¼ˆæ‹¿ç€æˆ‘çš„ç¬”è¯•å·ï¼‰ï¼Ÿ&lt;/li>
&lt;li>å“ªä¸å¯¹æ€Žä¹ˆæ”¹ï¼Ÿ&lt;/li>
&lt;li>ä»‹ç»ä¸‹ä½ çš„é¡¹ç›®&lt;/li>
&lt;/ol>
&lt;h2 id="ç¬¬å››å®¶">ç¬¬å››å®¶&lt;/h2>
&lt;ol>
&lt;li>è‡ªæˆ‘ä»‹ç»&lt;/li>
&lt;li>ä»‹ç»ä½ çš„é¡¹ç›®&lt;/li>
&lt;li>å¯é‡å…¥é”ï¼ˆReentrantLockï¼‰å’ŒåŒæ­¥é”ï¼ˆsynchronizedï¼‰åŒºåˆ«ï¼Ÿ&lt;/li>
&lt;li>ä½ å¯¹J.U.CçŸ¥é“å¤šå°‘ï¼Ÿ&lt;/li>
&lt;li>CyclicBarrierå¾ªçŽ¯æ …æ æ€Žä¹ˆå®žçŽ°çš„ï¼Ÿ&lt;/li>
&lt;li>CountDownLatchå€’è®¡æ—¶å™¨æ€Žä¹ˆå®žçŽ°çš„ï¼Ÿ&lt;/li>
&lt;li>AQSæ€Žä¹ˆå®žçŽ°çš„ï¼Ÿé‡Œè¾¹ç”¨äº†ä»€ä¹ˆç®—æ³•ï¼Ÿ&lt;/li>
&lt;li>B+æ ‘æœ‰å“ªäº›ç‰¹ç‚¹ï¼Ÿ&lt;/li>
&lt;li>myisamå’Œinnodbæœ‰å“ªäº›åŒºåˆ«ï¼Ÿ&lt;/li>
&lt;li>SQLæ€Žä¹ˆä¼˜åŒ–ï¼Ÿ&lt;/li>
&lt;li>çº¿ä¸ŠCPU 100% ä½ è§‰å¾—ä¼šæ˜¯ä»€ä¹ˆé—®é¢˜ï¼Ÿ&lt;/li>
&lt;li>JVMå†…å­˜æ¨¡åž‹ï¼Ÿ&lt;/li>
&lt;li>æ–°ç”Ÿä»£ï¼Œè€å¹´ä»£ å„åŒºåŸŸæ¯”ä¾‹æ˜¯å¤šå°‘ï¼Ÿ&lt;/li>
&lt;li>åžƒåœ¾å›žæ”¶ç®—æ³•æœ‰å“ªäº›ï¼Ÿ&lt;/li>
&lt;li>æ ‡è®°æ¸…é™¤ä¼šäº§ç”Ÿä»€ä¹ˆé—®é¢˜ï¼Ÿ&lt;/li>
&lt;li>ä½ ç”¨è¿‡å“ªäº›JVMè°ƒä¼˜å·¥å…·ï¼Ÿ&lt;/li>
&lt;li>CyclicBarrierå’ŒCountDownLatchæœ‰å“ªäº›åº”ç”¨åœºæ™¯ï¼Ÿ&lt;/li>
&lt;li>ä½ æœ‰ä»€ä¹ˆé—®é¢˜è¦é—®æˆ‘ï¼Ÿ&lt;/li>
&lt;/ol>
&lt;h2 id="ç¬¬äº”å®¶">ç¬¬äº”å®¶&lt;/h2>
&lt;ol>
&lt;li>è‡ªæˆ‘ä»‹ç»&lt;/li>
&lt;li>volatileå®žçŽ°åŽŸç†ï¼Ÿ&lt;/li>
&lt;li>myisamå’Œinnodbæœ‰å“ªäº›åŒºåˆ«ï¼Ÿ&lt;/li>
&lt;li>CAPå®šç†ä½ çŸ¥é“å—ï¼Ÿ&lt;/li>
&lt;li>a b c d &amp;hellip; z aa ab ac &amp;hellip; az aaa aab aac &amp;hellip; aaz &amp;hellip;. dddd &amp;hellip;. zzzz &amp;hellip;. zzzzzz &amp;hellip;.
çŽ°åœ¨ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²ï¼ˆä¾‹å¦‚ abcdï¼‰æ‰¾å‡ºæ‰€åœ¨çš„ä¸‹æ ‡ï¼Ÿ&lt;/li>
&lt;li>36åŒ¹é©¬ï¼Œ6ä¸ªèµ›é“ï¼Œæ²¡æœ‰è®¡æ—¶å™¨ï¼Œæ‰¾å‡ºè·‘çš„æœ€å¿«çš„3åŒ¹é©¬ï¼Œè‡³å°‘éœ€è¦å‡ æ¬¡ï¼Ÿ&lt;/li>
&lt;li>kafkaå’ŒrocketmqåŒºåˆ«ï¼Ÿ&lt;/li>
&lt;li>ä½ æœ‰å¤šå°‘ä»£ç é‡ï¼Ÿ&lt;/li>
&lt;li>TCP æ»‘åŠ¨çª—å£æœ‰ä»€ä¹ˆç”¨ï¼Ÿ&lt;/li>
&lt;li>ä¸‰æ¬¡æ¡æ‰‹ï¼Œå››æ¬¡æŒ¥æ‰‹è¯´ä¸‹ï¼Ÿ&lt;/li>
&lt;li>ä»Žæµè§ˆå™¨å‘è¯·æ±‚åˆ°æœåŠ¡å™¨å†åˆ°æµè§ˆå™¨ä¸­é—´å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ&lt;/li>
&lt;li>çº¿ç¨‹æ± æ€Žä¹ˆå®žçŽ°çš„ï¼Œæœ‰å“ªäº›å‚æ•°ï¼Ÿ&lt;/li>
&lt;li>é˜»å¡žé˜Ÿåˆ—æ»¡äº†ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ&lt;/li>
&lt;li>è¯´ä¸€ä¸‹Bæ ‘ä¸ŽB+æ ‘åŒºåˆ«ï¼Ÿ&lt;/li>
&lt;li>ConcurrentHashMapå’ŒHashMapæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œåº•å±‚åŽŸç†ï¼Ÿ&lt;/li>
&lt;li>ä½ æœ‰ä»€ä¹ˆé—®é¢˜è¦é—®æˆ‘ï¼Ÿ&lt;/li>
&lt;/ol></description></item><item><title>Synchronized</title><link>https://blog.itning.top/post/2019/09/15/synchronized/</link><pubDate>Sun, 15 Sep 2019 18:32:13 +0800</pubDate><guid>https://blog.itning.top/post/2019/09/15/synchronized/</guid><description>&lt;p>&lt;strong>åå‘é” 01&lt;/strong>&lt;/p>
&lt;p>&lt;strong>è½»é‡çº§é” 00&lt;/strong>&lt;/p>
&lt;p>&lt;strong>é‡é‡çº§é” 10&lt;/strong>&lt;/p>
&lt;p>å¯¹è±¡åœ¨å†…å­˜ä¸­çš„å¸ƒå±€åˆ†ä¸ºä¸‰å—åŒºåŸŸï¼š&lt;strong>å¯¹è±¡å¤´ï¼Œå®žä¾‹æ•°æ®ï¼Œå¡«å……æ•°æ®&lt;/strong>&lt;/p>
&lt;p>Â·å®žä¾‹å¯¹è±¡Â·&lt;/p>
&lt;p>â€”â€”â€”â€”â€”&lt;/p>
&lt;p>|å¯¹è±¡å¤´ |&lt;/p>
&lt;p>|å®žä¾‹å˜é‡|&lt;/p>
&lt;p>|å¡«å……æ•°æ®|&lt;/p>
&lt;p>â€”â€”â€”â€”â€”&lt;/p>
&lt;p>&lt;strong>å¯¹è±¡å¤´ä¸»è¦ç»“æž„æ˜¯ç”±Mark Word å’Œ Class Metadata Address ç»„æˆ&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;strong>Mark Word&lt;/strong> &lt;strong>å­˜å‚¨å¯¹è±¡çš„hashCodeã€é”ä¿¡æ¯æˆ–åˆ†ä»£å¹´é¾„æˆ–GCæ ‡å¿—ç­‰ä¿¡æ¯&lt;/strong>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Class Metadata Address ç±»åž‹æŒ‡é’ˆæŒ‡å‘å¯¹è±¡çš„ç±»å…ƒæ•°æ®ï¼ŒJVMé€šè¿‡è¿™ä¸ªæŒ‡é’ˆç¡®å®šè¯¥å¯¹è±¡æ˜¯å“ªä¸ªç±»çš„å®žä¾‹ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Mark Word&lt;/strong>å­˜å‚¨ç»“æž„ï¼š&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>é”çŠ¶æ€&lt;/th>
&lt;th>25bit&lt;/th>
&lt;th>4bit&lt;/th>
&lt;th>1bitæ˜¯å¦æ˜¯åå‘é”&lt;/th>
&lt;th>2bit é”æ ‡å¿—ä½&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>æ— é”çŠ¶æ€&lt;/td>
&lt;td>å¯¹è±¡HashCode&lt;/td>
&lt;td>å¯¹è±¡åˆ†ä»£å¹´é¾„&lt;/td>
&lt;td>0&lt;/td>
&lt;td>01&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;ul>
&lt;li>
&lt;p>å¯¹è±¡å¤´ä¸­åŒ…å«äº†é”çŠ¶æ€ï¼Œé‡é‡çº§é”æ ‡è¯†ä¸º10ï¼Œå…¶ä¸­æŒ‡é’ˆæŒ‡å‘çš„æ˜¯monitorå¯¹è±¡ï¼ˆä¹Ÿç§°ä¸ºç®¡ç¨‹æˆ–ç›‘è§†å™¨é”ï¼‰ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ¯ä¸ªå¯¹è±¡éƒ½å­˜åœ¨ç€ä¸€ä¸ªmonitorä¸Žä¹‹å…³è”&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å½“ä¸€ä¸ªmonitorè¢«æŸä¸ªçº¿ç¨‹æŒæœ‰åŽï¼Œä¾¿å¤„äºŽé”å®šçŠ¶æ€&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åœ¨JAVAè™šæ‹Ÿæœºï¼ˆ&lt;strong>HotSpot&lt;/strong>ï¼‰ä¸­ï¼Œmonitoræ˜¯ç”±&lt;strong>ObjectMonitor&lt;/strong>å®žçŽ°çš„ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ¯ä¸ª&lt;strong>ç­‰å¾…é”çš„çº¿ç¨‹&lt;/strong>éƒ½ä¼šè¢«å°è£…æˆ&lt;strong>ObjectWaiter&lt;/strong>å¯¹è±¡&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ObjectMonitorä¸­æœ‰ä¸¤ä¸ªé˜Ÿåˆ—ï¼Œ&lt;strong>_WaitSet&lt;/strong> å’Œ &lt;strong>_EntryList&lt;/strong>ï¼Œç”¨æ¥ä¿å­˜&lt;strong>ObjectWaiter&lt;/strong>å¯¹è±¡åˆ—è¡¨&lt;/p>
&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-c++" data-lang="c++">&lt;span class="n">ObjectMonitor&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="n">_header&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">NULL&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="n">_count&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">//è®°å½•ä¸ªæ•°
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="n">_waiters&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">_recursions&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="n">_object&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">NULL&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="n">_owner&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">NULL&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">//æŒ‡å‘æŒæœ‰ObjectMonitorå¯¹è±¡çš„çº¿ç¨‹
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="n">_WaitSet&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">NULL&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">//å¤„äºŽwaitçŠ¶æ€çš„çº¿ç¨‹ï¼Œä¼šè¢«åŠ å…¥åˆ°_WaitSet
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="n">_WaitSetLock&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="p">;&lt;/span>
&lt;span class="n">_Responsible&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">NULL&lt;/span> &lt;span class="p">;&lt;/span>
&lt;span class="n">_succ&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">NULL&lt;/span> &lt;span class="p">;&lt;/span>
&lt;span class="n">_cxq&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">NULL&lt;/span> &lt;span class="p">;&lt;/span>
&lt;span class="n">FreeNext&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">NULL&lt;/span> &lt;span class="p">;&lt;/span>
&lt;span class="n">_EntryList&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">NULL&lt;/span> &lt;span class="p">;&lt;/span> &lt;span class="c1">//å¤„äºŽç­‰å¾…é”blockçŠ¶æ€çš„çº¿ç¨‹ï¼Œä¼šè¢«åŠ å…¥åˆ°è¯¥åˆ—è¡¨
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="n">_SpinFreq&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="p">;&lt;/span>
&lt;span class="n">_SpinClock&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="p">;&lt;/span>
&lt;span class="n">OwnerIsThread&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>
&lt;p>å½“&lt;strong>å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®ä¸€æ®µåŒæ­¥ä»£ç &lt;/strong>æ—¶ï¼Œé¦–å…ˆä¼š&lt;strong>è¿›å…¥ _EntryList é›†åˆ&lt;/strong>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å½“&lt;strong>çº¿ç¨‹èŽ·å–åˆ°å¯¹è±¡çš„monitor&lt;/strong> åŽè¿›å…¥ &lt;strong>_Owner&lt;/strong> åŒºåŸŸå¹¶æŠŠmonitorä¸­çš„ownerå˜é‡&lt;strong>è®¾ç½®ä¸ºå½“å‰çº¿ç¨‹&lt;/strong>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åŒæ—¶monitorä¸­çš„è®¡æ•°å™¨&lt;strong>count&lt;/strong>åŠ 1&lt;/p>
&lt;/li>
&lt;li>
&lt;p>è‹¥çº¿ç¨‹è°ƒç”¨ &lt;strong>wait()&lt;/strong> æ–¹æ³•ï¼Œå°†&lt;strong>é‡Šæ”¾å½“å‰æŒæœ‰çš„monitor&lt;/strong>ï¼Œ&lt;strong>ownerå˜é‡æ¢å¤ä¸ºnull&lt;/strong>ï¼Œ&lt;strong>countè‡ªå‡1&lt;/strong>ï¼ŒåŒæ—¶&lt;strong>è¯¥çº¿ç¨‹è¿›å…¥ WaitSeté›†åˆä¸­&lt;/strong>ç­‰å¾…è¢«å”¤é†’ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-09-15-synchronized/a.png" alt="synchronized">&lt;/p>
&lt;p>é”çš„çŠ¶æ€æ€»å…±æœ‰å››ç§ï¼Œ&lt;strong>æ— é”çŠ¶æ€&lt;/strong>ã€&lt;strong>åå‘é”&lt;/strong>ã€&lt;strong>è½»é‡çº§é”&lt;/strong>å’Œ&lt;strong>é‡é‡çº§é”&lt;/strong>ã€‚&lt;/p>
&lt;ol>
&lt;li>
&lt;p>åå‘é”&lt;/p>
&lt;p>Java 6 ä¹‹åŽåŠ å…¥çš„ã€‚&lt;/p>
&lt;p>åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œé”ä¸ä»…ä¸å­˜åœ¨å¤šçº¿ç¨‹ç«žäº‰ï¼Œè€Œä¸”æ€»æ˜¯ç”±åŒä¸€çº¿ç¨‹å¤šæ¬¡èŽ·å¾—ï¼Œå› æ­¤&lt;strong>ä¸ºäº†å‡å°‘åŒä¸€çº¿ç¨‹èŽ·å–é”(ä¼šæ¶‰åŠåˆ°ä¸€äº›CASæ“ä½œ,è€—æ—¶)çš„ä»£ä»·è€Œå¼•å…¥åå‘é”&lt;/strong>ã€‚&lt;/p>
&lt;p>æ ¸å¿ƒæ€æƒ³æ˜¯ï¼Œå¦‚æžœä¸€ä¸ªçº¿ç¨‹èŽ·å¾—äº†é”ï¼Œé‚£ä¹ˆé”å°±è¿›å…¥åå‘æ¨¡å¼ï¼Œ&lt;strong>æ­¤æ—¶Mark Word çš„ç»“æž„ä¹Ÿå˜ä¸ºåå‘é”ç»“æž„&lt;/strong>ï¼Œå½“è¿™ä¸ªçº¿ç¨‹å†æ¬¡è¯·æ±‚é”æ—¶ï¼Œæ— éœ€å†åšä»»ä½•åŒæ­¥æ“ä½œï¼Œå³èŽ·å–é”çš„è¿‡ç¨‹ï¼Œè¿™æ ·å°±çœåŽ»äº†å¤§é‡æœ‰å…³é”ç”³è¯·çš„æ“ä½œï¼Œä»Žè€Œä¹Ÿå°±æä¾›ç¨‹åºçš„æ€§èƒ½ã€‚&lt;/p>
&lt;p>åå‘é”å¤±è´¥åŽï¼Œå¹¶ä¸ä¼šç«‹å³è†¨èƒ€ä¸ºé‡é‡çº§é”ï¼Œè€Œæ˜¯å…ˆå‡çº§ä¸ºè½»é‡çº§é”ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>è½»é‡çº§é”&lt;/p>
&lt;p>å€˜è‹¥åå‘é”å¤±è´¥ï¼Œè™šæ‹Ÿæœºå¹¶ä¸ä¼šç«‹å³å‡çº§ä¸ºé‡é‡çº§é”ï¼Œå®ƒè¿˜ä¼šå°è¯•ä½¿ç”¨ä¸€ç§ç§°ä¸ºè½»é‡çº§é”çš„ä¼˜åŒ–æ‰‹æ®µ(1.6ä¹‹åŽåŠ å…¥çš„)ï¼Œ&lt;strong>æ­¤æ—¶Mark Word çš„ç»“æž„ä¹Ÿå˜ä¸ºè½»é‡çº§é”çš„ç»“æž„&lt;/strong>ã€‚è½»é‡çº§é”èƒ½å¤Ÿæå‡ç¨‹åºæ€§èƒ½çš„ä¾æ®æ˜¯**â€œå¯¹ç»å¤§éƒ¨åˆ†çš„é”ï¼Œåœ¨æ•´ä¸ªåŒæ­¥å‘¨æœŸå†…éƒ½ä¸å­˜åœ¨ç«žäº‰â€**ï¼Œæ³¨æ„è¿™æ˜¯ç»éªŒæ•°æ®ã€‚éœ€è¦äº†è§£çš„æ˜¯ï¼Œ**è½»é‡çº§é”æ‰€é€‚åº”çš„åœºæ™¯æ˜¯çº¿ç¨‹äº¤æ›¿æ‰§è¡ŒåŒæ­¥å—çš„åœºåˆï¼Œå¦‚æžœå­˜åœ¨åŒä¸€æ—¶é—´è®¿é—®åŒä¸€é”çš„åœºåˆï¼Œå°±ä¼šå¯¼è‡´è½»é‡çº§é”è†¨èƒ€ä¸ºé‡é‡çº§é”**ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>è‡ªæ—‹é”&lt;/p>
&lt;p>è½»é‡çº§é”å¤±è´¥åŽï¼Œè™šæ‹Ÿæœºä¸ºäº†é¿å…çº¿ç¨‹çœŸå®žåœ°åœ¨æ“ä½œç³»ç»Ÿå±‚é¢æŒ‚èµ·ï¼Œè¿˜ä¼šè¿›è¡Œä¸€é¡¹ç§°ä¸ºè‡ªæ—‹é”çš„ä¼˜åŒ–æ‰‹æ®µã€‚è¿™æ˜¯åŸºäºŽåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œçº¿ç¨‹æŒæœ‰é”çš„æ—¶é—´éƒ½ä¸ä¼šå¤ªé•¿ï¼Œå¦‚æžœç›´æŽ¥æŒ‚èµ·æ“ä½œç³»ç»Ÿå±‚é¢çš„çº¿ç¨‹å¯èƒ½ä¼šå¾—ä¸å¿å¤±ï¼Œæ¯•ç«Ÿæ“ä½œç³»ç»Ÿå®žçŽ°çº¿ç¨‹ä¹‹é—´çš„åˆ‡æ¢æ—¶&lt;strong>éœ€è¦ä»Žç”¨æˆ·æ€è½¬æ¢åˆ°æ ¸å¿ƒæ€&lt;/strong>ï¼Œè¿™ä¸ªçŠ¶æ€ä¹‹é—´çš„è½¬æ¢éœ€è¦ç›¸å¯¹æ¯”è¾ƒé•¿çš„æ—¶é—´ï¼Œæ—¶é—´æˆæœ¬ç›¸å¯¹è¾ƒé«˜ï¼Œå› æ­¤&lt;strong>è‡ªæ—‹é”ä¼šå‡è®¾åœ¨ä¸ä¹…å°†æ¥ï¼Œå½“å‰çš„çº¿ç¨‹å¯ä»¥èŽ·å¾—é”&lt;/strong>ï¼Œå› æ­¤è™šæ‹Ÿæœºä¼š&lt;strong>è®©å½“å‰æƒ³è¦èŽ·å–é”çš„çº¿ç¨‹åšå‡ ä¸ªç©ºå¾ªçŽ¯&lt;/strong>(è¿™ä¹Ÿæ˜¯ç§°ä¸ºè‡ªæ—‹çš„åŽŸå› )ï¼Œä¸€èˆ¬ä¸ä¼šå¤ªä¹…ï¼Œå¯èƒ½æ˜¯50ä¸ªå¾ªçŽ¯æˆ–100å¾ªçŽ¯ï¼Œåœ¨ç»è¿‡è‹¥å¹²æ¬¡å¾ªçŽ¯åŽï¼Œå¦‚æžœå¾—åˆ°é”ï¼Œå°±é¡ºåˆ©è¿›å…¥ä¸´ç•ŒåŒºã€‚å¦‚æžœè¿˜ä¸èƒ½èŽ·å¾—é”ï¼Œé‚£å°±ä¼šå°†çº¿ç¨‹åœ¨æ“ä½œç³»ç»Ÿå±‚é¢æŒ‚èµ·ï¼Œè¿™å°±æ˜¯è‡ªæ—‹é”çš„ä¼˜åŒ–æ–¹å¼ï¼Œè¿™ç§æ–¹å¼ç¡®å®žä¹Ÿæ˜¯å¯ä»¥æå‡æ•ˆçŽ‡çš„ã€‚æœ€åŽæ²¡åŠžæ³•ä¹Ÿå°±åªèƒ½å‡çº§ä¸ºé‡é‡çº§é”äº†ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>é”æ¸…é™¤&lt;/p>
&lt;p>Javaè™šæ‹Ÿæœºåœ¨JITç¼–è¯‘æ—¶(å¯ä»¥ç®€å•ç†è§£ä¸ºå½“æŸæ®µä»£ç å³å°†ç¬¬ä¸€æ¬¡è¢«æ‰§è¡Œæ—¶è¿›è¡Œç¼–è¯‘ï¼Œåˆç§°å³æ—¶ç¼–è¯‘)ï¼Œ&lt;strong>é€šè¿‡å¯¹è¿è¡Œä¸Šä¸‹æ–‡çš„æ‰«æï¼ŒåŽ»é™¤ä¸å¯èƒ½å­˜åœ¨å…±äº«èµ„æºç«žäº‰çš„é”&lt;/strong>ï¼Œé€šè¿‡è¿™ç§æ–¹å¼æ¶ˆé™¤æ²¡æœ‰å¿…è¦çš„é”ï¼Œå¯ä»¥èŠ‚çœæ¯«æ— æ„ä¹‰çš„è¯·æ±‚é”æ—¶é—´&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>&lt;strong>åå‘é”ï¼Œè½»é‡çº§é”éƒ½æ˜¯ä¹è§‚é”ï¼Œé‡é‡çº§é”æ˜¯æ‚²è§‚é”ã€‚&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>ä¸€ä¸ªå¯¹è±¡åˆšå¼€å§‹å®žä¾‹åŒ–çš„æ—¶å€™ï¼Œæ²¡æœ‰ä»»ä½•çº¿ç¨‹æ¥è®¿é—®å®ƒçš„æ—¶å€™ã€‚å®ƒæ˜¯å¯åå‘çš„ï¼Œæ„å‘³ç€ï¼Œå®ƒçŽ°åœ¨è®¤ä¸ºåªå¯èƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹æ¥è®¿é—®å®ƒï¼Œæ‰€ä»¥å½“ç¬¬ä¸€ä¸ªçº¿ç¨‹æ¥è®¿é—®å®ƒçš„æ—¶å€™ï¼Œå®ƒä¼šåå‘è¿™ä¸ªçº¿ç¨‹ï¼Œæ­¤æ—¶ï¼Œå¯¹è±¡æŒæœ‰åå‘é”ã€‚åå‘ç¬¬ä¸€ä¸ªçº¿ç¨‹ï¼Œè¿™ä¸ªçº¿ç¨‹åœ¨ä¿®æ”¹å¯¹è±¡å¤´æˆä¸ºåå‘é”çš„æ—¶å€™ä½¿ç”¨CASæ“ä½œï¼Œå¹¶å°†å¯¹è±¡å¤´ä¸­çš„ThreadIDæ”¹æˆè‡ªå·±çš„IDï¼Œä¹‹åŽå†æ¬¡è®¿é—®è¿™ä¸ªå¯¹è±¡æ—¶ï¼Œåªéœ€è¦å¯¹æ¯”IDï¼Œä¸éœ€è¦å†ä½¿ç”¨CASåœ¨è¿›è¡Œæ“ä½œã€‚&lt;/li>
&lt;li>ä¸€æ—¦æœ‰ç¬¬äºŒä¸ªçº¿ç¨‹è®¿é—®è¿™ä¸ªå¯¹è±¡ï¼Œå› ä¸ºåå‘é”ä¸ä¼šä¸»åŠ¨é‡Šæ”¾ï¼Œæ‰€ä»¥ç¬¬äºŒä¸ªçº¿ç¨‹å¯ä»¥çœ‹åˆ°å¯¹è±¡æ—¶åå‘çŠ¶æ€ï¼Œè¿™æ—¶è¡¨æ˜Žåœ¨è¿™ä¸ªå¯¹è±¡ä¸Šå·²ç»å­˜åœ¨ç«žäº‰äº†ã€‚æ£€æŸ¥åŽŸæ¥æŒæœ‰è¯¥å¯¹è±¡é”çš„çº¿ç¨‹æ˜¯å¦ä¾ç„¶å­˜æ´»ï¼Œå¦‚æžœæŒ‚äº†ï¼Œåˆ™å¯ä»¥å°†å¯¹è±¡å˜ä¸ºæ— é”çŠ¶æ€ï¼Œç„¶åŽé‡æ–°åå‘æ–°çš„çº¿ç¨‹ã€‚å¦‚æžœåŽŸæ¥çš„çº¿ç¨‹ä¾ç„¶å­˜æ´»ï¼Œåˆ™é©¬ä¸Šæ‰§è¡Œé‚£ä¸ªçº¿ç¨‹çš„æ“ä½œæ ˆï¼Œæ£€æŸ¥è¯¥å¯¹è±¡çš„ä½¿ç”¨æƒ…å†µï¼Œå¦‚æžœä»ç„¶éœ€è¦æŒæœ‰åå‘é”ï¼Œåˆ™åå‘é”å‡çº§ä¸ºè½»é‡çº§é”ï¼Œï¼ˆ&lt;strong>åå‘é”å°±æ˜¯è¿™ä¸ªæ—¶å€™å‡çº§ä¸ºè½»é‡çº§é”çš„&lt;/strong>ï¼‰ï¼Œæ­¤æ—¶è½»é‡çº§é”ç”±åŽŸæŒæœ‰åå‘é”çš„çº¿ç¨‹æŒæœ‰ï¼Œç»§ç»­æ‰§è¡Œå…¶åŒæ­¥ä»£ç ï¼Œè€Œæ­£åœ¨ç«žäº‰çš„çº¿ç¨‹ä¼šè¿›å…¥è‡ªæ—‹ç­‰å¾…èŽ·å¾—è¯¥è½»é‡çº§é”ï¼›å¦‚æžœä¸å­˜åœ¨ä½¿ç”¨äº†ï¼Œåˆ™å¯ä»¥å°†å¯¹è±¡å›žå¤æˆæ— é”çŠ¶æ€ï¼Œç„¶åŽé‡æ–°åå‘ã€‚&lt;/li>
&lt;li>è½»é‡çº§é”è®¤ä¸ºç«žäº‰å­˜åœ¨ï¼Œä½†æ˜¯ç«žäº‰çš„ç¨‹åº¦å¾ˆè½»ï¼Œä¸€èˆ¬ä¸¤ä¸ªçº¿ç¨‹å¯¹äºŽåŒä¸€ä¸ªé”çš„æ“ä½œéƒ½ä¼šé”™å¼€ï¼Œæˆ–è€…è¯´ç¨å¾®ç­‰å¾…ä¸€ä¸‹ï¼ˆè‡ªæ—‹ï¼‰ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹å°±ä¼šé‡Šæ”¾é”ã€‚ ä½†æ˜¯å½“è‡ªæ—‹è¶…è¿‡ä¸€å®šçš„æ¬¡æ•°ï¼Œæˆ–è€…ä¸€ä¸ªçº¿ç¨‹åœ¨æŒæœ‰é”ï¼Œä¸€ä¸ªåœ¨è‡ªæ—‹ï¼Œåˆæœ‰ç¬¬ä¸‰ä¸ªæ¥è®¿æ—¶ï¼Œ&lt;strong>è½»é‡çº§é”è†¨èƒ€ä¸ºé‡é‡çº§é”&lt;/strong>ï¼Œé‡é‡çº§é”ä½¿é™¤äº†æ‹¥æœ‰é”çš„çº¿ç¨‹ä»¥å¤–çš„çº¿ç¨‹éƒ½é˜»å¡žï¼Œé˜²æ­¢CPUç©ºè½¬ã€‚&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>&lt;a href="https://blog.csdn.net/javazejian/article/details/72828483">https://blog.csdn.net/javazejian/article/details/72828483&lt;/a>&lt;/p>
&lt;p>&lt;a href="https://zhuanlan.zhihu.com/p/29866981">https://zhuanlan.zhihu.com/p/29866981&lt;/a>&lt;/p>
&lt;/blockquote></description></item><item><title>SpringBootä¸­å¦‚ä½•å‘é€é‚®ä»¶</title><link>https://blog.itning.top/post/2019/06/25/springboot%E4%B8%AD%E5%A6%82%E4%BD%95%E5%8F%91%E9%80%81%E9%82%AE%E4%BB%B6/</link><pubDate>Tue, 25 Jun 2019 16:36:22 +0800</pubDate><guid>https://blog.itning.top/post/2019/06/25/springboot%E4%B8%AD%E5%A6%82%E4%BD%95%E5%8F%91%E9%80%81%E9%82%AE%E4%BB%B6/</guid><description>&lt;h2 id="é‚®ä»¶å‘é€">é‚®ä»¶å‘é€&lt;/h2>
&lt;h3 id="å¼•å…¥maven-dependency">å¼•å…¥maven dependency&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-xml" data-lang="xml">&lt;span class="c">&amp;lt;!-- https://mvnrepository.com/artifact/javax.mail/mail --&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;dependency&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;groupId&amp;gt;&lt;/span>javax.mail&lt;span class="nt">&amp;lt;/groupId&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;artifactId&amp;gt;&lt;/span>mail&lt;span class="nt">&amp;lt;/artifactId&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;version&amp;gt;&lt;/span>1.4.7&lt;span class="nt">&amp;lt;/version&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;/dependency&amp;gt;&lt;/span>
&lt;span class="c">&amp;lt;!-- https://mvnrepository.com/artifact/org.freemarker/freemarker --&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;dependency&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;groupId&amp;gt;&lt;/span>org.freemarker&lt;span class="nt">&amp;lt;/groupId&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;artifactId&amp;gt;&lt;/span>freemarker&lt;span class="nt">&amp;lt;/artifactId&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;version&amp;gt;&lt;/span>2.3.28&lt;span class="nt">&amp;lt;/version&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;/dependency&amp;gt;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="æ–°å»ºå·¥å…·ç±»emailhelper">æ–°å»ºå·¥å…·ç±»ï¼š&lt;code>EmailHelper&lt;/code>&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;span class="lnt">102
&lt;/span>&lt;span class="lnt">103
&lt;/span>&lt;span class="lnt">104
&lt;/span>&lt;span class="lnt">105
&lt;/span>&lt;span class="lnt">106
&lt;/span>&lt;span class="lnt">107
&lt;/span>&lt;span class="lnt">108
&lt;/span>&lt;span class="lnt">109
&lt;/span>&lt;span class="lnt">110
&lt;/span>&lt;span class="lnt">111
&lt;/span>&lt;span class="lnt">112
&lt;/span>&lt;span class="lnt">113
&lt;/span>&lt;span class="lnt">114
&lt;/span>&lt;span class="lnt">115
&lt;/span>&lt;span class="lnt">116
&lt;/span>&lt;span class="lnt">117
&lt;/span>&lt;span class="lnt">118
&lt;/span>&lt;span class="lnt">119
&lt;/span>&lt;span class="lnt">120
&lt;/span>&lt;span class="lnt">121
&lt;/span>&lt;span class="lnt">122
&lt;/span>&lt;span class="lnt">123
&lt;/span>&lt;span class="lnt">124
&lt;/span>&lt;span class="lnt">125
&lt;/span>&lt;span class="lnt">126
&lt;/span>&lt;span class="lnt">127
&lt;/span>&lt;span class="lnt">128
&lt;/span>&lt;span class="lnt">129
&lt;/span>&lt;span class="lnt">130
&lt;/span>&lt;span class="lnt">131
&lt;/span>&lt;span class="lnt">132
&lt;/span>&lt;span class="lnt">133
&lt;/span>&lt;span class="lnt">134
&lt;/span>&lt;span class="lnt">135
&lt;/span>&lt;span class="lnt">136
&lt;/span>&lt;span class="lnt">137
&lt;/span>&lt;span class="lnt">138
&lt;/span>&lt;span class="lnt">139
&lt;/span>&lt;span class="lnt">140
&lt;/span>&lt;span class="lnt">141
&lt;/span>&lt;span class="lnt">142
&lt;/span>&lt;span class="lnt">143
&lt;/span>&lt;span class="lnt">144
&lt;/span>&lt;span class="lnt">145
&lt;/span>&lt;span class="lnt">146
&lt;/span>&lt;span class="lnt">147
&lt;/span>&lt;span class="lnt">148
&lt;/span>&lt;span class="lnt">149
&lt;/span>&lt;span class="lnt">150
&lt;/span>&lt;span class="lnt">151
&lt;/span>&lt;span class="lnt">152
&lt;/span>&lt;span class="lnt">153
&lt;/span>&lt;span class="lnt">154
&lt;/span>&lt;span class="lnt">155
&lt;/span>&lt;span class="lnt">156
&lt;/span>&lt;span class="lnt">157
&lt;/span>&lt;span class="lnt">158
&lt;/span>&lt;span class="lnt">159
&lt;/span>&lt;span class="lnt">160
&lt;/span>&lt;span class="lnt">161
&lt;/span>&lt;span class="lnt">162
&lt;/span>&lt;span class="lnt">163
&lt;/span>&lt;span class="lnt">164
&lt;/span>&lt;span class="lnt">165
&lt;/span>&lt;span class="lnt">166
&lt;/span>&lt;span class="lnt">167
&lt;/span>&lt;span class="lnt">168
&lt;/span>&lt;span class="lnt">169
&lt;/span>&lt;span class="lnt">170
&lt;/span>&lt;span class="lnt">171
&lt;/span>&lt;span class="lnt">172
&lt;/span>&lt;span class="lnt">173
&lt;/span>&lt;span class="lnt">174
&lt;/span>&lt;span class="lnt">175
&lt;/span>&lt;span class="lnt">176
&lt;/span>&lt;span class="lnt">177
&lt;/span>&lt;span class="lnt">178
&lt;/span>&lt;span class="lnt">179
&lt;/span>&lt;span class="lnt">180
&lt;/span>&lt;span class="lnt">181
&lt;/span>&lt;span class="lnt">182
&lt;/span>&lt;span class="lnt">183
&lt;/span>&lt;span class="lnt">184
&lt;/span>&lt;span class="lnt">185
&lt;/span>&lt;span class="lnt">186
&lt;/span>&lt;span class="lnt">187
&lt;/span>&lt;span class="lnt">188
&lt;/span>&lt;span class="lnt">189
&lt;/span>&lt;span class="lnt">190
&lt;/span>&lt;span class="lnt">191
&lt;/span>&lt;span class="lnt">192
&lt;/span>&lt;span class="lnt">193
&lt;/span>&lt;span class="lnt">194
&lt;/span>&lt;span class="lnt">195
&lt;/span>&lt;span class="lnt">196
&lt;/span>&lt;span class="lnt">197
&lt;/span>&lt;span class="lnt">198
&lt;/span>&lt;span class="lnt">199
&lt;/span>&lt;span class="lnt">200
&lt;/span>&lt;span class="lnt">201
&lt;/span>&lt;span class="lnt">202
&lt;/span>&lt;span class="lnt">203
&lt;/span>&lt;span class="lnt">204
&lt;/span>&lt;span class="lnt">205
&lt;/span>&lt;span class="lnt">206
&lt;/span>&lt;span class="lnt">207
&lt;/span>&lt;span class="lnt">208
&lt;/span>&lt;span class="lnt">209
&lt;/span>&lt;span class="lnt">210
&lt;/span>&lt;span class="lnt">211
&lt;/span>&lt;span class="lnt">212
&lt;/span>&lt;span class="lnt">213
&lt;/span>&lt;span class="lnt">214
&lt;/span>&lt;span class="lnt">215
&lt;/span>&lt;span class="lnt">216
&lt;/span>&lt;span class="lnt">217
&lt;/span>&lt;span class="lnt">218
&lt;/span>&lt;span class="lnt">219
&lt;/span>&lt;span class="lnt">220
&lt;/span>&lt;span class="lnt">221
&lt;/span>&lt;span class="lnt">222
&lt;/span>&lt;span class="lnt">223
&lt;/span>&lt;span class="lnt">224
&lt;/span>&lt;span class="lnt">225
&lt;/span>&lt;span class="lnt">226
&lt;/span>&lt;span class="lnt">227
&lt;/span>&lt;span class="lnt">228
&lt;/span>&lt;span class="lnt">229
&lt;/span>&lt;span class="lnt">230
&lt;/span>&lt;span class="lnt">231
&lt;/span>&lt;span class="lnt">232
&lt;/span>&lt;span class="lnt">233
&lt;/span>&lt;span class="lnt">234
&lt;/span>&lt;span class="lnt">235
&lt;/span>&lt;span class="lnt">236
&lt;/span>&lt;span class="lnt">237
&lt;/span>&lt;span class="lnt">238
&lt;/span>&lt;span class="lnt">239
&lt;/span>&lt;span class="lnt">240
&lt;/span>&lt;span class="lnt">241
&lt;/span>&lt;span class="lnt">242
&lt;/span>&lt;span class="lnt">243
&lt;/span>&lt;span class="lnt">244
&lt;/span>&lt;span class="lnt">245
&lt;/span>&lt;span class="lnt">246
&lt;/span>&lt;span class="lnt">247
&lt;/span>&lt;span class="lnt">248
&lt;/span>&lt;span class="lnt">249
&lt;/span>&lt;span class="lnt">250
&lt;/span>&lt;span class="lnt">251
&lt;/span>&lt;span class="lnt">252
&lt;/span>&lt;span class="lnt">253
&lt;/span>&lt;span class="lnt">254
&lt;/span>&lt;span class="lnt">255
&lt;/span>&lt;span class="lnt">256
&lt;/span>&lt;span class="lnt">257
&lt;/span>&lt;span class="lnt">258
&lt;/span>&lt;span class="lnt">259
&lt;/span>&lt;span class="lnt">260
&lt;/span>&lt;span class="lnt">261
&lt;/span>&lt;span class="lnt">262
&lt;/span>&lt;span class="lnt">263
&lt;/span>&lt;span class="lnt">264
&lt;/span>&lt;span class="lnt">265
&lt;/span>&lt;span class="lnt">266
&lt;/span>&lt;span class="lnt">267
&lt;/span>&lt;span class="lnt">268
&lt;/span>&lt;span class="lnt">269
&lt;/span>&lt;span class="lnt">270
&lt;/span>&lt;span class="lnt">271
&lt;/span>&lt;span class="lnt">272
&lt;/span>&lt;span class="lnt">273
&lt;/span>&lt;span class="lnt">274
&lt;/span>&lt;span class="lnt">275
&lt;/span>&lt;span class="lnt">276
&lt;/span>&lt;span class="lnt">277
&lt;/span>&lt;span class="lnt">278
&lt;/span>&lt;span class="lnt">279
&lt;/span>&lt;span class="lnt">280
&lt;/span>&lt;span class="lnt">281
&lt;/span>&lt;span class="lnt">282
&lt;/span>&lt;span class="lnt">283
&lt;/span>&lt;span class="lnt">284
&lt;/span>&lt;span class="lnt">285
&lt;/span>&lt;span class="lnt">286
&lt;/span>&lt;span class="lnt">287
&lt;/span>&lt;span class="lnt">288
&lt;/span>&lt;span class="lnt">289
&lt;/span>&lt;span class="lnt">290
&lt;/span>&lt;span class="lnt">291
&lt;/span>&lt;span class="lnt">292
&lt;/span>&lt;span class="lnt">293
&lt;/span>&lt;span class="lnt">294
&lt;/span>&lt;span class="lnt">295
&lt;/span>&lt;span class="lnt">296
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="kn">import&lt;/span> &lt;span class="nn">freemarker.template.Configuration&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">freemarker.template.Template&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">freemarker.template.TemplateException&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">javax.activation.DataHandler&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">javax.activation.DataSource&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">javax.activation.FileDataSource&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">javax.mail.*&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">javax.mail.internet.*&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">java.io.File&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">java.io.IOException&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">java.io.StringWriter&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">java.io.UnsupportedEncodingException&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">java.util.Map&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">java.util.Properties&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="cm">/**
&lt;/span>&lt;span class="cm"> * @author itning
&lt;/span>&lt;span class="cm"> * @date 2019/6/25 15:58
&lt;/span>&lt;span class="cm"> */&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kd">class&lt;/span> &lt;span class="nc">EmailHelper&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="kd">static&lt;/span> &lt;span class="kd">final&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">CHECK_EMAIL_STR&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;@&amp;#34;&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="kd">final&lt;/span> &lt;span class="n">Configuration&lt;/span> &lt;span class="n">configuration&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="kd">final&lt;/span> &lt;span class="n">Builder&lt;/span> &lt;span class="n">builder&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="nf">EmailHelper&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">Builder&lt;/span> &lt;span class="n">builder&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="kd">throws&lt;/span> &lt;span class="n">IOException&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">builder&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">builder&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">configuration&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">Configuration&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">Configuration&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">VERSION_2_3_28&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">configuration&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setDirectoryForTemplateLoading&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="k">new&lt;/span> &lt;span class="n">File&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">builder&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">templateDir&lt;/span>&lt;span class="o">));&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">configuration&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setDefaultEncoding&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;UTF-8&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kd">static&lt;/span> &lt;span class="kd">class&lt;/span> &lt;span class="nc">Builder&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="cm">/**
&lt;/span>&lt;span class="cm"> * é‚®ä»¶å‘é€è€…è´¦æˆ·ï¼ˆå¿…é¡»è®¾ç½®ï¼‰
&lt;/span>&lt;span class="cm"> */&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">emailSenderUser&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="cm">/**
&lt;/span>&lt;span class="cm"> * é‚®ä»¶å‘é€è€…å¯†ç ï¼ˆå¿…é¡»è®¾ç½®ï¼‰
&lt;/span>&lt;span class="cm"> */&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">emailSenderPwd&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="cm">/**
&lt;/span>&lt;span class="cm"> * HTMLæ¨¡æ¿ç›®å½•ï¼ˆå¿…é¡»è®¾ç½®ï¼‰
&lt;/span>&lt;span class="cm"> */&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">templateDir&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="cm">/**
&lt;/span>&lt;span class="cm"> * æŠ„é€è€…
&lt;/span>&lt;span class="cm"> */&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">carbonCopyAddress&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="cm">/**
&lt;/span>&lt;span class="cm"> * SMTPæœåŠ¡å™¨åœ°å€
&lt;/span>&lt;span class="cm"> */&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">SMTPServer&lt;/span> &lt;span class="n">smtpServer&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="cm">/**
&lt;/span>&lt;span class="cm"> * è®¾ç½®å‘é€è€…é‚®ç®±ï¼ˆå¿…é¡»è®¾ç½®ï¼‰
&lt;/span>&lt;span class="cm"> *
&lt;/span>&lt;span class="cm"> * @param emailSenderUser å‘é€è€…é‚®ç®±
&lt;/span>&lt;span class="cm"> * @return this
&lt;/span>&lt;span class="cm"> */&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="n">Builder&lt;/span> &lt;span class="nf">setEmailSenderUser&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">String&lt;/span> &lt;span class="n">emailSenderUser&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">emailSenderUser&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">emailSenderUser&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="cm">/**
&lt;/span>&lt;span class="cm"> * è®¾ç½®å‘é€è€…é‚®ç®±å¯†ç ï¼ˆå¿…é¡»è®¾ç½®ï¼‰
&lt;/span>&lt;span class="cm"> *
&lt;/span>&lt;span class="cm"> * @param emailSenderPwd å‘é€è€…é‚®ç®±å¯†ç 
&lt;/span>&lt;span class="cm"> * @return this
&lt;/span>&lt;span class="cm"> */&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="n">Builder&lt;/span> &lt;span class="nf">setEmailSenderPwd&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">String&lt;/span> &lt;span class="n">emailSenderPwd&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">emailSenderPwd&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">emailSenderPwd&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="cm">/**
&lt;/span>&lt;span class="cm"> * è®¾ç½®æ¨¡æ¿ç›®å½•ï¼ˆå¿…é¡»è®¾ç½®ï¼‰
&lt;/span>&lt;span class="cm"> *
&lt;/span>&lt;span class="cm"> * @param templateDir æ¨¡æ¿ç›®å½•
&lt;/span>&lt;span class="cm"> * @return this
&lt;/span>&lt;span class="cm"> */&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="n">Builder&lt;/span> &lt;span class="nf">setTemplateDir&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">String&lt;/span> &lt;span class="n">templateDir&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">templateDir&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">templateDir&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="cm">/**
&lt;/span>&lt;span class="cm"> * è®¾ç½®æŠ„é€è€…ï¼Œä¸è®¾ç½®åˆ™æ²¡æœ‰æŠ„é€è€…
&lt;/span>&lt;span class="cm"> *
&lt;/span>&lt;span class="cm"> * @param carbonCopyAddress æŠ„é€è€…é‚®ç®±
&lt;/span>&lt;span class="cm"> * @return this
&lt;/span>&lt;span class="cm"> */&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="n">Builder&lt;/span> &lt;span class="nf">setCarbonCopy&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">String&lt;/span> &lt;span class="n">carbonCopyAddress&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">carbonCopyAddress&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">carbonCopyAddress&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="cm">/**
&lt;/span>&lt;span class="cm"> * è®¾ç½®SMTPæœåŠ¡å™¨åœ°å€
&lt;/span>&lt;span class="cm"> *
&lt;/span>&lt;span class="cm"> * @param smtpServer SMTPæœåŠ¡å™¨åœ°å€
&lt;/span>&lt;span class="cm"> * @return this
&lt;/span>&lt;span class="cm"> */&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="n">Builder&lt;/span> &lt;span class="nf">setSmtpServer&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">SMTPServer&lt;/span> &lt;span class="n">smtpServer&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">smtpServer&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">smtpServer&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="cm">/**
&lt;/span>&lt;span class="cm"> * æž„å»º
&lt;/span>&lt;span class="cm"> *
&lt;/span>&lt;span class="cm"> * @return EmailHelper
&lt;/span>&lt;span class="cm"> * @throws IOException IOException
&lt;/span>&lt;span class="cm"> */&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="n">EmailHelper&lt;/span> &lt;span class="nf">build&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="kd">throws&lt;/span> &lt;span class="n">IOException&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">EmailHelper&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="cm">/**
&lt;/span>&lt;span class="cm"> * SMTPæœåŠ¡å™¨åœ°å€
&lt;/span>&lt;span class="cm"> */&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kd">enum&lt;/span> &lt;span class="n">SMTPServer&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="cm">/**
&lt;/span>&lt;span class="cm"> * QQå‘é€é‚®ä»¶çš„æœåŠ¡å™¨
&lt;/span>&lt;span class="cm"> */&lt;/span>
&lt;span class="n">QQ&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;smtp.qq.com&amp;#34;&lt;/span>&lt;span class="o">),&lt;/span>
&lt;span class="cm">/**
&lt;/span>&lt;span class="cm"> * é˜¿é‡Œäº‘é‚®ç®±å‘é€é‚®ä»¶çš„æœåŠ¡å™¨
&lt;/span>&lt;span class="cm"> */&lt;/span>
&lt;span class="n">ALIYUN&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;smtp.mxhichina.com&amp;#34;&lt;/span>&lt;span class="o">),&lt;/span>
&lt;span class="cm">/**
&lt;/span>&lt;span class="cm"> * ç½‘æ˜“é‚®ç®±å‘é€é‚®ä»¶çš„æœåŠ¡å™¨
&lt;/span>&lt;span class="cm"> */&lt;/span>
&lt;span class="n">NTES&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;smtp.163.com&amp;#34;&lt;/span>&lt;span class="o">),&lt;/span>
&lt;span class="cm">/**
&lt;/span>&lt;span class="cm"> * googleé‚®ç®±å‘é€é‚®ä»¶çš„æœåŠ¡å™¨
&lt;/span>&lt;span class="cm"> */&lt;/span>
&lt;span class="n">GMAIL&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;smtp.gmail.com&amp;#34;&lt;/span>&lt;span class="o">),&lt;/span>
&lt;span class="cm">/**
&lt;/span>&lt;span class="cm"> * æ–°æµªé‚®ç®±å‘é€é‚®ä»¶çš„æœåŠ¡å™¨
&lt;/span>&lt;span class="cm"> */&lt;/span>
&lt;span class="n">SINA&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;smtp.sina.com&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">server&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="n">SMTPServer&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">String&lt;/span> &lt;span class="n">server&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">server&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">server&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="cm">/**
&lt;/span>&lt;span class="cm"> * 1ã€åˆ›å»ºè¿žæŽ¥å¯¹è±¡
&lt;/span>&lt;span class="cm"> * è®¾ç½®é‚®ä»¶å‘é€çš„åè®®
&lt;/span>&lt;span class="cm"> * è®¾ç½®å‘é€é‚®ä»¶çš„æœåŠ¡å™¨
&lt;/span>&lt;span class="cm"> * å¡«å†™è‡ªå·±çš„å¯†é’¥
&lt;/span>&lt;span class="cm"> * 2ã€åˆ›å»ºé‚®ä»¶å¯¹è±¡
&lt;/span>&lt;span class="cm"> * è®¾ç½®å‘ä»¶äºº
&lt;/span>&lt;span class="cm"> * è®¾ç½®æ”¶ä»¶äºº
&lt;/span>&lt;span class="cm"> * è®¾ç½®æŠ„é€è€…
&lt;/span>&lt;span class="cm"> * è®¾ç½®é‚®ä»¶ä¸»é¢˜
&lt;/span>&lt;span class="cm"> * è®¾ç½®é‚®ä»¶å†…å®¹
&lt;/span>&lt;span class="cm"> * 3ã€å‘é€é‚®ä»¶
&lt;/span>&lt;span class="cm"> *
&lt;/span>&lt;span class="cm"> * @param to é‚®ä»¶æŽ¥æ”¶è€…é‚®ç®±
&lt;/span>&lt;span class="cm"> * @param subject ä¸»é¢˜
&lt;/span>&lt;span class="cm"> * @param content å†…å®¹
&lt;/span>&lt;span class="cm"> */&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">sendEmail&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">String&lt;/span> &lt;span class="n">to&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">subject&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">content&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="kd">throws&lt;/span> &lt;span class="n">MessagingException&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="o">(!&lt;/span>&lt;span class="n">to&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">contains&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">CHECK_EMAIL_STR&lt;/span>&lt;span class="o">))&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="k">throw&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">IllegalArgumentException&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;æŽ¥æ”¶è€…é‚®ç®±éžæ³•,è¯·æ£€æŸ¥!&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="n">Message&lt;/span> &lt;span class="n">message&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">getMessage&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="c1">//2.1è®¾ç½®å‘ä»¶äºº
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="n">message&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setFrom&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="k">new&lt;/span> &lt;span class="n">InternetAddress&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">builder&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">emailSenderUser&lt;/span>&lt;span class="o">));&lt;/span>
&lt;span class="c1">//2.2è®¾ç½®æ”¶ä»¶äºº
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="n">message&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setRecipient&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">MimeMessage&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">RecipientType&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">TO&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">InternetAddress&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">to&lt;/span>&lt;span class="o">));&lt;/span>
&lt;span class="c1">//2.3è®¾ç½®æŠ„é€è€…ï¼ˆPS:æ²¡æœ‰è¿™ä¸€æ¡ç½‘æ˜“ä¼šè®¤ä¸ºè¿™æ˜¯ä¸€æ¡åžƒåœ¾çŸ­ä¿¡ï¼Œè€Œå‘ä¸å‡ºåŽ»ï¼‰
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">builder&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">carbonCopyAddress&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">message&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setRecipient&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">MimeMessage&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">RecipientType&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">CC&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">InternetAddress&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">builder&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">carbonCopyAddress&lt;/span>&lt;span class="o">));&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="c1">//2.4è®¾ç½®é‚®ä»¶çš„ä¸»é¢˜
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="n">message&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setSubject&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">subject&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="c1">//2.5è®¾ç½®é‚®ä»¶çš„å†…å®¹
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="n">message&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setContent&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">content&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="s">&amp;#34;text/html;charset=utf-8&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="c1">// 3ã€å‘é€é‚®ä»¶
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="n">Transport&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">send&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">message&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="cm">/**
&lt;/span>&lt;span class="cm"> * å‘é€é‚®ä»¶å¸¦é™„ä»¶
&lt;/span>&lt;span class="cm"> *
&lt;/span>&lt;span class="cm"> * @param to é‚®ä»¶æŽ¥æ”¶è€…é‚®ç®±
&lt;/span>&lt;span class="cm"> * @param subject ä¸»é¢˜
&lt;/span>&lt;span class="cm"> * @param content å†…å®¹
&lt;/span>&lt;span class="cm"> */&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">sendEmail&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">String&lt;/span> &lt;span class="n">to&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">subject&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">content&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">File&lt;/span> &lt;span class="n">annexFile&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="kd">throws&lt;/span> &lt;span class="n">MessagingException&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">UnsupportedEncodingException&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="o">(!&lt;/span>&lt;span class="n">to&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">contains&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">CHECK_EMAIL_STR&lt;/span>&lt;span class="o">))&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="k">throw&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">IllegalArgumentException&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;æŽ¥æ”¶è€…é‚®ç®±éžæ³•,è¯·æ£€æŸ¥!&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="n">Message&lt;/span> &lt;span class="n">message&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">getMessage&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="c1">// å‘ä»¶äºº
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="n">InternetAddress&lt;/span> &lt;span class="n">from&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">InternetAddress&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">builder&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">emailSenderUser&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">message&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setFrom&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">from&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="c1">// æ”¶ä»¶äºº
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="n">InternetAddress&lt;/span> &lt;span class="n">re&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">InternetAddress&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">to&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">message&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setRecipient&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">Message&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">RecipientType&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">TO&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">re&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">builder&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">carbonCopyAddress&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">message&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setRecipient&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">MimeMessage&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">RecipientType&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">CC&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">InternetAddress&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">builder&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">carbonCopyAddress&lt;/span>&lt;span class="o">));&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="c1">// é‚®ä»¶ä¸»é¢˜
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="n">message&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setSubject&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">subject&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">Multipart&lt;/span> &lt;span class="n">multipart&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">MimeMultipart&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="c1">//æ·»åŠ é‚®ä»¶æ­£æ–‡
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="n">BodyPart&lt;/span> &lt;span class="n">contentPart&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">MimeBodyPart&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="n">contentPart&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setContent&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">content&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="s">&amp;#34;text/html;charset=UTF-8&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">multipart&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">addBodyPart&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">contentPart&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="c1">//æ·»åŠ é‚®ä»¶é™„ä»¶
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="n">BodyPart&lt;/span> &lt;span class="n">attachmentBodyPart&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">MimeBodyPart&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="n">DataSource&lt;/span> &lt;span class="n">source&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">FileDataSource&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">annexFile&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">attachmentBodyPart&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setDataHandler&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="k">new&lt;/span> &lt;span class="n">DataHandler&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">source&lt;/span>&lt;span class="o">));&lt;/span>
&lt;span class="c1">//MimeUtility.encodeWordå¯ä»¥é¿å…æ–‡ä»¶åä¹±ç 
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="n">attachmentBodyPart&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setFileName&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">MimeUtility&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">encodeWord&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">annexFile&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getName&lt;/span>&lt;span class="o">()));&lt;/span>
&lt;span class="n">multipart&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">addBodyPart&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">attachmentBodyPart&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">message&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setContent&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">multipart&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">Transport&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">send&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">message&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="cm">/**
&lt;/span>&lt;span class="cm"> * å‘é€HTMLæ¨¡æ¿é‚®ä»¶
&lt;/span>&lt;span class="cm"> *
&lt;/span>&lt;span class="cm"> * @param templateName æ¨¡æ¿å
&lt;/span>&lt;span class="cm"> * @param dataMap æ•°æ®
&lt;/span>&lt;span class="cm"> * @param to é‚®ä»¶æŽ¥æ”¶è€…é‚®ç®±
&lt;/span>&lt;span class="cm"> * @param subject ä¸»é¢˜
&lt;/span>&lt;span class="cm"> * @throws TemplateException if an exception occurs during template processing
&lt;/span>&lt;span class="cm"> * @throws IOException if an I/O exception occurs during writing to the writer.
&lt;/span>&lt;span class="cm"> * @throws MessagingException é‚®ä»¶å‘é€å¼‚å¸¸
&lt;/span>&lt;span class="cm"> */&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">sendHtmlEmail&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">String&lt;/span> &lt;span class="n">to&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">subject&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">templateName&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">Map&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">Object&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">dataMap&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="kd">throws&lt;/span> &lt;span class="n">IOException&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">TemplateException&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">MessagingException&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="c1">//èŽ·å–æ¨¡æ¿
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="n">Template&lt;/span> &lt;span class="n">template&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">configuration&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getTemplate&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">templateName&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">StringWriter&lt;/span> &lt;span class="n">stringWriter&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">StringWriter&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="c1">//ç”ŸæˆHTML
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="n">template&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">process&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">dataMap&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">stringWriter&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">stringWriter&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">flush&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="n">sendEmail&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">to&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">subject&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">stringWriter&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">toString&lt;/span>&lt;span class="o">());&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="cm">/**
&lt;/span>&lt;span class="cm"> * å‘é€HTMLæ¨¡æ¿é‚®ä»¶å¸¦é™„ä»¶
&lt;/span>&lt;span class="cm"> *
&lt;/span>&lt;span class="cm"> * @param templateName æ¨¡æ¿å
&lt;/span>&lt;span class="cm"> * @param dataMap æ•°æ®
&lt;/span>&lt;span class="cm"> * @param to é‚®ä»¶æŽ¥æ”¶è€…é‚®ç®±
&lt;/span>&lt;span class="cm"> * @param subject ä¸»é¢˜
&lt;/span>&lt;span class="cm"> * @throws TemplateException if an exception occurs during template processing
&lt;/span>&lt;span class="cm"> * @throws IOException if an I/O exception occurs during writing to the writer.
&lt;/span>&lt;span class="cm"> * @throws MessagingException é‚®ä»¶å‘é€å¼‚å¸¸
&lt;/span>&lt;span class="cm"> */&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">sendHtmlEmail&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">String&lt;/span> &lt;span class="n">to&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">subject&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">templateName&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">Map&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">Object&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">dataMap&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">File&lt;/span> &lt;span class="n">annexFile&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="kd">throws&lt;/span> &lt;span class="n">IOException&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">TemplateException&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">MessagingException&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="c1">//èŽ·å–æ¨¡æ¿
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="n">Template&lt;/span> &lt;span class="n">template&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">configuration&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getTemplate&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">templateName&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">StringWriter&lt;/span> &lt;span class="n">stringWriter&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">StringWriter&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="c1">//ç”ŸæˆHTML
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="n">template&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">process&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">dataMap&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">stringWriter&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">stringWriter&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">flush&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="n">sendEmail&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">to&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">subject&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">stringWriter&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">toString&lt;/span>&lt;span class="o">(),&lt;/span> &lt;span class="n">annexFile&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">Message&lt;/span> &lt;span class="nf">getMessage&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="c1">//1ã€åˆ›å»ºè¿žæŽ¥å¯¹è±¡
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="n">Properties&lt;/span> &lt;span class="n">props&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">Properties&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="c1">//1.1è®¾ç½®é‚®ä»¶å‘é€çš„åè®®
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="n">props&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">put&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;mail.transport.protocol&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="s">&amp;#34;smtp&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="c1">//1.2è®¾ç½®å‘é€é‚®ä»¶çš„æœåŠ¡å™¨
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="n">props&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">put&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;mail.smtp.host&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">builder&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">smtpServer&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">server&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="c1">//1.3éœ€è¦ç»è¿‡æŽˆæƒï¼Œä¹Ÿå°±æ˜¯æœ‰æˆ·åå’Œå¯†ç çš„æ ¡éªŒï¼Œè¿™æ ·æ‰èƒ½é€šè¿‡éªŒè¯ï¼ˆä¸€å®šè¦æœ‰è¿™ä¸€æ¡ï¼‰
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="n">props&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">put&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;mail.smtp.auth&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="s">&amp;#34;true&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="c1">//1.4ä¸‹é¢ä¸€ä¸²æ˜¯å‘é€é‚®ä»¶ç”¨465ç«¯å£ï¼Œå¦‚æžœä¸å†™å°±æ˜¯ä»¥25ç«¯å£å‘é€ï¼Œé˜¿é‡Œäº‘å·²ç»å…³é—­äº†25ç«¯å£
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="n">props&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setProperty&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;mail.smtp.socketFactory.class&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="s">&amp;#34;javax.net.ssl.SSLSocketFactory&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">props&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setProperty&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;mail.smtp.socketFactory.fallback&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="s">&amp;#34;false&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">props&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setProperty&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;mail.smtp.port&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="s">&amp;#34;465&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">props&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setProperty&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;mail.smtp.socketFactory.port&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="s">&amp;#34;465&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="c1">//1.5è®¤è¯ä¿¡æ¯
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="n">Session&lt;/span> &lt;span class="n">session&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Session&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getInstance&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">props&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">Authenticator&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="nd">@Override&lt;/span>
&lt;span class="kd">protected&lt;/span> &lt;span class="n">PasswordAuthentication&lt;/span> &lt;span class="nf">getPasswordAuthentication&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">PasswordAuthentication&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">builder&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">emailSenderUser&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">builder&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">emailSenderPwd&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="o">});&lt;/span>
&lt;span class="c1">//2ã€åˆ›å»ºé‚®ä»¶å¯¹è±¡
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">MimeMessage&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">session&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="å‘é€é‚®ä»¶">å‘é€é‚®ä»¶&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="cm">/**
&lt;/span>&lt;span class="cm"> * @author itning
&lt;/span>&lt;span class="cm"> * @date 2019/6/25 14:53
&lt;/span>&lt;span class="cm"> */&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kd">class&lt;/span> &lt;span class="nc">Test&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kd">static&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="o">[]&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="kd">throws&lt;/span> &lt;span class="n">IOException&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">TemplateException&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">MessagingException&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">EmailHelper&lt;/span> &lt;span class="n">emailHelper&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">EmailHelper&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">Builder&lt;/span>&lt;span class="o">()&lt;/span>
&lt;span class="c1">//å‘é€è€…é‚®ç®±
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="o">.&lt;/span>&lt;span class="na">setEmailSenderUser&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;xxx@qq.com&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="c1">//å¯†ç 
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="o">.&lt;/span>&lt;span class="na">setEmailSenderPwd&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="c1">//HTMLæ¨¡æ¿ç›®å½•
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="o">.&lt;/span>&lt;span class="na">setTemplateDir&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;G:\\ProjectData\\IdeaProjects\\Test\\src\\main\\resources&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="c1">//æŠ„é€é‚®ç®±
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="o">.&lt;/span>&lt;span class="na">setCarbonCopy&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="kc">null&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="c1">//å‘ä¿¡é‚®ç®±æœåŠ¡å™¨
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="o">.&lt;/span>&lt;span class="na">setSmtpServer&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">EmailHelper&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">SMTPServer&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">QQ&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="o">.&lt;/span>&lt;span class="na">build&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="n">Map&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">Object&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">dataMap&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Collections&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">singletonMap&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="s">&amp;#34;æ¨¡æ¿ç”Ÿæˆçš„å­—ç¬¦ä¸²&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">emailHelper&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">sendHtmlEmail&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;itning@itning.top&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="s">&amp;#34;è¿™æ˜¯ä¸»é¢˜&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="s">&amp;#34;temp.ftl&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">dataMap&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>
&lt;p>å‘é€æ™®é€šé‚®ä»¶ï¼š&lt;code>sendEmail(String to, String subject, String content)&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å‘é€æ™®é€šå¸¦é™„ä»¶é‚®ä»¶ï¼š&lt;code>sendEmail(String to, String subject, String content, File annexFile)&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å‘é€HTMLé‚®ä»¶ï¼š&lt;code>sendHtmlEmail(String to, String subject, String templateName, Map&amp;lt;String, Object&amp;gt; dataMap)&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å‘é€HTMLå¸¦é™„ä»¶é‚®ä»¶ï¼š&lt;code>sendHtmlEmail(String to, String subject, String templateName, Map&amp;lt;String, Object&amp;gt; dataMap, File annexFile)&lt;/code>&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>æ¨¡æ¿å†…å®¹ï¼š&lt;code>temp.ftl&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="cp">&amp;lt;!DOCTYPE html&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">html&lt;/span> &lt;span class="na">lang&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;zh-CN&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">head&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">charset&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;UTF-8&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>æ¨¡æ¿&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">head&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">body&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
å±•ç¤ºHTMLé‚®ä»¶èƒ½åŠ›
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">a&lt;/span> &lt;span class="na">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;https://blog.itning.top&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>è¶…é“¾æŽ¥&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">a&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">img&lt;/span> &lt;span class="na">src&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;https://avatars1.githubusercontent.com/u/19759891?s=460&amp;amp;v=4&amp;#34;&lt;/span> &lt;span class="na">alt&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;å›¾ç‰‡&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">br&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
ä»¥ä¸‹æ–‡å­—æ¨¡æ¿ç”Ÿæˆï¼š
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">h1&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>${name}&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">h1&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">body&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">html&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;a href="http://freemarker.foofun.cn/">FreeMarker æ¨¡æ¿ä¸­æ–‡å®˜æ–¹å‚è€ƒæ‰‹å†Œ&lt;/a>&lt;/p>
&lt;p>&lt;strong>å·²æŽ¥æ”¶ï¼š&lt;/strong>&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-06-25-%E9%82%AE%E4%BB%B6%E5%8F%91%E9%80%81/email.png" alt="email">&lt;/p></description></item><item><title>SpringBeanç”Ÿå‘½å‘¨æœŸæ–¹æ³•</title><link>https://blog.itning.top/post/2019/06/22/springbean%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%96%B9%E6%B3%95/</link><pubDate>Sat, 22 Jun 2019 10:29:01 +0800</pubDate><guid>https://blog.itning.top/post/2019/06/22/springbean%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%96%B9%E6%B3%95/</guid><description>&lt;p>å¯¹Spring Bean ç”Ÿå‘½å‘¨æœŸæ–¹æ³•çš„æ€»ç»“&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="nd">@Bean&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">initMethod&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;initMethod&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">destroyMethod&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;destroyMethod&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="n">BeanTest&lt;/span> &lt;span class="nf">beanTest&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">BeanTest&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;span class="lnt">74
&lt;/span>&lt;span class="lnt">75
&lt;/span>&lt;span class="lnt">76
&lt;/span>&lt;span class="lnt">77
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="kn">import&lt;/span> &lt;span class="nn">org.springframework.beans.BeansException&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">org.springframework.beans.factory.DisposableBean&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">org.springframework.beans.factory.InitializingBean&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">org.springframework.beans.factory.config.BeanPostProcessor&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">org.springframework.beans.factory.support.DefaultListableBeanFactory&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">org.springframework.context.ApplicationContext&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">org.springframework.context.ApplicationContextAware&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">javax.annotation.PostConstruct&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">javax.annotation.PreDestroy&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="cm">/**
&lt;/span>&lt;span class="cm"> * @author itning
&lt;/span>&lt;span class="cm"> * @date 2019/6/22 10:04
&lt;/span>&lt;span class="cm"> */&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kd">class&lt;/span> &lt;span class="nc">BeanTest&lt;/span> &lt;span class="kd">implements&lt;/span> &lt;span class="n">InitializingBean&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">DisposableBean&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">BeanPostProcessor&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">ApplicationContextAware&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="nf">BeanTest&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">System&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">out&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">println&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;1.constructor&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="nd">@PostConstruct&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">postConstruct&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">System&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">out&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">println&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;2.PostConstruct&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="nd">@Override&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">afterPropertiesSet&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="kd">throws&lt;/span> &lt;span class="n">Exception&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">System&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">out&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">println&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;3.InitializingBean:afterPropertiesSet&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">initMethod&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">System&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">out&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">println&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;4.initMethod&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="nd">@PreDestroy&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">annDestroy&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">System&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">out&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">println&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;1.PreDestroy&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="nd">@Override&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">destroy&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="kd">throws&lt;/span> &lt;span class="n">Exception&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">System&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">out&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">println&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;2.DisposableBean:destroy&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">destroyMethod&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">System&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">out&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">println&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;3.destroyMethod&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="cm">/*@Override
&lt;/span>&lt;span class="cm"> public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException {
&lt;/span>&lt;span class="cm"> System.out.println(&amp;#34;postProcessBeforeInitialization:&amp;#34; + beanName + &amp;#34; &amp;#34; + bean);
&lt;/span>&lt;span class="cm"> return bean;
&lt;/span>&lt;span class="cm"> }
&lt;/span>&lt;span class="cm">
&lt;/span>&lt;span class="cm"> @Override
&lt;/span>&lt;span class="cm"> public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException {
&lt;/span>&lt;span class="cm"> System.out.println(&amp;#34;postProcessAfterInitialization:&amp;#34; + beanName + &amp;#34; &amp;#34; + bean);
&lt;/span>&lt;span class="cm"> return bean;
&lt;/span>&lt;span class="cm"> }*/&lt;/span>
&lt;span class="nd">@Override&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">setApplicationContext&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">ApplicationContext&lt;/span> &lt;span class="n">applicationContext&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="kd">throws&lt;/span> &lt;span class="n">BeansException&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">AnnotationConfigServletWebServerApplicationContext&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">AnnotationConfigServletWebServerApplicationContext&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="n">applicationContext&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="n">DefaultListableBeanFactory&lt;/span> &lt;span class="n">beanFactory&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">DefaultListableBeanFactory&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getBeanFactory&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="k">new&lt;/span> &lt;span class="n">Thread&lt;/span>&lt;span class="o">(()&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="k">try&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">Thread&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">sleep&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">5000&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span> &lt;span class="k">catch&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">InterruptedException&lt;/span> &lt;span class="n">e&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">printStackTrace&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="n">beanFactory&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">removeBeanDefinition&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;beanTest&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}).&lt;/span>&lt;span class="na">start&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åˆå§‹åŒ–ï¼š&lt;/p>
&lt;ol>
&lt;li>constructor&lt;/li>
&lt;li>PostConstruct&lt;/li>
&lt;li>InitializingBean:afterPropertiesSet&lt;/li>
&lt;li>initMethod&lt;/li>
&lt;/ol>
&lt;p>é”€æ¯ï¼š&lt;/p>
&lt;ol>
&lt;li>PreDestroy&lt;/li>
&lt;li>DisposableBean:destroy&lt;/li>
&lt;li>destroyMethod&lt;/li>
&lt;/ol></description></item><item><title>åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆ</title><link>https://blog.itning.top/post/2019/05/12/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/</link><pubDate>Sun, 12 May 2019 20:29:53 +0800</pubDate><guid>https://blog.itning.top/post/2019/05/12/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/</guid><description>&lt;h2 id="ä¸¤é˜¶æ®µæäº¤æ–¹æ¡ˆxaæ–¹æ¡ˆ">ä¸¤é˜¶æ®µæäº¤æ–¹æ¡ˆ/XAæ–¹æ¡ˆ&lt;/h2>
&lt;p>ä¹Ÿå«åšä¸¤é˜¶æ®µæäº¤äº‹åŠ¡æ–¹æ¡ˆï¼Œè¿™ä¸ªä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚è¯´å’±ä»¬å…¬å¸é‡Œç»å¸¸tbæ˜¯å§ï¼ˆå°±æ˜¯å›¢å»ºï¼‰ï¼Œç„¶åŽä¸€èˆ¬ä¼šæœ‰ä¸ªtbä¸»å¸­ï¼ˆå°±æ˜¯è´Ÿè´£ç»„ç»‡å›¢å»ºçš„é‚£ä¸ªäººï¼‰ã€‚&lt;/p>
&lt;p>tbï¼Œteam buildingï¼Œå›¢å»º&lt;/p>
&lt;p>ç¬¬ä¸€ä¸ªé˜¶æ®µï¼Œä¸€èˆ¬tbä¸»å¸­ä¼šæå‰ä¸€å‘¨é—®ä¸€ä¸‹å›¢é˜Ÿé‡Œçš„æ¯ä¸ªäººï¼Œè¯´ï¼Œå¤§å®¶ä¼™ï¼Œä¸‹å‘¨å…­æˆ‘ä»¬åŽ»æ»‘é›ª+çƒ§çƒ¤ï¼ŒåŽ»å—ï¼Ÿè¿™ä¸ªæ—¶å€™tbä¸»å¸­å¼€å§‹ç­‰å¾…æ¯ä¸ªäººçš„å›žç­”ï¼Œå¦‚æžœæ‰€æœ‰äººéƒ½è¯´okï¼Œé‚£ä¹ˆå°±å¯ä»¥å†³å®šä¸€èµ·åŽ»è¿™æ¬¡tbã€‚å¦‚æžœè¿™ä¸ªé˜¶æ®µé‡Œï¼Œä»»ä½•ä¸€ä¸ªäººå›žç­”è¯´ï¼Œæˆ‘æœ‰äº‹ä¸åŽ»äº†ï¼Œé‚£ä¹ˆtbä¸»å¸­å°±ä¼šå–æ¶ˆè¿™æ¬¡æ´»åŠ¨ã€‚&lt;/p>
&lt;p>ç¬¬äºŒä¸ªé˜¶æ®µï¼Œé‚£ä¸‹å‘¨å…­å¤§å®¶å°±ä¸€èµ·åŽ»æ»‘é›ª+çƒ§çƒ¤äº†&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-05-12-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/a.png" alt="XA">&lt;/p>
&lt;p>æ‰€ä»¥è¿™ä¸ªå°±æ˜¯æ‰€è°“çš„XAäº‹åŠ¡ï¼Œä¸¤é˜¶æ®µæäº¤ï¼Œæœ‰ä¸€ä¸ªäº‹åŠ¡ç®¡ç†å™¨çš„æ¦‚å¿µï¼Œè´Ÿè´£åè°ƒå¤šä¸ªæ•°æ®åº“ï¼ˆèµ„æºç®¡ç†å™¨ï¼‰çš„äº‹åŠ¡ï¼Œäº‹åŠ¡ç®¡ç†å™¨å…ˆé—®é—®å„ä¸ªæ•°æ®åº“ä½ å‡†å¤‡å¥½äº†å—ï¼Ÿå¦‚æžœæ¯ä¸ªæ•°æ®åº“éƒ½å›žå¤okï¼Œé‚£ä¹ˆå°±æ­£å¼æäº¤äº‹åŠ¡ï¼Œåœ¨å„ä¸ªæ•°æ®åº“ä¸Šæ‰§è¡Œæ“ä½œï¼›å¦‚æžœä»»ä½•ä¸€ä¸ªæ•°æ®åº“å›žç­”ä¸okï¼Œé‚£ä¹ˆå°±å›žæ»šäº‹åŠ¡ã€‚&lt;/p>
&lt;p>è¿™ç§åˆ†å¸ƒå¼äº‹åŠ¡æ–¹æ¡ˆï¼Œæ¯”è¾ƒé€‚åˆå•å—åº”ç”¨é‡Œï¼Œè·¨å¤šä¸ªåº“çš„åˆ†å¸ƒå¼äº‹åŠ¡ï¼Œè€Œä¸”å› ä¸ºä¸¥é‡ä¾èµ–äºŽæ•°æ®åº“å±‚é¢æ¥æžå®šå¤æ‚çš„äº‹åŠ¡ï¼Œæ•ˆçŽ‡å¾ˆä½Žï¼Œç»å¯¹ä¸é€‚åˆé«˜å¹¶å‘çš„åœºæ™¯ã€‚å¦‚æžœè¦çŽ©å„¿ï¼Œé‚£ä¹ˆåŸºäºŽspring + JTAå°±å¯ä»¥æžå®šï¼Œè‡ªå·±éšä¾¿æœä¸ªdemoçœ‹çœ‹å°±çŸ¥é“äº†ã€‚&lt;/p>
&lt;p>è¿™ä¸ªæ–¹æ¡ˆï¼Œæˆ‘ä»¬å¾ˆå°‘ç”¨ï¼Œä¸€èˆ¬æ¥è¯´æŸä¸ªç³»ç»Ÿå†…éƒ¨å¦‚æžœå‡ºçŽ°è·¨å¤šä¸ªåº“çš„è¿™ä¹ˆä¸€ä¸ªæ“ä½œï¼Œæ˜¯ä¸åˆè§„çš„ã€‚æˆ‘å¯ä»¥ç»™å¤§å®¶ä»‹ç»ä¸€ä¸‹ï¼Œ çŽ°åœ¨å¾®æœåŠ¡ï¼Œä¸€ä¸ªå¤§çš„ç³»ç»Ÿåˆ†æˆå‡ ç™¾ä¸ªæœåŠ¡ï¼Œå‡ åä¸ªæœåŠ¡ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬çš„è§„å®šå’Œè§„èŒƒï¼Œæ˜¯è¦æ±‚è¯´æ¯ä¸ªæœåŠ¡åªèƒ½æ“ä½œè‡ªå·±å¯¹åº”çš„ä¸€ä¸ªæ•°æ®åº“ã€‚&lt;/p>
&lt;p>å¦‚æžœä½ è¦æ“ä½œåˆ«çš„æœåŠ¡å¯¹åº”çš„åº“ï¼Œä¸å…è®¸ç›´è¿žåˆ«çš„æœåŠ¡çš„åº“ï¼Œè¿åå¾®æœåŠ¡æž¶æž„çš„è§„èŒƒï¼Œä½ éšä¾¿äº¤å‰èƒ¡ä¹±è®¿é—®ï¼Œå‡ ç™¾ä¸ªæœåŠ¡çš„è¯ï¼Œå…¨ä½“ä¹±å¥—ï¼Œè¿™æ ·çš„ä¸€å¥—æœåŠ¡æ˜¯æ²¡æ³•ç®¡ç†çš„ï¼Œæ²¡æ³•æ²»ç†çš„ï¼Œç»å¸¸æ•°æ®è¢«åˆ«äººæ”¹é”™ï¼Œè‡ªå·±çš„åº“è¢«åˆ«äººå†™æŒ‚ã€‚&lt;/p>
&lt;p>å¦‚æžœä½ è¦æ“ä½œåˆ«äººçš„æœåŠ¡çš„åº“ï¼Œä½ å¿…é¡»æ˜¯é€šè¿‡è°ƒç”¨åˆ«çš„æœåŠ¡çš„æŽ¥å£æ¥å®žçŽ°ï¼Œç»å¯¹ä¸å…è®¸ä½ äº¤å‰è®¿é—®åˆ«äººçš„æ•°æ®åº“ï¼&lt;/p>
&lt;h2 id="tccæ–¹æ¡ˆ">TCCæ–¹æ¡ˆ&lt;/h2>
&lt;p>TCCçš„å…¨ç¨‹æ˜¯ï¼šTryã€Confirmã€Cancelã€‚&lt;/p>
&lt;p>è¿™ä¸ªå…¶å®žæ˜¯ç”¨åˆ°äº†è¡¥å¿çš„æ¦‚å¿µï¼Œåˆ†ä¸ºäº†ä¸‰ä¸ªé˜¶æ®µï¼š&lt;/p>
&lt;p>1ï¼‰Tryé˜¶æ®µï¼šè¿™ä¸ªé˜¶æ®µè¯´çš„æ˜¯å¯¹å„ä¸ªæœåŠ¡çš„èµ„æºåšæ£€æµ‹ä»¥åŠå¯¹èµ„æºè¿›è¡Œé”å®šæˆ–è€…é¢„ç•™&lt;/p>
&lt;p>2ï¼‰Confirmé˜¶æ®µï¼šè¿™ä¸ªé˜¶æ®µè¯´çš„æ˜¯åœ¨å„ä¸ªæœåŠ¡ä¸­æ‰§è¡Œå®žé™…çš„æ“ä½œ&lt;/p>
&lt;p>3ï¼‰Cancelé˜¶æ®µï¼šå¦‚æžœä»»ä½•ä¸€ä¸ªæœåŠ¡çš„ä¸šåŠ¡æ–¹æ³•æ‰§è¡Œå‡ºé”™ï¼Œé‚£ä¹ˆè¿™é‡Œå°±éœ€è¦è¿›è¡Œè¡¥å¿ï¼Œå°±æ˜¯æ‰§è¡Œå·²ç»æ‰§è¡ŒæˆåŠŸçš„ä¸šåŠ¡é€»è¾‘çš„å›žæ»šæ“ä½œ&lt;/p>
&lt;p>ç»™å¤§å®¶ä¸¾ä¸ªä¾‹å­å§ï¼Œæ¯”å¦‚è¯´è·¨é“¶è¡Œè½¬è´¦çš„æ—¶å€™ï¼Œè¦æ¶‰åŠåˆ°ä¸¤ä¸ªé“¶è¡Œçš„åˆ†å¸ƒå¼äº‹åŠ¡ï¼Œå¦‚æžœç”¨TCCæ–¹æ¡ˆæ¥å®žçŽ°ï¼Œæ€è·¯æ˜¯è¿™æ ·çš„ï¼š&lt;/p>
&lt;p>1ï¼‰Tryé˜¶æ®µï¼šå…ˆæŠŠä¸¤ä¸ªé“¶è¡Œè´¦æˆ·ä¸­çš„èµ„é‡‘ç»™å®ƒå†»ç»“ä½å°±ä¸è®©æ“ä½œäº†&lt;/p>
&lt;p>2ï¼‰Confirmé˜¶æ®µï¼šæ‰§è¡Œå®žé™…çš„è½¬è´¦æ“ä½œï¼ŒAé“¶è¡Œè´¦æˆ·çš„èµ„é‡‘æ‰£å‡ï¼ŒBé“¶è¡Œè´¦æˆ·çš„èµ„é‡‘å¢žåŠ &lt;/p>
&lt;p>3ï¼‰Cancelé˜¶æ®µï¼šå¦‚æžœä»»ä½•ä¸€ä¸ªé“¶è¡Œçš„æ“ä½œæ‰§è¡Œå¤±è´¥ï¼Œé‚£ä¹ˆå°±éœ€è¦å›žæ»šè¿›è¡Œè¡¥å¿ï¼Œå°±æ˜¯æ¯”å¦‚Aé“¶è¡Œè´¦æˆ·å¦‚æžœå·²ç»æ‰£å‡äº†ï¼Œä½†æ˜¯Bé“¶è¡Œè´¦æˆ·èµ„é‡‘å¢žåŠ å¤±è´¥äº†ï¼Œé‚£ä¹ˆå°±å¾—æŠŠAé“¶è¡Œè´¦æˆ·èµ„é‡‘ç»™åŠ å›žåŽ»&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-05-12-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/b.png" alt="TCC">&lt;/p>
&lt;p>è¿™ç§æ–¹æ¡ˆè¯´å®žè¯å‡ ä¹Žå¾ˆå°‘ç”¨äººä½¿ç”¨ï¼Œæˆ‘ä»¬ç”¨çš„ä¹Ÿæ¯”è¾ƒå°‘ï¼Œä½†æ˜¯ä¹Ÿæœ‰ä½¿ç”¨çš„åœºæ™¯ã€‚å› ä¸ºè¿™ä¸ªäº‹åŠ¡å›žæ»šå®žé™…ä¸Šæ˜¯ä¸¥é‡ä¾èµ–äºŽä½ è‡ªå·±å†™ä»£ç æ¥å›žæ»šå’Œè¡¥å¿äº†ï¼Œä¼šé€ æˆè¡¥å¿ä»£ç å·¨å¤§ï¼Œéžå¸¸ä¹‹æ¶å¿ƒã€‚&lt;/p>
&lt;p>æ¯”å¦‚è¯´æˆ‘ä»¬ï¼Œä¸€èˆ¬æ¥è¯´è·Ÿé’±ç›¸å…³çš„ï¼Œè·Ÿé’±æ‰“äº¤é“çš„ï¼Œæ”¯ä»˜ã€äº¤æ˜“ç›¸å…³çš„åœºæ™¯ï¼Œæˆ‘ä»¬ä¼šç”¨TCCï¼Œä¸¥æ ¼ä¸¥æ ¼ä¿è¯åˆ†å¸ƒå¼äº‹åŠ¡è¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨è‡ªåŠ¨å›žæ»šï¼Œä¸¥æ ¼ä¿è¯èµ„é‡‘çš„æ­£ç¡®æ€§ï¼Œåœ¨èµ„é‡‘ä¸Šå‡ºçŽ°é—®é¢˜&lt;/p>
&lt;p>æ¯”è¾ƒé€‚åˆçš„åœºæ™¯ï¼šè¿™ä¸ªå°±æ˜¯é™¤éžä½ æ˜¯çœŸçš„ä¸€è‡´æ€§è¦æ±‚å¤ªé«˜ï¼Œæ˜¯ä½ ç³»ç»Ÿä¸­æ ¸å¿ƒä¹‹æ ¸å¿ƒçš„åœºæ™¯ï¼Œæ¯”å¦‚å¸¸è§çš„å°±æ˜¯èµ„é‡‘ç±»çš„åœºæ™¯ï¼Œé‚£ä½ å¯ä»¥ç”¨TCCæ–¹æ¡ˆäº†ï¼Œè‡ªå·±ç¼–å†™å¤§é‡çš„ä¸šåŠ¡é€»è¾‘ï¼Œè‡ªå·±åˆ¤æ–­ä¸€ä¸ªäº‹åŠ¡ä¸­çš„å„ä¸ªçŽ¯èŠ‚æ˜¯å¦okï¼Œä¸okå°±æ‰§è¡Œè¡¥å¿/å›žæ»šä»£ç ã€‚&lt;/p>
&lt;p>è€Œä¸”æœ€å¥½æ˜¯ä½ çš„å„ä¸ªä¸šåŠ¡æ‰§è¡Œçš„æ—¶é—´éƒ½æ¯”è¾ƒçŸ­ã€‚&lt;/p>
&lt;p>ä½†æ˜¯è¯´å®žè¯ï¼Œä¸€èˆ¬å°½é‡åˆ«è¿™ä¹ˆæžï¼Œè‡ªå·±æ‰‹å†™å›žæ»šé€»è¾‘ï¼Œæˆ–è€…æ˜¯è¡¥å¿é€»è¾‘ï¼Œå®žåœ¨å¤ªæ¶å¿ƒäº†ï¼Œé‚£ä¸ªä¸šåŠ¡ä»£ç å¾ˆéš¾ç»´æŠ¤ã€‚&lt;/p>
&lt;h2 id="æœ¬åœ°æ¶ˆæ¯è¡¨">æœ¬åœ°æ¶ˆæ¯è¡¨&lt;/h2>
&lt;p>å›½å¤–çš„ebayæžå‡ºæ¥çš„è¿™ä¹ˆä¸€å¥—æ€æƒ³&lt;/p>
&lt;p>è¿™ä¸ªå¤§æ¦‚æ„æ€æ˜¯è¿™æ ·çš„&lt;/p>
&lt;p>1ï¼‰Aç³»ç»Ÿåœ¨è‡ªå·±æœ¬åœ°ä¸€ä¸ªäº‹åŠ¡é‡Œæ“ä½œåŒæ—¶ï¼Œæ’å…¥ä¸€æ¡æ•°æ®åˆ°æ¶ˆæ¯è¡¨&lt;/p>
&lt;p>2ï¼‰æŽ¥ç€Aç³»ç»Ÿå°†è¿™ä¸ªæ¶ˆæ¯å‘é€åˆ°MQä¸­åŽ»&lt;/p>
&lt;p>3ï¼‰Bç³»ç»ŸæŽ¥æ”¶åˆ°æ¶ˆæ¯ä¹‹åŽï¼Œåœ¨ä¸€ä¸ªäº‹åŠ¡é‡Œï¼Œå¾€è‡ªå·±æœ¬åœ°æ¶ˆæ¯è¡¨é‡Œæ’å…¥ä¸€æ¡æ•°æ®ï¼ŒåŒæ—¶æ‰§è¡Œå…¶ä»–çš„ä¸šåŠ¡æ“ä½œï¼Œå¦‚æžœè¿™ä¸ªæ¶ˆæ¯å·²ç»è¢«å¤„ç†è¿‡äº†ï¼Œé‚£ä¹ˆæ­¤æ—¶è¿™ä¸ªäº‹åŠ¡ä¼šå›žæ»šï¼Œè¿™æ ·ä¿è¯ä¸ä¼šé‡å¤å¤„ç†æ¶ˆæ¯&lt;/p>
&lt;p>4ï¼‰Bç³»ç»Ÿæ‰§è¡ŒæˆåŠŸä¹‹åŽï¼Œå°±ä¼šæ›´æ–°è‡ªå·±æœ¬åœ°æ¶ˆæ¯è¡¨çš„çŠ¶æ€ä»¥åŠAç³»ç»Ÿæ¶ˆæ¯è¡¨çš„çŠ¶æ€&lt;/p>
&lt;p>5ï¼‰å¦‚æžœBç³»ç»Ÿå¤„ç†å¤±è´¥äº†ï¼Œé‚£ä¹ˆå°±ä¸ä¼šæ›´æ–°æ¶ˆæ¯è¡¨çŠ¶æ€ï¼Œé‚£ä¹ˆæ­¤æ—¶Aç³»ç»Ÿä¼šå®šæ—¶æ‰«æè‡ªå·±çš„æ¶ˆæ¯è¡¨ï¼Œå¦‚æžœæœ‰æ²¡å¤„ç†çš„æ¶ˆæ¯ï¼Œä¼šå†æ¬¡å‘é€åˆ°MQä¸­åŽ»ï¼Œè®©Bå†æ¬¡å¤„ç†&lt;/p>
&lt;p>6ï¼‰è¿™ä¸ªæ–¹æ¡ˆä¿è¯äº†æœ€ç»ˆä¸€è‡´æ€§ï¼Œå“ªæ€•Bäº‹åŠ¡å¤±è´¥äº†ï¼Œä½†æ˜¯Aä¼šä¸æ–­é‡å‘æ¶ˆæ¯ï¼Œç›´åˆ°Bé‚£è¾¹æˆåŠŸä¸ºæ­¢&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-05-12-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/c.png" alt="c">&lt;/p>
&lt;p>è¿™ä¸ªæ–¹æ¡ˆè¯´å®žè¯æœ€å¤§çš„é—®é¢˜å°±åœ¨äºŽä¸¥é‡ä¾èµ–äºŽæ•°æ®åº“çš„æ¶ˆæ¯è¡¨æ¥ç®¡ç†äº‹åŠ¡å•¥çš„ï¼Ÿï¼Ÿï¼Ÿè¿™ä¸ªä¼šå¯¼è‡´å¦‚æžœæ˜¯é«˜å¹¶å‘åœºæ™¯å’‹åŠžå‘¢ï¼Ÿå’‹æ‰©å±•å‘¢ï¼Ÿæ‰€ä»¥ä¸€èˆ¬ç¡®å®žå¾ˆå°‘ç”¨&lt;/p>
&lt;h2 id="å¯é æ¶ˆæ¯æœ€ç»ˆä¸€è‡´æ€§æ–¹æ¡ˆ">å¯é æ¶ˆæ¯æœ€ç»ˆä¸€è‡´æ€§æ–¹æ¡ˆ&lt;/h2>
&lt;p>è¿™ä¸ªçš„æ„æ€ï¼Œå°±æ˜¯å¹²è„†ä¸è¦ç”¨æœ¬åœ°çš„æ¶ˆæ¯è¡¨äº†ï¼Œç›´æŽ¥åŸºäºŽMQæ¥å®žçŽ°äº‹åŠ¡ã€‚æ¯”å¦‚é˜¿é‡Œçš„RocketMQå°±æ”¯æŒæ¶ˆæ¯äº‹åŠ¡ã€‚&lt;/p>
&lt;p>å¤§æ¦‚çš„æ„æ€å°±æ˜¯ï¼š&lt;/p>
&lt;p>1ï¼‰Aç³»ç»Ÿå…ˆå‘é€ä¸€ä¸ªpreparedæ¶ˆæ¯åˆ°mqï¼Œå¦‚æžœè¿™ä¸ªpreparedæ¶ˆæ¯å‘é€å¤±è´¥é‚£ä¹ˆå°±ç›´æŽ¥å–æ¶ˆæ“ä½œåˆ«æ‰§è¡Œäº†&lt;/p>
&lt;p>2ï¼‰å¦‚æžœè¿™ä¸ªæ¶ˆæ¯å‘é€æˆåŠŸè¿‡äº†ï¼Œé‚£ä¹ˆæŽ¥ç€æ‰§è¡Œæœ¬åœ°äº‹åŠ¡ï¼Œå¦‚æžœæˆåŠŸå°±å‘Šè¯‰mqå‘é€ç¡®è®¤æ¶ˆæ¯ï¼Œå¦‚æžœå¤±è´¥å°±å‘Šè¯‰mqå›žæ»šæ¶ˆæ¯&lt;/p>
&lt;p>3ï¼‰å¦‚æžœå‘é€äº†ç¡®è®¤æ¶ˆæ¯ï¼Œé‚£ä¹ˆæ­¤æ—¶Bç³»ç»Ÿä¼šæŽ¥æ”¶åˆ°ç¡®è®¤æ¶ˆæ¯ï¼Œç„¶åŽæ‰§è¡Œæœ¬åœ°çš„äº‹åŠ¡&lt;/p>
&lt;p>4ï¼‰mqä¼šè‡ªåŠ¨å®šæ—¶è½®è¯¢æ‰€æœ‰preparedæ¶ˆæ¯å›žè°ƒä½ çš„æŽ¥å£ï¼Œé—®ä½ ï¼Œè¿™ä¸ªæ¶ˆæ¯æ˜¯ä¸æ˜¯æœ¬åœ°äº‹åŠ¡å¤„ç†å¤±è´¥äº†ï¼Œæ‰€æœ‰æ²¡å‘é€ç¡®è®¤æ¶ˆæ¯ï¼Ÿé‚£æ˜¯ç»§ç»­é‡è¯•è¿˜æ˜¯å›žæ»šï¼Ÿä¸€èˆ¬æ¥è¯´è¿™é‡Œä½ å°±å¯ä»¥æŸ¥ä¸‹æ•°æ®åº“çœ‹ä¹‹å‰æœ¬åœ°äº‹åŠ¡æ˜¯å¦æ‰§è¡Œï¼Œå¦‚æžœå›žæ»šäº†ï¼Œé‚£ä¹ˆè¿™é‡Œä¹Ÿå›žæ»šå§ã€‚è¿™ä¸ªå°±æ˜¯é¿å…å¯èƒ½æœ¬åœ°äº‹åŠ¡æ‰§è¡ŒæˆåŠŸäº†ï¼Œåˆ«ç¡®è®¤æ¶ˆæ¯å‘é€å¤±è´¥äº†ã€‚&lt;/p>
&lt;p>5ï¼‰è¿™ä¸ªæ–¹æ¡ˆé‡Œï¼Œè¦æ˜¯ç³»ç»ŸBçš„äº‹åŠ¡å¤±è´¥äº†å’‹åŠžï¼Ÿé‡è¯•å’¯ï¼Œè‡ªåŠ¨ä¸æ–­é‡è¯•ç›´åˆ°æˆåŠŸï¼Œå¦‚æžœå®žåœ¨æ˜¯ä¸è¡Œï¼Œè¦ä¹ˆå°±æ˜¯é’ˆå¯¹é‡è¦çš„èµ„é‡‘ç±»ä¸šåŠ¡è¿›è¡Œå›žæ»šï¼Œæ¯”å¦‚Bç³»ç»Ÿæœ¬åœ°å›žæ»šåŽï¼Œæƒ³åŠžæ³•é€šçŸ¥ç³»ç»ŸAä¹Ÿå›žæ»šï¼›æˆ–è€…æ˜¯å‘é€æŠ¥è­¦ç”±äººå·¥æ¥æ‰‹å·¥å›žæ»šå’Œè¡¥å¿&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-05-12-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/d.png" alt="d">&lt;/p>
&lt;p>è¿™ä¸ªè¿˜æ˜¯æ¯”è¾ƒåˆé€‚çš„ï¼Œç›®å‰å›½å†…äº’è”ç½‘å…¬å¸å¤§éƒ½æ˜¯è¿™ä¹ˆçŽ©å„¿çš„ï¼Œè¦ä¸ä½ ä¸¾ç”¨RocketMQæ”¯æŒçš„ï¼Œè¦ä¸ä½ å°±è‡ªå·±åŸºäºŽç±»ä¼¼ActiveMQï¼ŸRabbitMQï¼Ÿè‡ªå·±å°è£…ä¸€å¥—ç±»ä¼¼çš„é€»è¾‘å‡ºæ¥ï¼Œæ€»ä¹‹æ€è·¯å°±æ˜¯è¿™æ ·å­çš„&lt;/p>
&lt;h2 id="æœ€å¤§åŠªåŠ›é€šçŸ¥æ–¹æ¡ˆ">æœ€å¤§åŠªåŠ›é€šçŸ¥æ–¹æ¡ˆ&lt;/h2>
&lt;p>è¿™ä¸ªæ–¹æ¡ˆçš„å¤§è‡´æ„æ€å°±æ˜¯ï¼š&lt;/p>
&lt;p>1ï¼‰ç³»ç»ŸAæœ¬åœ°äº‹åŠ¡æ‰§è¡Œå®Œä¹‹åŽï¼Œå‘é€ä¸ªæ¶ˆæ¯åˆ°MQ&lt;/p>
&lt;p>2ï¼‰è¿™é‡Œä¼šæœ‰ä¸ªä¸“é—¨æ¶ˆè´¹MQçš„æœ€å¤§åŠªåŠ›é€šçŸ¥æœåŠ¡ï¼Œè¿™ä¸ªæœåŠ¡ä¼šæ¶ˆè´¹MQç„¶åŽå†™å…¥æ•°æ®åº“ä¸­è®°å½•ä¸‹æ¥ï¼Œæˆ–è€…æ˜¯æ”¾å…¥ä¸ªå†…å­˜é˜Ÿåˆ—ä¹Ÿå¯ä»¥ï¼ŒæŽ¥ç€è°ƒç”¨ç³»ç»ŸBçš„æŽ¥å£&lt;/p>
&lt;p>3ï¼‰è¦æ˜¯ç³»ç»ŸBæ‰§è¡ŒæˆåŠŸå°±okäº†ï¼›è¦æ˜¯ç³»ç»ŸBæ‰§è¡Œå¤±è´¥äº†ï¼Œé‚£ä¹ˆæœ€å¤§åŠªåŠ›é€šçŸ¥æœåŠ¡å°±å®šæ—¶å°è¯•é‡æ–°è°ƒç”¨ç³»ç»ŸBï¼Œåå¤Næ¬¡ï¼Œæœ€åŽè¿˜æ˜¯ä¸è¡Œå°±æ”¾å¼ƒ&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-05-12-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/e.png" alt="e">&lt;/p>
&lt;h2 id="ä½ ä»¬å…¬å¸æ˜¯å¦‚ä½•å¤„ç†åˆ†å¸ƒå¼äº‹åŠ¡çš„">ä½ ä»¬å…¬å¸æ˜¯å¦‚ä½•å¤„ç†åˆ†å¸ƒå¼äº‹åŠ¡çš„ï¼Ÿ&lt;/h2>
&lt;p>è¿™ä¸ªï¼Œè¯´çœŸçš„ï¼Œç¡®å®žæˆ‘ä»¬è¿™ä¸ªè¯¾ç¨‹æ²¡æ³•å¸¦ç€å¤§å®¶æ¥å®žæˆ˜ï¼Œå› ä¸ºå®šä½ä¸æ˜¯è¿™ä¸ªã€‚ä½†æ˜¯å¦‚æžœä½ çœŸçš„è¢«é—®åˆ°ï¼Œä½ å¯ä»¥è¿™ä¹ˆè¯´ï¼Œæˆ‘ä»¬æŸæŸç‰¹åˆ«ä¸¥æ ¼çš„åœºæ™¯ï¼Œç”¨çš„æ˜¯TCCæ¥ä¿è¯å¼ºä¸€è‡´æ€§ï¼›ç„¶åŽå…¶ä»–çš„ä¸€äº›åœºæ™¯åŸºäºŽäº†é˜¿é‡Œçš„RocketMQæ¥å®žçŽ°äº†åˆ†å¸ƒå¼äº‹åŠ¡ã€‚&lt;/p>
&lt;p>ä½ æ‰¾ä¸€ä¸ªä¸¥æ ¼èµ„é‡‘è¦æ±‚ç»å¯¹ä¸èƒ½é”™çš„åœºæ™¯ï¼Œä½ å¯ä»¥è¯´ä½ æ˜¯ç”¨çš„TCCæ–¹æ¡ˆï¼›å¦‚æžœæ˜¯ä¸€èˆ¬çš„åˆ†å¸ƒå¼äº‹åŠ¡åœºæ™¯ï¼Œè®¢å•æ’å…¥ä¹‹åŽè¦è°ƒç”¨åº“å­˜æœåŠ¡æ›´æ–°åº“å­˜ï¼Œåº“å­˜æ•°æ®æ²¡æœ‰èµ„é‡‘é‚£ä¹ˆçš„æ•æ„Ÿï¼Œå¯ä»¥ç”¨å¯é æ¶ˆæ¯æœ€ç»ˆä¸€è‡´æ€§æ–¹æ¡ˆ&lt;/p>
&lt;p>å‹æƒ…æç¤ºä¸€ä¸‹ï¼Œrocketmq 3.2.6ä¹‹å‰çš„ç‰ˆæœ¬ï¼Œæ˜¯å¯ä»¥æŒ‰ç…§ä¸Šé¢çš„æ€è·¯æ¥çš„ï¼Œä½†æ˜¯ä¹‹åŽæŽ¥å£åšäº†ä¸€äº›æ”¹å˜ï¼Œæˆ‘è¿™é‡Œä¸å†èµ˜è¿°äº†ã€‚&lt;/p>
&lt;p>å½“ç„¶å¦‚æžœä½ æ„¿æ„ï¼Œä½ å¯ä»¥å‚è€ƒå¯é æ¶ˆæ¯æœ€ç»ˆä¸€è‡´æ€§æ–¹æ¡ˆæ¥è‡ªå·±å®žçŽ°ä¸€å¥—åˆ†å¸ƒå¼äº‹åŠ¡ï¼Œæ¯”å¦‚åŸºäºŽrabbitmqæ¥çŽ©å„¿ã€‚&lt;/p>
&lt;h3 id="æ˜¨å¤©å­¦å‘˜ç»™æˆ‘æçš„ä¸€ä¸ªé—®é¢˜">æ˜¨å¤©å­¦å‘˜ç»™æˆ‘æçš„ä¸€ä¸ªé—®é¢˜&lt;/h3>
&lt;p>è€å¸ˆï¼Œæˆ‘ä»¬çŽ°åœ¨æƒ³ä¿è¯æˆ‘ä»¬çš„æŸä¸ªç³»ç»Ÿéžå¸¸çš„å¯é ï¼Œä»»ä½•ä¸€ä¸ªæ•°æ®éƒ½ä¸èƒ½é”™ï¼Œæˆ‘ä»¬ç”¨çš„æ˜¯å¾®æœåŠ¡æž¶æž„ï¼Œå‡ åä¸ªæœåŠ¡ã€‚ç»“æžœæˆ‘ä»¬ä¸€ç›˜ç‚¹ï¼Œå‘çŽ°ï¼Œå¦‚æžœåˆ°å¤„éƒ½è¦æžçš„è¯ï¼Œä¸€ä¸ªç³»ç»Ÿè¦åšå‡ åä¸ªåˆ†å¸ƒå¼äº‹åŠ¡å‡ºæ¥ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬çš„ç»éªŒï¼Œæˆ‘å¸¦å‡ åäººçš„teamï¼Œæœ€å¤§çš„ä¸€ä¸ªé¡¹ç›®ï¼Œèµ·ç å‡ ç™¾ä¸ªæœåŠ¡ï¼Œå¤æ‚çš„åˆ†å¸ƒå¼å¤§åž‹ç³»ç»Ÿï¼Œé‡Œé¢å…¶å®žä¹Ÿæ²¡å‡ ä¸ªåˆ†å¸ƒå¼äº‹åŠ¡ã€‚&lt;/p>
&lt;p>ä½ å…¶å®žç”¨ä»»ä½•ä¸€ä¸ªåˆ†å¸ƒå¼äº‹åŠ¡çš„è¿™ä¹ˆä¸€ä¸ªæ–¹æ¡ˆï¼Œéƒ½ä¼šå¯¼è‡´ä½ é‚£å—å„¿ä»£ç ä¼šå¤æ‚10å€ã€‚å¾ˆå¤šæƒ…å†µä¸‹ï¼Œç³»ç»ŸAè°ƒç”¨ç³»ç»ŸBã€ç³»ç»ŸCã€ç³»ç»ŸDï¼Œæˆ‘ä»¬å¯èƒ½æ ¹æœ¬å°±ä¸åšåˆ†å¸ƒå¼äº‹åŠ¡ã€‚å¦‚æžœè°ƒç”¨æŠ¥é”™ä¼šæ‰“å°å¼‚å¸¸æ—¥å¿—ã€‚&lt;/p>
&lt;p>æ¯ä¸ªæœˆä¹Ÿå°±é‚£ä¹ˆå‡ ä¸ªbugï¼Œå¾ˆå¤šbugæ˜¯åŠŸèƒ½æ€§çš„ï¼Œä½“éªŒæ€§çš„ï¼ŒçœŸçš„æ˜¯æ¶‰åŠåˆ°æ•°æ®å±‚é¢çš„ä¸€äº›bugï¼Œä¸€ä¸ªæœˆå°±å‡ ä¸ªï¼Œä¸¤ä¸‰ä¸ªï¼Ÿå¦‚æžœä½ ä¸ºäº†ç¡®ä¿ç³»ç»Ÿè‡ªåŠ¨ä¿è¯æ•°æ®100%ä¸èƒ½é”™ï¼Œä¸Šäº†å‡ åä¸ªåˆ†å¸ƒå¼äº‹åŠ¡ï¼Œä»£ç å¤ªå¤æ‚ï¼›æ€§èƒ½å¤ªå·®ï¼Œç³»ç»Ÿåžåé‡ã€æ€§èƒ½å¤§å¹…åº¦ä¸‹è·Œã€‚&lt;/p>
&lt;p>99%çš„åˆ†å¸ƒå¼æŽ¥å£è°ƒç”¨ï¼Œä¸è¦åšåˆ†å¸ƒå¼äº‹åŠ¡ï¼Œç›´æŽ¥å°±æ˜¯ç›‘æŽ§ï¼ˆå‘é‚®ä»¶ã€å‘çŸ­ä¿¡ï¼‰ã€è®°å½•æ—¥å¿—ï¼ˆä¸€æ—¦å‡ºé”™ï¼Œå®Œæ•´çš„æ—¥å¿—ï¼‰ã€äº‹åŽå¿«é€Ÿçš„å®šä½ã€æŽ’æŸ¥å’Œå‡ºè§£å†³æ–¹æ¡ˆã€ä¿®å¤æ•°æ®ã€‚&lt;/p>
&lt;p>æ¯ä¸ªæœˆï¼Œæ¯éš”å‡ ä¸ªæœˆï¼Œéƒ½ä¼šå¯¹å°‘é‡çš„å› ä¸ºä»£ç bugï¼Œå¯¼è‡´å‡ºé”™çš„æ•°æ®ï¼Œè¿›è¡Œäººå·¥çš„ä¿®å¤æ•°æ®ï¼Œè‡ªå·±ä¸´æ—¶åŠ¨æ‰‹å†™ä¸ªç¨‹åºï¼Œå¯èƒ½è¦è¡¥ä¸€äº›æ•°æ®ï¼Œå¯èƒ½è¦åˆ é™¤ä¸€äº›æ•°æ®ï¼Œå¯èƒ½è¦ä¿®æ”¹ä¸€äº›å­—æ®µçš„å€¼ã€‚&lt;/p>
&lt;p>æ¯”ä½ åš50ä¸ªåˆ†å¸ƒå¼äº‹åŠ¡ï¼Œæˆæœ¬è¦æ¥çš„ä½Žä¸Šç™¾å€ï¼Œä½Žå‡ åå€&lt;/p>
&lt;p>trade offï¼Œæƒè¡¡ï¼Œè¦ç”¨åˆ†å¸ƒå¼äº‹åŠ¡çš„æ—¶å€™ï¼Œä¸€å®šæ˜¯æœ‰æˆæœ¬ï¼Œä»£ç ä¼šå¾ˆå¤æ‚ï¼Œå¼€å‘å¾ˆé•¿æ—¶é—´ï¼Œæ€§èƒ½å’Œåžåé‡ä¸‹è·Œï¼Œç³»ç»Ÿæ›´åŠ å¤æ‚æ›´åŠ è„†å¼±åè€Œæ›´åŠ å®¹æ˜“å‡ºbugï¼›å¥½å¤„ï¼Œå¦‚æžœåšå¥½äº†ï¼ŒTCCã€å¯é æ¶ˆæ¯æœ€ç»ˆä¸€è‡´æ€§æ–¹æ¡ˆï¼Œä¸€å®šå¯ä»¥100%ä¿è¯ä½ é‚£å¿«æ•°æ®ä¸ä¼šå‡ºé”™ã€‚&lt;/p>
&lt;p>1%ï¼Œ0.1%ï¼Œ0.01%çš„ä¸šåŠ¡ï¼Œèµ„é‡‘ã€äº¤æ˜“ã€è®¢å•ï¼Œæˆ‘ä»¬ä¼šç”¨åˆ†å¸ƒå¼äº‹åŠ¡æ–¹æ¡ˆæ¥ä¿è¯ï¼Œä¼šå‘˜ç§¯åˆ†ã€ä¼˜æƒ åˆ¸ã€å•†å“ä¿¡æ¯ï¼Œå…¶å®žä¸è¦è¿™ä¹ˆæžäº†&lt;/p></description></item><item><title>Javaç”Ÿäº§çŽ¯å¢ƒä¸‹æ€§èƒ½ç›‘æŽ§ä¸Žè°ƒä¼˜è¯¦è§£</title><link>https://blog.itning.top/post/2019/04/23/java%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E4%B8%8B%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7%E4%B8%8E%E8%B0%83%E4%BC%98%E8%AF%A6%E8%A7%A3/</link><pubDate>Tue, 23 Apr 2019 11:36:10 +0800</pubDate><guid>https://blog.itning.top/post/2019/04/23/java%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E4%B8%8B%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7%E4%B8%8E%E8%B0%83%E4%BC%98%E8%AF%A6%E8%A7%A3/</guid><description>&lt;h2 id="åŸºäºŽjdkå‘½ä»¤è¡Œå·¥å…·çš„ç›‘æŽ§">åŸºäºŽJDKå‘½ä»¤è¡Œå·¥å…·çš„ç›‘æŽ§&lt;/h2>
&lt;h3 id="xå‚æ•°">Xå‚æ•°&lt;/h3>
&lt;p>éžæ ‡å‡†åŒ–å‚æ•° æœ‰å¯èƒ½ä¼šå˜ ä½†å˜åŒ–æ¯”è¾ƒå°&lt;/p>
&lt;ul>
&lt;li>
&lt;p>-Xint&lt;/p>
&lt;p>è§£é‡Šæ‰§è¡Œ&lt;/p>
&lt;/li>
&lt;li>
&lt;p>-Xcomp&lt;/p>
&lt;p>ç¬¬ä¸€æ¬¡ä½¿ç”¨å°±ç¼–è¯‘æˆæœ¬åœ°ä»£ç &lt;/p>
&lt;/li>
&lt;li>
&lt;p>-Xmixed&lt;/p>
&lt;p>æ··åˆæ¨¡å¼ï¼ŒJVMè‡ªå·±æ¥å†³å®šæ˜¯å¦ç¼–è¯‘æˆæœ¬åœ°ä»£ç &lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="xxå‚æ•°">XXå‚æ•°&lt;/h3>
&lt;p>éžæ ‡å‡†åŒ–å‚æ•° ç›¸å¯¹ä¸ç¨³å®š ä¸»è¦ç”¨äºŽJVMè°ƒä¼˜å’ŒDebug&lt;/p>
&lt;h4 id="booleanç±»åž‹">Booleanç±»åž‹&lt;/h4>
&lt;p>æ ¼å¼ï¼š&lt;code>-XX:[+-]&amp;lt;name&amp;gt;&lt;/code>è¡¨ç¤ºå¯ç”¨æˆ–è€…ç¦ç”¨nameå±žæ€§&lt;/p>
&lt;p>æ¯”å¦‚ï¼š&lt;/p>
&lt;p>&lt;code>-XX:+UseConcMarkSweepGC&lt;/code> å¯ç”¨CMSåžƒåœ¾å›žæ”¶å™¨&lt;/p>
&lt;p>&lt;code>-XX:+UseG1GC&lt;/code> å¯ç”¨G1åžƒåœ¾å›žæ”¶å™¨&lt;/p>
&lt;h4 id="éžbooleanç±»åž‹">éžBooleanç±»åž‹&lt;/h4>
&lt;p>æ ¼å¼ï¼š&lt;code>-XX:&amp;lt;name&amp;gt;=&amp;lt;value&amp;gt;&lt;/code>è¡¨ç¤ºnameå±žæ€§çš„å€¼æ˜¯value&lt;/p>
&lt;p>æ¯”å¦‚ï¼š&lt;/p>
&lt;p>&lt;code>-XX:MaxGCPauseMillis=500&lt;/code> GCæœ€å¤§åœé¡¿æ—¶é—´500ms&lt;/p>
&lt;p>&lt;code>-XX:GCTimeRatio=19&lt;/code> Ratioä¸º19&lt;/p>
&lt;p>&lt;code>-Xms&lt;/code>ç­‰ä»·äºŽ&lt;code>-XX:InitialHeapSize&lt;/code>&lt;/p>
&lt;p>&lt;code>-Xmx&lt;/code>ç­‰ä»·äºŽ&lt;code>-XX:MaxHeapSize&lt;/code>&lt;/p>
&lt;h3 id="æŸ¥çœ‹jvmè¿è¡Œæ—¶å‚æ•°">æŸ¥çœ‹JVMè¿è¡Œæ—¶å‚æ•°&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>&lt;code>-XX:+PrintFlagsInitial&lt;/code> æŸ¥çœ‹åˆå§‹å€¼&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>-XX:+PrintFlagsFinal&lt;/code> æŸ¥çœ‹æœ€ç»ˆå€¼&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>-XX:+UnlockExperimentalVMOptions&lt;/code> è§£é”å®žéªŒå‚æ•°&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>-XX:+UnlockDiagnosticVMOptions&lt;/code> è§£é”è¯Šæ–­å‚æ•°&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>-XX:+PrintCommandLineFlags&lt;/code> æ‰“å°å‘½ä»¤è¡Œå‚æ•°&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>&lt;code>=&lt;/code>è¡¨ç¤ºé»˜è®¤å€¼&lt;/strong>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>&lt;code>:=&lt;/code>è¢«ç”¨æˆ·æˆ–è€…JVMä¿®æ”¹åŽçš„å€¼&lt;/strong>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>jps&lt;/code>å‘½ä»¤ç”¨äºŽæŸ¥çœ‹JAVAè¿›ç¨‹ï¼ˆ&lt;code>-l&lt;/code>å‚æ•°å®Œå…¨ç±»åï¼‰&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>jinfo&lt;/code>å‘½ä»¤æŸ¥çœ‹javaè¿›ç¨‹å‚æ•°ä¿¡æ¯&lt;/p>
&lt;p>&lt;code>jinfo -flag MaxHeapSize 12188&lt;/code> æŸ¥çœ‹è¿›ç¨‹å·ä¸º12188çš„æœ€å¤§å †å¤§å°&lt;/p>
&lt;p>&lt;code>-flags&lt;/code>æŸ¥çœ‹æ‰‹åŠ¨æ›´æ”¹è¿‡å€¼çš„JVMå‚æ•°&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>jstat&lt;/code>å‘½ä»¤ç”¨äºŽæŸ¥çœ‹JVMç»Ÿè®¡ä¿¡æ¯&lt;/p>
&lt;p>ç±»è£…è½½ åžƒåœ¾æ”¶é›† JITç¼–è¯‘&lt;/p>
&lt;p>&lt;code>jstat -class 6666 1000 10&lt;/code>æŸ¥çœ‹è¿›ç¨‹6666çš„ç±»è£…è½½ä¿¡æ¯ æ¯éš”1000msæ‰“å°ä¸€æ¬¡å…±æ‰“å°10æ¬¡&lt;/p>
&lt;p>&lt;code>-gc 6666 1000 10&lt;/code>æŸ¥çœ‹åžƒåœ¾å›žæ”¶ä¿¡æ¯&lt;/p>
&lt;p>&lt;code>-compiler&lt;/code> &lt;code>-printcompilation&lt;/code> æŸ¥çœ‹JNIç¼–è¯‘æƒ…å†µ&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="å¯¼å‡ºå†…å­˜æ˜ åƒæ–‡ä»¶">å¯¼å‡ºå†…å­˜æ˜ åƒæ–‡ä»¶&lt;/h3>
&lt;h4 id="å†…å­˜æº¢å‡ºè‡ªåŠ¨å¯¼å‡º">å†…å­˜æº¢å‡ºè‡ªåŠ¨å¯¼å‡º&lt;/h4>
&lt;p>&lt;code>-XX:+HeapDumpOnOutOfMemoryError&lt;/code> å†…å­˜æº¢å‡ºæ—¶è‡ªåŠ¨å¯¼å‡ºDump&lt;/p>
&lt;p>&lt;code>-XX:HeapDumpPath=./&lt;/code> å¯¼å‡ºè·¯å¾„&lt;/p>
&lt;h4 id="ä½¿ç”¨jmapå‘½ä»¤æ‰‹åŠ¨å¯¼å‡º">ä½¿ç”¨jmapå‘½ä»¤æ‰‹åŠ¨å¯¼å‡º&lt;/h4>
&lt;p>&lt;code>jmap -dump:format=b,file=heap.hprof 16940&lt;/code>&lt;/p>
&lt;h3 id="ä½¿ç”¨matåˆ†æžå†…å­˜æº¢å‡º">ä½¿ç”¨MATåˆ†æžå†…å­˜æº¢å‡º&lt;/h3>
&lt;p>å·¥å…·ä¸‹è½½åœ°å€ï¼š&lt;a href="https://www.eclipse.org/mat/">https://www.eclipse.org/mat/&lt;/a>&lt;/p>
&lt;h3 id="jstackæŸ¥çœ‹çº¿ç¨‹çŠ¶æ€">jstackæŸ¥çœ‹çº¿ç¨‹çŠ¶æ€&lt;/h3>
&lt;p>&lt;code>jstack è¿›ç¨‹ID &amp;gt; xx.txt&lt;/code>&lt;/p>
&lt;h3 id="btrace-ä¿®æ”¹å­—èŠ‚ç ">Btrace ä¿®æ”¹å­—èŠ‚ç &lt;/h3>
&lt;ul>
&lt;li>åœ¨JVisualVMä¸­æ·»åŠ Btraceæ’ä»¶ï¼Œæ·»åŠ classpath&lt;/li>
&lt;li>ä½¿ç”¨å‘½ä»¤è¡Œ&lt;code>btrace &amp;lt;pid&amp;gt; &amp;lt;trace_script&amp;gt;&lt;/code>&lt;/li>
&lt;/ul>
&lt;h2 id="tomcat">Tomcat&lt;/h2>
&lt;h3 id="psi-probeç›‘æŽ§">psi-probeç›‘æŽ§&lt;/h3>
&lt;p>è¯¥å·¥å…·ç”¨æ¥ç›‘æŽ§tomcatçš„çŠ¶æ€&lt;/p>
&lt;h3 id="çº¿ç¨‹ä¼˜åŒ–">çº¿ç¨‹ä¼˜åŒ–&lt;/h3>
&lt;p>..&lt;/p>
&lt;h2 id="nginx">Nginx&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>&lt;code>ngx_http_stub_status&lt;/code>ç›‘æŽ§è¿žæŽ¥ä¿¡æ¯&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-shell" data-lang="shell">server &lt;span class="o">{&lt;/span>
listen 10061&lt;span class="p">;&lt;/span>
location /nginx_status &lt;span class="o">{&lt;/span>
stub_status on&lt;span class="p">;&lt;/span>
access_log off&lt;span class="p">;&lt;/span>
allow 127.0.0.1&lt;span class="p">;&lt;/span>
deny all&lt;span class="p">;&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>&lt;code>ngxtop&lt;/code>ç›‘æŽ§è¯·æ±‚ä¿¡æ¯&lt;/p>
&lt;p>&lt;a href="https://github.com/lebinh/ngxtop">https://github.com/lebinh/ngxtop&lt;/a>&lt;/p>
&lt;p>&lt;code>pip install ngxtop&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-shell" data-lang="shell">ngxtop -c /usr/local/nginx/conf/nginx.conf -l /home/shw/app/log/shw_access.log
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>&lt;code>nginx-rrd&lt;/code>å›¾å½¢åŒ–ç›‘æŽ§&lt;/p>
&lt;p>&lt;a href="https://www.nginx.com/resources/wiki/modules/rrd_graph/">https://www.nginx.com/resources/wiki/modules/rrd_graph/&lt;/a>&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="gc">GC&lt;/h2>
&lt;h3 id="å¯è§†åŒ–gcæ—¥å¿—åˆ†æžå·¥å…·">å¯è§†åŒ–GCæ—¥å¿—åˆ†æžå·¥å…·&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="http://gceasy.io">gceasy&lt;/a>&lt;/li>
&lt;li>GCViewer&lt;/li>
&lt;/ul>
&lt;h3 id="parallelgcè°ƒä¼˜">ParallelGCè°ƒä¼˜&lt;/h3>
&lt;blockquote>
&lt;p>GCè°ƒä¼˜æ­¥éª¤&lt;/p>
&lt;ol>
&lt;li>æ‰“å°GCæ—¥å¿—&lt;/li>
&lt;li>æ ¹æ®æ—¥å¿—å¾—åˆ°å…³é”®æ€§æŒ‡æ ‡&lt;/li>
&lt;li>åˆ†æžGCåŽŸå› ï¼Œè°ƒä¼˜JVMå‚æ•°&lt;/li>
&lt;/ol>
&lt;/blockquote>
&lt;ul>
&lt;li>é™¤éžç¡®å®šï¼Œå¦åˆ™ä¸è¦è®¾ç½®æœ€å¤§å †å†…å­˜&lt;/li>
&lt;li>ä¼˜å…ˆè®¾ç½®åžåé‡ç›®æ ‡&lt;/li>
&lt;li>å¦‚æžœåžåé‡ç›®æ ‡è¾¾ä¸åˆ°ï¼Œè°ƒå¤§æœ€å¤§å†…å­˜ï¼Œä¸èƒ½è®©OSä½¿ç”¨Swapï¼Œå¦‚æžœä»ç„¶è¾¾ä¸åˆ°ï¼Œé™ä½Žç›®æ ‡ã€‚&lt;/li>
&lt;li>åžåé‡èƒ½è¾¾åˆ°ï¼ŒGCæ—¶é—´å¤ªé•¿ï¼Œè®¾ç½®åœé¡¿æ—¶é—´çš„ç›®æ ‡ã€‚&lt;/li>
&lt;/ul>
&lt;h3 id="g1-gcè°ƒä¼˜">G1 GCè°ƒä¼˜&lt;/h3>
&lt;ul>
&lt;li>å¹´è½»ä»£å¤§å°ï¼šé¿å…ä½¿ç”¨&lt;code>-Xmn&lt;/code>,&lt;code>XX:NewRatio&lt;/code>ç­‰æ˜¾å¼è®¾ç½®YoungåŒºå¤§å°ï¼Œä¼šè¦†ç›–æš‚åœæ—¶é—´ç›®æ ‡ã€‚&lt;/li>
&lt;li>æš‚åœæ—¶é—´ç›®æ ‡ï¼šæš‚åœæ—¶é—´ä¸è¦å¤ªè‹›åˆ»ï¼Œå…¶åžåé‡ç›®æ ‡æ˜¯90%çš„åº”ç”¨ç¨‹åºæ—¶é—´å’Œ10%çš„åžƒåœ¾å›žæ”¶æ—¶é—´ï¼Œå¤ªä¸¥è‹›ä¼šç›´æŽ¥å½±å“åžåé‡ã€‚&lt;/li>
&lt;/ul></description></item><item><title>å•ç‚¹ç™»å½•SSOå’Œé›†ä¸­å¼è®¤è¯æœåŠ¡CASå’Œå¼€æ”¾æŽˆæƒOAuthçš„ç®€è¦è§£é‡Š</title><link>https://blog.itning.top/post/2019/04/08/%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95sso%E5%92%8C%E9%9B%86%E4%B8%AD%E5%BC%8F%E8%AE%A4%E8%AF%81%E6%9C%8D%E5%8A%A1cas%E5%92%8C%E5%BC%80%E6%94%BE%E6%8E%88%E6%9D%83oauth%E7%9A%84%E7%AE%80%E8%A6%81%E8%A7%A3%E9%87%8A/</link><pubDate>Mon, 08 Apr 2019 14:15:42 +0800</pubDate><guid>https://blog.itning.top/post/2019/04/08/%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95sso%E5%92%8C%E9%9B%86%E4%B8%AD%E5%BC%8F%E8%AE%A4%E8%AF%81%E6%9C%8D%E5%8A%A1cas%E5%92%8C%E5%BC%80%E6%94%BE%E6%8E%88%E6%9D%83oauth%E7%9A%84%E7%AE%80%E8%A6%81%E8%A7%A3%E9%87%8A/</guid><description>&lt;h2 id="ä»€ä¹ˆæ˜¯sso">ä»€ä¹ˆæ˜¯SSOï¼Ÿ&lt;/h2>
&lt;blockquote>
&lt;p>ç»´åŸºç™¾ç§‘ä¸­å¯¹&lt;a href="https://zh.wikipedia.org/wiki/%E5%96%AE%E4%B8%80%E7%99%BB%E5%85%A5">SSO&lt;/a>çš„è§£é‡Šï¼š&lt;/p>
&lt;p>&lt;strong>å•ç‚¹ç™»å½•&lt;/strong>ï¼ˆè‹±è¯­ï¼šSingle sign-onï¼Œç¼©å†™ä¸º SSOï¼‰ï¼Œåˆè¯‘ä¸º&lt;strong>å•ä¸€ç­¾å…¥&lt;/strong>ï¼Œä¸€ç§å¯¹äºŽè®¸å¤šç›¸äº’å…³è¿žï¼Œä½†æ˜¯åˆæ˜¯å„è‡ªç‹¬ç«‹çš„è½¯ä»¶ç³»ç»Ÿï¼Œæä¾›&lt;a href="https://zh.wikipedia.org/wiki/%E5%AD%98%E5%8F%96%E6%8E%A7%E5%88%B6">è®¿é—®æŽ§åˆ¶&lt;/a>çš„å±žæ€§ã€‚å½“æ‹¥æœ‰è¿™é¡¹å±žæ€§æ—¶ï¼Œå½“ç”¨æˆ·&lt;a href="https://zh.wikipedia.org/wiki/%E7%99%BB%E5%85%A5">ç™»å½•&lt;/a>æ—¶ï¼Œå°±å¯ä»¥èŽ·å–æ‰€æœ‰ç³»ç»Ÿçš„è®¿é—®æƒé™ï¼Œä¸ç”¨å¯¹æ¯ä¸ªå•ä¸€ç³»ç»Ÿéƒ½é€ä¸€ç™»å½•ã€‚è¿™é¡¹åŠŸèƒ½é€šå¸¸æ˜¯ä»¥&lt;a href="https://zh.wikipedia.org/wiki/%E8%BD%BB%E5%9E%8B%E7%9B%AE%E5%BD%95%E8%AE%BF%E9%97%AE%E5%8D%8F%E8%AE%AE">è½»åž‹ç›®å½•è®¿é—®åè®®&lt;/a>ï¼ˆLDAPï¼‰æ¥å®žçŽ°ï¼Œåœ¨æœåŠ¡å™¨ä¸Šä¼šå°†ç”¨æˆ·ä¿¡æ¯å­˜å‚¨åˆ°LDAPæ•°æ®åº“ä¸­ã€‚ç›¸åŒçš„ï¼Œ&lt;strong>å•ä¸€é€€å‡º&lt;/strong>ï¼ˆsingle sign-offï¼‰å°±æ˜¯æŒ‡ï¼Œåªéœ€è¦å•ä¸€çš„é€€å‡ºåŠ¨ä½œï¼Œå°±å¯ä»¥ç»“æŸå¯¹äºŽå¤šä¸ªç³»ç»Ÿçš„è®¿é—®æƒé™ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>ç®€å•æ¥è¯´ï¼Œå•ç‚¹ç™»é™†å°±æ˜¯ç”¨æˆ·ç™»é™†è¿‡ä¸€ä¸ªç³»ç»ŸåŽè®¿é—®å…¶å®ƒéœ€è¦è®¤è¯çš„ç³»ç»Ÿï¼Œä¸ç”¨ç”¨æˆ·å†é‡å¤è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ã€‚&lt;/p>
&lt;p>å•ç‚¹ç™»é™†åŒ…å« å•ç‚¹ç™»é™† å•ç‚¹ç™»å‡º&lt;/p>
&lt;p>å¯ä»¥çœ‹ä¸‹å•ç‚¹ç™»é™†å›¾è§£ï¼š&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-04-08-%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95SSO%E5%92%8C%E9%9B%86%E4%B8%AD%E5%BC%8F%E8%AE%A4%E8%AF%81%E6%9C%8D%E5%8A%A1CAS%E5%92%8C%E5%BC%80%E6%94%BE%E6%8E%88%E6%9D%83OAuth%E7%9A%84%E7%AE%80%E8%A6%81%E8%A7%A3%E9%87%8A/dandiandenglu.png" alt="å•ç‚¹ç™»é™†å›¾è§£">&lt;/p>
&lt;p>&lt;a href="https://www.cnblogs.com/ywlaker/p/6113927.html">å•ç‚¹ç™»å½•åŽŸç†ä¸Žç®€å•å®žçŽ°&lt;/a>&lt;/p>
&lt;p>é‚£ä¹ˆCASåˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ&lt;/p>
&lt;h2 id="ä»€ä¹ˆæ˜¯cas">ä»€ä¹ˆæ˜¯CASï¼Ÿ&lt;/h2>
&lt;blockquote>
&lt;p>&lt;strong>é›†ä¸­å¼è®¤è¯æœåŠ¡&lt;/strong>ï¼ˆè‹±è¯­ï¼šCentral Authentication Serviceï¼Œç¼©å†™&lt;strong>CAS&lt;/strong>ï¼‰æ˜¯ä¸€ç§é’ˆå¯¹&lt;a href="https://zh.wikipedia.org/wiki/%E4%B8%87%E7%BB%B4%E7%BD%91">ä¸‡ç»´ç½‘&lt;/a>çš„&lt;a href="https://zh.wikipedia.org/wiki/%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95">å•ç‚¹ç™»å½•&lt;/a>åè®®ã€‚å®ƒçš„ç›®çš„æ˜¯å…è®¸ä¸€ä¸ªç”¨æˆ·è®¿é—®å¤šä¸ªåº”ç”¨ç¨‹åºï¼Œè€Œåªéœ€æä¾›ä¸€æ¬¡å‡­è¯ï¼ˆå¦‚ç”¨æˆ·åå’Œå¯†ç ï¼‰ã€‚å®ƒè¿˜å…è®¸webåº”ç”¨ç¨‹åºåœ¨æ²¡æœ‰èŽ·å¾—ç”¨æˆ·çš„å®‰å…¨å‡­æ®ï¼ˆå¦‚å¯†ç ï¼‰çš„æƒ…å†µä¸‹å¯¹ç”¨æˆ·è¿›è¡Œèº«ä»½éªŒè¯ã€‚â€œCASâ€ä¹ŸæŒ‡å®žçŽ°äº†è¯¥åè®®çš„è½¯ä»¶åŒ…ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>å¯ä»¥è¯´CASå®žçŽ°äº†SSOã€‚&lt;/p>
&lt;p>å…¶ä¸­CASå®šä¹‰äº†ä¸€äº›è§„èŒƒï¼š&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th align="center">å®šä¹‰&lt;/th>
&lt;th align="center">æè¿°&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td align="center">Client&lt;/td>
&lt;td align="center">ç»ˆç«¯ç”¨æˆ·æˆ–è€…æ˜¯ WEB æµè§ˆå™¨&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="center">Server&lt;/td>
&lt;td align="center">ç»Ÿä¸€è®¤è¯æœåŠ¡æ‰€åœ¨çš„æœåŠ¡å™¨&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="center">Service&lt;/td>
&lt;td align="center">ç»ˆç«¯ç”¨æˆ·æˆ–è€… WEB æµè§ˆå™¨è¯•å›¾è®¿é—®çš„åº”ç”¨&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="center">Proxy&lt;/td>
&lt;td align="center">ä½œä¸ºä»£ç†çš„æœåŠ¡ï¼Œç”¨æˆ·é€šè¿‡è¯¥æœåŠ¡ï¼ˆä»£ç†ï¼‰è®¿é—®Back-end serviceï¼ˆåŽç«¯åº”ç”¨ï¼‰&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="center">Back-end service&lt;/td>
&lt;td align="center">ç”¨æˆ·é€šè¿‡ä»£ç†è®¿é—®çš„åº”ç”¨ï¼Œè¿™ä¸ªåº”ç”¨å°±è¢«ç§°ä¸ºåŽç«¯æœåŠ¡ï¼ˆBack-end serviceï¼‰ ã€‚å®ƒä¹Ÿè¢«ç§°ä½œâ€œtarget serviceâ€ç›®æ ‡æœåŠ¡&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="center">TGT&lt;/td>
&lt;td align="center">Ticket Grangting Ticket ã€‚TGTæ˜¯CASä¸ºç”¨æˆ·ç­¾å‘çš„ç™»å½•ç¥¨æ®ï¼Œæ‹¥æœ‰äº†TGTï¼Œç”¨æˆ·å°±å¯ä»¥è¯æ˜Žè‡ªå·±åœ¨CASæˆåŠŸç™»å½•è¿‡ã€‚TGTå°è£…äº†Cookieå€¼ä»¥åŠæ­¤Cookieå€¼å¯¹åº”çš„ç”¨æˆ·ä¿¡æ¯ã€‚å½“HTTPè¯·æ±‚åˆ°æ¥æ—¶ï¼ŒCASä»¥æ­¤Cookieå€¼ä¸ºkeyæŸ¥è¯¢ç¼“å­˜ä¸­æœ‰æ— TGT ï¼Œå¦‚æžœæœ‰çš„è¯ï¼Œåˆ™ç›¸ä¿¡ç”¨æˆ·å·²ç™»å½•è¿‡ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="center">ST&lt;/td>
&lt;td align="center">Service Ticket ã€‚STæ˜¯CASä¸ºç”¨æˆ·ç­¾å‘çš„è®¿é—®æŸä¸€serviceçš„ç¥¨æ®ã€‚ç”¨æˆ·è®¿é—®serviceæ—¶ï¼Œserviceå‘çŽ°ç”¨æˆ·æ²¡æœ‰STï¼Œåˆ™è¦æ±‚ç”¨æˆ·åŽ»CASèŽ·å–STã€‚ç”¨æˆ·å‘CASå‘å‡ºèŽ·å–STçš„è¯·æ±‚ï¼ŒCASå‘çŽ°ç”¨æˆ·æœ‰TGTï¼Œåˆ™ç­¾å‘ä¸€ä¸ªSTï¼Œè¿”å›žç»™ç”¨æˆ·ã€‚ç”¨æˆ·æ‹¿ç€STåŽ»è®¿é—®serviceï¼Œserviceæ‹¿STåŽ»CASéªŒè¯ï¼ŒéªŒè¯é€šè¿‡åŽï¼Œå…è®¸ç”¨æˆ·&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="center">TGC&lt;/td>
&lt;td align="center">Ticket Grangting Cookies ä¿æŒTGTä¿¡æ¯çš„cookiesï¼Œä¿å­˜åœ¨ä½¿ç”¨æµè§ˆå™¨çš„å®¢æˆ·ç«¯&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="center">PGT&lt;/td>
&lt;td align="center">Proxy TicketGranting Ticketã€‚Proxy Serviceè®¤è¯æˆåŠŸåŽï¼ŒCASä¼šç”ŸæˆPGTï¼Œå¹¶å°†å€¼å›žä¼ ç»™Proxy Service ã€‚Proxy Serviceæ‹¿åˆ°PGTåŽï¼Œå°±å¯ä»¥ä¸ºTarget Serviceåšä»£ç†ï¼Œä¸ºå…¶ç”³è¯·PTã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="center">PGTIOU&lt;/td>
&lt;td align="center">Proxy TicketGranting Ticket IOUã€‚PGTIOUæ˜¯CASåè®®ä¸­å®šä¹‰çš„ä¸€ç§é™„åŠ ç¥¨æ®ï¼Œå®ƒå¢žå¼ºäº†ä¼ è¾“ã€èŽ·å–PGTçš„å®‰å…¨æ€§ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="center">PT&lt;/td>
&lt;td align="center">Proxy Ticketã€‚PTæ˜¯ç”¨æˆ·è®¿é—®Target Serivceçš„ç¥¨æ®ã€‚ç”¨æˆ·ç»ç”±Proxy ServiceåŽ»CASèŽ·å–åˆ°PTåŽï¼Œå†è®¿é—®Target Serivceï¼ŒTarget SerivceåŽ»CASéªŒè¯PTæˆåŠŸåŽï¼Œæ‰å…è®¸ç”¨æˆ·è®¿é—®ã€‚&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>CASä½œä¸ºä¸€ä¸ªè§„èŒƒï¼Œè§„å®šäº†ä¸€ç³»åˆ—éœ€è¦æš´éœ²çš„æœåŠ¡ç«¯:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th align="center">åœ°å€&lt;/th>
&lt;th align="center">æè¿°&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td align="center">/login&lt;/td>
&lt;td align="center">ç™»å½•&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="center">/logout&lt;/td>
&lt;td align="center">ç™»å‡º&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="center">/validate&lt;/td>
&lt;td align="center">éªŒè¯ST&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="center">/serviceValidate&lt;/td>
&lt;td align="center">éªŒè¯ST [CAS 2.0]&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="center">/proxyValidate&lt;/td>
&lt;td align="center">éªŒè¯PT [CAS 2.0]&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="center">/p3/serviceValidate&lt;/td>
&lt;td align="center">STéªŒè¯ [CAS 3.0]&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="center">/p3/proxyValidate&lt;/td>
&lt;td align="center">PTéªŒè¯ [CAS 3.0]&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-04-08-%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95SSO%E5%92%8C%E9%9B%86%E4%B8%AD%E5%BC%8F%E8%AE%A4%E8%AF%81%E6%9C%8D%E5%8A%A1CAS%E5%92%8C%E5%BC%80%E6%94%BE%E6%8E%88%E6%9D%83OAuth%E7%9A%84%E7%AE%80%E8%A6%81%E8%A7%A3%E9%87%8A/cas.png" alt="CASæ—¶åºå›¾">&lt;/p>
&lt;p>CASæ ‡å‡†ï¼š&lt;a href="https://apereo.github.io/cas/4.2.x/protocol/CAS-Protocol-Specification.html">https://apereo.github.io/cas/4.2.x/protocol/CAS-Protocol-Specification.html&lt;/a>&lt;/p>
&lt;p>CASå®žçŽ°ï¼š&lt;a href="https://www.apereo.org/projects/cas">https://www.apereo.org/projects/cas&lt;/a>&lt;/p>
&lt;h2 id="oauth-oauth2-åˆæ˜¯ä»€ä¹ˆ">OAuth OAuth2 åˆæ˜¯ä»€ä¹ˆï¼Ÿ&lt;/h2>
&lt;blockquote>
&lt;p>&lt;strong>å¼€æ”¾æŽˆæƒ&lt;/strong>ï¼ˆOAuthï¼‰æ˜¯ä¸€ä¸ª&lt;a href="https://zh.wikipedia.org/wiki/%E5%BC%80%E6%94%BE%E6%A0%87%E5%87%86">å¼€æ”¾æ ‡å‡†&lt;/a>ï¼Œå…è®¸ç”¨æˆ·è®©ç¬¬ä¸‰æ–¹åº”ç”¨è®¿é—®è¯¥ç”¨æˆ·åœ¨æŸä¸€ç½‘ç«™ä¸Šå­˜å‚¨çš„ç§å¯†çš„èµ„æºï¼ˆå¦‚ç…§ç‰‡ï¼Œè§†é¢‘ï¼Œè”ç³»äººåˆ—è¡¨ï¼‰ï¼Œè€Œæ— éœ€å°†ç”¨æˆ·åå’Œ&lt;a href="https://zh.wikipedia.org/wiki/%E5%AF%86%E7%A0%81">å¯†ç &lt;/a>æä¾›ç»™ç¬¬ä¸‰æ–¹åº”ç”¨ã€‚&lt;/p>
&lt;p>OAuth 2.0æ˜¯OAuthåè®®çš„ä¸‹ä¸€ç‰ˆæœ¬ï¼Œä½†ä¸å‘ä¸‹å…¼å®¹OAuth 1.0ã€‚OAuth 2.0å…³æ³¨å®¢æˆ·ç«¯å¼€å‘è€…çš„ç®€æ˜“æ€§ï¼ŒåŒæ—¶ä¸ºWebåº”ç”¨ã€æ¡Œé¢åº”ç”¨ã€æ‰‹æœºå’Œæ™ºèƒ½è®¾å¤‡æä¾›ä¸“é—¨çš„è®¤è¯æµç¨‹ã€‚&lt;/p>
&lt;/blockquote>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback"> +--------+ +---------------+
| |--(A)- Authorization Request -&amp;gt;| Resource |
| | | Owner |
| |&amp;lt;-(B)-- Authorization Grant ---| |
| | +---------------+
| |
| | +---------------+
| |--(C)-- Authorization Grant --&amp;gt;| Authorization |
| Client | | Server |
| |&amp;lt;-(D)----- Access Token -------| |
| | +---------------+
| |
| | +---------------+
| |--(E)----- Access Token ------&amp;gt;| Resource |
| | | Server |
| |&amp;lt;-(F)--- Protected Resource ---| |
+--------+ +---------------+
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>ï¼ˆAï¼‰ç”¨æˆ·æ‰“å¼€å®¢æˆ·ç«¯ä»¥åŽï¼Œå®¢æˆ·ç«¯è¯·æ±‚èµ„æºæ‰€æœ‰è€…ï¼ˆç”¨æˆ·ï¼‰çš„æŽˆæƒã€‚&lt;/li>
&lt;li>ï¼ˆBï¼‰ç”¨æˆ·åŒæ„ç»™äºˆå®¢æˆ·ç«¯æŽˆæƒã€‚&lt;/li>
&lt;li>ï¼ˆCï¼‰å®¢æˆ·ç«¯ä½¿ç”¨ä¸Šä¸€æ­¥èŽ·å¾—çš„æŽˆæƒï¼Œå‘è®¤è¯æœåŠ¡å™¨ç”³è¯·è®¿é—®ä»¤ç‰Œã€‚&lt;/li>
&lt;li>ï¼ˆDï¼‰è®¤è¯æœåŠ¡å™¨å¯¹å®¢æˆ·ç«¯è¿›è¡Œè®¤è¯ä»¥åŽï¼Œç¡®è®¤æ— è¯¯ï¼ŒåŒæ„å‘æ”¾è®¿é—®ä»¤ç‰Œã€‚&lt;/li>
&lt;li>ï¼ˆEï¼‰å®¢æˆ·ç«¯ä½¿ç”¨è®¿é—®ä»¤ç‰Œï¼Œå‘èµ„æºæœåŠ¡å™¨ç”³è¯·èŽ·å–èµ„æºã€‚&lt;/li>
&lt;li>ï¼ˆFï¼‰èµ„æºæœåŠ¡å™¨ç¡®è®¤ä»¤ç‰Œæ— è¯¯ï¼ŒåŒæ„å‘å®¢æˆ·ç«¯å¼€æ”¾èµ„æºã€‚&lt;/li>
&lt;/ul>
&lt;p>å®¢æˆ·ç«¯å¿…é¡»å¾—åˆ°ç”¨æˆ·çš„æŽˆæƒï¼ˆauthorization grantï¼‰ï¼Œæ‰èƒ½èŽ·å¾—ä»¤ç‰Œï¼ˆaccess tokenï¼‰ã€‚OAuth 2.0å®šä¹‰äº†å››ç§æŽˆæƒæ–¹å¼ã€‚&lt;/p>
&lt;ul>
&lt;li>æŽˆæƒç æ¨¡å¼ï¼ˆauthorization codeï¼‰&lt;/li>
&lt;li>ç®€åŒ–æ¨¡å¼ï¼ˆimplicitï¼‰&lt;/li>
&lt;li>å¯†ç æ¨¡å¼ï¼ˆresource owner password credentialsï¼‰&lt;/li>
&lt;li>å®¢æˆ·ç«¯æ¨¡å¼ï¼ˆclient credentialsï¼‰&lt;/li>
&lt;/ul>
&lt;p>ä½¿ç”¨GitHubçš„OAuth2çš„ä¸€ä¸ªä¾‹å­:&lt;/p>
&lt;p>è®¿é—®&lt;a href="https://github.com/settings/applications/new">https://github.com/settings/applications/new&lt;/a>ç”³è¯· Client ID å’Œ Client Secret&lt;/p>
&lt;p>&lt;a href="https://developer.github.com/apps/building-oauth-apps/authorizing-oauth-apps/">GitHubçš„OAuth2æ–‡æ¡£&lt;/a>&lt;/p>
&lt;ol>
&lt;li>
&lt;p>ä½¿ç”¨æµè§ˆå™¨è®¿é—®&lt;/p>
&lt;p>&lt;code>GET https://github.com/login/oauth/authorize&lt;/code>&lt;/p>
&lt;p>è¯·æ±‚å‚æ•°:&lt;/p>
&lt;ul>
&lt;li>response_typeï¼šè¡¨ç¤ºæŽˆæƒç±»åž‹ï¼Œå¿…é€‰é¡¹ï¼Œæ­¤å¤„çš„å€¼å›ºå®šä¸º&amp;quot;code&amp;rdquo;&lt;/li>
&lt;li>client_idï¼šè¡¨ç¤ºå®¢æˆ·ç«¯çš„IDï¼Œå¿…é€‰é¡¹&lt;/li>
&lt;li>redirect_uriï¼šè¡¨ç¤ºé‡å®šå‘URIï¼Œå¯é€‰é¡¹&lt;/li>
&lt;li>scopeï¼šè¡¨ç¤ºç”³è¯·çš„æƒé™èŒƒå›´ï¼Œå¯é€‰é¡¹&lt;/li>
&lt;li>stateï¼šè¡¨ç¤ºå®¢æˆ·ç«¯çš„å½“å‰çŠ¶æ€ï¼Œå¯ä»¥æŒ‡å®šä»»æ„å€¼ï¼Œè®¤è¯æœåŠ¡å™¨ä¼šåŽŸå°ä¸åŠ¨åœ°è¿”å›žè¿™ä¸ªå€¼ã€‚&lt;/li>
&lt;/ul>
&lt;p>ä¾‹å¦‚:&lt;code>https://github.com/login/oauth/authorize?response_type=code&amp;amp;client_id=f240fa1fb1eb47037def&amp;amp;redirect_uri=http://localhost:8080/&amp;amp;state=suijizifuchuan&lt;/code>&lt;/p>
&lt;p>è®¿é—®åŽæµè§ˆå™¨ä¼šè¿”å›žä¸€ä¸ªæŽˆæƒé¡µé¢:&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-04-08-%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95SSO%E5%92%8C%E9%9B%86%E4%B8%AD%E5%BC%8F%E8%AE%A4%E8%AF%81%E6%9C%8D%E5%8A%A1CAS%E5%92%8C%E5%BC%80%E6%94%BE%E6%8E%88%E6%9D%83OAuth%E7%9A%84%E7%AE%80%E8%A6%81%E8%A7%A3%E9%87%8A/diyibu.png" alt="æŽˆæƒé¡µé¢">&lt;/p>
&lt;p>æˆ‘ä»¬æŽˆæƒåŽæµè§ˆå™¨ä¼šé‡å®šå‘åˆ°å¦‚ä¸‹åœ°å€:&lt;/p>
&lt;p>&lt;code>http://localhost:8080/?code=d83761f6f1297179075a&amp;amp;state=suijizifuchuan&lt;/code>&lt;/p>
&lt;ul>
&lt;li>codeï¼šè¡¨ç¤ºæŽˆæƒç ï¼Œå¿…é€‰é¡¹ã€‚è¯¥ç çš„æœ‰æ•ˆæœŸåº”è¯¥å¾ˆçŸ­ï¼Œé€šå¸¸è®¾ä¸º10åˆ†é’Ÿï¼Œå®¢æˆ·ç«¯åªèƒ½ä½¿ç”¨è¯¥ç ä¸€æ¬¡ï¼Œå¦åˆ™ä¼šè¢«æŽˆæƒæœåŠ¡å™¨æ‹’ç»ã€‚è¯¥ç ä¸Žå®¢æˆ·ç«¯IDå’Œé‡å®šå‘URIï¼Œæ˜¯ä¸€ä¸€å¯¹åº”å…³ç³»ã€‚&lt;/li>
&lt;li>stateï¼šå¦‚æžœå®¢æˆ·ç«¯çš„è¯·æ±‚ä¸­åŒ…å«è¿™ä¸ªå‚æ•°ï¼Œè®¤è¯æœåŠ¡å™¨çš„å›žåº”ä¹Ÿå¿…é¡»ä¸€æ¨¡ä¸€æ ·åŒ…å«è¿™ä¸ªå‚æ•°ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>å‘é€POSTè¯·æ±‚èŽ·å–ä»¤ç‰Œ&lt;/p>
&lt;p>&lt;code>POST https://github.com/login/oauth/access_token&lt;/code>&lt;/p>
&lt;p>è¯·æ±‚å‚æ•°:&lt;/p>
&lt;ul>
&lt;li>grant_typeï¼šè¡¨ç¤ºä½¿ç”¨çš„æŽˆæƒæ¨¡å¼ï¼Œå¿…é€‰é¡¹ï¼Œæ­¤å¤„çš„å€¼å›ºå®šä¸º&amp;quot;authorization_code&amp;rdquo;ã€‚&lt;/li>
&lt;li>codeï¼šè¡¨ç¤ºä¸Šä¸€æ­¥èŽ·å¾—çš„æŽˆæƒç ï¼Œå¿…é€‰é¡¹ã€‚&lt;/li>
&lt;li>redirect_uriï¼šè¡¨ç¤ºé‡å®šå‘URIï¼Œå¿…é€‰é¡¹ï¼Œä¸”å¿…é¡»ä¸ŽAæ­¥éª¤ä¸­çš„è¯¥å‚æ•°å€¼ä¿æŒä¸€è‡´ã€‚&lt;/li>
&lt;li>client_idï¼šè¡¨ç¤ºå®¢æˆ·ç«¯IDï¼Œå¿…é€‰é¡¹ã€‚&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>æ³¨æ„:GitHubçš„å‚æ•°ä¸Žä»¥ä¸Šå‚æ•°æœ‰äº›ä¸åŒ&lt;/strong>&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>å‚æ•°&lt;/th>
&lt;th>lç±»åž‹&lt;/th>
&lt;th>è§£é‡Š&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>client_secret&lt;/code>&lt;/td>
&lt;td>&lt;code>string&lt;/code>&lt;/td>
&lt;td>**éœ€è¦ã€‚**æ‚¨ä»ŽGitHubæ”¶åˆ°çš„GitHubåº”ç”¨ç¨‹åºçš„å®¢æˆ·æœºå¯†ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>code&lt;/code>&lt;/td>
&lt;td>&lt;code>string&lt;/code>&lt;/td>
&lt;td>**éœ€è¦ã€‚**æ‚¨æ”¶åˆ°çš„ä»£ç ä½œä¸ºå¯¹ç¬¬1æ­¥çš„å›žå¤ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>redirect_uri&lt;/code>&lt;/td>
&lt;td>&lt;code>string&lt;/code>&lt;/td>
&lt;td>åº”ç”¨ç¨‹åºä¸­çš„URLï¼Œç”¨äºŽåœ¨æŽˆæƒåŽå‘é€ç”¨æˆ·ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>state&lt;/code>&lt;/td>
&lt;td>&lt;code>string&lt;/code>&lt;/td>
&lt;td>æ‚¨åœ¨æ­¥éª¤1ä¸­æä¾›çš„ä¸å¯æ€è®®çš„éšæœºå­—ç¬¦ä¸²ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>client_id&lt;/code>&lt;/td>
&lt;td>&lt;code>string&lt;/code>&lt;/td>
&lt;td>**éœ€è¦ã€‚**æ‚¨ä»ŽGitHubæ”¶åˆ°çš„GitHubåº”ç”¨ç¨‹åºçš„å®¢æˆ·ç«¯IDã€‚&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-04-08-%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95SSO%E5%92%8C%E9%9B%86%E4%B8%AD%E5%BC%8F%E8%AE%A4%E8%AF%81%E6%9C%8D%E5%8A%A1CAS%E5%92%8C%E5%BC%80%E6%94%BE%E6%8E%88%E6%9D%83OAuth%E7%9A%84%E7%AE%80%E8%A6%81%E8%A7%A3%E9%87%8A/dierbu.png" alt="ä»¤ç‰Œ">&lt;/p>
&lt;p>å…¶ä¸­:&lt;/p>
&lt;p>&lt;code>1a4800d2903cab1e18b65d6489aadf407c06776e&lt;/code>å°±æ˜¯ä½ èŽ·å–åˆ°çš„ä»¤ç‰Œ&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ä½¿ç”¨è®¿é—®ä»¤ç‰Œè®¿é—®API&lt;/p>
&lt;p>&lt;code>GET https://api.github.com/user?access_token=...&lt;/code>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>&lt;a href="https://waylau.com/principle-and-practice-of-oauth2/">OAuth 2.0 è®¤è¯çš„åŽŸç†ä¸Žå®žè·µ&lt;/a>&lt;/p>
&lt;p>&lt;a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html">ç†è§£OAuth 2.0&lt;/a>&lt;/p></description></item><item><title>Redisç¼“å­˜ç›¸å…³é¢è¯•é¢˜</title><link>https://blog.itning.top/post/2019/04/01/redis%E7%BC%93%E5%AD%98%E7%9B%B8%E5%85%B3%E9%9D%A2%E8%AF%95%E9%A2%98/</link><pubDate>Mon, 01 Apr 2019 14:30:38 +0800</pubDate><guid>https://blog.itning.top/post/2019/04/01/redis%E7%BC%93%E5%AD%98%E7%9B%B8%E5%85%B3%E9%9D%A2%E8%AF%95%E9%A2%98/</guid><description>&lt;h2 id="æ€Žä¹ˆä¿è¯redisæ˜¯é«˜å¹¶å‘ä»¥åŠé«˜å¯ç”¨çš„">æ€Žä¹ˆä¿è¯redisæ˜¯é«˜å¹¶å‘ä»¥åŠé«˜å¯ç”¨çš„ï¼Ÿ&lt;/h2>
&lt;h3 id="rediså¦‚ä½•é€šè¿‡è¯»å†™åˆ†ç¦»æ¥æ‰¿è½½è¯»è¯·æ±‚qpsè¶…è¿‡10ä¸‡">Rediså¦‚ä½•é€šè¿‡è¯»å†™åˆ†ç¦»æ¥æ‰¿è½½è¯»è¯·æ±‚QPSè¶…è¿‡10ä¸‡+ï¼Ÿ&lt;/h3>
&lt;p>ä¸€èˆ¬æ¥è¯´ è¯»é«˜å¹¶å‘ è€Œä¸æ˜¯ å†™é«˜å¹¶å‘ ï¼ˆè¯»å¤šå†™å°‘ï¼‰ï¼ˆå†™å¤šè¯»å°‘æœ€å¥½ç”¨å¼‚æ­¥ã€æ¶ˆæ¯é˜Ÿåˆ—ã€‘ï¼‰&lt;/p>
&lt;p>æ‰€ä»¥è¯»å†™åˆ†ç¦»ï¼šä¸»ä»Žæž¶æž„ ä¸»è´Ÿè´£å†™ ä»ŽèŠ‚ç‚¹è´Ÿè´£è¯»&lt;/p>
&lt;p>QPSå¤ªé«˜å¯ä»¥ç›´æŽ¥å¢žåŠ ä»ŽèŠ‚ç‚¹å³å¯&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-04-01-Redis%E7%BC%93%E5%AD%98%E7%9B%B8%E5%85%B3%E9%9D%A2%E8%AF%95%E9%A2%98/a1.png" alt="ä¸»ä»Žåˆ†ç¦»">&lt;/p>
&lt;h3 id="redis-replicationä»¥åŠmasteræŒä¹…åŒ–å¯¹ä¸»ä»Žæž¶æž„çš„å®‰å…¨æ„ä¹‰">Redis replicationä»¥åŠmasteræŒä¹…åŒ–å¯¹ä¸»ä»Žæž¶æž„çš„å®‰å…¨æ„ä¹‰&lt;/h3>
&lt;p>å¦‚æžœmasterä¸åšæŒä¹…åŒ–ï¼ˆå…³é—­RDBå’ŒAOFï¼‰å½“masterå®•æœºé‡å¯çš„æ—¶å€™ï¼Œmasteræ²¡æœ‰ä»»ä½•æ•°æ®å¯ä»¥æ¢å¤ï¼Œé‚£ä¹ˆå®ƒä¼šå°†ç©ºæ•°æ®åŒæ­¥åˆ°slaveèŠ‚ç‚¹ä¸­ï¼Œç›¸å½“äºŽæ¸…ç©ºäº†slaveèŠ‚ç‚¹ã€‚&lt;/p>
&lt;p>æ‰€ä»¥å¿…é¡»è¦ä½¿ç”¨æŒä¹…åŒ–æœºåˆ¶&lt;/p>
&lt;h3 id="redisä¸»ä»Žå¤åˆ¶åŽŸç†æ–­ç‚¹ç»­ä¼ æ— ç£ç›˜åŒ–å¤åˆ¶è¿‡æœŸkeyå¤„ç†">Redisä¸»ä»Žå¤åˆ¶åŽŸç†ã€æ–­ç‚¹ç»­ä¼ ã€æ— ç£ç›˜åŒ–å¤åˆ¶ã€è¿‡æœŸkeyå¤„ç†&lt;/h3>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-04-01-Redis%E7%BC%93%E5%AD%98%E7%9B%B8%E5%85%B3%E9%9D%A2%E8%AF%95%E9%A2%98/a2.png" alt="RedisReplicaæœ€æœ€åŸºæœ¬çš„åŽŸç†">&lt;/p>
&lt;p>1ã€ä¸»ä»Žæž¶æž„çš„æ ¸å¿ƒåŽŸç†&lt;/p>
&lt;p>å½“å¯åŠ¨ä¸€ä¸ªslave nodeçš„æ—¶å€™ï¼Œå®ƒä¼šå‘é€ä¸€ä¸ªPSYNCå‘½ä»¤ç»™master node&lt;/p>
&lt;p>å¦‚æžœè¿™æ˜¯slave nodeé‡æ–°è¿žæŽ¥master nodeï¼Œé‚£ä¹ˆmaster nodeä»…ä»…ä¼šå¤åˆ¶ç»™slaveéƒ¨åˆ†ç¼ºå°‘çš„æ•°æ®; å¦åˆ™å¦‚æžœæ˜¯slave nodeç¬¬ä¸€æ¬¡è¿žæŽ¥master nodeï¼Œé‚£ä¹ˆä¼šè§¦å‘ä¸€æ¬¡full resynchronization&lt;/p>
&lt;p>å¼€å§‹full resynchronizationçš„æ—¶å€™ï¼Œmasterä¼šå¯åŠ¨ä¸€ä¸ªåŽå°çº¿ç¨‹ï¼Œå¼€å§‹ç”Ÿæˆä¸€ä»½RDBå¿«ç…§æ–‡ä»¶ï¼ŒåŒæ—¶è¿˜ä¼šå°†ä»Žå®¢æˆ·ç«¯æ”¶åˆ°çš„æ‰€æœ‰å†™å‘½ä»¤ç¼“å­˜åœ¨å†…å­˜ä¸­ã€‚RDBæ–‡ä»¶ç”Ÿæˆå®Œæ¯•ä¹‹åŽï¼Œmasterä¼šå°†è¿™ä¸ªRDBå‘é€ç»™slaveï¼Œslaveä¼šå…ˆå†™å…¥æœ¬åœ°ç£ç›˜ï¼Œç„¶åŽå†ä»Žæœ¬åœ°ç£ç›˜åŠ è½½åˆ°å†…å­˜ä¸­ã€‚ç„¶åŽmasterä¼šå°†å†…å­˜ä¸­ç¼“å­˜çš„å†™å‘½ä»¤å‘é€ç»™slaveï¼Œslaveä¹Ÿä¼šåŒæ­¥è¿™äº›æ•°æ®ã€‚&lt;/p>
&lt;p>slave nodeå¦‚æžœè·Ÿmaster nodeæœ‰ç½‘ç»œæ•…éšœï¼Œæ–­å¼€äº†è¿žæŽ¥ï¼Œä¼šè‡ªåŠ¨é‡è¿žã€‚masterå¦‚æžœå‘çŽ°æœ‰å¤šä¸ªslave nodeéƒ½æ¥é‡æ–°è¿žæŽ¥ï¼Œä»…ä»…ä¼šå¯åŠ¨ä¸€ä¸ªrdb saveæ“ä½œï¼Œç”¨ä¸€ä»½æ•°æ®æœåŠ¡æ‰€æœ‰slave nodeã€‚&lt;/p>
&lt;p>2ã€ä¸»ä»Žå¤åˆ¶çš„æ–­ç‚¹ç»­ä¼ &lt;/p>
&lt;p>ä»Žredis 2.8å¼€å§‹ï¼Œå°±æ”¯æŒä¸»ä»Žå¤åˆ¶çš„æ–­ç‚¹ç»­ä¼ ï¼Œå¦‚æžœä¸»ä»Žå¤åˆ¶è¿‡ç¨‹ä¸­ï¼Œç½‘ç»œè¿žæŽ¥æ–­æŽ‰äº†ï¼Œé‚£ä¹ˆå¯ä»¥æŽ¥ç€ä¸Šæ¬¡å¤åˆ¶çš„åœ°æ–¹ï¼Œç»§ç»­å¤åˆ¶ä¸‹åŽ»ï¼Œè€Œä¸æ˜¯ä»Žå¤´å¼€å§‹å¤åˆ¶ä¸€ä»½&lt;/p>
&lt;p>master nodeä¼šåœ¨å†…å­˜ä¸­å¸¸è§ä¸€ä¸ªbacklogï¼Œmasterå’Œslaveéƒ½ä¼šä¿å­˜ä¸€ä¸ªreplica offsetè¿˜æœ‰ä¸€ä¸ªmaster idï¼Œoffsetå°±æ˜¯ä¿å­˜åœ¨backlogä¸­çš„ã€‚å¦‚æžœmasterå’Œslaveç½‘ç»œè¿žæŽ¥æ–­æŽ‰äº†ï¼Œslaveä¼šè®©masterä»Žä¸Šæ¬¡çš„replica offsetå¼€å§‹ç»§ç»­å¤åˆ¶&lt;/p>
&lt;p>ä½†æ˜¯å¦‚æžœæ²¡æœ‰æ‰¾åˆ°å¯¹åº”çš„offsetï¼Œé‚£ä¹ˆå°±ä¼šæ‰§è¡Œä¸€æ¬¡resynchronization&lt;/p>
&lt;p>3ã€æ— ç£ç›˜åŒ–å¤åˆ¶&lt;/p>
&lt;p>masteråœ¨å†…å­˜ä¸­ç›´æŽ¥åˆ›å»ºrdbï¼Œç„¶åŽå‘é€ç»™slaveï¼Œä¸ä¼šåœ¨è‡ªå·±æœ¬åœ°è½åœ°ç£ç›˜äº†&lt;/p>
&lt;p>repl-diskless-sync
repl-diskless-sync-delayï¼Œç­‰å¾…ä¸€å®šæ—¶é•¿å†å¼€å§‹å¤åˆ¶ï¼Œå› ä¸ºè¦ç­‰æ›´å¤šslaveé‡æ–°è¿žæŽ¥è¿‡æ¥&lt;/p>
&lt;p>4ã€è¿‡æœŸkeyå¤„ç†&lt;/p>
&lt;p>slaveä¸ä¼šè¿‡æœŸkeyï¼Œåªä¼šç­‰å¾…masterè¿‡æœŸkeyã€‚å¦‚æžœmasterè¿‡æœŸäº†ä¸€ä¸ªkeyï¼Œæˆ–è€…é€šè¿‡LRUæ·˜æ±°äº†ä¸€ä¸ªkeyï¼Œé‚£ä¹ˆä¼šæ¨¡æ‹Ÿä¸€æ¡delå‘½ä»¤å‘é€ç»™slaveã€‚&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-04-01-Redis%E7%BC%93%E5%AD%98%E7%9B%B8%E5%85%B3%E9%9D%A2%E8%AF%95%E9%A2%98/a3.png" alt="Redisä¸»ä»Žå¤åˆ¶çš„åŽŸç†">&lt;/p>
&lt;h3 id="redis-replicationçš„å®Œæ•´æµè¿è¡Œç¨‹å’ŒåŽŸç†çš„å†æ¬¡æ·±å…¥å‰–æž">Redis Replicationçš„å®Œæ•´æµè¿è¡Œç¨‹å’ŒåŽŸç†çš„å†æ¬¡æ·±å…¥å‰–æž&lt;/h3>
&lt;p>1ã€å¤åˆ¶çš„å®Œæ•´æµç¨‹&lt;/p>
&lt;p>ï¼ˆ1ï¼‰slave nodeå¯åŠ¨ï¼Œä»…ä»…ä¿å­˜master nodeçš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬master nodeçš„hostå’Œipï¼Œä½†æ˜¯å¤åˆ¶æµç¨‹æ²¡å¼€å§‹&lt;/p>
&lt;p>master hostå’Œipæ˜¯ä»Žå“ªå„¿æ¥çš„ï¼Œredis.confé‡Œé¢çš„slaveofé…ç½®çš„&lt;/p>
&lt;p>ï¼ˆ2ï¼‰slave nodeå†…éƒ¨æœ‰ä¸ªå®šæ—¶ä»»åŠ¡ï¼Œæ¯ç§’æ£€æŸ¥æ˜¯å¦æœ‰æ–°çš„master nodeè¦è¿žæŽ¥å’Œå¤åˆ¶ï¼Œå¦‚æžœå‘çŽ°ï¼Œå°±è·Ÿmaster nodeå»ºç«‹socketç½‘ç»œè¿žæŽ¥
ï¼ˆ3ï¼‰slave nodeå‘é€pingå‘½ä»¤ç»™master node
ï¼ˆ4ï¼‰å£ä»¤è®¤è¯ï¼Œå¦‚æžœmasterè®¾ç½®äº†requirepassï¼Œé‚£ä¹ˆsalve nodeå¿…é¡»å‘é€masterauthçš„å£ä»¤è¿‡åŽ»è¿›è¡Œè®¤è¯
ï¼ˆ5ï¼‰master nodeç¬¬ä¸€æ¬¡æ‰§è¡Œå…¨é‡å¤åˆ¶ï¼Œå°†æ‰€æœ‰æ•°æ®å‘ç»™slave node
ï¼ˆ6ï¼‰master nodeåŽç»­æŒç»­å°†å†™å‘½ä»¤ï¼Œå¼‚æ­¥å¤åˆ¶ç»™slave node&lt;/p>
&lt;p>2ã€æ•°æ®åŒæ­¥ç›¸å…³çš„æ ¸å¿ƒæœºåˆ¶&lt;/p>
&lt;p>æŒ‡çš„å°±æ˜¯ç¬¬ä¸€æ¬¡slaveè¿žæŽ¥msaterçš„æ—¶å€™ï¼Œæ‰§è¡Œçš„å…¨é‡å¤åˆ¶ï¼Œé‚£ä¸ªè¿‡ç¨‹é‡Œé¢ä½ çš„ä¸€äº›ç»†èŠ‚çš„æœºåˆ¶&lt;/p>
&lt;p>ï¼ˆ1ï¼‰masterå’Œslaveéƒ½ä¼šç»´æŠ¤ä¸€ä¸ªoffset&lt;/p>
&lt;p>masterä¼šåœ¨è‡ªèº«ä¸æ–­ç´¯åŠ offsetï¼Œslaveä¹Ÿä¼šåœ¨è‡ªèº«ä¸æ–­ç´¯åŠ offset
slaveæ¯ç§’éƒ½ä¼šä¸ŠæŠ¥è‡ªå·±çš„offsetç»™masterï¼ŒåŒæ—¶masterä¹Ÿä¼šä¿å­˜æ¯ä¸ªslaveçš„offset&lt;/p>
&lt;p>è¿™ä¸ªå€’ä¸æ˜¯è¯´ç‰¹å®šå°±ç”¨åœ¨å…¨é‡å¤åˆ¶çš„ï¼Œä¸»è¦æ˜¯masterå’Œslaveéƒ½è¦çŸ¥é“å„è‡ªçš„æ•°æ®çš„offsetï¼Œæ‰èƒ½çŸ¥é“äº’ç›¸ä¹‹é—´çš„æ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µ&lt;/p>
&lt;p>ï¼ˆ2ï¼‰backlog&lt;/p>
&lt;p>master nodeæœ‰ä¸€ä¸ªbacklogï¼Œé»˜è®¤æ˜¯1MBå¤§å°
master nodeç»™slave nodeå¤åˆ¶æ•°æ®æ—¶ï¼Œä¹Ÿä¼šå°†æ•°æ®åœ¨backlogä¸­åŒæ­¥å†™ä¸€ä»½
backlogä¸»è¦æ˜¯ç”¨æ¥åšå…¨é‡å¤åˆ¶ä¸­æ–­å€™çš„å¢žé‡å¤åˆ¶çš„&lt;/p>
&lt;p>ï¼ˆ3ï¼‰master run id&lt;/p>
&lt;p>info serverï¼Œå¯ä»¥çœ‹åˆ°master run id
å¦‚æžœæ ¹æ®host+ipå®šä½master nodeï¼Œæ˜¯ä¸é è°±çš„ï¼Œå¦‚æžœmaster nodeé‡å¯æˆ–è€…æ•°æ®å‡ºçŽ°äº†å˜åŒ–ï¼Œé‚£ä¹ˆslave nodeåº”è¯¥æ ¹æ®ä¸åŒçš„run idåŒºåˆ†ï¼Œrun idä¸åŒå°±åšå…¨é‡å¤åˆ¶
å¦‚æžœéœ€è¦ä¸æ›´æ”¹run idé‡å¯redisï¼Œå¯ä»¥ä½¿ç”¨redis-cli debug reloadå‘½ä»¤&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-04-01-Redis%E7%BC%93%E5%AD%98%E7%9B%B8%E5%85%B3%E9%9D%A2%E8%AF%95%E9%A2%98/a4.png" alt="RedisRunId">&lt;/p>
&lt;p>ï¼ˆ4ï¼‰psync&lt;/p>
&lt;p>ä»ŽèŠ‚ç‚¹ä½¿ç”¨psyncä»Žmaster nodeè¿›è¡Œå¤åˆ¶ï¼Œpsync runid offset
master nodeä¼šæ ¹æ®è‡ªèº«çš„æƒ…å†µè¿”å›žå“åº”ä¿¡æ¯ï¼Œå¯èƒ½æ˜¯FULLRESYNC runid offsetè§¦å‘å…¨é‡å¤åˆ¶ï¼Œå¯èƒ½æ˜¯CONTINUEè§¦å‘å¢žé‡å¤åˆ¶&lt;/p>
&lt;p>3ã€å…¨é‡å¤åˆ¶&lt;/p>
&lt;p>ï¼ˆ1ï¼‰masteræ‰§è¡Œbgsaveï¼Œåœ¨æœ¬åœ°ç”Ÿæˆä¸€ä»½rdbå¿«ç…§æ–‡ä»¶
ï¼ˆ2ï¼‰master nodeå°†rdbå¿«ç…§æ–‡ä»¶å‘é€ç»™salve nodeï¼Œå¦‚æžœrdbå¤åˆ¶æ—¶é—´è¶…è¿‡60ç§’ï¼ˆrepl-timeoutï¼‰ï¼Œé‚£ä¹ˆslave nodeå°±ä¼šè®¤ä¸ºå¤åˆ¶å¤±è´¥ï¼Œå¯ä»¥é€‚å½“è°ƒèŠ‚å¤§è¿™ä¸ªå‚æ•°
ï¼ˆ3ï¼‰å¯¹äºŽåƒå…†ç½‘å¡çš„æœºå™¨ï¼Œä¸€èˆ¬æ¯ç§’ä¼ è¾“100MBï¼Œ6Gæ–‡ä»¶ï¼Œå¾ˆå¯èƒ½è¶…è¿‡60s
ï¼ˆ4ï¼‰master nodeåœ¨ç”Ÿæˆrdbæ—¶ï¼Œä¼šå°†æ‰€æœ‰æ–°çš„å†™å‘½ä»¤ç¼“å­˜åœ¨å†…å­˜ä¸­ï¼Œåœ¨salve nodeä¿å­˜äº†rdbä¹‹åŽï¼Œå†å°†æ–°çš„å†™å‘½ä»¤å¤åˆ¶ç»™salve node
ï¼ˆ5ï¼‰client-output-buffer-limit slave 256MB 64MB 60ï¼Œå¦‚æžœåœ¨å¤åˆ¶æœŸé—´ï¼Œå†…å­˜ç¼“å†²åŒºæŒç»­æ¶ˆè€—è¶…è¿‡64MBï¼Œæˆ–è€…ä¸€æ¬¡æ€§è¶…è¿‡256MBï¼Œé‚£ä¹ˆåœæ­¢å¤åˆ¶ï¼Œå¤åˆ¶å¤±è´¥
ï¼ˆ6ï¼‰slave nodeæŽ¥æ”¶åˆ°rdbä¹‹åŽï¼Œæ¸…ç©ºè‡ªå·±çš„æ—§æ•°æ®ï¼Œç„¶åŽé‡æ–°åŠ è½½rdbåˆ°è‡ªå·±çš„å†…å­˜ä¸­ï¼ŒåŒæ—¶åŸºäºŽæ—§çš„æ•°æ®ç‰ˆæœ¬å¯¹å¤–æä¾›æœåŠ¡
ï¼ˆ7ï¼‰å¦‚æžœslave nodeå¼€å¯äº†AOFï¼Œé‚£ä¹ˆä¼šç«‹å³æ‰§è¡ŒBGREWRITEAOFï¼Œé‡å†™AOF&lt;/p>
&lt;p>rdbç”Ÿæˆã€rdbé€šè¿‡ç½‘ç»œæ‹·è´ã€slaveæ—§æ•°æ®çš„æ¸…ç†ã€slave aof rewriteï¼Œå¾ˆè€—è´¹æ—¶é—´&lt;/p>
&lt;p>å¦‚æžœå¤åˆ¶çš„æ•°æ®é‡åœ¨4G~6Gä¹‹é—´ï¼Œé‚£ä¹ˆå¾ˆå¯èƒ½å…¨é‡å¤åˆ¶æ—¶é—´æ¶ˆè€—åˆ°1åˆ†åŠåˆ°2åˆ†é’Ÿ&lt;/p>
&lt;p>4ã€å¢žé‡å¤åˆ¶&lt;/p>
&lt;p>ï¼ˆ1ï¼‰å¦‚æžœå…¨é‡å¤åˆ¶è¿‡ç¨‹ä¸­ï¼Œmaster-slaveç½‘ç»œè¿žæŽ¥æ–­æŽ‰ï¼Œé‚£ä¹ˆsalveé‡æ–°è¿žæŽ¥masteræ—¶ï¼Œä¼šè§¦å‘å¢žé‡å¤åˆ¶
ï¼ˆ2ï¼‰masterç›´æŽ¥ä»Žè‡ªå·±çš„backlogä¸­èŽ·å–éƒ¨åˆ†ä¸¢å¤±çš„æ•°æ®ï¼Œå‘é€ç»™slave nodeï¼Œé»˜è®¤backlogå°±æ˜¯1MB
ï¼ˆ3ï¼‰msaterå°±æ˜¯æ ¹æ®slaveå‘é€çš„psyncä¸­çš„offsetæ¥ä»Žbacklogä¸­èŽ·å–æ•°æ®çš„&lt;/p>
&lt;p>5ã€heartbeat&lt;/p>
&lt;p>ä¸»ä»ŽèŠ‚ç‚¹äº’ç›¸éƒ½ä¼šå‘é€heartbeatä¿¡æ¯&lt;/p>
&lt;p>masteré»˜è®¤æ¯éš”10ç§’å‘é€ä¸€æ¬¡heartbeatï¼Œsalve nodeæ¯éš”1ç§’å‘é€ä¸€ä¸ªheartbeat&lt;/p>
&lt;p>6ã€å¼‚æ­¥å¤åˆ¶&lt;/p>
&lt;p>masteræ¯æ¬¡æŽ¥æ”¶åˆ°å†™å‘½ä»¤ä¹‹åŽï¼ŒçŽ°åœ¨å†…éƒ¨å†™å…¥æ•°æ®ï¼Œç„¶åŽå¼‚æ­¥å‘é€ç»™slave node&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-04-01-Redis%E7%BC%93%E5%AD%98%E7%9B%B8%E5%85%B3%E9%9D%A2%E8%AF%95%E9%A2%98/a5.png" alt="å¤åˆ¶çš„å®Œæ•´çš„åŸºæœ¬æµç¨‹">&lt;/p>
&lt;h3 id="rediså“¨å…µ">Rediså“¨å…µ&lt;/h3>
&lt;p>1ã€å“¨å…µçš„ä»‹ç»&lt;/p>
&lt;p>sentinalï¼Œä¸­æ–‡åæ˜¯å“¨å…µ&lt;/p>
&lt;p>å“¨å…µæ˜¯redisé›†ç¾¤æž¶æž„ä¸­éžå¸¸é‡è¦çš„ä¸€ä¸ªç»„ä»¶ï¼Œä¸»è¦åŠŸèƒ½å¦‚ä¸‹&lt;/p>
&lt;p>ï¼ˆ1ï¼‰é›†ç¾¤ç›‘æŽ§ï¼Œè´Ÿè´£ç›‘æŽ§redis masterå’Œslaveè¿›ç¨‹æ˜¯å¦æ­£å¸¸å·¥ä½œ
ï¼ˆ2ï¼‰æ¶ˆæ¯é€šçŸ¥ï¼Œå¦‚æžœæŸä¸ªrediså®žä¾‹æœ‰æ•…éšœï¼Œé‚£ä¹ˆå“¨å…µè´Ÿè´£å‘é€æ¶ˆæ¯ä½œä¸ºæŠ¥è­¦é€šçŸ¥ç»™ç®¡ç†å‘˜
ï¼ˆ3ï¼‰æ•…éšœè½¬ç§»ï¼Œå¦‚æžœmaster nodeæŒ‚æŽ‰äº†ï¼Œä¼šè‡ªåŠ¨è½¬ç§»åˆ°slave nodeä¸Š
ï¼ˆ4ï¼‰é…ç½®ä¸­å¿ƒï¼Œå¦‚æžœæ•…éšœè½¬ç§»å‘ç”Ÿäº†ï¼Œé€šçŸ¥clientå®¢æˆ·ç«¯æ–°çš„masteråœ°å€&lt;/p>
&lt;p>å“¨å…µæœ¬èº«ä¹Ÿæ˜¯åˆ†å¸ƒå¼çš„ï¼Œä½œä¸ºä¸€ä¸ªå“¨å…µé›†ç¾¤åŽ»è¿è¡Œï¼Œäº’ç›¸ååŒå·¥ä½œ&lt;/p>
&lt;p>ï¼ˆ1ï¼‰æ•…éšœè½¬ç§»æ—¶ï¼Œåˆ¤æ–­ä¸€ä¸ªmaster nodeæ˜¯å®•æœºäº†ï¼Œéœ€è¦å¤§éƒ¨åˆ†çš„å“¨å…µéƒ½åŒæ„æ‰è¡Œï¼Œæ¶‰åŠåˆ°äº†åˆ†å¸ƒå¼é€‰ä¸¾çš„é—®é¢˜
ï¼ˆ2ï¼‰å³ä½¿éƒ¨åˆ†å“¨å…µèŠ‚ç‚¹æŒ‚æŽ‰äº†ï¼Œå“¨å…µé›†ç¾¤è¿˜æ˜¯èƒ½æ­£å¸¸å·¥ä½œçš„ï¼Œå› ä¸ºå¦‚æžœä¸€ä¸ªä½œä¸ºé«˜å¯ç”¨æœºåˆ¶é‡è¦ç»„æˆéƒ¨åˆ†çš„æ•…éšœè½¬ç§»ç³»ç»Ÿæœ¬èº«æ˜¯å•ç‚¹çš„ï¼Œé‚£å°±å¾ˆå‘çˆ¹äº†&lt;/p>
&lt;p>ç›®å‰é‡‡ç”¨çš„æ˜¯sentinal 2ç‰ˆæœ¬ï¼Œsentinal 2ç›¸å¯¹äºŽsentinal 1æ¥è¯´ï¼Œé‡å†™äº†å¾ˆå¤šä»£ç ï¼Œä¸»è¦æ˜¯è®©æ•…éšœè½¬ç§»çš„æœºåˆ¶å’Œç®—æ³•å˜å¾—æ›´åŠ å¥å£®å’Œç®€å•&lt;/p>
&lt;p>2ã€å“¨å…µçš„æ ¸å¿ƒçŸ¥è¯†&lt;/p>
&lt;p>ï¼ˆ1ï¼‰å“¨å…µè‡³å°‘éœ€è¦3ä¸ªå®žä¾‹ï¼Œæ¥ä¿è¯è‡ªå·±çš„å¥å£®æ€§
ï¼ˆ2ï¼‰å“¨å…µ + redisä¸»ä»Žçš„éƒ¨ç½²æž¶æž„ï¼Œæ˜¯ä¸ä¼šä¿è¯æ•°æ®é›¶ä¸¢å¤±çš„ï¼Œåªèƒ½ä¿è¯redisé›†ç¾¤çš„é«˜å¯ç”¨æ€§
ï¼ˆ3ï¼‰å¯¹äºŽå“¨å…µ + redisä¸»ä»Žè¿™ç§å¤æ‚çš„éƒ¨ç½²æž¶æž„ï¼Œå°½é‡åœ¨æµ‹è¯•çŽ¯å¢ƒå’Œç”Ÿäº§çŽ¯å¢ƒï¼Œéƒ½è¿›è¡Œå……è¶³çš„æµ‹è¯•å’Œæ¼”ç»ƒ&lt;/p>
&lt;p>3ã€ä¸ºä»€ä¹ˆrediså“¨å…µé›†ç¾¤åªæœ‰2ä¸ªèŠ‚ç‚¹æ— æ³•æ­£å¸¸å·¥ä½œï¼Ÿ&lt;/p>
&lt;p>å“¨å…µé›†ç¾¤å¿…é¡»éƒ¨ç½²2ä¸ªä»¥ä¸ŠèŠ‚ç‚¹&lt;/p>
&lt;p>å¦‚æžœå“¨å…µé›†ç¾¤ä»…ä»…éƒ¨ç½²äº†ä¸ª2ä¸ªå“¨å…µå®žä¾‹ï¼Œquorum=1&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">+----+ +----+
| M1 |---------| R1 |
| S1 | | S2 |
+----+ +----+
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Configuration: quorum = 1&lt;/p>
&lt;p>masterå®•æœºï¼Œs1å’Œs2ä¸­åªè¦æœ‰1ä¸ªå“¨å…µè®¤ä¸ºmasterå®•æœºå°±å¯ä»¥è¿˜è¡Œåˆ‡æ¢ï¼ŒåŒæ—¶s1å’Œs2ä¸­ä¼šé€‰ä¸¾å‡ºä¸€ä¸ªå“¨å…µæ¥æ‰§è¡Œæ•…éšœè½¬ç§»&lt;/p>
&lt;p>åŒæ—¶è¿™ä¸ªæ—¶å€™ï¼Œéœ€è¦majorityï¼Œä¹Ÿå°±æ˜¯å¤§å¤šæ•°å“¨å…µéƒ½æ˜¯è¿è¡Œçš„ï¼Œ2ä¸ªå“¨å…µçš„majorityå°±æ˜¯2ï¼ˆ2çš„majority=2ï¼Œ3çš„majority=2ï¼Œ5çš„majority=3ï¼Œ4çš„majority=2ï¼‰ï¼Œ2ä¸ªå“¨å…µéƒ½è¿è¡Œç€ï¼Œå°±å¯ä»¥å…è®¸æ‰§è¡Œæ•…éšœè½¬ç§»&lt;/p>
&lt;p>ä½†æ˜¯å¦‚æžœæ•´ä¸ªM1å’ŒS1è¿è¡Œçš„æœºå™¨å®•æœºäº†ï¼Œé‚£ä¹ˆå“¨å…µåªæœ‰1ä¸ªäº†ï¼Œæ­¤æ—¶å°±æ²¡æœ‰majorityæ¥å…è®¸æ‰§è¡Œæ•…éšœè½¬ç§»ï¼Œè™½ç„¶å¦å¤–ä¸€å°æœºå™¨è¿˜æœ‰ä¸€ä¸ªR1ï¼Œä½†æ˜¯æ•…éšœè½¬ç§»ä¸ä¼šæ‰§è¡Œ&lt;/p>
&lt;p>4ã€ç»å…¸çš„3èŠ‚ç‚¹å“¨å…µé›†ç¾¤&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback"> +----+
| M1 |
| S1 |
+----+
|
+----+ | +----+
| R2 |----+----| R3 |
| S2 | | S3 |
+----+ +----+
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Configuration: quorum = 2ï¼Œmajority&lt;/p>
&lt;p>å¦‚æžœM1æ‰€åœ¨æœºå™¨å®•æœºäº†ï¼Œé‚£ä¹ˆä¸‰ä¸ªå“¨å…µè¿˜å‰©ä¸‹2ä¸ªï¼ŒS2å’ŒS3å¯ä»¥ä¸€è‡´è®¤ä¸ºmasterå®•æœºï¼Œç„¶åŽé€‰ä¸¾å‡ºä¸€ä¸ªæ¥æ‰§è¡Œæ•…éšœè½¬ç§»&lt;/p>
&lt;p>åŒæ—¶3ä¸ªå“¨å…µçš„majorityæ˜¯2ï¼Œæ‰€ä»¥è¿˜å‰©ä¸‹çš„2ä¸ªå“¨å…µè¿è¡Œç€ï¼Œå°±å¯ä»¥å…è®¸æ‰§è¡Œæ•…éšœè½¬ç§»&lt;/p>
&lt;h3 id="rediså“¨å…µä¸»å¤‡åˆ‡æ¢çš„æ•°æ®ä¸¢å¤±é—®é¢˜å¼‚æ­¥å¤åˆ¶é›†ç¾¤è„‘è£‚">Rediså“¨å…µä¸»å¤‡åˆ‡æ¢çš„æ•°æ®ä¸¢å¤±é—®é¢˜ï¼šå¼‚æ­¥å¤åˆ¶ã€é›†ç¾¤è„‘è£‚&lt;/h3>
&lt;p>1ã€ä¸¤ç§æ•°æ®ä¸¢å¤±çš„æƒ…å†µ&lt;/p>
&lt;p>ä¸»å¤‡åˆ‡æ¢çš„è¿‡ç¨‹ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ•°æ®ä¸¢å¤±&lt;/p>
&lt;p>ï¼ˆ1ï¼‰å¼‚æ­¥å¤åˆ¶å¯¼è‡´çš„æ•°æ®ä¸¢å¤±&lt;/p>
&lt;p>å› ä¸ºmaster -&amp;gt; slaveçš„å¤åˆ¶æ˜¯å¼‚æ­¥çš„ï¼Œæ‰€ä»¥å¯èƒ½æœ‰éƒ¨åˆ†æ•°æ®è¿˜æ²¡å¤åˆ¶åˆ°slaveï¼Œmasterå°±å®•æœºäº†ï¼Œæ­¤æ—¶è¿™äº›éƒ¨åˆ†æ•°æ®å°±ä¸¢å¤±äº†&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-04-01-Redis%E7%BC%93%E5%AD%98%E7%9B%B8%E5%85%B3%E9%9D%A2%E8%AF%95%E9%A2%98/a6.png" alt="å¼‚æ­¥å¤åˆ¶å¯¼è‡´çš„æ•°æ®ä¸¢å¤±">&lt;/p>
&lt;p>ï¼ˆ2ï¼‰è„‘è£‚å¯¼è‡´çš„æ•°æ®ä¸¢å¤±&lt;/p>
&lt;p>è„‘è£‚ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒæŸä¸ªmasteræ‰€åœ¨æœºå™¨çªç„¶è„±ç¦»äº†æ­£å¸¸çš„ç½‘ç»œï¼Œè·Ÿå…¶ä»–slaveæœºå™¨ä¸èƒ½è¿žæŽ¥ï¼Œä½†æ˜¯å®žé™…ä¸Šmasterè¿˜è¿è¡Œç€&lt;/p>
&lt;p>æ­¤æ—¶å“¨å…µå¯èƒ½å°±ä¼šè®¤ä¸ºmasterå®•æœºäº†ï¼Œç„¶åŽå¼€å¯é€‰ä¸¾ï¼Œå°†å…¶ä»–slaveåˆ‡æ¢æˆäº†master&lt;/p>
&lt;p>è¿™ä¸ªæ—¶å€™ï¼Œé›†ç¾¤é‡Œå°±ä¼šæœ‰ä¸¤ä¸ªmasterï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„è„‘è£‚&lt;/p>
&lt;p>æ­¤æ—¶è™½ç„¶æŸä¸ªslaveè¢«åˆ‡æ¢æˆäº†masterï¼Œä½†æ˜¯å¯èƒ½clientè¿˜æ²¡æ¥å¾—åŠåˆ‡æ¢åˆ°æ–°çš„masterï¼Œè¿˜ç»§ç»­å†™å‘æ—§masterçš„æ•°æ®å¯èƒ½ä¹Ÿä¸¢å¤±äº†&lt;/p>
&lt;p>å› æ­¤æ—§masterå†æ¬¡æ¢å¤çš„æ—¶å€™ï¼Œä¼šè¢«ä½œä¸ºä¸€ä¸ªslaveæŒ‚åˆ°æ–°çš„masterä¸ŠåŽ»ï¼Œè‡ªå·±çš„æ•°æ®ä¼šæ¸…ç©ºï¼Œé‡æ–°ä»Žæ–°çš„masterå¤åˆ¶æ•°æ®&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-04-01-Redis%E7%BC%93%E5%AD%98%E7%9B%B8%E5%85%B3%E9%9D%A2%E8%AF%95%E9%A2%98/a7.png" alt="è„‘è£‚å¯¼è‡´çš„æ•°æ®ä¸¢å¤±">&lt;/p>
&lt;hr>
&lt;p>2ã€è§£å†³å¼‚æ­¥å¤åˆ¶å’Œè„‘è£‚å¯¼è‡´çš„æ•°æ®ä¸¢å¤±&lt;/p>
&lt;p>min-slaves-to-write 1
min-slaves-max-lag 10&lt;/p>
&lt;p>è¦æ±‚è‡³å°‘æœ‰1ä¸ªslaveï¼Œæ•°æ®å¤åˆ¶å’ŒåŒæ­¥çš„å»¶è¿Ÿä¸èƒ½è¶…è¿‡10ç§’&lt;/p>
&lt;p>å¦‚æžœè¯´ä¸€æ—¦æ‰€æœ‰çš„slaveï¼Œæ•°æ®å¤åˆ¶å’ŒåŒæ­¥çš„å»¶è¿Ÿéƒ½è¶…è¿‡äº†10ç§’é’Ÿï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™ï¼Œmasterå°±ä¸ä¼šå†æŽ¥æ”¶ä»»ä½•è¯·æ±‚äº†&lt;/p>
&lt;p>ä¸Šé¢ä¸¤ä¸ªé…ç½®å¯ä»¥å‡å°‘å¼‚æ­¥å¤åˆ¶å’Œè„‘è£‚å¯¼è‡´çš„æ•°æ®ä¸¢å¤±&lt;/p>
&lt;p>ï¼ˆ1ï¼‰å‡å°‘å¼‚æ­¥å¤åˆ¶çš„æ•°æ®ä¸¢å¤±&lt;/p>
&lt;p>æœ‰äº†min-slaves-max-lagè¿™ä¸ªé…ç½®ï¼Œå°±å¯ä»¥ç¡®ä¿è¯´ï¼Œä¸€æ—¦slaveå¤åˆ¶æ•°æ®å’Œackå»¶æ—¶å¤ªé•¿ï¼Œå°±è®¤ä¸ºå¯èƒ½masterå®•æœºåŽæŸå¤±çš„æ•°æ®å¤ªå¤šäº†ï¼Œé‚£ä¹ˆå°±æ‹’ç»å†™è¯·æ±‚ï¼Œè¿™æ ·å¯ä»¥æŠŠmasterå®•æœºæ—¶ç”±äºŽéƒ¨åˆ†æ•°æ®æœªåŒæ­¥åˆ°slaveå¯¼è‡´çš„æ•°æ®ä¸¢å¤±é™ä½Žçš„å¯æŽ§èŒƒå›´å†…&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-04-01-Redis%E7%BC%93%E5%AD%98%E7%9B%B8%E5%85%B3%E9%9D%A2%E8%AF%95%E9%A2%98/a8.png" alt="å‡å°‘å¼‚æ­¥å¤åˆ¶çš„æ•°æ®ä¸¢å¤±">&lt;/p>
&lt;p>ï¼ˆ2ï¼‰å‡å°‘è„‘è£‚çš„æ•°æ®ä¸¢å¤±&lt;/p>
&lt;p>å¦‚æžœä¸€ä¸ªmasterå‡ºçŽ°äº†è„‘è£‚ï¼Œè·Ÿå…¶ä»–slaveä¸¢äº†è¿žæŽ¥ï¼Œé‚£ä¹ˆä¸Šé¢ä¸¤ä¸ªé…ç½®å¯ä»¥ç¡®ä¿è¯´ï¼Œå¦‚æžœä¸èƒ½ç»§ç»­ç»™æŒ‡å®šæ•°é‡çš„slaveå‘é€æ•°æ®ï¼Œè€Œä¸”slaveè¶…è¿‡10ç§’æ²¡æœ‰ç»™è‡ªå·±ackæ¶ˆæ¯ï¼Œé‚£ä¹ˆå°±ç›´æŽ¥æ‹’ç»å®¢æˆ·ç«¯çš„å†™è¯·æ±‚&lt;/p>
&lt;p>è¿™æ ·è„‘è£‚åŽçš„æ—§masterå°±ä¸ä¼šæŽ¥å—clientçš„æ–°æ•°æ®ï¼Œä¹Ÿå°±é¿å…äº†æ•°æ®ä¸¢å¤±&lt;/p>
&lt;p>ä¸Šé¢çš„é…ç½®å°±ç¡®ä¿äº†ï¼Œå¦‚æžœè·Ÿä»»ä½•ä¸€ä¸ªslaveä¸¢äº†è¿žæŽ¥ï¼Œåœ¨10ç§’åŽå‘çŽ°æ²¡æœ‰slaveç»™è‡ªå·±ackï¼Œé‚£ä¹ˆå°±æ‹’ç»æ–°çš„å†™è¯·æ±‚&lt;/p>
&lt;p>å› æ­¤åœ¨è„‘è£‚åœºæ™¯ä¸‹ï¼Œæœ€å¤šå°±ä¸¢å¤±10ç§’çš„æ•°æ®&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-04-01-Redis%E7%BC%93%E5%AD%98%E7%9B%B8%E5%85%B3%E9%9D%A2%E8%AF%95%E9%A2%98/a9.png" alt="å‡å°‘è„‘è£‚çš„æ•°æ®ä¸¢å¤±">&lt;/p>
&lt;h3 id="rediså“¨å…µçš„å¤šä¸ªæ ¸å¿ƒåº•å±‚åŽŸç†çš„æ·±å…¥è§£æžåŒ…å«slaveé€‰ä¸¾ç®—æ³•">Rediså“¨å…µçš„å¤šä¸ªæ ¸å¿ƒåº•å±‚åŽŸç†çš„æ·±å…¥è§£æžï¼ˆåŒ…å«slaveé€‰ä¸¾ç®—æ³•ï¼‰&lt;/h3>
&lt;p>1ã€sdownå’Œodownè½¬æ¢æœºåˆ¶&lt;/p>
&lt;p>sdownå’Œodownä¸¤ç§å¤±è´¥çŠ¶æ€&lt;/p>
&lt;p>sdownæ˜¯ä¸»è§‚å®•æœºï¼Œå°±ä¸€ä¸ªå“¨å…µå¦‚æžœè‡ªå·±è§‰å¾—ä¸€ä¸ªmasterå®•æœºäº†ï¼Œé‚£ä¹ˆå°±æ˜¯ä¸»è§‚å®•æœº&lt;/p>
&lt;p>odownæ˜¯å®¢è§‚å®•æœºï¼Œå¦‚æžœquorumæ•°é‡çš„å“¨å…µéƒ½è§‰å¾—ä¸€ä¸ªmasterå®•æœºäº†ï¼Œé‚£ä¹ˆå°±æ˜¯å®¢è§‚å®•æœº&lt;/p>
&lt;p>sdownè¾¾æˆçš„æ¡ä»¶å¾ˆç®€å•ï¼Œå¦‚æžœä¸€ä¸ªå“¨å…µpingä¸€ä¸ªmasterï¼Œè¶…è¿‡äº†is-master-down-after-millisecondsæŒ‡å®šçš„æ¯«ç§’æ•°ä¹‹åŽï¼Œå°±ä¸»è§‚è®¤ä¸ºmasterå®•æœº&lt;/p>
&lt;p>sdownåˆ°odownè½¬æ¢çš„æ¡ä»¶å¾ˆç®€å•ï¼Œå¦‚æžœä¸€ä¸ªå“¨å…µåœ¨æŒ‡å®šæ—¶é—´å†…ï¼Œæ”¶åˆ°äº†quorumæŒ‡å®šæ•°é‡çš„å…¶ä»–å“¨å…µä¹Ÿè®¤ä¸ºé‚£ä¸ªmasteræ˜¯sdownäº†ï¼Œé‚£ä¹ˆå°±è®¤ä¸ºæ˜¯odownäº†ï¼Œå®¢è§‚è®¤ä¸ºmasterå®•æœº&lt;/p>
&lt;p>2ã€å“¨å…µé›†ç¾¤çš„è‡ªåŠ¨å‘çŽ°æœºåˆ¶&lt;/p>
&lt;p>å“¨å…µäº’ç›¸ä¹‹é—´çš„å‘çŽ°ï¼Œæ˜¯é€šè¿‡redisçš„pub/subç³»ç»Ÿå®žçŽ°çš„ï¼Œæ¯ä¸ªå“¨å…µéƒ½ä¼šå¾€__sentinel__:helloè¿™ä¸ªchannelé‡Œå‘é€ä¸€ä¸ªæ¶ˆæ¯ï¼Œè¿™æ—¶å€™æ‰€æœ‰å…¶ä»–å“¨å…µéƒ½å¯ä»¥æ¶ˆè´¹åˆ°è¿™ä¸ªæ¶ˆæ¯ï¼Œå¹¶æ„ŸçŸ¥åˆ°å…¶ä»–çš„å“¨å…µçš„å­˜åœ¨&lt;/p>
&lt;p>æ¯éš”ä¸¤ç§’é’Ÿï¼Œæ¯ä¸ªå“¨å…µéƒ½ä¼šå¾€è‡ªå·±ç›‘æŽ§çš„æŸä¸ªmaster+slaveså¯¹åº”çš„__sentinel__:hello channelé‡Œå‘é€ä¸€ä¸ªæ¶ˆæ¯ï¼Œå†…å®¹æ˜¯è‡ªå·±çš„hostã€ipå’Œrunidè¿˜æœ‰å¯¹è¿™ä¸ªmasterçš„ç›‘æŽ§é…ç½®&lt;/p>
&lt;p>æ¯ä¸ªå“¨å…µä¹Ÿä¼šåŽ»ç›‘å¬è‡ªå·±ç›‘æŽ§çš„æ¯ä¸ªmaster+slaveså¯¹åº”çš„__sentinel__:hello channelï¼Œç„¶åŽåŽ»æ„ŸçŸ¥åˆ°åŒæ ·åœ¨ç›‘å¬è¿™ä¸ªmaster+slavesçš„å…¶ä»–å“¨å…µçš„å­˜åœ¨&lt;/p>
&lt;p>æ¯ä¸ªå“¨å…µè¿˜ä¼šè·Ÿå…¶ä»–å“¨å…µäº¤æ¢å¯¹masterçš„ç›‘æŽ§é…ç½®ï¼Œäº’ç›¸è¿›è¡Œç›‘æŽ§é…ç½®çš„åŒæ­¥&lt;/p>
&lt;p>3ã€slaveé…ç½®çš„è‡ªåŠ¨çº æ­£&lt;/p>
&lt;p>å“¨å…µä¼šè´Ÿè´£è‡ªåŠ¨çº æ­£slaveçš„ä¸€äº›é…ç½®ï¼Œæ¯”å¦‚slaveå¦‚æžœè¦æˆä¸ºæ½œåœ¨çš„masterå€™é€‰äººï¼Œå“¨å…µä¼šç¡®ä¿slaveåœ¨å¤åˆ¶çŽ°æœ‰masterçš„æ•°æ®; å¦‚æžœslaveè¿žæŽ¥åˆ°äº†ä¸€ä¸ªé”™è¯¯çš„masterä¸Šï¼Œæ¯”å¦‚æ•…éšœè½¬ç§»ä¹‹åŽï¼Œé‚£ä¹ˆå“¨å…µä¼šç¡®ä¿å®ƒä»¬è¿žæŽ¥åˆ°æ­£ç¡®çš„masterä¸Š&lt;/p>
&lt;p>4ã€slave-&amp;gt;masteré€‰ä¸¾ç®—æ³•&lt;/p>
&lt;p>å¦‚æžœä¸€ä¸ªmasterè¢«è®¤ä¸ºodownäº†ï¼Œè€Œä¸”majorityå“¨å…µéƒ½å…è®¸äº†ä¸»å¤‡åˆ‡æ¢ï¼Œé‚£ä¹ˆæŸä¸ªå“¨å…µå°±ä¼šæ‰§è¡Œä¸»å¤‡åˆ‡æ¢æ“ä½œï¼Œæ­¤æ—¶é¦–å…ˆè¦é€‰ä¸¾ä¸€ä¸ªslaveæ¥&lt;/p>
&lt;p>ä¼šè€ƒè™‘slaveçš„ä¸€äº›ä¿¡æ¯&lt;/p>
&lt;p>ï¼ˆ1ï¼‰è·Ÿmasteræ–­å¼€è¿žæŽ¥çš„æ—¶é•¿
ï¼ˆ2ï¼‰slaveä¼˜å…ˆçº§
ï¼ˆ3ï¼‰å¤åˆ¶offset
ï¼ˆ4ï¼‰run id&lt;/p>
&lt;p>å¦‚æžœä¸€ä¸ªslaveè·Ÿmasteræ–­å¼€è¿žæŽ¥å·²ç»è¶…è¿‡äº†down-after-millisecondsçš„10å€ï¼Œå¤–åŠ masterå®•æœºçš„æ—¶é•¿ï¼Œé‚£ä¹ˆslaveå°±è¢«è®¤ä¸ºä¸é€‚åˆé€‰ä¸¾ä¸ºmaster&lt;/p>
&lt;p>(down-after-milliseconds * 10) + milliseconds_since_master_is_in_SDOWN_state&lt;/p>
&lt;p>æŽ¥ä¸‹æ¥ä¼šå¯¹slaveè¿›è¡ŒæŽ’åº&lt;/p>
&lt;p>ï¼ˆ1ï¼‰æŒ‰ç…§slaveä¼˜å…ˆçº§è¿›è¡ŒæŽ’åºï¼Œslave priorityè¶Šä½Žï¼Œä¼˜å…ˆçº§å°±è¶Šé«˜
ï¼ˆ2ï¼‰å¦‚æžœslave priorityç›¸åŒï¼Œé‚£ä¹ˆçœ‹replica offsetï¼Œå“ªä¸ªslaveå¤åˆ¶äº†è¶Šå¤šçš„æ•°æ®ï¼Œoffsetè¶Šé åŽï¼Œä¼˜å…ˆçº§å°±è¶Šé«˜
ï¼ˆ3ï¼‰å¦‚æžœä¸Šé¢ä¸¤ä¸ªæ¡ä»¶éƒ½ç›¸åŒï¼Œé‚£ä¹ˆé€‰æ‹©ä¸€ä¸ªrun idæ¯”è¾ƒå°çš„é‚£ä¸ªslave&lt;/p>
&lt;p>5ã€quorumå’Œmajority&lt;/p>
&lt;p>æ¯æ¬¡ä¸€ä¸ªå“¨å…µè¦åšä¸»å¤‡åˆ‡æ¢ï¼Œé¦–å…ˆéœ€è¦quorumæ•°é‡çš„å“¨å…µè®¤ä¸ºodownï¼Œç„¶åŽé€‰ä¸¾å‡ºä¸€ä¸ªå“¨å…µæ¥åšåˆ‡æ¢ï¼Œè¿™ä¸ªå“¨å…µè¿˜å¾—å¾—åˆ°majorityå“¨å…µçš„æŽˆæƒï¼Œæ‰èƒ½æ­£å¼æ‰§è¡Œåˆ‡æ¢&lt;/p>
&lt;p>å¦‚æžœquorum &amp;lt; majorityï¼Œæ¯”å¦‚5ä¸ªå“¨å…µï¼Œmajorityå°±æ˜¯3ï¼Œquorumè®¾ç½®ä¸º2ï¼Œé‚£ä¹ˆå°±3ä¸ªå“¨å…µæŽˆæƒå°±å¯ä»¥æ‰§è¡Œåˆ‡æ¢&lt;/p>
&lt;p>ä½†æ˜¯å¦‚æžœquorum &amp;gt;= majorityï¼Œé‚£ä¹ˆå¿…é¡»quorumæ•°é‡çš„å“¨å…µéƒ½æŽˆæƒï¼Œæ¯”å¦‚5ä¸ªå“¨å…µï¼Œquorumæ˜¯5ï¼Œé‚£ä¹ˆå¿…é¡»5ä¸ªå“¨å…µéƒ½åŒæ„æŽˆæƒï¼Œæ‰èƒ½æ‰§è¡Œåˆ‡æ¢&lt;/p>
&lt;p>6ã€configuration epoch&lt;/p>
&lt;p>å“¨å…µä¼šå¯¹ä¸€å¥—redis master+slaveè¿›è¡Œç›‘æŽ§ï¼Œæœ‰ç›¸åº”çš„ç›‘æŽ§çš„é…ç½®&lt;/p>
&lt;p>æ‰§è¡Œåˆ‡æ¢çš„é‚£ä¸ªå“¨å…µï¼Œä¼šä»Žè¦åˆ‡æ¢åˆ°çš„æ–°masterï¼ˆsalve-&amp;gt;masterï¼‰é‚£é‡Œå¾—åˆ°ä¸€ä¸ªconfiguration epochï¼Œè¿™å°±æ˜¯ä¸€ä¸ªversionå·ï¼Œæ¯æ¬¡åˆ‡æ¢çš„versionå·éƒ½å¿…é¡»æ˜¯å”¯ä¸€çš„&lt;/p>
&lt;p>å¦‚æžœç¬¬ä¸€ä¸ªé€‰ä¸¾å‡ºçš„å“¨å…µåˆ‡æ¢å¤±è´¥äº†ï¼Œé‚£ä¹ˆå…¶ä»–å“¨å…µï¼Œä¼šç­‰å¾…failover-timeoutæ—¶é—´ï¼Œç„¶åŽæŽ¥æ›¿ç»§ç»­æ‰§è¡Œåˆ‡æ¢ï¼Œæ­¤æ—¶ä¼šé‡æ–°èŽ·å–ä¸€ä¸ªæ–°çš„configuration epochï¼Œä½œä¸ºæ–°çš„versionå·&lt;/p>
&lt;p>7ã€configuraitonä¼ æ’­&lt;/p>
&lt;p>å“¨å…µå®Œæˆåˆ‡æ¢ä¹‹åŽï¼Œä¼šåœ¨è‡ªå·±æœ¬åœ°æ›´æ–°ç”Ÿæˆæœ€æ–°çš„masteré…ç½®ï¼Œç„¶åŽåŒæ­¥ç»™å…¶ä»–çš„å“¨å…µï¼Œå°±æ˜¯é€šè¿‡ä¹‹å‰è¯´çš„pub/subæ¶ˆæ¯æœºåˆ¶&lt;/p>
&lt;p>è¿™é‡Œä¹‹å‰çš„versionå·å°±å¾ˆé‡è¦äº†ï¼Œå› ä¸ºå„ç§æ¶ˆæ¯éƒ½æ˜¯é€šè¿‡ä¸€ä¸ªchannelåŽ»å‘å¸ƒå’Œç›‘å¬çš„ï¼Œæ‰€ä»¥ä¸€ä¸ªå“¨å…µå®Œæˆä¸€æ¬¡æ–°çš„åˆ‡æ¢ä¹‹åŽï¼Œæ–°çš„masteré…ç½®æ˜¯è·Ÿç€æ–°çš„versionå·çš„&lt;/p>
&lt;p>å…¶ä»–çš„å“¨å…µéƒ½æ˜¯æ ¹æ®ç‰ˆæœ¬å·çš„å¤§å°æ¥æ›´æ–°è‡ªå·±çš„masteré…ç½®çš„&lt;/p>
&lt;h2 id="æ€Žä¹ˆä¿è¯redisæŒ‚æŽ‰ä¹‹åŽå†é‡å¯æ•°æ®å¯ä»¥è¿›è¡Œæ¢å¤">æ€Žä¹ˆä¿è¯redisæŒ‚æŽ‰ä¹‹åŽå†é‡å¯æ•°æ®å¯ä»¥è¿›è¡Œæ¢å¤ï¼Ÿ&lt;/h2>
&lt;h3 id="ä¸ºä»€ä¹ˆè¦åšæŒä¹…åŒ–">ä¸ºä»€ä¹ˆè¦åšæŒä¹…åŒ–ï¼Ÿ&lt;/h3>
&lt;p>å¦‚æžœæ²¡æœ‰æŒä¹…åŒ–çš„è¯ï¼Œredisé‡åˆ°ç¾éš¾æ€§æ•…éšœçš„æ—¶å€™ï¼Œå°±ä¼šä¸¢å¤±æ‰€æœ‰çš„æ•°æ®&lt;/p>
&lt;p>å¦‚æžœé€šè¿‡æŒä¹…åŒ–å°†æ•°æ®æžä¸€ä»½å„¿åœ¨ç£ç›˜ä¸ŠåŽ»ï¼Œç„¶åŽå®šæœŸæ¯”å¦‚è¯´åŒæ­¥å’Œå¤‡ä»½åˆ°ä¸€äº›äº‘å­˜å‚¨æœåŠ¡ä¸ŠåŽ»ï¼Œé‚£ä¹ˆå°±å¯ä»¥ä¿è¯æ•°æ®ä¸ä¸¢å¤±å…¨éƒ¨ï¼Œè¿˜æ˜¯å¯ä»¥æ¢å¤ä¸€éƒ¨åˆ†æ•°æ®å›žæ¥çš„&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-04-01-Redis%E7%BC%93%E5%AD%98%E7%9B%B8%E5%85%B3%E9%9D%A2%E8%AF%95%E9%A2%98/a10.png" alt="redisæŒä¹…åŒ–çš„æ„ä¹‰">&lt;/p>
&lt;h3 id="rdbä¸Žaof">RDBä¸ŽAOF&lt;/h3>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-04-01-Redis%E7%BC%93%E5%AD%98%E7%9B%B8%E5%85%B3%E9%9D%A2%E8%AF%95%E9%A2%98/a11.png" alt="RDBå’ŒAOFçš„ä»‹ç»">&lt;/p>
&lt;p>1ã€RDBå’ŒAOFä¸¤ç§æŒä¹…åŒ–æœºåˆ¶çš„ä»‹ç»&lt;/p>
&lt;p>RDBæŒä¹…åŒ–æœºåˆ¶ï¼Œå¯¹redisä¸­çš„æ•°æ®æ‰§è¡Œå‘¨æœŸæ€§çš„æŒä¹…åŒ–&lt;/p>
&lt;p>AOFæœºåˆ¶å¯¹æ¯æ¡å†™å…¥å‘½ä»¤ä½œä¸ºæ—¥å¿—ï¼Œä»¥append-onlyçš„æ¨¡å¼å†™å…¥ä¸€ä¸ªæ—¥å¿—æ–‡ä»¶ä¸­ï¼Œåœ¨redisé‡å¯çš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡å›žæ”¾AOFæ—¥å¿—ä¸­çš„å†™å…¥æŒ‡ä»¤æ¥é‡æ–°æž„å»ºæ•´ä¸ªæ•°æ®é›†&lt;/p>
&lt;p>å¦‚æžœæˆ‘ä»¬æƒ³è¦redisä»…ä»…ä½œä¸ºçº¯å†…å­˜çš„ç¼“å­˜æ¥ç”¨ï¼Œé‚£ä¹ˆå¯ä»¥ç¦æ­¢RDBå’ŒAOFæ‰€æœ‰çš„æŒä¹…åŒ–æœºåˆ¶&lt;/p>
&lt;p>é€šè¿‡RDBæˆ–AOFï¼Œéƒ½å¯ä»¥å°†rediså†…å­˜ä¸­çš„æ•°æ®ç»™æŒä¹…åŒ–åˆ°ç£ç›˜ä¸Šé¢æ¥ï¼Œç„¶åŽå¯ä»¥å°†è¿™äº›æ•°æ®å¤‡ä»½åˆ°åˆ«çš„åœ°æ–¹åŽ»ï¼Œæ¯”å¦‚è¯´é˜¿é‡Œäº‘ï¼Œäº‘æœåŠ¡&lt;/p>
&lt;p>å¦‚æžœredisæŒ‚äº†ï¼ŒæœåŠ¡å™¨ä¸Šçš„å†…å­˜å’Œç£ç›˜ä¸Šçš„æ•°æ®éƒ½ä¸¢äº†ï¼Œå¯ä»¥ä»Žäº‘æœåŠ¡ä¸Šæ‹·è´å›žæ¥ä¹‹å‰çš„æ•°æ®ï¼Œæ”¾åˆ°æŒ‡å®šçš„ç›®å½•ä¸­ï¼Œç„¶åŽé‡æ–°å¯åŠ¨redisï¼Œrediså°±ä¼šè‡ªåŠ¨æ ¹æ®æŒä¹…åŒ–æ•°æ®æ–‡ä»¶ä¸­çš„æ•°æ®ï¼ŒåŽ»æ¢å¤å†…å­˜ä¸­çš„æ•°æ®ï¼Œç»§ç»­å¯¹å¤–æä¾›æœåŠ¡&lt;/p>
&lt;p>å¦‚æžœåŒæ—¶ä½¿ç”¨RDBå’ŒAOFä¸¤ç§æŒä¹…åŒ–æœºåˆ¶ï¼Œé‚£ä¹ˆåœ¨redisé‡å¯çš„æ—¶å€™ï¼Œä¼šä½¿ç”¨AOFæ¥é‡æ–°æž„å»ºæ•°æ®ï¼Œå› ä¸ºAOFä¸­çš„æ•°æ®æ›´åŠ å®Œæ•´&lt;/p>
&lt;hr>
&lt;p>2ã€RDBæŒä¹…åŒ–æœºåˆ¶çš„ä¼˜ç‚¹&lt;/p>
&lt;p>ï¼ˆ1ï¼‰RDBä¼šç”Ÿæˆå¤šä¸ªæ•°æ®æ–‡ä»¶ï¼Œæ¯ä¸ªæ•°æ®æ–‡ä»¶éƒ½ä»£è¡¨äº†æŸä¸€ä¸ªæ—¶åˆ»ä¸­redisçš„æ•°æ®ï¼Œè¿™ç§å¤šä¸ªæ•°æ®æ–‡ä»¶çš„æ–¹å¼ï¼Œéžå¸¸é€‚åˆåšå†·å¤‡ï¼Œå¯ä»¥å°†è¿™ç§å®Œæ•´çš„æ•°æ®æ–‡ä»¶å‘é€åˆ°ä¸€äº›è¿œç¨‹çš„å®‰å…¨å­˜å‚¨ä¸ŠåŽ»ï¼Œæ¯”å¦‚è¯´Amazonçš„S3äº‘æœåŠ¡ä¸ŠåŽ»ï¼Œåœ¨å›½å†…å¯ä»¥æ˜¯é˜¿é‡Œäº‘çš„ODPSåˆ†å¸ƒå¼å­˜å‚¨ä¸Šï¼Œä»¥é¢„å®šå¥½çš„å¤‡ä»½ç­–ç•¥æ¥å®šæœŸå¤‡ä»½redisä¸­çš„æ•°æ®&lt;/p>
&lt;p>ï¼ˆ2ï¼‰RDBå¯¹rediså¯¹å¤–æä¾›çš„è¯»å†™æœåŠ¡ï¼Œå½±å“éžå¸¸å°ï¼Œå¯ä»¥è®©redisä¿æŒé«˜æ€§èƒ½ï¼Œå› ä¸ºredisä¸»è¿›ç¨‹åªéœ€è¦forkä¸€ä¸ªå­è¿›ç¨‹ï¼Œè®©å­è¿›ç¨‹æ‰§è¡Œç£ç›˜IOæ“ä½œæ¥è¿›è¡ŒRDBæŒä¹…åŒ–å³å¯&lt;/p>
&lt;p>ï¼ˆ3ï¼‰ç›¸å¯¹äºŽAOFæŒä¹…åŒ–æœºåˆ¶æ¥è¯´ï¼Œç›´æŽ¥åŸºäºŽRDBæ•°æ®æ–‡ä»¶æ¥é‡å¯å’Œæ¢å¤redisè¿›ç¨‹ï¼Œæ›´åŠ å¿«é€Ÿ&lt;/p>
&lt;hr>
&lt;p>3ã€RDBæŒä¹…åŒ–æœºåˆ¶çš„ç¼ºç‚¹&lt;/p>
&lt;p>ï¼ˆ1ï¼‰å¦‚æžœæƒ³è¦åœ¨redisæ•…éšœæ—¶ï¼Œå°½å¯èƒ½å°‘çš„ä¸¢å¤±æ•°æ®ï¼Œé‚£ä¹ˆRDBæ²¡æœ‰AOFå¥½ã€‚ä¸€èˆ¬æ¥è¯´ï¼ŒRDBæ•°æ®å¿«ç…§æ–‡ä»¶ï¼Œéƒ½æ˜¯æ¯éš”5åˆ†é’Ÿï¼Œæˆ–è€…æ›´é•¿æ—¶é—´ç”Ÿæˆä¸€æ¬¡ï¼Œè¿™ä¸ªæ—¶å€™å°±å¾—æŽ¥å—ä¸€æ—¦redisè¿›ç¨‹å®•æœºï¼Œé‚£ä¹ˆä¼šä¸¢å¤±æœ€è¿‘5åˆ†é’Ÿçš„æ•°æ®&lt;/p>
&lt;p>ï¼ˆ2ï¼‰RDBæ¯æ¬¡åœ¨forkå­è¿›ç¨‹æ¥æ‰§è¡ŒRDBå¿«ç…§æ•°æ®æ–‡ä»¶ç”Ÿæˆçš„æ—¶å€™ï¼Œå¦‚æžœæ•°æ®æ–‡ä»¶ç‰¹åˆ«å¤§ï¼Œå¯èƒ½ä¼šå¯¼è‡´å¯¹å®¢æˆ·ç«¯æä¾›çš„æœåŠ¡æš‚åœæ•°æ¯«ç§’ï¼Œæˆ–è€…ç”šè‡³æ•°ç§’&lt;/p>
&lt;hr>
&lt;p>4ã€AOFæŒä¹…åŒ–æœºåˆ¶çš„ä¼˜ç‚¹&lt;/p>
&lt;p>ï¼ˆ1ï¼‰AOFå¯ä»¥æ›´å¥½çš„ä¿æŠ¤æ•°æ®ä¸ä¸¢å¤±ï¼Œä¸€èˆ¬AOFä¼šæ¯éš”1ç§’ï¼Œé€šè¿‡ä¸€ä¸ªåŽå°çº¿ç¨‹æ‰§è¡Œä¸€æ¬¡fsyncæ“ä½œï¼Œæœ€å¤šä¸¢å¤±1ç§’é’Ÿçš„æ•°æ®&lt;/p>
&lt;p>ï¼ˆ2ï¼‰AOFæ—¥å¿—æ–‡ä»¶ä»¥append-onlyæ¨¡å¼å†™å…¥ï¼Œæ‰€ä»¥æ²¡æœ‰ä»»ä½•ç£ç›˜å¯»å€çš„å¼€é”€ï¼Œå†™å…¥æ€§èƒ½éžå¸¸é«˜ï¼Œè€Œä¸”æ–‡ä»¶ä¸å®¹æ˜“ç ´æŸï¼Œå³ä½¿æ–‡ä»¶å°¾éƒ¨ç ´æŸï¼Œä¹Ÿå¾ˆå®¹æ˜“ä¿®å¤&lt;/p>
&lt;p>ï¼ˆ3ï¼‰AOFæ—¥å¿—æ–‡ä»¶å³ä½¿è¿‡å¤§çš„æ—¶å€™ï¼Œå‡ºçŽ°åŽå°é‡å†™æ“ä½œï¼Œä¹Ÿä¸ä¼šå½±å“å®¢æˆ·ç«¯çš„è¯»å†™ã€‚å› ä¸ºåœ¨rewrite logçš„æ—¶å€™ï¼Œä¼šå¯¹å…¶ä¸­çš„æŒ‡å¯¼è¿›è¡ŒåŽ‹ç¼©ï¼Œåˆ›å»ºå‡ºä¸€ä»½éœ€è¦æ¢å¤æ•°æ®çš„æœ€å°æ—¥å¿—å‡ºæ¥ã€‚å†åˆ›å»ºæ–°æ—¥å¿—æ–‡ä»¶çš„æ—¶å€™ï¼Œè€çš„æ—¥å¿—æ–‡ä»¶è¿˜æ˜¯ç…§å¸¸å†™å…¥ã€‚å½“æ–°çš„mergeåŽçš„æ—¥å¿—æ–‡ä»¶readyçš„æ—¶å€™ï¼Œå†äº¤æ¢æ–°è€æ—¥å¿—æ–‡ä»¶å³å¯ã€‚&lt;/p>
&lt;p>ï¼ˆ4ï¼‰AOFæ—¥å¿—æ–‡ä»¶çš„å‘½ä»¤é€šè¿‡éžå¸¸å¯è¯»çš„æ–¹å¼è¿›è¡Œè®°å½•ï¼Œè¿™ä¸ªç‰¹æ€§éžå¸¸é€‚åˆåšç¾éš¾æ€§çš„è¯¯åˆ é™¤çš„ç´§æ€¥æ¢å¤ã€‚æ¯”å¦‚æŸäººä¸å°å¿ƒç”¨flushallå‘½ä»¤æ¸…ç©ºäº†æ‰€æœ‰æ•°æ®ï¼Œåªè¦è¿™ä¸ªæ—¶å€™åŽå°rewriteè¿˜æ²¡æœ‰å‘ç”Ÿï¼Œé‚£ä¹ˆå°±å¯ä»¥ç«‹å³æ‹·è´AOFæ–‡ä»¶ï¼Œå°†æœ€åŽä¸€æ¡flushallå‘½ä»¤ç»™åˆ äº†ï¼Œç„¶åŽå†å°†è¯¥AOFæ–‡ä»¶æ”¾å›žåŽ»ï¼Œå°±å¯ä»¥é€šè¿‡æ¢å¤æœºåˆ¶ï¼Œè‡ªåŠ¨æ¢å¤æ‰€æœ‰æ•°æ®&lt;/p>
&lt;hr>
&lt;p>5ã€AOFæŒä¹…åŒ–æœºåˆ¶çš„ç¼ºç‚¹&lt;/p>
&lt;p>ï¼ˆ1ï¼‰å¯¹äºŽåŒä¸€ä»½æ•°æ®æ¥è¯´ï¼ŒAOFæ—¥å¿—æ–‡ä»¶é€šå¸¸æ¯”RDBæ•°æ®å¿«ç…§æ–‡ä»¶æ›´å¤§&lt;/p>
&lt;p>ï¼ˆ2ï¼‰AOFå¼€å¯åŽï¼Œæ”¯æŒçš„å†™QPSä¼šæ¯”RDBæ”¯æŒçš„å†™QPSä½Žï¼Œå› ä¸ºAOFä¸€èˆ¬ä¼šé…ç½®æˆæ¯ç§’fsyncä¸€æ¬¡æ—¥å¿—æ–‡ä»¶ï¼Œå½“ç„¶ï¼Œæ¯ç§’ä¸€æ¬¡fsyncï¼Œæ€§èƒ½ä¹Ÿè¿˜æ˜¯å¾ˆé«˜çš„&lt;/p>
&lt;p>ï¼ˆ3ï¼‰ä»¥å‰AOFå‘ç”Ÿè¿‡bugï¼Œå°±æ˜¯é€šè¿‡AOFè®°å½•çš„æ—¥å¿—ï¼Œè¿›è¡Œæ•°æ®æ¢å¤çš„æ—¶å€™ï¼Œæ²¡æœ‰æ¢å¤ä¸€æ¨¡ä¸€æ ·çš„æ•°æ®å‡ºæ¥ã€‚æ‰€ä»¥è¯´ï¼Œç±»ä¼¼AOFè¿™ç§è¾ƒä¸ºå¤æ‚çš„åŸºäºŽå‘½ä»¤æ—¥å¿—/merge/å›žæ”¾çš„æ–¹å¼ï¼Œæ¯”åŸºäºŽRDBæ¯æ¬¡æŒä¹…åŒ–ä¸€ä»½å®Œæ•´çš„æ•°æ®å¿«ç…§æ–‡ä»¶çš„æ–¹å¼ï¼Œæ›´åŠ è„†å¼±ä¸€äº›ï¼Œå®¹æ˜“æœ‰bugã€‚ä¸è¿‡AOFå°±æ˜¯ä¸ºäº†é¿å…rewriteè¿‡ç¨‹å¯¼è‡´çš„bugï¼Œå› æ­¤æ¯æ¬¡rewriteå¹¶ä¸æ˜¯åŸºäºŽæ—§çš„æŒ‡ä»¤æ—¥å¿—è¿›è¡Œmergeçš„ï¼Œè€Œæ˜¯åŸºäºŽå½“æ—¶å†…å­˜ä¸­çš„æ•°æ®è¿›è¡ŒæŒ‡ä»¤çš„é‡æ–°æž„å»ºï¼Œè¿™æ ·å¥å£®æ€§ä¼šå¥½å¾ˆå¤šã€‚&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-04-01-Redis%E7%BC%93%E5%AD%98%E7%9B%B8%E5%85%B3%E9%9D%A2%E8%AF%95%E9%A2%98/a12.png" alt="rewriteåŽŸç†å‰–æž">&lt;/p>
&lt;hr>
&lt;p>6ã€RDBå’ŒAOFåˆ°åº•è¯¥å¦‚ä½•é€‰æ‹©&lt;/p>
&lt;p>ï¼ˆ1ï¼‰ä¸è¦ä»…ä»…ä½¿ç”¨RDBï¼Œå› ä¸ºé‚£æ ·ä¼šå¯¼è‡´ä½ ä¸¢å¤±å¾ˆå¤šæ•°æ®&lt;/p>
&lt;p>ï¼ˆ2ï¼‰ä¹Ÿä¸è¦ä»…ä»…ä½¿ç”¨AOFï¼Œå› ä¸ºé‚£æ ·æœ‰ä¸¤ä¸ªé—®é¢˜ï¼Œç¬¬ä¸€ï¼Œä½ é€šè¿‡AOFåšå†·å¤‡ï¼Œæ²¡æœ‰RDBåšå†·å¤‡ï¼Œæ¥çš„æ¢å¤é€Ÿåº¦æ›´å¿«; ç¬¬äºŒï¼ŒRDBæ¯æ¬¡ç®€å•ç²—æš´ç”Ÿæˆæ•°æ®å¿«ç…§ï¼Œæ›´åŠ å¥å£®ï¼Œå¯ä»¥é¿å…AOFè¿™ç§å¤æ‚çš„å¤‡ä»½å’Œæ¢å¤æœºåˆ¶çš„bug&lt;/p>
&lt;p>ï¼ˆ3ï¼‰ç»¼åˆä½¿ç”¨AOFå’ŒRDBä¸¤ç§æŒä¹…åŒ–æœºåˆ¶ï¼Œç”¨AOFæ¥ä¿è¯æ•°æ®ä¸ä¸¢å¤±ï¼Œä½œä¸ºæ•°æ®æ¢å¤çš„ç¬¬ä¸€é€‰æ‹©; ç”¨RDBæ¥åšä¸åŒç¨‹åº¦çš„å†·å¤‡ï¼Œåœ¨AOFæ–‡ä»¶éƒ½ä¸¢å¤±æˆ–æŸåä¸å¯ç”¨çš„æ—¶å€™ï¼Œè¿˜å¯ä»¥ä½¿ç”¨RDBæ¥è¿›è¡Œå¿«é€Ÿçš„æ•°æ®æ¢å¤&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-04-01-Redis%E7%BC%93%E5%AD%98%E7%9B%B8%E5%85%B3%E9%9D%A2%E8%AF%95%E9%A2%98/a13.png" alt="RDBä¸¢å¤±æ•°æ®çš„é—®é¢˜">&lt;/p>
&lt;h2 id="redis-clusteré›†ç¾¤æ¨¡å¼çš„åŽŸç†">Redis Clusteré›†ç¾¤æ¨¡å¼çš„åŽŸç†&lt;/h2>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-04-01-Redis%E7%BC%93%E5%AD%98%E7%9B%B8%E5%85%B3%E9%9D%A2%E8%AF%95%E9%A2%98/a14.png" alt="rediså•masteræž¶æž„çš„å®¹é‡çš„ç“¶é¢ˆé—®é¢˜">&lt;/p>
&lt;p>æ”¯æ’‘Nä¸ªredis master nodeï¼Œæ¯ä¸ªmaster nodeéƒ½å¯ä»¥æŒ‚è½½å¤šä¸ªslave node&lt;/p>
&lt;p>è¯»å†™åˆ†ç¦»çš„æž¶æž„ï¼Œå¯¹äºŽæ¯ä¸ªmasteræ¥è¯´ï¼Œå†™å°±å†™åˆ°masterï¼Œç„¶åŽè¯»å°±ä»Žmaterå¯¹åº”çš„slaveåŽ»è¯»&lt;/p>
&lt;p>é«˜å¯ç”¨ï¼Œå› ä¸ºæ¯ä¸ªmasteréƒ½æœ‰salveèŠ‚ç‚¹ï¼Œé‚£ä¹ˆå¦‚æžœmateræŒ‚æŽ‰ï¼Œredis clusterè¿™å¥—æœºåˆ¶ï¼Œå°±ä¼šè‡ªåŠ¨å°†æŸä¸ªslaveåˆ‡æ¢æˆmaster&lt;/p>
&lt;p>redis clusterï¼ˆå¤šmaster + è¯»å†™åˆ†ç¦» + é«˜å¯ç”¨ï¼‰&lt;/p>
&lt;p>æˆ‘ä»¬åªè¦åŸºäºŽredis clusteråŽ»æ­å»ºredisé›†ç¾¤å³å¯ï¼Œä¸éœ€è¦æ‰‹å·¥åŽ»æ­å»ºreplicationå¤åˆ¶+ä¸»ä»Žæž¶æž„+è¯»å†™åˆ†ç¦»+å“¨å…µé›†ç¾¤+é«˜å¯ç”¨&lt;/p>
&lt;p>redis cluster vs. replication + sentinal&lt;/p>
&lt;p>å¦‚æžœä½ çš„æ•°æ®é‡å¾ˆå°‘ï¼Œä¸»è¦æ˜¯æ‰¿è½½é«˜å¹¶å‘é«˜æ€§èƒ½çš„åœºæ™¯ï¼Œæ¯”å¦‚ä½ çš„ç¼“å­˜ä¸€èˆ¬å°±å‡ ä¸ªGï¼Œå•æœºè¶³å¤Ÿäº†&lt;/p>
&lt;p>replicationï¼Œä¸€ä¸ªmaterï¼Œå¤šä¸ªslaveï¼Œè¦å‡ ä¸ªslaveè·Ÿä½ çš„è¦æ±‚çš„è¯»åžåé‡æœ‰å…³ç³»ï¼Œç„¶åŽè‡ªå·±æ­å»ºä¸€ä¸ªsentinalé›†ç¾¤ï¼ŒåŽ»ä¿è¯redisä¸»ä»Žæž¶æž„çš„é«˜å¯ç”¨æ€§ï¼Œå°±å¯ä»¥äº†&lt;/p>
&lt;p>redis clusterï¼Œä¸»è¦æ˜¯é’ˆå¯¹æµ·é‡æ•°æ®+é«˜å¹¶å‘+é«˜å¯ç”¨çš„åœºæ™¯ï¼Œæµ·é‡æ•°æ®ï¼Œå¦‚æžœä½ çš„æ•°æ®é‡å¾ˆå¤§ï¼Œé‚£ä¹ˆå»ºè®®å°±ç”¨redis cluster&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-04-01-Redis%E7%BC%93%E5%AD%98%E7%9B%B8%E5%85%B3%E9%9D%A2%E8%AF%95%E9%A2%98/a15.png" alt="rediså¦‚ä½•é€šè¿‡masteræ¨ªå‘æ‰©å®¹æ”¯æ’‘1T+æ•°æ®é‡">&lt;/p>
&lt;h3 id="èŠ‚ç‚¹é—´çš„å†…éƒ¨é€šä¿¡æœºåˆ¶">èŠ‚ç‚¹é—´çš„å†…éƒ¨é€šä¿¡æœºåˆ¶&lt;/h3>
&lt;p>1ã€åŸºç¡€é€šä¿¡åŽŸç†&lt;/p>
&lt;p>ï¼ˆ1ï¼‰redis clusterèŠ‚ç‚¹é—´é‡‡å–gossipåè®®è¿›è¡Œé€šä¿¡&lt;/p>
&lt;p>è·Ÿé›†ä¸­å¼ä¸åŒï¼Œä¸æ˜¯å°†é›†ç¾¤å…ƒæ•°æ®ï¼ˆèŠ‚ç‚¹ä¿¡æ¯ï¼Œæ•…éšœï¼Œç­‰ç­‰ï¼‰é›†ä¸­å­˜å‚¨åœ¨æŸä¸ªèŠ‚ç‚¹ä¸Šï¼Œè€Œæ˜¯äº’ç›¸ä¹‹é—´ä¸æ–­é€šä¿¡ï¼Œä¿æŒæ•´ä¸ªé›†ç¾¤æ‰€æœ‰èŠ‚ç‚¹çš„æ•°æ®æ˜¯å®Œæ•´çš„&lt;/p>
&lt;p>ç»´æŠ¤é›†ç¾¤çš„å…ƒæ•°æ®ç”¨å¾—ï¼Œé›†ä¸­å¼ï¼Œä¸€ç§å«åšgossip&lt;/p>
&lt;p>é›†ä¸­å¼ï¼šå¥½å¤„åœ¨äºŽï¼Œå…ƒæ•°æ®çš„æ›´æ–°å’Œè¯»å–ï¼Œæ—¶æ•ˆæ€§éžå¸¸å¥½ï¼Œä¸€æ—¦å…ƒæ•°æ®å‡ºçŽ°äº†å˜æ›´ï¼Œç«‹å³å°±æ›´æ–°åˆ°é›†ä¸­å¼çš„å­˜å‚¨ä¸­ï¼Œå…¶ä»–èŠ‚ç‚¹è¯»å–çš„æ—¶å€™ç«‹å³å°±å¯ä»¥æ„ŸçŸ¥åˆ°; ä¸å¥½åœ¨äºŽï¼Œæ‰€æœ‰çš„å…ƒæ•°æ®çš„è·Ÿæ–°åŽ‹åŠ›å…¨éƒ¨é›†ä¸­åœ¨ä¸€ä¸ªåœ°æ–¹ï¼Œå¯èƒ½ä¼šå¯¼è‡´å…ƒæ•°æ®çš„å­˜å‚¨æœ‰åŽ‹åŠ›&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-04-01-Redis%E7%BC%93%E5%AD%98%E7%9B%B8%E5%85%B3%E9%9D%A2%E8%AF%95%E9%A2%98/a16.png" alt="é›†ä¸­å¼çš„é›†ç¾¤å…ƒæ•°æ®å­˜å‚¨å’Œç»´æŠ¤">&lt;/p>
&lt;p>gossipï¼šå¥½å¤„åœ¨äºŽï¼Œå…ƒæ•°æ®çš„æ›´æ–°æ¯”è¾ƒåˆ†æ•£ï¼Œä¸æ˜¯é›†ä¸­åœ¨ä¸€ä¸ªåœ°æ–¹ï¼Œæ›´æ–°è¯·æ±‚ä¼šé™†é™†ç»­ç»­ï¼Œæ‰“åˆ°æ‰€æœ‰èŠ‚ç‚¹ä¸ŠåŽ»æ›´æ–°ï¼Œæœ‰ä¸€å®šçš„å»¶æ—¶ï¼Œé™ä½Žäº†åŽ‹åŠ›; ç¼ºç‚¹ï¼Œå…ƒæ•°æ®æ›´æ–°æœ‰å»¶æ—¶ï¼Œå¯èƒ½å¯¼è‡´é›†ç¾¤çš„ä¸€äº›æ“ä½œä¼šæœ‰ä¸€äº›æ»žåŽ&lt;/p>
&lt;p>æˆ‘ä»¬åˆšæ‰åšreshardï¼ŒåŽ»åšå¦å¤–ä¸€ä¸ªæ“ä½œï¼Œä¼šå‘çŽ°è¯´ï¼Œconfiguration errorï¼Œè¾¾æˆä¸€è‡´&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-04-01-Redis%E7%BC%93%E5%AD%98%E7%9B%B8%E5%85%B3%E9%9D%A2%E8%AF%95%E9%A2%98/a17.png" alt="gossipåè®®ç»´æŠ¤é›†ç¾¤å…ƒæ•°æ®">&lt;/p>
&lt;p>ï¼ˆ2ï¼‰10000ç«¯å£&lt;/p>
&lt;p>æ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ªä¸“é—¨ç”¨äºŽèŠ‚ç‚¹é—´é€šä¿¡çš„ç«¯å£ï¼Œå°±æ˜¯è‡ªå·±æä¾›æœåŠ¡çš„ç«¯å£å·+10000ï¼Œæ¯”å¦‚7001ï¼Œé‚£ä¹ˆç”¨äºŽèŠ‚ç‚¹é—´é€šä¿¡çš„å°±æ˜¯17001ç«¯å£&lt;/p>
&lt;p>æ¯éš”èŠ‚ç‚¹æ¯éš”ä¸€æ®µæ—¶é—´éƒ½ä¼šå¾€å¦å¤–å‡ ä¸ªèŠ‚ç‚¹å‘é€pingæ¶ˆæ¯ï¼ŒåŒæ—¶å…¶ä»–å‡ ç‚¹æŽ¥æ”¶åˆ°pingä¹‹åŽè¿”å›žpong&lt;/p>
&lt;p>ï¼ˆ3ï¼‰äº¤æ¢çš„ä¿¡æ¯&lt;/p>
&lt;p>æ•…éšœä¿¡æ¯ï¼ŒèŠ‚ç‚¹çš„å¢žåŠ å’Œç§»é™¤ï¼Œhash slotä¿¡æ¯ï¼Œç­‰ç­‰&lt;/p>
&lt;p>2ã€gossipåè®®&lt;/p>
&lt;p>gossipåè®®åŒ…å«å¤šç§æ¶ˆæ¯ï¼ŒåŒ…æ‹¬pingï¼Œpongï¼Œmeetï¼Œfailï¼Œç­‰ç­‰&lt;/p>
&lt;p>meet: æŸä¸ªèŠ‚ç‚¹å‘é€meetç»™æ–°åŠ å…¥çš„èŠ‚ç‚¹ï¼Œè®©æ–°èŠ‚ç‚¹åŠ å…¥é›†ç¾¤ä¸­ï¼Œç„¶åŽæ–°èŠ‚ç‚¹å°±ä¼šå¼€å§‹ä¸Žå…¶ä»–èŠ‚ç‚¹è¿›è¡Œé€šä¿¡&lt;/p>
&lt;p>redis-trib.rb add-node&lt;/p>
&lt;p>å…¶å®žå†…éƒ¨å°±æ˜¯å‘é€äº†ä¸€ä¸ªgossip meetæ¶ˆæ¯ï¼Œç»™æ–°åŠ å…¥çš„èŠ‚ç‚¹ï¼Œé€šçŸ¥é‚£ä¸ªèŠ‚ç‚¹åŽ»åŠ å…¥æˆ‘ä»¬çš„é›†ç¾¤&lt;/p>
&lt;p>ping: æ¯ä¸ªèŠ‚ç‚¹éƒ½ä¼šé¢‘ç¹ç»™å…¶ä»–èŠ‚ç‚¹å‘é€pingï¼Œå…¶ä¸­åŒ…å«è‡ªå·±çš„çŠ¶æ€è¿˜æœ‰è‡ªå·±ç»´æŠ¤çš„é›†ç¾¤å…ƒæ•°æ®ï¼Œäº’ç›¸é€šè¿‡pingäº¤æ¢å…ƒæ•°æ®&lt;/p>
&lt;p>æ¯ä¸ªèŠ‚ç‚¹æ¯ç§’éƒ½ä¼šé¢‘ç¹å‘é€pingç»™å…¶ä»–çš„é›†ç¾¤ï¼Œpingï¼Œé¢‘ç¹çš„äº’ç›¸ä¹‹é—´äº¤æ¢æ•°æ®ï¼Œäº’ç›¸è¿›è¡Œå…ƒæ•°æ®çš„æ›´æ–°&lt;/p>
&lt;p>pong: è¿”å›žpingå’Œmeetï¼ŒåŒ…å«è‡ªå·±çš„çŠ¶æ€å’Œå…¶ä»–ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥ç”¨äºŽä¿¡æ¯å¹¿æ’­å’Œæ›´æ–°&lt;/p>
&lt;p>fail: æŸä¸ªèŠ‚ç‚¹åˆ¤æ–­å¦ä¸€ä¸ªèŠ‚ç‚¹failä¹‹åŽï¼Œå°±å‘é€failç»™å…¶ä»–èŠ‚ç‚¹ï¼Œé€šçŸ¥å…¶ä»–èŠ‚ç‚¹ï¼ŒæŒ‡å®šçš„èŠ‚ç‚¹å®•æœºäº†&lt;/p>
&lt;p>3ã€pingæ¶ˆæ¯æ·±å…¥&lt;/p>
&lt;p>pingå¾ˆé¢‘ç¹ï¼Œè€Œä¸”è¦æºå¸¦ä¸€äº›å…ƒæ•°æ®ï¼Œæ‰€ä»¥å¯èƒ½ä¼šåŠ é‡ç½‘ç»œè´Ÿæ‹…&lt;/p>
&lt;p>æ¯ä¸ªèŠ‚ç‚¹æ¯ç§’ä¼šæ‰§è¡Œ10æ¬¡pingï¼Œæ¯æ¬¡ä¼šé€‰æ‹©5ä¸ªæœ€ä¹…æ²¡æœ‰é€šä¿¡çš„å…¶ä»–èŠ‚ç‚¹&lt;/p>
&lt;p>å½“ç„¶å¦‚æžœå‘çŽ°æŸä¸ªèŠ‚ç‚¹é€šä¿¡å»¶æ—¶è¾¾åˆ°äº†cluster_node_timeout / 2ï¼Œé‚£ä¹ˆç«‹å³å‘é€pingï¼Œé¿å…æ•°æ®äº¤æ¢å»¶æ—¶è¿‡é•¿ï¼Œè½åŽçš„æ—¶é—´å¤ªé•¿äº†&lt;/p>
&lt;p>æ¯”å¦‚è¯´ï¼Œä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´éƒ½10åˆ†é’Ÿæ²¡æœ‰äº¤æ¢æ•°æ®äº†ï¼Œé‚£ä¹ˆæ•´ä¸ªé›†ç¾¤å¤„äºŽä¸¥é‡çš„å…ƒæ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µï¼Œå°±ä¼šæœ‰é—®é¢˜&lt;/p>
&lt;p>æ‰€ä»¥cluster_node_timeoutå¯ä»¥è°ƒèŠ‚ï¼Œå¦‚æžœè°ƒèŠ‚æ¯”è¾ƒå¤§ï¼Œé‚£ä¹ˆä¼šé™ä½Žå‘é€çš„é¢‘çŽ‡&lt;/p>
&lt;p>æ¯æ¬¡pingï¼Œä¸€ä¸ªæ˜¯å¸¦ä¸Šè‡ªå·±èŠ‚ç‚¹çš„ä¿¡æ¯ï¼Œè¿˜æœ‰å°±æ˜¯å¸¦ä¸Š1/10å…¶ä»–èŠ‚ç‚¹çš„ä¿¡æ¯ï¼Œå‘é€å‡ºåŽ»ï¼Œè¿›è¡Œæ•°æ®äº¤æ¢&lt;/p>
&lt;p>è‡³å°‘åŒ…å«3ä¸ªå…¶ä»–èŠ‚ç‚¹çš„ä¿¡æ¯ï¼Œæœ€å¤šåŒ…å«æ€»èŠ‚ç‚¹-2ä¸ªå…¶ä»–èŠ‚ç‚¹çš„ä¿¡æ¯&lt;/p>
&lt;h3 id="é¢å‘é›†ç¾¤çš„jediså†…éƒ¨å®žçŽ°åŽŸç†">é¢å‘é›†ç¾¤çš„jediså†…éƒ¨å®žçŽ°åŽŸç†&lt;/h3>
&lt;p>å¼€å‘ï¼Œjedisï¼Œredisçš„java clientå®¢æˆ·ç«¯ï¼Œredis clusterï¼Œjedis cluster api&lt;/p>
&lt;p>jedis cluster apiä¸Žredis clusteré›†ç¾¤äº¤äº’çš„ä¸€äº›åŸºæœ¬åŽŸç†&lt;/p>
&lt;p>1ã€åŸºäºŽé‡å®šå‘çš„å®¢æˆ·ç«¯&lt;/p>
&lt;p>redis-cli -cï¼Œè‡ªåŠ¨é‡å®šå‘&lt;/p>
&lt;p>ï¼ˆ1ï¼‰è¯·æ±‚é‡å®šå‘&lt;/p>
&lt;p>å®¢æˆ·ç«¯å¯èƒ½ä¼šæŒ‘é€‰ä»»æ„ä¸€ä¸ªrediså®žä¾‹åŽ»å‘é€å‘½ä»¤ï¼Œæ¯ä¸ªrediså®žä¾‹æŽ¥æ”¶åˆ°å‘½ä»¤ï¼Œéƒ½ä¼šè®¡ç®—keyå¯¹åº”çš„hash slot&lt;/p>
&lt;p>å¦‚æžœåœ¨æœ¬åœ°å°±åœ¨æœ¬åœ°å¤„ç†ï¼Œå¦åˆ™è¿”å›žmovedç»™å®¢æˆ·ç«¯ï¼Œè®©å®¢æˆ·ç«¯è¿›è¡Œé‡å®šå‘&lt;/p>
&lt;p>cluster keyslot mykeyï¼Œå¯ä»¥æŸ¥çœ‹ä¸€ä¸ªkeyå¯¹åº”çš„hash slotæ˜¯ä»€ä¹ˆ&lt;/p>
&lt;p>ç”¨redis-cliçš„æ—¶å€™ï¼Œå¯ä»¥åŠ å…¥-cå‚æ•°ï¼Œæ”¯æŒè‡ªåŠ¨çš„è¯·æ±‚é‡å®šå‘ï¼Œredis-cliæŽ¥æ”¶åˆ°movedä¹‹åŽï¼Œä¼šè‡ªåŠ¨é‡å®šå‘åˆ°å¯¹åº”çš„èŠ‚ç‚¹æ‰§è¡Œå‘½ä»¤&lt;/p>
&lt;p>ï¼ˆ2ï¼‰è®¡ç®—hash slot&lt;/p>
&lt;p>è®¡ç®—hash slotçš„ç®—æ³•ï¼Œå°±æ˜¯æ ¹æ®keyè®¡ç®—CRC16å€¼ï¼Œç„¶åŽå¯¹16384å–æ¨¡ï¼Œæ‹¿åˆ°å¯¹åº”çš„hash slot&lt;/p>
&lt;p>ç”¨hash tagå¯ä»¥æ‰‹åŠ¨æŒ‡å®škeyå¯¹åº”çš„slotï¼ŒåŒä¸€ä¸ªhash tagä¸‹çš„keyï¼Œéƒ½ä¼šåœ¨ä¸€ä¸ªhash slotä¸­ï¼Œæ¯”å¦‚set mykey1:{100}å’Œset mykey2:{100}&lt;/p>
&lt;p>ï¼ˆ3ï¼‰hash slotæŸ¥æ‰¾&lt;/p>
&lt;p>èŠ‚ç‚¹é—´é€šè¿‡gossipåè®®è¿›è¡Œæ•°æ®äº¤æ¢ï¼Œå°±çŸ¥é“æ¯ä¸ªhash slotåœ¨å“ªä¸ªèŠ‚ç‚¹ä¸Š&lt;/p>
&lt;p>2ã€smart jedis&lt;/p>
&lt;p>ï¼ˆ1ï¼‰ä»€ä¹ˆæ˜¯smart jedis&lt;/p>
&lt;p>åŸºäºŽé‡å®šå‘çš„å®¢æˆ·ç«¯ï¼Œå¾ˆæ¶ˆè€—ç½‘ç»œIOï¼Œå› ä¸ºå¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œå¯èƒ½éƒ½ä¼šå‡ºçŽ°ä¸€æ¬¡è¯·æ±‚é‡å®šå‘ï¼Œæ‰èƒ½æ‰¾åˆ°æ­£ç¡®çš„èŠ‚ç‚¹&lt;/p>
&lt;p>æ‰€ä»¥å¤§éƒ¨åˆ†çš„å®¢æˆ·ç«¯ï¼Œæ¯”å¦‚java rediså®¢æˆ·ç«¯ï¼Œå°±æ˜¯jedisï¼Œéƒ½æ˜¯smartçš„&lt;/p>
&lt;p>æœ¬åœ°ç»´æŠ¤ä¸€ä»½hashslot -&amp;gt; nodeçš„æ˜ å°„è¡¨ï¼Œç¼“å­˜ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œç›´æŽ¥èµ°æœ¬åœ°ç¼“å­˜å°±å¯ä»¥æ‰¾åˆ°hashslot -&amp;gt; nodeï¼Œä¸éœ€è¦é€šè¿‡èŠ‚ç‚¹è¿›è¡Œmovedé‡å®šå‘&lt;/p>
&lt;p>ï¼ˆ2ï¼‰JedisClusterçš„å·¥ä½œåŽŸç†&lt;/p>
&lt;p>åœ¨JedisClusteråˆå§‹åŒ–çš„æ—¶å€™ï¼Œå°±ä¼šéšæœºé€‰æ‹©ä¸€ä¸ªnodeï¼Œåˆå§‹åŒ–hashslot -&amp;gt; nodeæ˜ å°„è¡¨ï¼ŒåŒæ—¶ä¸ºæ¯ä¸ªèŠ‚ç‚¹åˆ›å»ºä¸€ä¸ªJedisPoolè¿žæŽ¥æ± &lt;/p>
&lt;p>æ¯æ¬¡åŸºäºŽJedisClusteræ‰§è¡Œæ“ä½œï¼Œé¦–å…ˆJedisClusteréƒ½ä¼šåœ¨æœ¬åœ°è®¡ç®—keyçš„hashslotï¼Œç„¶åŽåœ¨æœ¬åœ°æ˜ å°„è¡¨æ‰¾åˆ°å¯¹åº”çš„èŠ‚ç‚¹&lt;/p>
&lt;p>å¦‚æžœé‚£ä¸ªnodeæ­£å¥½è¿˜æ˜¯æŒæœ‰é‚£ä¸ªhashslotï¼Œé‚£ä¹ˆå°±ok; å¦‚æžœè¯´è¿›è¡Œäº†reshardè¿™æ ·çš„æ“ä½œï¼Œå¯èƒ½hashslotå·²ç»ä¸åœ¨é‚£ä¸ªnodeä¸Šäº†ï¼Œå°±ä¼šè¿”å›žmoved&lt;/p>
&lt;p>å¦‚æžœJedisCluter APIå‘çŽ°å¯¹åº”çš„èŠ‚ç‚¹è¿”å›žmovedï¼Œé‚£ä¹ˆåˆ©ç”¨è¯¥èŠ‚ç‚¹çš„å…ƒæ•°æ®ï¼Œæ›´æ–°æœ¬åœ°çš„hashslot -&amp;gt; nodeæ˜ å°„è¡¨ç¼“å­˜&lt;/p>
&lt;p>é‡å¤ä¸Šé¢å‡ ä¸ªæ­¥éª¤ï¼Œç›´åˆ°æ‰¾åˆ°å¯¹åº”çš„èŠ‚ç‚¹ï¼Œå¦‚æžœé‡è¯•è¶…è¿‡5æ¬¡ï¼Œé‚£ä¹ˆå°±æŠ¥é”™ï¼ŒJedisClusterMaxRedirectionException&lt;/p>
&lt;p>jedisè€ç‰ˆæœ¬ï¼Œå¯èƒ½ä¼šå‡ºçŽ°åœ¨é›†ç¾¤æŸä¸ªèŠ‚ç‚¹æ•…éšœè¿˜æ²¡å®Œæˆè‡ªåŠ¨åˆ‡æ¢æ¢å¤æ—¶ï¼Œé¢‘ç¹æ›´æ–°hash slotï¼Œé¢‘ç¹pingèŠ‚ç‚¹æ£€æŸ¥æ´»è·ƒï¼Œå¯¼è‡´å¤§é‡ç½‘ç»œIOå¼€é”€&lt;/p>
&lt;p>jedisæœ€æ–°ç‰ˆæœ¬ï¼Œå¯¹äºŽè¿™äº›è¿‡åº¦çš„hash slotæ›´æ–°å’Œpingï¼Œéƒ½è¿›è¡Œäº†ä¼˜åŒ–ï¼Œé¿å…äº†ç±»ä¼¼é—®é¢˜&lt;/p>
&lt;p>ï¼ˆ3ï¼‰hashslotè¿ç§»å’Œaské‡å®šå‘&lt;/p>
&lt;p>å¦‚æžœhash slotæ­£åœ¨è¿ç§»ï¼Œé‚£ä¹ˆä¼šè¿”å›žaské‡å®šå‘ç»™jedis&lt;/p>
&lt;p>jedisæŽ¥æ”¶åˆ°aské‡å®šå‘ä¹‹åŽï¼Œä¼šé‡æ–°å®šä½åˆ°ç›®æ ‡èŠ‚ç‚¹åŽ»æ‰§è¡Œï¼Œä½†æ˜¯å› ä¸ºaskå‘ç”Ÿåœ¨hash slotè¿ç§»è¿‡ç¨‹ä¸­ï¼Œæ‰€ä»¥JedisCluster APIæ”¶åˆ°askæ˜¯ä¸ä¼šæ›´æ–°hashslotæœ¬åœ°ç¼“å­˜&lt;/p>
&lt;p>å·²ç»å¯ä»¥ç¡®å®šè¯´ï¼Œhashslotå·²ç»è¿ç§»å®Œäº†ï¼Œmovedæ˜¯ä¼šæ›´æ–°æœ¬åœ°hashslot-&amp;gt;nodeæ˜ å°„è¡¨ç¼“å­˜çš„&lt;/p>
&lt;h3 id="é«˜å¯ç”¨æ€§ä¸Žä¸»å¤‡åˆ‡æ¢åŽŸç†">é«˜å¯ç”¨æ€§ä¸Žä¸»å¤‡åˆ‡æ¢åŽŸç†&lt;/h3>
&lt;p>redis clusterçš„é«˜å¯ç”¨çš„åŽŸç†ï¼Œå‡ ä¹Žè·Ÿå“¨å…µæ˜¯ç±»ä¼¼çš„&lt;/p>
&lt;p>1ã€åˆ¤æ–­èŠ‚ç‚¹å®•æœº&lt;/p>
&lt;p>å¦‚æžœä¸€ä¸ªèŠ‚ç‚¹è®¤ä¸ºå¦å¤–ä¸€ä¸ªèŠ‚ç‚¹å®•æœºï¼Œé‚£ä¹ˆå°±æ˜¯pfailï¼Œä¸»è§‚å®•æœº&lt;/p>
&lt;p>å¦‚æžœå¤šä¸ªèŠ‚ç‚¹éƒ½è®¤ä¸ºå¦å¤–ä¸€ä¸ªèŠ‚ç‚¹å®•æœºäº†ï¼Œé‚£ä¹ˆå°±æ˜¯failï¼Œå®¢è§‚å®•æœºï¼Œè·Ÿå“¨å…µçš„åŽŸç†å‡ ä¹Žä¸€æ ·ï¼Œsdownï¼Œodown&lt;/p>
&lt;p>åœ¨cluster-node-timeoutå†…ï¼ŒæŸä¸ªèŠ‚ç‚¹ä¸€ç›´æ²¡æœ‰è¿”å›žpongï¼Œé‚£ä¹ˆå°±è¢«è®¤ä¸ºpfail&lt;/p>
&lt;p>å¦‚æžœä¸€ä¸ªèŠ‚ç‚¹è®¤ä¸ºæŸä¸ªèŠ‚ç‚¹pfailäº†ï¼Œé‚£ä¹ˆä¼šåœ¨gossip pingæ¶ˆæ¯ä¸­ï¼Œpingç»™å…¶ä»–èŠ‚ç‚¹ï¼Œå¦‚æžœè¶…è¿‡åŠæ•°çš„èŠ‚ç‚¹éƒ½è®¤ä¸ºpfailäº†ï¼Œé‚£ä¹ˆå°±ä¼šå˜æˆfail&lt;/p>
&lt;p>2ã€ä»ŽèŠ‚ç‚¹è¿‡æ»¤&lt;/p>
&lt;p>å¯¹å®•æœºçš„master nodeï¼Œä»Žå…¶æ‰€æœ‰çš„slave nodeä¸­ï¼Œé€‰æ‹©ä¸€ä¸ªåˆ‡æ¢æˆmaster node&lt;/p>
&lt;p>æ£€æŸ¥æ¯ä¸ªslave nodeä¸Žmaster nodeæ–­å¼€è¿žæŽ¥çš„æ—¶é—´ï¼Œå¦‚æžœè¶…è¿‡äº†cluster-node-timeout * cluster-slave-validity-factorï¼Œé‚£ä¹ˆå°±æ²¡æœ‰èµ„æ ¼åˆ‡æ¢æˆmaster&lt;/p>
&lt;p>è¿™ä¸ªä¹Ÿæ˜¯è·Ÿå“¨å…µæ˜¯ä¸€æ ·çš„ï¼Œä»ŽèŠ‚ç‚¹è¶…æ—¶è¿‡æ»¤çš„æ­¥éª¤&lt;/p>
&lt;p>3ã€ä»ŽèŠ‚ç‚¹é€‰ä¸¾&lt;/p>
&lt;p>å“¨å…µï¼šå¯¹æ‰€æœ‰ä»ŽèŠ‚ç‚¹è¿›è¡ŒæŽ’åºï¼Œslave priorityï¼Œoffsetï¼Œrun id&lt;/p>
&lt;p>æ¯ä¸ªä»ŽèŠ‚ç‚¹ï¼Œéƒ½æ ¹æ®è‡ªå·±å¯¹masterå¤åˆ¶æ•°æ®çš„offsetï¼Œæ¥è®¾ç½®ä¸€ä¸ªé€‰ä¸¾æ—¶é—´ï¼Œoffsetè¶Šå¤§ï¼ˆå¤åˆ¶æ•°æ®è¶Šå¤šï¼‰çš„ä»ŽèŠ‚ç‚¹ï¼Œé€‰ä¸¾æ—¶é—´è¶Šé å‰ï¼Œä¼˜å…ˆè¿›è¡Œé€‰ä¸¾&lt;/p>
&lt;p>æ‰€æœ‰çš„master nodeå¼€å§‹slaveé€‰ä¸¾æŠ•ç¥¨ï¼Œç»™è¦è¿›è¡Œé€‰ä¸¾çš„slaveè¿›è¡ŒæŠ•ç¥¨ï¼Œå¦‚æžœå¤§éƒ¨åˆ†master nodeï¼ˆN/2 + 1ï¼‰éƒ½æŠ•ç¥¨ç»™äº†æŸä¸ªä»ŽèŠ‚ç‚¹ï¼Œé‚£ä¹ˆé€‰ä¸¾é€šè¿‡ï¼Œé‚£ä¸ªä»ŽèŠ‚ç‚¹å¯ä»¥åˆ‡æ¢æˆmaster&lt;/p>
&lt;p>ä»ŽèŠ‚ç‚¹æ‰§è¡Œä¸»å¤‡åˆ‡æ¢ï¼Œä»ŽèŠ‚ç‚¹åˆ‡æ¢ä¸ºä¸»èŠ‚ç‚¹&lt;/p>
&lt;p>4ã€ä¸Žå“¨å…µæ¯”è¾ƒ&lt;/p>
&lt;p>æ•´ä¸ªæµç¨‹è·Ÿå“¨å…µç›¸æ¯”ï¼Œéžå¸¸ç±»ä¼¼ï¼Œæ‰€ä»¥è¯´ï¼Œredis clusteråŠŸèƒ½å¼ºå¤§ï¼Œç›´æŽ¥é›†æˆäº†replicationå’Œsentinalçš„åŠŸèƒ½&lt;/p>
&lt;p>æ²¡æœ‰åŠžæ³•åŽ»ç»™å¤§å®¶æ·±å…¥è®²è§£redisåº•å±‚çš„è®¾è®¡çš„ç»†èŠ‚ï¼Œæ ¸å¿ƒåŽŸç†å’Œè®¾è®¡çš„ç»†èŠ‚ï¼Œé‚£ä¸ªé™¤éžå•ç‹¬å¼€ä¸€é—¨è¯¾ï¼Œredisåº•å±‚åŽŸç†æ·±åº¦å‰–æžï¼Œredisæºç &lt;/p>
&lt;p>å¯¹äºŽå’±ä»¬è¿™ä¸ªæž¶æž„è¯¾æ¥è¯´ï¼Œä¸»è¦å…³æ³¨çš„æ˜¯æž¶æž„ï¼Œä¸æ˜¯åº•å±‚çš„ç»†èŠ‚ï¼Œå¯¹äºŽæž¶æž„æ¥è¯´ï¼Œæ ¸å¿ƒçš„åŽŸç†çš„åŸºæœ¬æ€è·¯ï¼Œæ˜¯è¦æ¢³ç†æ¸…æ™°çš„&lt;/p></description></item><item><title>åˆ†åº“åˆ†è¡¨åŽŸç†åŠä¸­é—´ä»¶ç›¸å…³é¢è¯•é¢˜</title><link>https://blog.itning.top/post/2019/03/31/%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8%E5%8E%9F%E7%90%86%E5%8F%8A%E4%B8%AD%E9%97%B4%E4%BB%B6%E7%9B%B8%E5%85%B3%E9%9D%A2%E8%AF%95%E9%A2%98/</link><pubDate>Sun, 31 Mar 2019 10:12:07 +0800</pubDate><guid>https://blog.itning.top/post/2019/03/31/%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8%E5%8E%9F%E7%90%86%E5%8F%8A%E4%B8%AD%E9%97%B4%E4%BB%B6%E7%9B%B8%E5%85%B3%E9%9D%A2%E8%AF%95%E9%A2%98/</guid><description>&lt;h2 id="ä¸ºä»€ä¹ˆè¦åˆ†åº“åˆ†è¡¨">ä¸ºä»€ä¹ˆè¦åˆ†åº“åˆ†è¡¨ï¼Ÿ&lt;/h2>
&lt;p>æ•°æ®åº“æ‰›ä¸ä½å¤ªå¤§çš„æµé‡ï¼Œå•è¡¨æ•°æ®é‡å¤ªå¤§ï¼ŒæŸ¥è¯¢æ…¢&lt;/p>
&lt;h2 id="ä»€ä¹ˆæ˜¯åˆ†åº“ä»€ä¹ˆæ˜¯åˆ†è¡¨">ä»€ä¹ˆæ˜¯åˆ†åº“ï¼Ÿä»€ä¹ˆæ˜¯åˆ†è¡¨ï¼Ÿ&lt;/h2>
&lt;p>æ‰€è°“åˆ†åº“å°±æ˜¯æŠŠä¸€ä¸ªåº“ä¸­çš„æ•°æ®æ‹†åˆ†åˆ°å¤šä¸ªåº“ä¸­ï¼Œé¿å…äº†å•åº“æµé‡å¤ªå¤§&lt;/p>
&lt;p>åˆ†è¡¨å°±æ˜¯æŠŠä¸€ä¸ªè¡¨çš„æ•°æ®æ”¾åˆ°å¤šä¸ªè¡¨ä¸­ï¼Œç„¶åŽæŸ¥è¯¢çš„æ—¶å€™ä½ å°±æŸ¥ä¸€ä¸ªè¡¨ã€‚æ¯”å¦‚æŒ‰ç…§ç”¨æˆ·idæ¥åˆ†è¡¨ï¼Œå°†ä¸€ä¸ªç”¨æˆ·çš„æ•°æ®å°±æ”¾åœ¨ä¸€ä¸ªè¡¨ä¸­ã€‚ç„¶åŽæ“ä½œçš„æ—¶å€™ä½ å¯¹ä¸€ä¸ªç”¨æˆ·å°±æ“ä½œé‚£ä¸ªè¡¨å°±å¥½äº†ã€‚è¿™æ ·å¯ä»¥æŽ§åˆ¶æ¯ä¸ªè¡¨çš„æ•°æ®é‡åœ¨å¯æŽ§çš„èŒƒå›´å†…ï¼Œæ¯”å¦‚æ¯ä¸ªè¡¨å°±å›ºå®šåœ¨200ä¸‡ä»¥å†…ã€‚&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-03-31-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8%E5%8E%9F%E7%90%86%E5%8F%8A%E4%B8%AD%E9%97%B4%E4%BB%B6%E7%9B%B8%E5%85%B3%E9%9D%A2%E8%AF%95%E9%A2%98/a1.png" alt="åˆ†åº“åˆ†è¡¨">&lt;/p>
&lt;h2 id="æœ‰å“ªäº›åˆ†åº“åˆ†è¡¨ä¸­é—´ä»¶ä¼˜ç¼ºç‚¹">æœ‰å“ªäº›åˆ†åº“åˆ†è¡¨ä¸­é—´ä»¶ï¼Ÿä¼˜ç¼ºç‚¹ï¼Ÿ&lt;/h2>
&lt;p>æ¯”è¾ƒå¸¸è§çš„åŒ…æ‹¬ï¼šcobarã€TDDLã€atlasã€sharding-jdbcã€mycat&lt;/p>
&lt;ul>
&lt;li>
&lt;p>cobarï¼šé˜¿é‡Œb2bå›¢é˜Ÿå¼€å‘å’Œå¼€æºçš„ï¼Œå±žäºŽproxyå±‚æ–¹æ¡ˆã€‚æ—©äº›å¹´è¿˜å¯ä»¥ç”¨ï¼Œä½†æ˜¯æœ€è¿‘å‡ å¹´éƒ½æ²¡æ›´æ–°äº†ï¼ŒåŸºæœ¬æ²¡å•¥äººç”¨ï¼Œå·®ä¸å¤šç®—æ˜¯è¢«æŠ›å¼ƒçš„çŠ¶æ€å§ã€‚è€Œä¸”ä¸æ”¯æŒè¯»å†™åˆ†ç¦»ã€å­˜å‚¨è¿‡ç¨‹ã€è·¨åº“joinå’Œåˆ†é¡µç­‰æ“ä½œã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>TDDLï¼šæ·˜å®å›¢é˜Ÿå¼€å‘çš„ï¼Œå±žäºŽclientå±‚æ–¹æ¡ˆã€‚ä¸æ”¯æŒjoinã€å¤šè¡¨æŸ¥è¯¢ç­‰è¯­æ³•ï¼Œå°±æ˜¯åŸºæœ¬çš„crudè¯­æ³•æ˜¯okï¼Œä½†æ˜¯æ”¯æŒè¯»å†™åˆ†ç¦»ã€‚ç›®å‰ä½¿ç”¨çš„ä¹Ÿä¸å¤šï¼Œå› ä¸ºè¿˜ä¾èµ–æ·˜å®çš„diamondé…ç½®ç®¡ç†ç³»ç»Ÿã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>atlasï¼š360å¼€æºçš„ï¼Œå±žäºŽproxyå±‚æ–¹æ¡ˆï¼Œä»¥å‰æ˜¯æœ‰ä¸€äº›å…¬å¸åœ¨ç”¨çš„ï¼Œä½†æ˜¯ç¡®å®žæœ‰ä¸€ä¸ªå¾ˆå¤§çš„é—®é¢˜å°±æ˜¯ç¤¾åŒºæœ€æ–°çš„ç»´æŠ¤éƒ½åœ¨5å¹´å‰äº†ã€‚æ‰€ä»¥ï¼ŒçŽ°åœ¨ç”¨çš„å…¬å¸åŸºæœ¬ä¹Ÿå¾ˆå°‘äº†ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>sharding-jdbcï¼šå½“å½“å¼€æºçš„ï¼Œå±žäºŽclientå±‚æ–¹æ¡ˆã€‚ç¡®å®žä¹‹å‰ç”¨çš„è¿˜æ¯”è¾ƒå¤šä¸€äº›ï¼Œå› ä¸ºSQLè¯­æ³•æ”¯æŒä¹Ÿæ¯”è¾ƒå¤šï¼Œæ²¡æœ‰å¤ªå¤šé™åˆ¶ï¼Œè€Œä¸”ç›®å‰æŽ¨å‡ºåˆ°äº†2.0ç‰ˆæœ¬ï¼Œæ”¯æŒåˆ†åº“åˆ†è¡¨ã€è¯»å†™åˆ†ç¦»ã€åˆ†å¸ƒå¼idç”Ÿæˆã€æŸ”æ€§äº‹åŠ¡ï¼ˆæœ€å¤§åŠªåŠ›é€è¾¾åž‹äº‹åŠ¡ã€TCCäº‹åŠ¡ï¼‰ã€‚è€Œä¸”ç¡®å®žä¹‹å‰ä½¿ç”¨çš„å…¬å¸ä¼šæ¯”è¾ƒå¤šä¸€äº›ï¼ˆè¿™ä¸ªåœ¨å®˜ç½‘æœ‰ç™»è®°ä½¿ç”¨çš„å…¬å¸ï¼Œå¯ä»¥çœ‹åˆ°ä»Ž2017å¹´ä¸€ç›´åˆ°çŽ°åœ¨ï¼Œæ˜¯ä¸å°‘å…¬å¸åœ¨ç”¨çš„ï¼‰ï¼Œç›®å‰ç¤¾åŒºä¹Ÿè¿˜ä¸€ç›´åœ¨å¼€å‘å’Œç»´æŠ¤ï¼Œè¿˜ç®—æ˜¯æ¯”è¾ƒæ´»è·ƒï¼Œä¸ªäººè®¤ä¸ºç®—æ˜¯ä¸€ä¸ªçŽ°åœ¨ä¹Ÿå¯ä»¥é€‰æ‹©çš„æ–¹æ¡ˆã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>mycatï¼šåŸºäºŽcobaræ”¹é€ çš„ï¼Œå±žäºŽproxyå±‚æ–¹æ¡ˆï¼Œæ”¯æŒçš„åŠŸèƒ½éžå¸¸å®Œå–„ï¼Œè€Œä¸”ç›®å‰åº”è¯¥æ˜¯éžå¸¸ç«çš„è€Œä¸”ä¸æ–­æµè¡Œçš„æ•°æ®åº“ä¸­é—´ä»¶ï¼Œç¤¾åŒºå¾ˆæ´»è·ƒï¼Œä¹Ÿæœ‰ä¸€äº›å…¬å¸å¼€å§‹åœ¨ç”¨äº†ã€‚ä½†æ˜¯ç¡®å®žç›¸æ¯”äºŽsharding jdbcæ¥è¯´ï¼Œå¹´è½»ä¸€äº›ï¼Œç»åŽ†çš„é”¤ç‚¼å°‘ä¸€äº›ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>æ‰€ä»¥ç»¼ä¸Šæ‰€è¿°ï¼ŒçŽ°åœ¨å…¶å®žå»ºè®®è€ƒé‡çš„ï¼Œå°±æ˜¯sharding-jdbcå’Œmycatï¼Œè¿™ä¸¤ä¸ªéƒ½å¯ä»¥åŽ»è€ƒè™‘ä½¿ç”¨ã€‚&lt;/p>
&lt;p>sharding-jdbcè¿™ç§clientå±‚æ–¹æ¡ˆçš„ä¼˜ç‚¹åœ¨äºŽä¸ç”¨éƒ¨ç½²ï¼Œè¿ç»´æˆæœ¬ä½Žï¼Œä¸éœ€è¦ä»£ç†å±‚çš„äºŒæ¬¡è½¬å‘è¯·æ±‚ï¼Œæ€§èƒ½å¾ˆé«˜ï¼Œä½†æ˜¯å¦‚æžœé‡åˆ°å‡çº§å•¥çš„éœ€è¦å„ä¸ªç³»ç»Ÿéƒ½é‡æ–°å‡çº§ç‰ˆæœ¬å†å‘å¸ƒï¼Œå„ä¸ªç³»ç»Ÿéƒ½éœ€è¦è€¦åˆsharding-jdbcçš„ä¾èµ–ï¼›&lt;/p>
&lt;p>mycatè¿™ç§proxyå±‚æ–¹æ¡ˆçš„ç¼ºç‚¹åœ¨äºŽéœ€è¦éƒ¨ç½²ï¼Œè‡ªå·±åŠè¿ç»´ä¸€å¥—ä¸­é—´ä»¶ï¼Œè¿ç»´æˆæœ¬é«˜ï¼Œä½†æ˜¯å¥½å¤„åœ¨äºŽå¯¹äºŽå„ä¸ªé¡¹ç›®æ˜¯é€æ˜Žçš„ï¼Œå¦‚æžœé‡åˆ°å‡çº§ä¹‹ç±»çš„éƒ½æ˜¯è‡ªå·±ä¸­é—´ä»¶é‚£é‡Œæžå°±è¡Œäº†ã€‚&lt;/p>
&lt;p>é€šå¸¸æ¥è¯´ï¼Œè¿™ä¸¤ä¸ªæ–¹æ¡ˆå…¶å®žéƒ½å¯ä»¥é€‰ç”¨ï¼Œä½†æ˜¯æˆ‘ä¸ªäººå»ºè®®ä¸­å°åž‹å…¬å¸é€‰ç”¨sharding-jdbcï¼Œclientå±‚æ–¹æ¡ˆè½»ä¾¿ï¼Œè€Œä¸”ç»´æŠ¤æˆæœ¬ä½Žï¼Œä¸éœ€è¦é¢å¤–å¢žæ´¾äººæ‰‹ï¼Œè€Œä¸”ä¸­å°åž‹å…¬å¸ç³»ç»Ÿå¤æ‚åº¦ä¼šä½Žä¸€äº›ï¼Œé¡¹ç›®ä¹Ÿæ²¡é‚£ä¹ˆå¤šï¼›&lt;/p>
&lt;p>ä½†æ˜¯ä¸­å¤§åž‹å…¬å¸æœ€å¥½è¿˜æ˜¯é€‰ç”¨mycatè¿™ç±»proxyå±‚æ–¹æ¡ˆï¼Œå› ä¸ºå¯èƒ½å¤§å…¬å¸ç³»ç»Ÿå’Œé¡¹ç›®éžå¸¸å¤šï¼Œå›¢é˜Ÿå¾ˆå¤§ï¼Œäººå‘˜å……è¶³ï¼Œé‚£ä¹ˆæœ€å¥½æ˜¯ä¸“é—¨å¼„ä¸ªäººæ¥ç ”ç©¶å’Œç»´æŠ¤mycatï¼Œç„¶åŽå¤§é‡é¡¹ç›®ç›´æŽ¥é€æ˜Žä½¿ç”¨å³å¯ã€‚&lt;/p>
&lt;h2 id="å¦‚ä½•è¿›è¡Œæ°´å¹³æˆ–è€…åž‚ç›´æ‹†åˆ†">å¦‚ä½•è¿›è¡Œæ°´å¹³æˆ–è€…åž‚ç›´æ‹†åˆ†ï¼Ÿ&lt;/h2>
&lt;p>æ°´å¹³æ‹†åˆ†æ˜¯å°†è¡¨ä¸­æ•°æ®åˆ†æ•£åˆ°å…¶å®ƒåº“çš„å…¶ä»–è¡¨ä¸­ï¼Œè¡¨ç»“æž„æ˜¯ä¸€æ ·çš„ä½†æ˜¯è¡¨æ•°æ®ä¸ä¸€æ ·&lt;/p>
&lt;p>æ°´å¹³æ‹†åˆ†çš„æ„ä¹‰ï¼Œå°±æ˜¯å°†æ•°æ®å‡åŒ€æ”¾æ›´å¤šçš„åº“é‡Œï¼Œç„¶åŽç”¨å¤šä¸ªåº“æ¥æŠ—æ›´é«˜çš„å¹¶å‘ï¼Œè¿˜æœ‰å°±æ˜¯ç”¨å¤šä¸ªåº“çš„å­˜å‚¨å®¹é‡æ¥è¿›è¡Œæ‰©å®¹ã€‚&lt;/p>
&lt;p>åž‚ç›´æ‹†åˆ†æ˜¯æŠŠè¡¨ä¸­å­—æ®µè¿›è¡Œæ‹†åˆ†ã€‚æ¯ä¸ªåº“è¡¨çš„ç»“æž„éƒ½ä¸ä¸€æ ·ï¼Œæ¯ä¸ªåº“è¡¨éƒ½åŒ…å«éƒ¨åˆ†å­—æ®µã€‚ä¸€èˆ¬æ¥è¯´ï¼Œä¼šå°†è¾ƒå°‘çš„è®¿é—®é¢‘çŽ‡å¾ˆé«˜çš„å­—æ®µæ”¾åˆ°ä¸€ä¸ªè¡¨é‡ŒåŽ»ï¼Œç„¶åŽå°†è¾ƒå¤šçš„è®¿é—®é¢‘çŽ‡å¾ˆä½Žçš„å­—æ®µæ”¾åˆ°å¦å¤–ä¸€ä¸ªè¡¨é‡ŒåŽ»ã€‚å› ä¸ºæ•°æ®åº“æ˜¯æœ‰ç¼“å­˜çš„ï¼Œä½ è®¿é—®é¢‘çŽ‡é«˜çš„è¡Œå­—æ®µè¶Šå°‘ï¼Œå°±å¯ä»¥åœ¨ç¼“å­˜é‡Œç¼“å­˜æ›´å¤šçš„è¡Œï¼Œæ€§èƒ½å°±è¶Šå¥½ã€‚è¿™ä¸ªä¸€èˆ¬åœ¨è¡¨å±‚é¢åšçš„è¾ƒå¤šä¸€äº›ã€‚&lt;/p>
&lt;p>ä¸¤ç§åˆ†åº“åˆ†è¡¨çš„æ–¹å¼ï¼Œä¸€ç§æ˜¯æŒ‰ç…§rangeæ¥åˆ†ï¼Œå°±æ˜¯æ¯ä¸ªåº“ä¸€æ®µè¿žç»­çš„æ•°æ®ï¼Œè¿™ä¸ªä¸€èˆ¬æ˜¯æŒ‰æ¯”å¦‚æ—¶é—´èŒƒå›´æ¥çš„ï¼Œä½†æ˜¯è¿™ç§ä¸€èˆ¬è¾ƒå°‘ç”¨ï¼Œå› ä¸ºå¾ˆå®¹æ˜“äº§ç”Ÿçƒ­ç‚¹é—®é¢˜ï¼Œå¤§é‡çš„æµé‡éƒ½æ‰“åœ¨æœ€æ–°çš„æ•°æ®ä¸Šäº†ï¼›æˆ–è€…æ˜¯æŒ‰ç…§æŸä¸ªå­—æ®µhashä¸€ä¸‹å‡åŒ€åˆ†æ•£ï¼Œè¿™ä¸ªè¾ƒä¸ºå¸¸ç”¨ã€‚&lt;/p>
&lt;ul>
&lt;li>
&lt;p>rangeæ¥åˆ†ï¼Œå¥½å¤„åœ¨äºŽè¯´ï¼ŒåŽé¢æ‰©å®¹çš„æ—¶å€™ï¼Œå°±å¾ˆå®¹æ˜“ï¼Œå› ä¸ºä½ åªè¦é¢„å¤‡å¥½ï¼Œç»™æ¯ä¸ªæœˆéƒ½å‡†å¤‡ä¸€ä¸ªåº“å°±å¯ä»¥äº†ï¼Œåˆ°äº†ä¸€ä¸ªæ–°çš„æœˆä»½çš„æ—¶å€™ï¼Œè‡ªç„¶è€Œç„¶ï¼Œå°±ä¼šå†™æ–°çš„åº“äº†ï¼›ç¼ºç‚¹ï¼Œä½†æ˜¯å¤§éƒ¨åˆ†çš„è¯·æ±‚ï¼Œéƒ½æ˜¯è®¿é—®æœ€æ–°çš„æ•°æ®ã€‚å®žé™…ç”Ÿäº§ç”¨rangeï¼Œè¦çœ‹åœºæ™¯ï¼Œä½ çš„ç”¨æˆ·ä¸æ˜¯ä»…ä»…è®¿é—®æœ€æ–°çš„æ•°æ®ï¼Œè€Œæ˜¯å‡åŒ€çš„è®¿é—®çŽ°åœ¨çš„æ•°æ®ä»¥åŠåŽ†å²çš„æ•°æ®&lt;/p>
&lt;/li>
&lt;li>
&lt;p>hashåˆ†æ³•ï¼Œå¥½å¤„åœ¨äºŽè¯´ï¼Œå¯ä»¥å¹³å‡åˆ†é…æ²¡ç»™åº“çš„æ•°æ®é‡å’Œè¯·æ±‚åŽ‹åŠ›ï¼›åå¤„åœ¨äºŽè¯´æ‰©å®¹èµ·æ¥æ¯”è¾ƒéº»çƒ¦ï¼Œä¼šæœ‰ä¸€ä¸ªæ•°æ®è¿ç§»çš„è¿™ä¹ˆä¸€ä¸ªè¿‡ç¨‹&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-03-31-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8%E5%8E%9F%E7%90%86%E5%8F%8A%E4%B8%AD%E9%97%B4%E4%BB%B6%E7%9B%B8%E5%85%B3%E9%9D%A2%E8%AF%95%E9%A2%98/a2.png" alt="æ°´å¹³åž‚ç›´æ‹†åˆ†">&lt;/p>
&lt;h2 id="çŽ°åœ¨æœ‰ä¸€ä¸ªæœªåˆ†åº“åˆ†è¡¨çš„ç³»ç»Ÿæœªæ¥è¦åˆ†åº“åˆ†è¡¨å¦‚ä½•è®¾è®¡æ‰å¯ä»¥è®©ç³»ç»Ÿä»Žæœªåˆ†åº“åˆ†è¡¨åŠ¨æ€åˆ‡æ¢åˆ°åˆ†åº“åˆ†è¡¨ä¸Š">çŽ°åœ¨æœ‰ä¸€ä¸ªæœªåˆ†åº“åˆ†è¡¨çš„ç³»ç»Ÿï¼Œæœªæ¥è¦åˆ†åº“åˆ†è¡¨ï¼Œå¦‚ä½•è®¾è®¡æ‰å¯ä»¥è®©ç³»ç»Ÿä»Žæœªåˆ†åº“åˆ†è¡¨åŠ¨æ€åˆ‡æ¢åˆ°åˆ†åº“åˆ†è¡¨ä¸Šï¼Ÿ&lt;/h2>
&lt;ol>
&lt;li>åœæœºè¿ç§»æ–¹æ¡ˆ&lt;/li>
&lt;li>åŒå†™è¿ç§»æ–¹æ¡ˆ&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-03-31-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8%E5%8E%9F%E7%90%86%E5%8F%8A%E4%B8%AD%E9%97%B4%E4%BB%B6%E7%9B%B8%E5%85%B3%E9%9D%A2%E8%AF%95%E9%A2%98/a3.png" alt="åœæœºè¿ç§»æ–¹æ¡ˆ">&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-03-31-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8%E5%8E%9F%E7%90%86%E5%8F%8A%E4%B8%AD%E9%97%B4%E4%BB%B6%E7%9B%B8%E5%85%B3%E9%9D%A2%E8%AF%95%E9%A2%98/a4.png" alt="åŒå†™è¿ç§»æ–¹æ¡ˆ">&lt;/p>
&lt;h2 id="å¦‚ä½•è®¾è®¡å¯ä»¥åŠ¨æ€æ‰©å®¹ç¼©å®¹çš„åˆ†åº“åˆ†è¡¨æ–¹æ¡ˆ">å¦‚ä½•è®¾è®¡å¯ä»¥åŠ¨æ€æ‰©å®¹ç¼©å®¹çš„åˆ†åº“åˆ†è¡¨æ–¹æ¡ˆï¼Ÿ&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>åœæœºæ‰©å®¹&lt;/p>
&lt;p>ä¸Žåœæœºè¿ç§»æ–¹æ¡ˆå·®ä¸å¤šï¼Œä½†æ˜¯æ•°æ®é‡å¤ªå¤§ä¸æŽ¨è&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ä¼˜åŒ–&lt;/p>
&lt;p>ä¸€å¼€å§‹ä¸Šæ¥å°±æ˜¯32ä¸ªåº“ï¼Œæ¯ä¸ªåº“32ä¸ªè¡¨ï¼Œ1024å¼ è¡¨&lt;/p>
&lt;p>æˆ‘å¯ä»¥å‘Šè¯‰å„ä½åŒå­¦è¯´ï¼Œè¿™ä¸ªåˆ†æ³•ï¼Œç¬¬ä¸€ï¼ŒåŸºæœ¬ä¸Šå›½å†…çš„äº’è”ç½‘è‚¯å®šéƒ½æ˜¯å¤Ÿç”¨äº†ï¼Œç¬¬äºŒï¼Œæ— è®ºæ˜¯å¹¶å‘æ”¯æ’‘è¿˜æ˜¯æ•°æ®é‡æ”¯æ’‘éƒ½æ²¡é—®é¢˜&lt;/p>
&lt;p>æ¯ä¸ªåº“æ­£å¸¸æ‰¿è½½çš„å†™å…¥å¹¶å‘é‡æ˜¯1000ï¼Œé‚£ä¹ˆ32ä¸ªåº“å°±å¯ä»¥æ‰¿è½½32 * 1000 = 32000çš„å†™å¹¶å‘ï¼Œå¦‚æžœæ¯ä¸ªåº“æ‰¿è½½1500çš„å†™å¹¶å‘ï¼Œ32 * 1500 = 48000çš„å†™å¹¶å‘ï¼ŒæŽ¥è¿‘5ä¸‡/sçš„å†™å…¥å¹¶å‘ï¼Œå‰é¢å†åŠ ä¸€ä¸ªMQï¼Œå‰Šå³°ï¼Œæ¯ç§’å†™å…¥MQ 8ä¸‡æ¡æ•°æ®ï¼Œæ¯ç§’æ¶ˆè´¹5ä¸‡æ¡æ•°æ®ã€‚&lt;/p>
&lt;p>æœ‰äº›é™¤éžæ˜¯å›½å†…æŽ’åéžå¸¸é å‰çš„è¿™äº›å…¬å¸ï¼Œä»–ä»¬çš„æœ€æ ¸å¿ƒçš„ç³»ç»Ÿçš„æ•°æ®åº“ï¼Œå¯èƒ½ä¼šå‡ºçŽ°å‡ ç™¾å°æ•°æ®åº“çš„è¿™ä¹ˆä¸€ä¸ªè§„æ¨¡ï¼Œ128ä¸ªåº“ï¼Œ256ä¸ªåº“ï¼Œ512ä¸ªåº“&lt;/p>
&lt;p>1024å¼ è¡¨ï¼Œå‡è®¾æ¯ä¸ªè¡¨æ”¾500ä¸‡æ•°æ®ï¼Œåœ¨MySQLé‡Œå¯ä»¥æ”¾50äº¿æ¡æ•°æ®&lt;/p>
&lt;p>æ¯ç§’çš„5ä¸‡å†™å¹¶å‘ï¼Œæ€»å…±50äº¿æ¡æ•°æ®ï¼Œå¯¹äºŽå›½å†…å¤§éƒ¨åˆ†çš„äº’è”ç½‘å…¬å¸æ¥è¯´ï¼Œå…¶å®žä¸€èˆ¬æ¥è¯´éƒ½å¤Ÿäº†&lt;/p>
&lt;p>è°ˆåˆ†åº“åˆ†è¡¨çš„æ‰©å®¹ï¼Œç¬¬ä¸€æ¬¡åˆ†åº“åˆ†è¡¨ï¼Œå°±ä¸€æ¬¡æ€§ç»™ä»–åˆ†ä¸ªå¤Ÿï¼Œ32ä¸ªåº“ï¼Œ1024å¼ è¡¨ï¼Œå¯èƒ½å¯¹å¤§éƒ¨åˆ†çš„ä¸­å°åž‹äº’è”ç½‘å…¬å¸æ¥è¯´ï¼Œå·²ç»å¯ä»¥æ”¯æ’‘å¥½å‡ å¹´äº†&lt;/p>
&lt;p>ä¸€ä¸ªå®žè·µæ˜¯åˆ©ç”¨32 * 32æ¥åˆ†åº“åˆ†è¡¨ï¼Œå³åˆ†ä¸º32ä¸ªåº“ï¼Œæ¯ä¸ªåº“é‡Œä¸€ä¸ªè¡¨åˆ†ä¸º32å¼ è¡¨ã€‚ä¸€å…±å°±æ˜¯1024å¼ è¡¨ã€‚æ ¹æ®æŸä¸ªidå…ˆæ ¹æ®32å–æ¨¡è·¯ç”±åˆ°åº“ï¼Œå†æ ¹æ®32å–æ¨¡è·¯ç”±åˆ°åº“é‡Œçš„è¡¨ã€‚&lt;/p>
&lt;p>åˆšå¼€å§‹çš„æ—¶å€™ï¼Œè¿™ä¸ªåº“å¯èƒ½å°±æ˜¯é€»è¾‘åº“ï¼Œå»ºåœ¨ä¸€ä¸ªæ•°æ®åº“ä¸Šçš„ï¼Œå°±æ˜¯ä¸€ä¸ªmysqlæœåŠ¡å™¨å¯èƒ½å»ºäº†nä¸ªåº“ï¼Œæ¯”å¦‚16ä¸ªåº“ã€‚åŽé¢å¦‚æžœè¦æ‹†åˆ†ï¼Œå°±æ˜¯ä¸æ–­åœ¨åº“å’ŒmysqlæœåŠ¡å™¨ä¹‹é—´åšè¿ç§»å°±å¯ä»¥äº†ã€‚ç„¶åŽç³»ç»Ÿé…åˆæ”¹ä¸€ä¸‹é…ç½®å³å¯ã€‚&lt;/p>
&lt;p>æ¯”å¦‚è¯´æœ€å¤šå¯ä»¥æ‰©å±•åˆ°32ä¸ªæ•°æ®åº“æœåŠ¡å™¨ï¼Œæ¯ä¸ªæ•°æ®åº“æœåŠ¡å™¨æ˜¯ä¸€ä¸ªåº“ã€‚å¦‚æžœè¿˜æ˜¯ä¸å¤Ÿï¼Ÿæœ€å¤šå¯ä»¥æ‰©å±•åˆ°1024ä¸ªæ•°æ®åº“æœåŠ¡å™¨ï¼Œæ¯ä¸ªæ•°æ®åº“æœåŠ¡å™¨ä¸Šé¢ä¸€ä¸ªåº“ä¸€ä¸ªè¡¨ã€‚å› ä¸ºæœ€å¤šæ˜¯1024ä¸ªè¡¨ä¹ˆã€‚&lt;/p>
&lt;p>è¿™ä¹ˆæžï¼Œæ˜¯ä¸ç”¨è‡ªå·±å†™ä»£ç åšæ•°æ®è¿ç§»çš„ï¼Œéƒ½äº¤ç»™dbaæ¥æžå¥½äº†ï¼Œä½†æ˜¯dbaç¡®å®žæ˜¯éœ€è¦åšä¸€äº›åº“è¡¨è¿ç§»çš„å·¥ä½œï¼Œä½†æ˜¯æ€»æ¯”ä½ è‡ªå·±å†™ä»£ç ï¼ŒæŠ½æ•°æ®å¯¼æ•°æ®æ¥çš„æ•ˆçŽ‡é«˜å¾—å¤šäº†ã€‚&lt;/p>
&lt;p>å“ªæ€•æ˜¯è¦å‡å°‘åº“çš„æ•°é‡ï¼Œä¹Ÿå¾ˆç®€å•ï¼Œå…¶å®žè¯´ç™½äº†å°±æ˜¯æŒ‰å€æ•°ç¼©å®¹å°±å¯ä»¥äº†ï¼Œç„¶åŽä¿®æ”¹ä¸€ä¸‹è·¯ç”±è§„åˆ™ã€‚&lt;/p>
&lt;p>å¯¹2 ^ nå–æ¨¡&lt;/p>
&lt;p>orderId æ¨¡ 32 = åº“&lt;/p>
&lt;p>orderId / 32 æ¨¡ 32 = è¡¨&lt;/p>
&lt;p>259 3 8&lt;/p>
&lt;p>1189 5 5&lt;/p>
&lt;p>352 0 11&lt;/p>
&lt;p>4593 17 15&lt;/p>
&lt;p>1ã€è®¾å®šå¥½å‡ å°æ•°æ®åº“æœåŠ¡å™¨ï¼Œæ¯å°æœåŠ¡å™¨ä¸Šå‡ ä¸ªåº“ï¼Œæ¯ä¸ªåº“å¤šå°‘ä¸ªè¡¨ï¼ŒæŽ¨èæ˜¯32åº“ * 32è¡¨ï¼Œå¯¹äºŽå¤§éƒ¨åˆ†å…¬å¸æ¥è¯´ï¼Œå¯èƒ½å‡ å¹´éƒ½å¤Ÿäº†&lt;/p>
&lt;p>2ã€è·¯ç”±çš„è§„åˆ™ï¼ŒorderId æ¨¡ 32 = åº“ï¼ŒorderId / 32 æ¨¡ 32 = è¡¨&lt;/p>
&lt;p>3ã€æ‰©å®¹çš„æ—¶å€™ï¼Œç”³è¯·å¢žåŠ æ›´å¤šçš„æ•°æ®åº“æœåŠ¡å™¨ï¼Œè£…å¥½mysqlï¼Œå€æ•°æ‰©å®¹ï¼Œ4å°æœåŠ¡å™¨ï¼Œæ‰©åˆ°8å°æœåŠ¡å™¨ï¼Œ16å°æœåŠ¡å™¨&lt;/p>
&lt;p>4ã€ç”±dbaè´Ÿè´£å°†åŽŸå…ˆæ•°æ®åº“æœåŠ¡å™¨çš„åº“ï¼Œè¿ç§»åˆ°æ–°çš„æ•°æ®åº“æœåŠ¡å™¨ä¸ŠåŽ»ï¼Œå¾ˆå¤šå·¥å…·ï¼Œåº“è¿ç§»ï¼Œæ¯”è¾ƒä¾¿æ·&lt;/p>
&lt;p>5ã€æˆ‘ä»¬è¿™è¾¹å°±æ˜¯ä¿®æ”¹ä¸€ä¸‹é…ç½®ï¼Œè°ƒæ•´è¿ç§»çš„åº“æ‰€åœ¨æ•°æ®åº“æœåŠ¡å™¨çš„åœ°å€&lt;/p>
&lt;p>6ã€é‡æ–°å‘å¸ƒç³»ç»Ÿï¼Œä¸Šçº¿ï¼ŒåŽŸå…ˆçš„è·¯ç”±è§„åˆ™å˜éƒ½ä¸ç”¨å˜ï¼Œç›´æŽ¥å¯ä»¥åŸºäºŽ2å€çš„æ•°æ®åº“æœåŠ¡å™¨çš„èµ„æºï¼Œç»§ç»­è¿›è¡Œçº¿ä¸Šç³»ç»Ÿçš„æä¾›æœåŠ¡&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-03-31-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8%E5%8E%9F%E7%90%86%E5%8F%8A%E4%B8%AD%E9%97%B4%E4%BB%B6%E7%9B%B8%E5%85%B3%E9%9D%A2%E8%AF%95%E9%A2%98/a5.png" alt="åŠ¨æ€æ‰©å®¹">&lt;/p>
&lt;h2 id="åˆ†åº“åˆ†è¡¨ä¹‹åŽidä¸»é”®å¦‚ä½•å¤„ç†">åˆ†åº“åˆ†è¡¨ä¹‹åŽï¼Œidä¸»é”®å¦‚ä½•å¤„ç†ï¼Ÿ&lt;/h2>
&lt;ol>
&lt;li>
&lt;p>æ•°æ®åº“è‡ªå¢žID&lt;/p>
&lt;p>è¿™ä¸ªå°±æ˜¯è¯´ä½ çš„ç³»ç»Ÿé‡Œæ¯æ¬¡å¾—åˆ°ä¸€ä¸ªidï¼Œéƒ½æ˜¯å¾€ä¸€ä¸ªåº“çš„ä¸€ä¸ªè¡¨é‡Œæ’å…¥ä¸€æ¡æ²¡ä»€ä¹ˆä¸šåŠ¡å«ä¹‰çš„æ•°æ®ï¼Œç„¶åŽèŽ·å–ä¸€ä¸ªæ•°æ®åº“è‡ªå¢žçš„ä¸€ä¸ªidã€‚æ‹¿åˆ°è¿™ä¸ªidä¹‹åŽå†å¾€å¯¹åº”çš„åˆ†åº“åˆ†è¡¨é‡ŒåŽ»å†™å…¥ã€‚&lt;/p>
&lt;p>è¿™ä¸ªæ–¹æ¡ˆçš„å¥½å¤„å°±æ˜¯æ–¹ä¾¿ç®€å•ï¼Œè°éƒ½ä¼šç”¨ï¼›ç¼ºç‚¹å°±æ˜¯å•åº“ç”Ÿæˆè‡ªå¢židï¼Œè¦æ˜¯é«˜å¹¶å‘çš„è¯ï¼Œå°±ä¼šæœ‰ç“¶é¢ˆçš„ï¼›å¦‚æžœä½ ç¡¬æ˜¯è¦æ”¹è¿›ä¸€ä¸‹ï¼Œé‚£ä¹ˆå°±ä¸“é—¨å¼€ä¸€ä¸ªæœåŠ¡å‡ºæ¥ï¼Œè¿™ä¸ªæœåŠ¡æ¯æ¬¡å°±æ‹¿åˆ°å½“å‰idæœ€å¤§å€¼ï¼Œç„¶åŽè‡ªå·±é€’å¢žå‡ ä¸ªidï¼Œä¸€æ¬¡æ€§è¿”å›žä¸€æ‰¹idï¼Œç„¶åŽå†æŠŠå½“å‰æœ€å¤§idå€¼ä¿®æ”¹æˆé€’å¢žå‡ ä¸ªidä¹‹åŽçš„ä¸€ä¸ªå€¼ï¼›ä½†æ˜¯æ— è®ºæ€Žä¹ˆè¯´éƒ½æ˜¯åŸºäºŽå•ä¸ªæ•°æ®åº“ã€‚&lt;/p>
&lt;p>é€‚åˆçš„åœºæ™¯ï¼šä½ åˆ†åº“åˆ†è¡¨å°±ä¿©åŽŸå› ï¼Œè¦ä¸å°±æ˜¯å•åº“å¹¶å‘å¤ªé«˜ï¼Œè¦ä¸å°±æ˜¯å•åº“æ•°æ®é‡å¤ªå¤§ï¼›é™¤éžæ˜¯ä½ å¹¶å‘ä¸é«˜ï¼Œä½†æ˜¯æ•°æ®é‡å¤ªå¤§å¯¼è‡´çš„åˆ†åº“åˆ†è¡¨æ‰©å®¹ï¼Œä½ å¯ä»¥ç”¨è¿™ä¸ªæ–¹æ¡ˆï¼Œå› ä¸ºå¯èƒ½æ¯ç§’æœ€é«˜å¹¶å‘æœ€å¤šå°±å‡ ç™¾ï¼Œé‚£ä¹ˆå°±èµ°å•ç‹¬çš„ä¸€ä¸ªåº“å’Œè¡¨ç”Ÿæˆè‡ªå¢žä¸»é”®å³å¯ã€‚&lt;/p>
&lt;p>å¹¶å‘å¾ˆä½Žï¼Œå‡ ç™¾/sï¼Œä½†æ˜¯æ•°æ®é‡å¤§ï¼Œå‡ åäº¿çš„æ•°æ®ï¼Œæ‰€ä»¥éœ€è¦é åˆ†åº“åˆ†è¡¨æ¥å­˜æ”¾æµ·é‡çš„æ•°æ®&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-03-31-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8%E5%8E%9F%E7%90%86%E5%8F%8A%E4%B8%AD%E9%97%B4%E4%BB%B6%E7%9B%B8%E5%85%B3%E9%9D%A2%E8%AF%95%E9%A2%98/a6.png" alt="æ•°æ®åº“è‡ªå¢žID">&lt;/p>
&lt;/li>
&lt;li>
&lt;p>UUID&lt;/p>
&lt;p>å¥½å¤„å°±æ˜¯æœ¬åœ°ç”Ÿæˆï¼Œä¸è¦åŸºäºŽæ•°æ®åº“æ¥äº†ï¼›ä¸å¥½ä¹‹å¤„å°±æ˜¯ï¼Œuuidå¤ªé•¿äº†ï¼Œä½œä¸ºä¸»é”®æ€§èƒ½å¤ªå·®äº†ï¼Œä¸é€‚åˆç”¨äºŽä¸»é”®ã€‚&lt;/p>
&lt;p>é€‚åˆçš„åœºæ™¯ï¼šå¦‚æžœä½ æ˜¯è¦éšæœºç”Ÿæˆä¸ªä»€ä¹ˆæ–‡ä»¶åäº†ï¼Œç¼–å·ä¹‹ç±»çš„ï¼Œä½ å¯ä»¥ç”¨uuidï¼Œä½†æ˜¯ä½œä¸ºä¸»é”®æ˜¯ä¸èƒ½çš„&lt;/p>
&lt;/li>
&lt;li>
&lt;p>èŽ·å–ç³»ç»Ÿå½“å‰æ—¶é—´&lt;/p>
&lt;p>è¿™ä¸ªå°±æ˜¯èŽ·å–å½“å‰æ—¶é—´å³å¯ï¼Œä½†æ˜¯é—®é¢˜æ˜¯ï¼Œå¹¶å‘å¾ˆé«˜çš„æ—¶å€™ï¼Œæ¯”å¦‚ä¸€ç§’å¹¶å‘å‡ åƒï¼Œä¼šæœ‰é‡å¤çš„æƒ…å†µï¼Œè¿™ä¸ªæ˜¯è‚¯å®šä¸åˆé€‚çš„ã€‚åŸºæœ¬å°±ä¸ç”¨è€ƒè™‘äº†ã€‚&lt;/p>
&lt;p>é€‚åˆçš„åœºæ™¯ï¼šä¸€èˆ¬å¦‚æžœç”¨è¿™ä¸ªæ–¹æ¡ˆï¼Œæ˜¯å°†å½“å‰æ—¶é—´è·Ÿå¾ˆå¤šå…¶ä»–çš„ä¸šåŠ¡å­—æ®µæ‹¼æŽ¥èµ·æ¥ï¼Œä½œä¸ºä¸€ä¸ªidï¼Œå¦‚æžœä¸šåŠ¡ä¸Šä½ è§‰å¾—å¯ä»¥æŽ¥å—ï¼Œé‚£ä¹ˆä¹Ÿæ˜¯å¯ä»¥çš„ã€‚ä½ å¯ä»¥å°†åˆ«çš„ä¸šåŠ¡å­—æ®µå€¼è·Ÿå½“å‰æ—¶é—´æ‹¼æŽ¥èµ·æ¥ï¼Œç»„æˆä¸€ä¸ªå…¨å±€å”¯ä¸€çš„ç¼–å·ï¼Œè®¢å•ç¼–å·ï¼Œæ—¶é—´æˆ³ + ç”¨æˆ·id + ä¸šåŠ¡å«ä¹‰ç¼–ç &lt;/p>
&lt;/li>
&lt;li>
&lt;p>snowflakeç®—æ³•&lt;/p>
&lt;p>twitterå¼€æºçš„åˆ†å¸ƒå¼idç”Ÿæˆç®—æ³•ï¼Œå°±æ˜¯æŠŠä¸€ä¸ª64ä½çš„longåž‹çš„idï¼Œ1ä¸ªbitæ˜¯ä¸ç”¨çš„ï¼Œç”¨å…¶ä¸­çš„41 bitä½œä¸ºæ¯«ç§’æ•°ï¼Œç”¨10 bitä½œä¸ºå·¥ä½œæœºå™¨idï¼Œ12 bitä½œä¸ºåºåˆ—å·&lt;/p>
&lt;p>1 bitï¼šä¸ç”¨ï¼Œä¸ºå•¥å‘¢ï¼Ÿå› ä¸ºäºŒè¿›åˆ¶é‡Œç¬¬ä¸€ä¸ªbitä¸ºå¦‚æžœæ˜¯1ï¼Œé‚£ä¹ˆéƒ½æ˜¯è´Ÿæ•°ï¼Œä½†æ˜¯æˆ‘ä»¬ç”Ÿæˆçš„idéƒ½æ˜¯æ­£æ•°ï¼Œæ‰€ä»¥ç¬¬ä¸€ä¸ªbitç»Ÿä¸€éƒ½æ˜¯0&lt;/p>
&lt;p>41 bitï¼šè¡¨ç¤ºçš„æ˜¯æ—¶é—´æˆ³ï¼Œå•ä½æ˜¯æ¯«ç§’ã€‚41 bitå¯ä»¥è¡¨ç¤ºçš„æ•°å­—å¤šè¾¾2^41 - 1ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥æ ‡è¯†2 ^ 41 - 1ä¸ªæ¯«ç§’å€¼ï¼Œæ¢ç®—æˆå¹´å°±æ˜¯è¡¨ç¤º69å¹´çš„æ—¶é—´ã€‚&lt;/p>
&lt;p>10 bitï¼šè®°å½•å·¥ä½œæœºå™¨idï¼Œä»£è¡¨çš„æ˜¯è¿™ä¸ªæœåŠ¡æœ€å¤šå¯ä»¥éƒ¨ç½²åœ¨2^10å°æœºå™¨ä¸Šå“ªï¼Œä¹Ÿå°±æ˜¯1024å°æœºå™¨ã€‚ä½†æ˜¯10 bité‡Œ5ä¸ªbitä»£è¡¨æœºæˆ¿idï¼Œ5ä¸ªbitä»£è¡¨æœºå™¨idã€‚æ„æ€å°±æ˜¯æœ€å¤šä»£è¡¨2 ^ 5ä¸ªæœºæˆ¿ï¼ˆ32ä¸ªæœºæˆ¿ï¼‰ï¼Œæ¯ä¸ªæœºæˆ¿é‡Œå¯ä»¥ä»£è¡¨2 ^ 5ä¸ªæœºå™¨ï¼ˆ32å°æœºå™¨ï¼‰ã€‚&lt;/p>
&lt;p>12 bitï¼šè¿™ä¸ªæ˜¯ç”¨æ¥è®°å½•åŒä¸€ä¸ªæ¯«ç§’å†…äº§ç”Ÿçš„ä¸åŒidï¼Œ12 bitå¯ä»¥ä»£è¡¨çš„æœ€å¤§æ­£æ•´æ•°æ˜¯2 ^ 12 - 1 = 4096ï¼Œä¹Ÿå°±æ˜¯è¯´å¯ä»¥ç”¨è¿™ä¸ª12bitä»£è¡¨çš„æ•°å­—æ¥åŒºåˆ†åŒä¸€ä¸ªæ¯«ç§’å†…çš„4096ä¸ªä¸åŒçš„id&lt;/p>
&lt;p>64ä½çš„longåž‹çš„idï¼Œ64ä½çš„long -&amp;gt; äºŒè¿›åˆ¶&lt;/p>
&lt;p>0 | 0001100 10100010 10111110 10001001 01011100 00 | 10001 | 1 1001 | 0000 00000000&lt;/p>
&lt;p>2018-01-01 10:00:00 -&amp;gt; åšäº†ä¸€äº›è®¡ç®—ï¼Œå†æ¢ç®—æˆä¸€ä¸ªäºŒè¿›åˆ¶ï¼Œ41bitæ¥æ”¾ -&amp;gt; 0001100 10100010 10111110 10001001 01011100 00&lt;/p>
&lt;p>æœºæˆ¿idï¼Œ17 -&amp;gt; æ¢ç®—æˆä¸€ä¸ªäºŒè¿›åˆ¶ -&amp;gt; 10001&lt;/p>
&lt;p>æœºå™¨idï¼Œ25 -&amp;gt; æ¢ç®—æˆä¸€ä¸ªäºŒè¿›åˆ¶ -&amp;gt; 11001&lt;/p>
&lt;p>snowflakeç®—æ³•æœåŠ¡ï¼Œä¼šåˆ¤æ–­ä¸€ä¸‹ï¼Œå½“å‰è¿™ä¸ªè¯·æ±‚æ˜¯å¦æ˜¯ï¼Œæœºæˆ¿17çš„æœºå™¨25ï¼Œåœ¨2175/11/7 12:12:14æ—¶é—´ç‚¹å‘é€è¿‡æ¥çš„ç¬¬ä¸€ä¸ªè¯·æ±‚ï¼Œå¦‚æžœæ˜¯ç¬¬ä¸€ä¸ªè¯·æ±‚&lt;/p>
&lt;p>å‡è®¾ï¼Œåœ¨2175/11/7 12:12:14æ—¶é—´é‡Œï¼Œæœºæˆ¿17çš„æœºå™¨25ï¼Œå‘é€äº†ç¬¬äºŒæ¡æ¶ˆæ¯ï¼Œsnowflakeç®—æ³•æœåŠ¡ï¼Œä¼šå‘çŽ°è¯´æœºæˆ¿17çš„æœºå™¨25ï¼Œåœ¨2175/11/7 12:12:14æ—¶é—´é‡Œï¼Œåœ¨è¿™ä¸€æ¯«ç§’ï¼Œä¹‹å‰å·²ç»ç”Ÿæˆè¿‡ä¸€ä¸ªidäº†ï¼Œæ­¤æ—¶å¦‚æžœä½ åŒä¸€ä¸ªæœºæˆ¿ï¼ŒåŒä¸€ä¸ªæœºå™¨ï¼Œåœ¨åŒä¸€ä¸ªæ¯«ç§’å†…ï¼Œå†æ¬¡è¦æ±‚ç”Ÿæˆä¸€ä¸ªidï¼Œæ­¤æ—¶æˆ‘åªèƒ½æŠŠåŠ 1&lt;/p>
&lt;p>0 | 0001100 10100010 10111110 10001001 01011100 00 | 10001 | 1 1001 | 0000 00000001&lt;/p>
&lt;p>æ¯”å¦‚æˆ‘ä»¬æ¥è§‚å¯Ÿä¸Šé¢çš„é‚£ä¸ªï¼Œå°±æ˜¯ä¸€ä¸ªå…¸åž‹çš„äºŒè¿›åˆ¶çš„64ä½çš„idï¼Œæ¢ç®—æˆ10è¿›åˆ¶å°±æ˜¯910499571847892992&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-03-31-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8%E5%8E%9F%E7%90%86%E5%8F%8A%E4%B8%AD%E9%97%B4%E4%BB%B6%E7%9B%B8%E5%85%B3%E9%9D%A2%E8%AF%95%E9%A2%98/a7.png" alt="snowflakeç®—æ³•">&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="ä¸ºä»€ä¹ˆè¦åšè¯»å†™åˆ†ç¦»">ä¸ºä»€ä¹ˆè¦åšè¯»å†™åˆ†ç¦»ï¼Ÿ&lt;/h2>
&lt;p>æ‰¿è½½æ›´é«˜çš„å¹¶å‘é‡&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-03-31-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8%E5%8E%9F%E7%90%86%E5%8F%8A%E4%B8%AD%E9%97%B4%E4%BB%B6%E7%9B%B8%E5%85%B3%E9%9D%A2%E8%AF%95%E9%A2%98/a8.png" alt="ä¸ºä»€ä¹ˆè¦åšè¯»å†™åˆ†ç¦»">&lt;/p>
&lt;h2 id="å¦‚ä½•å®žçŽ°mysqlçš„è¯»å†™åˆ†ç¦»åŽŸç†">å¦‚ä½•å®žçŽ°mysqlçš„è¯»å†™åˆ†ç¦»ï¼ŒåŽŸç†ï¼Ÿ&lt;/h2>
&lt;p>åŸºäºŽä¸»ä»Žå¤åˆ¶æž¶æž„ï¼Œç®€å•æ¥è¯´ï¼Œå°±æžä¸€ä¸ªä¸»åº“ï¼ŒæŒ‚å¤šä¸ªä»Žåº“ï¼Œç„¶åŽæˆ‘ä»¬å°±å•å•åªæ˜¯å†™ä¸»åº“ï¼Œç„¶åŽä¸»åº“ä¼šè‡ªåŠ¨æŠŠæ•°æ®ç»™åŒæ­¥åˆ°ä»Žåº“ä¸ŠåŽ»&lt;/p>
&lt;p>ä¸»åº“å°†å˜æ›´å†™binlogæ—¥å¿—ï¼Œç„¶åŽä»Žåº“è¿žæŽ¥åˆ°ä¸»åº“ä¹‹åŽï¼Œä»Žåº“æœ‰ä¸€ä¸ªIOçº¿ç¨‹ï¼Œå°†ä¸»åº“çš„binlogæ—¥å¿—æ‹·è´åˆ°è‡ªå·±æœ¬åœ°ï¼Œå†™å…¥ä¸€ä¸ªä¸­ç»§æ—¥å¿—ä¸­ã€‚æŽ¥ç€ä»Žåº“ä¸­æœ‰ä¸€ä¸ªSQLçº¿ç¨‹ä¼šä»Žä¸­ç»§æ—¥å¿—è¯»å–binlogï¼Œç„¶åŽæ‰§è¡Œbinlogæ—¥å¿—ä¸­çš„å†…å®¹ï¼Œä¹Ÿå°±æ˜¯åœ¨è‡ªå·±æœ¬åœ°å†æ¬¡æ‰§è¡Œä¸€éSQLï¼Œè¿™æ ·å°±å¯ä»¥ä¿è¯è‡ªå·±è·Ÿä¸»åº“çš„æ•°æ®æ˜¯ä¸€æ ·çš„ã€‚&lt;/p>
&lt;p>è¿™é‡Œæœ‰ä¸€ä¸ªéžå¸¸é‡è¦çš„ä¸€ç‚¹ï¼Œå°±æ˜¯ä»Žåº“åŒæ­¥ä¸»åº“æ•°æ®çš„è¿‡ç¨‹æ˜¯ä¸²è¡ŒåŒ–çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸»åº“ä¸Šå¹¶è¡Œçš„æ“ä½œï¼Œåœ¨ä»Žåº“ä¸Šä¼šä¸²è¡Œæ‰§è¡Œã€‚æ‰€ä»¥è¿™å°±æ˜¯ä¸€ä¸ªéžå¸¸é‡è¦çš„ç‚¹äº†ï¼Œç”±äºŽä»Žåº“ä»Žä¸»åº“æ‹·è´æ—¥å¿—ä»¥åŠä¸²è¡Œæ‰§è¡ŒSQLçš„ç‰¹ç‚¹ï¼Œåœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œä»Žåº“çš„æ•°æ®ä¸€å®šä¼šæ¯”ä¸»åº“æ…¢ä¸€äº›ï¼Œæ˜¯æœ‰å»¶æ—¶çš„ã€‚æ‰€ä»¥ç»å¸¸å‡ºçŽ°ï¼Œåˆšå†™å…¥ä¸»åº“çš„æ•°æ®å¯èƒ½æ˜¯è¯»ä¸åˆ°çš„ï¼Œè¦è¿‡å‡ åæ¯«ç§’ï¼Œç”šè‡³å‡ ç™¾æ¯«ç§’æ‰èƒ½è¯»å–åˆ°ã€‚&lt;/p>
&lt;p>è€Œä¸”è¿™é‡Œè¿˜æœ‰å¦å¤–ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯å¦‚æžœä¸»åº“çªç„¶å®•æœºï¼Œç„¶åŽæ°å¥½æ•°æ®è¿˜æ²¡åŒæ­¥åˆ°ä»Žåº“ï¼Œé‚£ä¹ˆæœ‰äº›æ•°æ®å¯èƒ½åœ¨ä»Žåº“ä¸Šæ˜¯æ²¡æœ‰çš„ï¼Œæœ‰äº›æ•°æ®å¯èƒ½å°±ä¸¢å¤±äº†ã€‚&lt;/p>
&lt;p>æ‰€ä»¥mysqlå®žé™…ä¸Šåœ¨è¿™ä¸€å—æœ‰ä¸¤ä¸ªæœºåˆ¶ï¼Œä¸€ä¸ªæ˜¯åŠåŒæ­¥å¤åˆ¶ï¼Œç”¨æ¥è§£å†³ä¸»åº“æ•°æ®ä¸¢å¤±é—®é¢˜ï¼›ä¸€ä¸ªæ˜¯å¹¶è¡Œå¤åˆ¶ï¼Œç”¨æ¥è§£å†³ä¸»ä»ŽåŒæ­¥å»¶æ—¶é—®é¢˜ã€‚&lt;/p>
&lt;p>è¿™ä¸ªæ‰€è°“åŠåŒæ­¥å¤åˆ¶ï¼Œsemi-syncå¤åˆ¶ï¼ŒæŒ‡çš„å°±æ˜¯ä¸»åº“å†™å…¥binlogæ—¥å¿—ä¹‹åŽï¼Œå°±ä¼šå°†å¼ºåˆ¶æ­¤æ—¶ç«‹å³å°†æ•°æ®åŒæ­¥åˆ°ä»Žåº“ï¼Œä»Žåº“å°†æ—¥å¿—å†™å…¥è‡ªå·±æœ¬åœ°çš„relay logä¹‹åŽï¼ŒæŽ¥ç€ä¼šè¿”å›žä¸€ä¸ªackç»™ä¸»åº“ï¼Œä¸»åº“æŽ¥æ”¶åˆ°è‡³å°‘ä¸€ä¸ªä»Žåº“çš„ackä¹‹åŽæ‰ä¼šè®¤ä¸ºå†™æ“ä½œå®Œæˆäº†ã€‚&lt;/p>
&lt;p>æ‰€è°“å¹¶è¡Œå¤åˆ¶ï¼ŒæŒ‡çš„æ˜¯ä»Žåº“å¼€å¯å¤šä¸ªçº¿ç¨‹ï¼Œå¹¶è¡Œè¯»å–relay logä¸­ä¸åŒåº“çš„æ—¥å¿—ï¼Œç„¶åŽå¹¶è¡Œé‡æ”¾ä¸åŒåº“çš„æ—¥å¿—ï¼Œè¿™æ˜¯åº“çº§åˆ«çš„å¹¶è¡Œã€‚&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-03-31-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8%E5%8E%9F%E7%90%86%E5%8F%8A%E4%B8%AD%E9%97%B4%E4%BB%B6%E7%9B%B8%E5%85%B3%E9%9D%A2%E8%AF%95%E9%A2%98/a9.png" alt="åŽŸç†">&lt;/p>
&lt;h2 id="mysqlä¸»ä»ŽåŒæ­¥å»¶æ—¶é—®é¢˜">mysqlä¸»ä»ŽåŒæ­¥å»¶æ—¶é—®é¢˜&lt;/h2>
&lt;p>1ã€åˆ†åº“ï¼Œå°†ä¸€ä¸ªä¸»åº“æ‹†åˆ†ä¸º4ä¸ªä¸»åº“ï¼Œæ¯ä¸ªä¸»åº“çš„å†™å¹¶å‘å°±500/sï¼Œæ­¤æ—¶ä¸»ä»Žå»¶è¿Ÿå¯ä»¥å¿½ç•¥ä¸è®¡&lt;/p>
&lt;p>2ã€æ‰“å¼€mysqlæ”¯æŒçš„å¹¶è¡Œå¤åˆ¶ï¼Œå¤šä¸ªåº“å¹¶è¡Œå¤åˆ¶ï¼Œå¦‚æžœè¯´æŸä¸ªåº“çš„å†™å…¥å¹¶å‘å°±æ˜¯ç‰¹åˆ«é«˜ï¼Œå•åº“å†™å¹¶å‘è¾¾åˆ°äº†2000/sï¼Œå¹¶è¡Œå¤åˆ¶è¿˜æ˜¯æ²¡æ„ä¹‰ã€‚28æ³•åˆ™ï¼Œå¾ˆå¤šæ—¶å€™æ¯”å¦‚è¯´ï¼Œå°±æ˜¯å°‘æ•°çš„å‡ ä¸ªè®¢å•è¡¨ï¼Œå†™å…¥äº†2000/sï¼Œå…¶ä»–å‡ åä¸ªè¡¨10/sã€‚&lt;/p>
&lt;p>3ã€é‡å†™ä»£ç ï¼Œå†™ä»£ç çš„åŒå­¦ï¼Œè¦æ…Žé‡ï¼Œå½“æ—¶æˆ‘ä»¬å…¶å®žçŸ­æœŸæ˜¯è®©é‚£ä¸ªåŒå­¦é‡å†™äº†ä¸€ä¸‹ä»£ç ï¼Œæ’å…¥æ•°æ®ä¹‹åŽï¼Œç›´æŽ¥å°±æ›´æ–°ï¼Œä¸è¦æŸ¥è¯¢&lt;/p>
&lt;p>å¦‚æžœç¡®å®žæ˜¯å­˜åœ¨å¿…é¡»å…ˆæ’å…¥ï¼Œç«‹é©¬è¦æ±‚å°±æŸ¥è¯¢åˆ°ï¼Œç„¶åŽç«‹é©¬å°±è¦åè¿‡æ¥æ‰§è¡Œä¸€äº›æ“ä½œï¼Œå¯¹è¿™ä¸ªæŸ¥è¯¢è®¾ç½®ç›´è¿žä¸»åº“ã€‚ä¸æŽ¨èè¿™ç§æ–¹æ³•ï¼Œä½ è¿™ä¹ˆæžå¯¼è‡´è¯»å†™åˆ†ç¦»çš„æ„ä¹‰å°±ä¸§å¤±äº†&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-03-31-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8%E5%8E%9F%E7%90%86%E5%8F%8A%E4%B8%AD%E9%97%B4%E4%BB%B6%E7%9B%B8%E5%85%B3%E9%9D%A2%E8%AF%95%E9%A2%98/a10.png" alt="mysqlä¸»ä»ŽåŒæ­¥å»¶æ—¶é—®é¢˜">&lt;/p></description></item><item><title>åˆ†å¸ƒå¼æœç´¢å¼•æ“ŽElasticsearché¢è¯•é¢˜åŠä¸€äº›æ¦‚å¿µ</title><link>https://blog.itning.top/post/2019/03/25/%E5%88%86%E5%B8%83%E5%BC%8F%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8Eelasticsearch%E9%9D%A2%E8%AF%95%E9%A2%98%E5%8F%8A%E4%B8%80%E4%BA%9B%E6%A6%82%E5%BF%B5/</link><pubDate>Mon, 25 Mar 2019 16:57:13 +0800</pubDate><guid>https://blog.itning.top/post/2019/03/25/%E5%88%86%E5%B8%83%E5%BC%8F%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8Eelasticsearch%E9%9D%A2%E8%AF%95%E9%A2%98%E5%8F%8A%E4%B8%80%E4%BA%9B%E6%A6%82%E5%BF%B5/</guid><description>&lt;h2 id="elasticsearchä¸€äº›åŸºæœ¬æ¦‚å¿µ">Elasticsearchä¸€äº›åŸºæœ¬æ¦‚å¿µ&lt;/h2>
&lt;h3 id="ç´¢å¼•index">ç´¢å¼•(index)&lt;/h3>
&lt;p>ç±»ä¼¼äºŽå…³ç³»æ•°æ®åº“ä¸­çš„ä¸€å¼ è¡¨&lt;/p>
&lt;p>ä½†æ˜¯å’Œè¡¨æœ‰æœ¬è´¨åŒºåˆ«&lt;/p>
&lt;h3 id="ç±»åž‹type">ç±»åž‹(type)&lt;/h3>
&lt;p>ç±»åˆ«ï¼Œä¾‹å¦‚è®¢å•çš„ç±»åˆ«ã€‚åœ¨å…·ä½“ä¸€äº›ï¼šæ”¯ä»˜è®¢å•åˆ†ä¸ºå®žä½“å•†å“å’Œè™šæ‹Ÿå•†å“ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ›å»ºä¸¤ç§ç±»åˆ«ï¼ˆç±»åž‹ï¼‰&lt;/p>
&lt;h3 id="æ˜ å°„mapping">æ˜ å°„(mapping)&lt;/h3>
&lt;p>ç›¸å½“äºŽè¡¨ç»“æž„&lt;/p>
&lt;h3 id="æ–‡æ¡£document">æ–‡æ¡£(document)&lt;/h3>
&lt;p>ç›¸å½“äºŽè¡¨ä¸­çš„ä¸€è¡Œæ•°æ®&lt;/p>
&lt;h3 id="ç¢Žç‰‡shards">ç¢Žç‰‡(shards)&lt;/h3>
&lt;p>ä»£è¡¨ç´¢å¼•åˆ†ç‰‡ï¼Œeså¯ä»¥æŠŠä¸€ä¸ªå®Œæ•´çš„ç´¢å¼•åˆ†æˆå¤šä¸ªåˆ†ç‰‡ï¼Œè¿™æ ·çš„å¥½å¤„æ˜¯å¯ä»¥æŠŠä¸€ä¸ªå¤§çš„ç´¢å¼•æ‹†åˆ†æˆå¤šä¸ªï¼Œåˆ†å¸ƒåˆ°ä¸åŒçš„èŠ‚ç‚¹ä¸Šã€‚æž„æˆåˆ†å¸ƒå¼æœç´¢ã€‚åˆ†ç‰‡çš„æ•°é‡åªèƒ½åœ¨ç´¢å¼•åˆ›å»ºå‰æŒ‡å®šï¼Œå¹¶ä¸”ç´¢å¼•åˆ›å»ºåŽä¸èƒ½æ›´æ”¹ã€‚&lt;/p>
&lt;h2 id="eså¦‚ä½•å®žçŽ°åˆ†å¸ƒå¼">ESå¦‚ä½•å®žçŽ°åˆ†å¸ƒå¼ï¼Ÿ&lt;/h2>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-03-25-%E5%88%86%E5%B8%83%E5%BC%8F%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8EElasticsearch%E9%9D%A2%E8%AF%95%E9%A2%98%E5%8F%8A%E4%B8%80%E4%BA%9B%E6%A6%82%E5%BF%B5/a1.png" alt="åˆ†å¸ƒå¼å›¾è§£">&lt;/p>
&lt;p>ESé›†ç¾¤å¤šä¸ªèŠ‚ç‚¹ä¼šé€‰ä¸¾ä¸€ä¸ªèŠ‚ç‚¹ä¸ºmasterèŠ‚ç‚¹ã€‚&lt;/p>
&lt;p>masterèŠ‚ç‚¹åšä¸€äº›ç®¡ç†å·¥ä½œï¼Œä¾‹å¦‚ç»´æŠ¤&lt;strong>ç´¢å¼•å…ƒæ•°æ®&lt;/strong>ï¼Œè´Ÿè´£åˆ‡æ¢primary shardå’Œreplica shardèº«ä»½ã€‚&lt;/p>
&lt;p>å¦‚æžœmasterèŠ‚ç‚¹å®•æœºï¼Œä¼šé€‰ä¸¾äº§ç”Ÿæ–°çš„masterèŠ‚ç‚¹ã€‚&lt;/p>
&lt;p>æ–°äº§ç”Ÿçš„masterå°†å®•æœºçš„èŠ‚ç‚¹çš„æ•°æ®è½¬ç§»åˆ°å…¶å®ƒæœºå™¨ä¸Šã€‚&lt;/p>
&lt;h2 id="eså†™å…¥è¯»å–æ•°æ®çš„åŽŸç†">ESå†™å…¥/è¯»å–æ•°æ®çš„åŽŸç†ï¼Ÿ&lt;/h2>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-03-25-%E5%88%86%E5%B8%83%E5%BC%8F%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8EElasticsearch%E9%9D%A2%E8%AF%95%E9%A2%98%E5%8F%8A%E4%B8%80%E4%BA%9B%E6%A6%82%E5%BF%B5/a2.png" alt="ESå†™å…¥/è¯»å–æ•°æ®çš„åŽŸç†å›¾è§£">&lt;/p>
&lt;h3 id="å†™å…¥">å†™å…¥&lt;/h3>
&lt;ol>
&lt;li>
&lt;p>å®¢æˆ·ç«¯é€‰æ‹©ä¸€ä¸ªnodeå‘é€è¯·æ±‚è¿‡åŽ»ï¼Œè¿™ä¸ªnodeå°±æ˜¯coordinating nodeï¼ˆåè°ƒèŠ‚ç‚¹ï¼‰&lt;/p>
&lt;/li>
&lt;li>
&lt;p>coordinating nodeï¼Œå¯¹documentè¿›è¡Œè·¯ç”±ï¼Œå°†è¯·æ±‚è½¬å‘ç»™å¯¹åº”çš„nodeï¼ˆæœ‰primary shardï¼‰&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å®žé™…çš„nodeä¸Šçš„primary shardå¤„ç†è¯·æ±‚ï¼Œç„¶åŽå°†æ•°æ®åŒæ­¥åˆ°replica node&lt;/p>
&lt;/li>
&lt;li>
&lt;p>coordinating nodeï¼Œå¦‚æžœå‘çŽ°primary nodeå’Œæ‰€æœ‰replica nodeéƒ½æžå®šä¹‹åŽï¼Œå°±è¿”å›žå“åº”ç»“æžœç»™å®¢æˆ·ç«¯&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h3 id="è¯»å–">è¯»å–&lt;/h3>
&lt;p>æŸ¥è¯¢ï¼ŒGETæŸä¸€æ¡æ•°æ®ï¼Œå†™å…¥äº†æŸä¸ªdocumentï¼Œè¿™ä¸ªdocumentä¼šè‡ªåŠ¨ç»™ä½ åˆ†é…ä¸€ä¸ªå…¨å±€å”¯ä¸€çš„idï¼Œdoc idï¼ŒåŒæ—¶ä¹Ÿæ˜¯æ ¹æ®doc idè¿›è¡Œhashè·¯ç”±åˆ°å¯¹åº”çš„primary shardä¸Šé¢åŽ»ã€‚ä¹Ÿå¯ä»¥æ‰‹åŠ¨æŒ‡å®šdoc idï¼Œæ¯”å¦‚ç”¨è®¢å•idï¼Œç”¨æˆ·idã€‚&lt;/p>
&lt;p>ä½ å¯ä»¥é€šè¿‡doc idæ¥æŸ¥è¯¢ï¼Œä¼šæ ¹æ®doc idè¿›è¡Œhashï¼Œåˆ¤æ–­å‡ºæ¥å½“æ—¶æŠŠdoc idåˆ†é…åˆ°äº†å“ªä¸ªshardä¸Šé¢åŽ»ï¼Œä»Žé‚£ä¸ªshardåŽ»æŸ¥è¯¢&lt;/p>
&lt;ol>
&lt;li>
&lt;p>å®¢æˆ·ç«¯å‘é€è¯·æ±‚åˆ°ä»»æ„ä¸€ä¸ªnodeï¼Œæˆä¸ºcoordinate node&lt;/p>
&lt;/li>
&lt;li>
&lt;p>coordinate nodeå¯¹documentè¿›è¡Œè·¯ç”±ï¼Œå°†è¯·æ±‚è½¬å‘åˆ°å¯¹åº”çš„nodeï¼Œæ­¤æ—¶ä¼šä½¿ç”¨round-robinéšæœºè½®è¯¢ç®—æ³•ï¼Œåœ¨primary shardä»¥åŠå…¶æ‰€æœ‰replicaä¸­éšæœºé€‰æ‹©ä¸€ä¸ªï¼Œè®©è¯»è¯·æ±‚è´Ÿè½½å‡è¡¡&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æŽ¥æ”¶è¯·æ±‚çš„nodeè¿”å›ždocumentç»™coordinate node&lt;/p>
&lt;/li>
&lt;li>
&lt;p>coordinate nodeè¿”å›ždocumentç»™å®¢æˆ·ç«¯&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h3 id="æœç´¢æ•°æ®è¿‡ç¨‹">æœç´¢æ•°æ®è¿‡ç¨‹&lt;/h3>
&lt;ol>
&lt;li>
&lt;p>å®¢æˆ·ç«¯å‘é€è¯·æ±‚åˆ°ä¸€ä¸ªcoordinate node&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åè°ƒèŠ‚ç‚¹å°†æœç´¢è¯·æ±‚è½¬å‘åˆ°æ‰€æœ‰çš„shardå¯¹åº”çš„primary shardæˆ–replica shardä¹Ÿå¯ä»¥&lt;/p>
&lt;/li>
&lt;li>
&lt;p>query phaseï¼šæ¯ä¸ªshardå°†è‡ªå·±çš„æœç´¢ç»“æžœï¼ˆå…¶å®žå°±æ˜¯ä¸€äº›doc idï¼‰ï¼Œè¿”å›žç»™åè°ƒèŠ‚ç‚¹ï¼Œç”±åè°ƒèŠ‚ç‚¹è¿›è¡Œæ•°æ®çš„åˆå¹¶ã€æŽ’åºã€åˆ†é¡µç­‰æ“ä½œï¼Œäº§å‡ºæœ€ç»ˆç»“æžœ&lt;/p>
&lt;/li>
&lt;li>
&lt;p>fetch phaseï¼šæŽ¥ç€ç”±åè°ƒèŠ‚ç‚¹ï¼Œæ ¹æ®doc idåŽ»å„ä¸ªèŠ‚ç‚¹ä¸Šæ‹‰å–å®žé™…çš„documentæ•°æ®ï¼Œæœ€ç»ˆè¿”å›žç»™å®¢æˆ·ç«¯&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h3 id="å†™æ•°æ®åº•å±‚åŽŸç†">å†™æ•°æ®åº•å±‚åŽŸç†&lt;/h3>
&lt;ol>
&lt;li>
&lt;p>å…ˆå†™å…¥bufferï¼Œåœ¨bufferé‡Œçš„æ—¶å€™æ•°æ®æ˜¯æœç´¢ä¸åˆ°çš„ï¼›åŒæ—¶å°†æ•°æ®å†™å…¥translogæ—¥å¿—æ–‡ä»¶&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¦‚æžœbufferå¿«æ»¡äº†ï¼Œæˆ–è€…åˆ°ä¸€å®šæ—¶é—´ï¼Œå°±ä¼šå°†bufferæ•°æ®refreshåˆ°ä¸€ä¸ªæ–°çš„segment fileä¸­ï¼Œä½†æ˜¯æ­¤æ—¶æ•°æ®ä¸æ˜¯ç›´æŽ¥è¿›å…¥segment fileçš„ç£ç›˜æ–‡ä»¶çš„ï¼Œè€Œæ˜¯å…ˆè¿›å…¥os cacheçš„ã€‚è¿™ä¸ªè¿‡ç¨‹å°±æ˜¯refreshã€‚&lt;/p>
&lt;p>æ¯éš”1ç§’é’Ÿï¼Œeså°†bufferä¸­çš„æ•°æ®å†™å…¥ä¸€ä¸ªæ–°çš„segment fileï¼Œæ¯ç§’é’Ÿä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„ç£ç›˜æ–‡ä»¶ï¼Œsegment fileï¼Œè¿™ä¸ªsegment fileä¸­å°±å­˜å‚¨æœ€è¿‘1ç§’å†…bufferä¸­å†™å…¥çš„æ•°æ®&lt;/p>
&lt;p>ä½†æ˜¯å¦‚æžœbufferé‡Œé¢æ­¤æ—¶æ²¡æœ‰æ•°æ®ï¼Œé‚£å½“ç„¶ä¸ä¼šæ‰§è¡Œrefreshæ“ä½œå’¯ï¼Œæ¯ç§’åˆ›å»ºæ¢ä¸€ä¸ªç©ºçš„segment fileï¼Œå¦‚æžœbufferé‡Œé¢æœ‰æ•°æ®ï¼Œé»˜è®¤1ç§’é’Ÿæ‰§è¡Œä¸€æ¬¡refreshæ“ä½œï¼Œåˆ·å…¥ä¸€ä¸ªæ–°çš„segment fileä¸­&lt;/p>
&lt;p>æ“ä½œç³»ç»Ÿé‡Œé¢ï¼Œç£ç›˜æ–‡ä»¶å…¶å®žéƒ½æœ‰ä¸€ä¸ªä¸œè¥¿ï¼Œå«åšos cacheï¼Œæ“ä½œç³»ç»Ÿç¼“å­˜ï¼Œå°±æ˜¯è¯´æ•°æ®å†™å…¥ç£ç›˜æ–‡ä»¶ä¹‹å‰ï¼Œä¼šå…ˆè¿›å…¥os cacheï¼Œå…ˆè¿›å…¥æ“ä½œç³»ç»Ÿçº§åˆ«çš„ä¸€ä¸ªå†…å­˜ç¼“å­˜ä¸­åŽ»&lt;/p>
&lt;p>åªè¦bufferä¸­çš„æ•°æ®è¢«refreshæ“ä½œï¼Œåˆ·å…¥os cacheä¸­ï¼Œå°±ä»£è¡¨è¿™ä¸ªæ•°æ®å°±å¯ä»¥è¢«æœç´¢åˆ°äº†&lt;/p>
&lt;p>**ä¸ºä»€ä¹ˆå«esæ˜¯å‡†å®žæ—¶çš„ï¼Ÿ**NRTï¼Œnear real-timeï¼Œå‡†å®žæ—¶ã€‚é»˜è®¤æ˜¯æ¯éš”1ç§’refreshä¸€æ¬¡çš„ï¼Œæ‰€ä»¥esæ˜¯å‡†å®žæ—¶çš„ï¼Œå› ä¸ºå†™å…¥çš„æ•°æ®1ç§’ä¹‹åŽæ‰èƒ½è¢«çœ‹åˆ°ã€‚&lt;/p>
&lt;p>å¯ä»¥é€šè¿‡esçš„restful apiæˆ–è€…java apiï¼Œæ‰‹åŠ¨æ‰§è¡Œä¸€æ¬¡refreshæ“ä½œï¼Œå°±æ˜¯æ‰‹åŠ¨å°†bufferä¸­çš„æ•°æ®åˆ·å…¥os cacheä¸­ï¼Œè®©æ•°æ®ç«‹é©¬å°±å¯ä»¥è¢«æœç´¢åˆ°ã€‚&lt;/p>
&lt;p>åªè¦æ•°æ®è¢«è¾“å…¥os cacheä¸­ï¼Œbufferå°±ä¼šè¢«æ¸…ç©ºäº†ï¼Œå› ä¸ºä¸éœ€è¦ä¿ç•™bufferäº†ï¼Œæ•°æ®åœ¨translogé‡Œé¢å·²ç»æŒä¹…åŒ–åˆ°ç£ç›˜åŽ»ä¸€ä»½äº†&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åªè¦æ•°æ®è¿›å…¥os cacheï¼Œæ­¤æ—¶å°±å¯ä»¥è®©è¿™ä¸ªsegment fileçš„æ•°æ®å¯¹å¤–æä¾›æœç´¢äº†&lt;/p>
&lt;/li>
&lt;li>
&lt;p>é‡å¤1~3æ­¥éª¤ï¼Œæ–°çš„æ•°æ®ä¸æ–­è¿›å…¥bufferå’Œtranslogï¼Œä¸æ–­å°†bufferæ•°æ®å†™å…¥ä¸€ä¸ªåˆä¸€ä¸ªæ–°çš„segment fileä¸­åŽ»ï¼Œæ¯æ¬¡refreshå®Œbufferæ¸…ç©ºï¼Œtranslogä¿ç•™ã€‚éšç€è¿™ä¸ªè¿‡ç¨‹æŽ¨è¿›ï¼Œtranslogä¼šå˜å¾—è¶Šæ¥è¶Šå¤§ã€‚å½“translogè¾¾åˆ°ä¸€å®šé•¿åº¦çš„æ—¶å€™ï¼Œå°±ä¼šè§¦å‘commitæ“ä½œã€‚&lt;/p>
&lt;p>bufferä¸­çš„æ•°æ®ï¼Œå€’æ˜¯å¥½ï¼Œæ¯éš”1ç§’å°±è¢«åˆ·åˆ°os cacheä¸­åŽ»ï¼Œç„¶åŽè¿™ä¸ªbufferå°±è¢«æ¸…ç©ºäº†ã€‚æ‰€ä»¥è¯´è¿™ä¸ªbufferçš„æ•°æ®å§‹ç»ˆæ˜¯å¯ä»¥ä¿æŒä½ä¸ä¼šå¡«æ»¡esè¿›ç¨‹çš„å†…å­˜çš„ã€‚&lt;/p>
&lt;p>æ¯æ¬¡ä¸€æ¡æ•°æ®å†™å…¥bufferï¼ŒåŒæ—¶ä¼šå†™å…¥ä¸€æ¡æ—¥å¿—åˆ°translogæ—¥å¿—æ–‡ä»¶ä¸­åŽ»ï¼Œæ‰€ä»¥è¿™ä¸ªtranslogæ—¥å¿—æ–‡ä»¶æ˜¯ä¸æ–­å˜å¤§çš„ï¼Œå½“translogæ—¥å¿—æ–‡ä»¶å¤§åˆ°ä¸€å®šç¨‹åº¦çš„æ—¶å€™ï¼Œå°±ä¼šæ‰§è¡Œcommitæ“ä½œã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>commitæ“ä½œå‘ç”Ÿç¬¬ä¸€æ­¥ï¼Œå°±æ˜¯å°†bufferä¸­çŽ°æœ‰æ•°æ®refreshåˆ°os cacheä¸­åŽ»ï¼Œæ¸…ç©ºbuffer&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å°†ä¸€ä¸ªcommit pointå†™å…¥ç£ç›˜æ–‡ä»¶ï¼Œé‡Œé¢æ ‡è¯†ç€è¿™ä¸ªcommit pointå¯¹åº”çš„æ‰€æœ‰segment file&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¼ºè¡Œå°†os cacheä¸­ç›®å‰æ‰€æœ‰çš„æ•°æ®éƒ½fsyncåˆ°ç£ç›˜æ–‡ä»¶ä¸­åŽ»&lt;/p>
&lt;p>**translogæ—¥å¿—æ–‡ä»¶çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ**å°±æ˜¯åœ¨ä½ æ‰§è¡Œcommitæ“ä½œä¹‹å‰ï¼Œæ•°æ®è¦ä¹ˆæ˜¯åœç•™åœ¨bufferä¸­ï¼Œè¦ä¹ˆæ˜¯åœç•™åœ¨os cacheä¸­ï¼Œæ— è®ºæ˜¯bufferè¿˜æ˜¯os cacheéƒ½æ˜¯å†…å­˜ï¼Œä¸€æ—¦è¿™å°æœºå™¨æ­»äº†ï¼Œå†…å­˜ä¸­çš„æ•°æ®å°±å…¨ä¸¢äº†ã€‚&lt;/p>
&lt;p>æ‰€ä»¥éœ€è¦å°†æ•°æ®å¯¹åº”çš„æ“ä½œå†™å…¥ä¸€ä¸ªä¸“é—¨çš„æ—¥å¿—æ–‡ä»¶ï¼Œtranslogæ—¥å¿—æ–‡ä»¶ä¸­ï¼Œä¸€æ—¦æ­¤æ—¶æœºå™¨å®•æœºï¼Œå†æ¬¡é‡å¯çš„æ—¶å€™ï¼Œesä¼šè‡ªåŠ¨è¯»å–translogæ—¥å¿—æ–‡ä»¶ä¸­çš„æ•°æ®ï¼Œæ¢å¤åˆ°å†…å­˜bufferå’Œos cacheä¸­åŽ»ã€‚&lt;/p>
&lt;p>commitæ“ä½œï¼š1ã€å†™commit pointï¼›2ã€å°†os cacheæ•°æ®fsyncå¼ºåˆ·åˆ°ç£ç›˜ä¸ŠåŽ»ï¼›3ã€æ¸…ç©ºtranslogæ—¥å¿—æ–‡ä»¶&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å°†çŽ°æœ‰çš„translogæ¸…ç©ºï¼Œç„¶åŽå†æ¬¡é‡å¯å¯ç”¨ä¸€ä¸ªtranslogï¼Œæ­¤æ—¶commitæ“ä½œå®Œæˆã€‚é»˜è®¤æ¯éš”30åˆ†é’Ÿä¼šè‡ªåŠ¨æ‰§è¡Œä¸€æ¬¡commitï¼Œä½†æ˜¯å¦‚æžœtranslogè¿‡å¤§ï¼Œä¹Ÿä¼šè§¦å‘commitã€‚æ•´ä¸ªcommitçš„è¿‡ç¨‹ï¼Œå«åšflushæ“ä½œã€‚æˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨æ‰§è¡Œflushæ“ä½œï¼Œå°±æ˜¯å°†æ‰€æœ‰os cacheæ•°æ®åˆ·åˆ°ç£ç›˜æ–‡ä»¶ä¸­åŽ»ã€‚&lt;/p>
&lt;p>ä¸å«åšcommitæ“ä½œï¼Œflushæ“ä½œã€‚esä¸­çš„flushæ“ä½œï¼Œå°±å¯¹åº”ç€commitçš„å…¨è¿‡ç¨‹ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡es apiï¼Œæ‰‹åŠ¨æ‰§è¡Œflushæ“ä½œï¼Œæ‰‹åŠ¨å°†os cacheä¸­çš„æ•°æ®fsyncå¼ºåˆ·åˆ°ç£ç›˜ä¸ŠåŽ»ï¼Œè®°å½•ä¸€ä¸ªcommit pointï¼Œæ¸…ç©ºtranslogæ—¥å¿—æ–‡ä»¶ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>translogå…¶å®žä¹Ÿæ˜¯å…ˆå†™å…¥os cacheçš„ï¼Œé»˜è®¤æ¯éš”5ç§’åˆ·ä¸€æ¬¡åˆ°ç£ç›˜ä¸­åŽ»ï¼Œæ‰€ä»¥é»˜è®¤æƒ…å†µä¸‹ï¼Œå¯èƒ½æœ‰5ç§’çš„æ•°æ®ä¼šä»…ä»…åœç•™åœ¨bufferæˆ–è€…translogæ–‡ä»¶çš„os cacheä¸­ï¼Œå¦‚æžœæ­¤æ—¶æœºå™¨æŒ‚äº†ï¼Œä¼šä¸¢å¤±5ç§’é’Ÿçš„æ•°æ®ã€‚ä½†æ˜¯è¿™æ ·æ€§èƒ½æ¯”è¾ƒå¥½ï¼Œæœ€å¤šä¸¢5ç§’çš„æ•°æ®ã€‚ä¹Ÿå¯ä»¥å°†translogè®¾ç½®æˆæ¯æ¬¡å†™æ“ä½œå¿…é¡»æ˜¯ç›´æŽ¥fsyncåˆ°ç£ç›˜ï¼Œä½†æ˜¯æ€§èƒ½ä¼šå·®å¾ˆå¤šã€‚&lt;/p>
&lt;p>å®žé™…ä¸Šä½ åœ¨è¿™é‡Œï¼Œå¦‚æžœé¢è¯•å®˜æ²¡æœ‰é—®ä½ esä¸¢æ•°æ®çš„é—®é¢˜ï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œç»™é¢è¯•å®˜ç‚«ä¸€æŠŠï¼Œä½ è¯´ï¼Œå…¶å®žesç¬¬ä¸€æ˜¯å‡†å®žæ—¶çš„ï¼Œæ•°æ®å†™å…¥1ç§’åŽå¯ä»¥æœç´¢åˆ°ï¼›å¯èƒ½ä¼šä¸¢å¤±æ•°æ®çš„ï¼Œä½ çš„æ•°æ®æœ‰5ç§’çš„æ•°æ®ï¼Œåœç•™åœ¨bufferã€translog os cacheã€segment file os cacheä¸­ï¼Œæœ‰5ç§’çš„æ•°æ®ä¸åœ¨ç£ç›˜ä¸Šï¼Œæ­¤æ—¶å¦‚æžœå®•æœºï¼Œä¼šå¯¼è‡´5ç§’çš„æ•°æ®ä¸¢å¤±ã€‚&lt;/p>
&lt;p>å¦‚æžœä½ å¸Œæœ›ä¸€å®šä¸èƒ½ä¸¢å¤±æ•°æ®çš„è¯ï¼Œä½ å¯ä»¥è®¾ç½®ä¸ªå‚æ•°ï¼Œå®˜æ–¹æ–‡æ¡£ï¼Œç™¾åº¦ä¸€ä¸‹ã€‚æ¯æ¬¡å†™å…¥ä¸€æ¡æ•°æ®ï¼Œéƒ½æ˜¯å†™å…¥bufferï¼ŒåŒæ—¶å†™å…¥ç£ç›˜ä¸Šçš„translogï¼Œä½†æ˜¯è¿™ä¼šå¯¼è‡´å†™æ€§èƒ½ã€å†™å…¥åžåé‡ä¼šä¸‹é™ä¸€ä¸ªæ•°é‡çº§ã€‚æœ¬æ¥ä¸€ç§’é’Ÿå¯ä»¥å†™2000æ¡ï¼ŒçŽ°åœ¨ä½ ä¸€ç§’é’Ÿåªèƒ½å†™200æ¡ï¼Œéƒ½æœ‰å¯èƒ½ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¦‚æžœæ˜¯åˆ é™¤æ“ä½œï¼Œcommitçš„æ—¶å€™ä¼šç”Ÿæˆä¸€ä¸ª.delæ–‡ä»¶ï¼Œé‡Œé¢å°†æŸä¸ªdocæ ‡è¯†ä¸ºdeletedçŠ¶æ€ï¼Œé‚£ä¹ˆæœç´¢çš„æ—¶å€™æ ¹æ®.delæ–‡ä»¶å°±çŸ¥é“è¿™ä¸ªdocè¢«åˆ é™¤äº†&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¦‚æžœæ˜¯æ›´æ–°æ“ä½œï¼Œå°±æ˜¯å°†åŽŸæ¥çš„docæ ‡è¯†ä¸ºdeletedçŠ¶æ€ï¼Œç„¶åŽæ–°å†™å…¥ä¸€æ¡æ•°æ®&lt;/p>
&lt;/li>
&lt;li>
&lt;p>bufferæ¯æ¬¡refreshä¸€æ¬¡ï¼Œå°±ä¼šäº§ç”Ÿä¸€ä¸ªsegment fileï¼Œæ‰€ä»¥é»˜è®¤æƒ…å†µä¸‹æ˜¯1ç§’é’Ÿä¸€ä¸ªsegment fileï¼Œsegment fileä¼šè¶Šæ¥è¶Šå¤šï¼Œæ­¤æ—¶ä¼šå®šæœŸæ‰§è¡Œmerge&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ¯æ¬¡mergeçš„æ—¶å€™ï¼Œä¼šå°†å¤šä¸ªsegment fileåˆå¹¶æˆä¸€ä¸ªï¼ŒåŒæ—¶è¿™é‡Œä¼šå°†æ ‡è¯†ä¸ºdeletedçš„docç»™ç‰©ç†åˆ é™¤æŽ‰ï¼Œç„¶åŽå°†æ–°çš„segment fileå†™å…¥ç£ç›˜ï¼Œè¿™é‡Œä¼šå†™ä¸€ä¸ªcommit pointï¼Œæ ‡è¯†æ‰€æœ‰æ–°çš„segment fileï¼Œç„¶åŽæ‰“å¼€segment fileä¾›æœç´¢ä½¿ç”¨ï¼ŒåŒæ—¶åˆ é™¤æ—§çš„segment fileã€‚&lt;/p>
&lt;p>esé‡Œçš„å†™æµç¨‹ï¼Œæœ‰4ä¸ªåº•å±‚çš„æ ¸å¿ƒæ¦‚å¿µï¼Œrefreshã€flushã€translogã€merge&lt;/p>
&lt;p>å½“segment fileå¤šåˆ°ä¸€å®šç¨‹åº¦çš„æ—¶å€™ï¼Œeså°±ä¼šè‡ªåŠ¨è§¦å‘mergeæ“ä½œï¼Œå°†å¤šä¸ªsegment fileç»™mergeæˆä¸€ä¸ªsegment fileã€‚&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="esåœ¨æ•°æ®é‡å¾ˆå¤§çš„æƒ…å†µä¸‹æ•°åäº¿çº§åˆ«å¦‚ä½•æé«˜æŸ¥è¯¢æ•ˆçŽ‡">ESåœ¨æ•°æ®é‡å¾ˆå¤§çš„æƒ…å†µä¸‹ï¼ˆæ•°åäº¿çº§åˆ«ï¼‰å¦‚ä½•æé«˜æŸ¥è¯¢æ•ˆçŽ‡ï¼Ÿ&lt;/h2>
&lt;h3 id="é¢è¯•é¢˜">é¢è¯•é¢˜&lt;/h3>
&lt;p>es åœ¨æ•°æ®é‡å¾ˆå¤§çš„æƒ…å†µä¸‹ï¼ˆæ•°åäº¿çº§åˆ«ï¼‰å¦‚ä½•æé«˜æŸ¥è¯¢æ•ˆçŽ‡å•Šï¼Ÿ&lt;/p>
&lt;h3 id="é¢è¯•å®˜å¿ƒç†åˆ†æž">é¢è¯•å®˜å¿ƒç†åˆ†æž&lt;/h3>
&lt;p>è¿™ä¸ªé—®é¢˜æ˜¯è‚¯å®šè¦é—®çš„ï¼Œè¯´ç™½äº†ï¼Œå°±æ˜¯çœ‹ä½ æœ‰æ²¡æœ‰å®žé™…å¹²è¿‡ esï¼Œå› ä¸ºå•¥ï¼Ÿå…¶å®ž es æ€§èƒ½å¹¶æ²¡æœ‰ä½ æƒ³è±¡ä¸­é‚£ä¹ˆå¥½çš„ã€‚å¾ˆå¤šæ—¶å€™æ•°æ®é‡å¤§äº†ï¼Œç‰¹åˆ«æ˜¯æœ‰å‡ äº¿æ¡æ•°æ®çš„æ—¶å€™ï¼Œå¯èƒ½ä½ ä¼šæ‡µé€¼çš„å‘çŽ°ï¼Œè·‘ä¸ªæœç´¢æ€Žä¹ˆä¸€ä¸‹ &lt;code>5~10s&lt;/code>ï¼Œå‘çˆ¹äº†ã€‚ç¬¬ä¸€æ¬¡æœç´¢çš„æ—¶å€™ï¼Œæ˜¯ &lt;code>5~10s&lt;/code>ï¼ŒåŽé¢åè€Œå°±å¿«äº†ï¼Œå¯èƒ½å°±å‡ ç™¾æ¯«ç§’ã€‚&lt;/p>
&lt;p>ä½ å°±å¾ˆæ‡µï¼Œæ¯ä¸ªç”¨æˆ·ç¬¬ä¸€æ¬¡è®¿é—®éƒ½ä¼šæ¯”è¾ƒæ…¢ï¼Œæ¯”è¾ƒå¡ä¹ˆï¼Ÿæ‰€ä»¥ä½ è¦æ˜¯æ²¡çŽ©å„¿è¿‡ esï¼Œæˆ–è€…å°±æ˜¯è‡ªå·±çŽ©çŽ©å„¿ demoï¼Œè¢«é—®åˆ°è¿™ä¸ªé—®é¢˜å®¹æ˜“æ‡µé€¼ï¼Œæ˜¾ç¤ºå‡ºä½ å¯¹ es ç¡®å®žçŽ©å„¿çš„ä¸æ€Žä¹ˆæ ·ï¼Ÿ&lt;/p>
&lt;h3 id="é¢è¯•é¢˜å‰–æž">é¢è¯•é¢˜å‰–æž&lt;/h3>
&lt;p>è¯´å®žè¯ï¼Œes æ€§èƒ½ä¼˜åŒ–æ˜¯æ²¡æœ‰ä»€ä¹ˆé“¶å¼¹çš„ï¼Œå•¥æ„æ€å‘¢ï¼Ÿå°±æ˜¯&lt;strong>ä¸è¦æœŸå¾…ç€éšæ‰‹è°ƒä¸€ä¸ªå‚æ•°ï¼Œå°±å¯ä»¥ä¸‡èƒ½çš„åº”å¯¹æ‰€æœ‰çš„æ€§èƒ½æ…¢çš„åœºæ™¯&lt;/strong>ã€‚ä¹Ÿè®¸æœ‰çš„åœºæ™¯æ˜¯ä½ æ¢ä¸ªå‚æ•°ï¼Œæˆ–è€…è°ƒæ•´ä¸€ä¸‹è¯­æ³•ï¼Œå°±å¯ä»¥æžå®šï¼Œä½†æ˜¯ç»å¯¹ä¸æ˜¯æ‰€æœ‰åœºæ™¯éƒ½å¯ä»¥è¿™æ ·ã€‚&lt;/p>
&lt;h4 id="æ€§èƒ½ä¼˜åŒ–çš„æ€æ‰‹é”filesystem-cache">æ€§èƒ½ä¼˜åŒ–çš„æ€æ‰‹é”â€”â€”filesystem cache&lt;/h4>
&lt;p>ä½ å¾€esé‡Œå†™çš„æ•°æ®ï¼Œå®žé™…ä¸Šéƒ½å†™åˆ°ç£ç›˜æ–‡ä»¶é‡ŒåŽ»äº†ï¼ŒæŸ¥è¯¢çš„æ—¶å€™ï¼Œæ“ä½œç³»ç»Ÿä¼šå°†ç£ç›˜æ–‡ä»¶é‡Œçš„æ•°æ®è‡ªåŠ¨ç¼“å­˜åˆ° &lt;code>filesystem cache&lt;/code> é‡Œé¢åŽ»ã€‚&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-03-25-%E5%88%86%E5%B8%83%E5%BC%8F%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8EElasticsearch%E9%9D%A2%E8%AF%95%E9%A2%98%E5%8F%8A%E4%B8%80%E4%BA%9B%E6%A6%82%E5%BF%B5/a3.png" alt="æé«˜æŸ¥è¯¢æ•ˆçŽ‡å›¾è§£">&lt;/p>
&lt;p>es çš„æœç´¢å¼•æ“Žä¸¥é‡ä¾èµ–äºŽåº•å±‚çš„ &lt;code>filesystem cache&lt;/code>ï¼Œä½ å¦‚æžœç»™ &lt;code>filesystem cache&lt;/code> æ›´å¤šçš„å†…å­˜ï¼Œå°½é‡è®©å†…å­˜å¯ä»¥å®¹çº³æ‰€æœ‰çš„ &lt;code>idx segment file&lt;/code> ç´¢å¼•æ•°æ®æ–‡ä»¶ï¼Œé‚£ä¹ˆä½ æœç´¢çš„æ—¶å€™å°±åŸºæœ¬éƒ½æ˜¯èµ°å†…å­˜çš„ï¼Œæ€§èƒ½ä¼šéžå¸¸é«˜ã€‚&lt;/p>
&lt;p>æ€§èƒ½å·®è·ç©¶ç«Ÿå¯ä»¥æœ‰å¤šå¤§ï¼Ÿæˆ‘ä»¬ä¹‹å‰å¾ˆå¤šçš„æµ‹è¯•å’ŒåŽ‹æµ‹ï¼Œå¦‚æžœèµ°ç£ç›˜ä¸€èˆ¬è‚¯å®šä¸Šç§’ï¼Œæœç´¢æ€§èƒ½ç»å¯¹æ˜¯ç§’çº§åˆ«çš„ï¼Œ1ç§’ã€5ç§’ã€10ç§’ã€‚ä½†å¦‚æžœæ˜¯èµ° &lt;code>filesystem cache&lt;/code>ï¼Œæ˜¯èµ°çº¯å†…å­˜çš„ï¼Œé‚£ä¹ˆä¸€èˆ¬æ¥è¯´æ€§èƒ½æ¯”èµ°ç£ç›˜è¦é«˜ä¸€ä¸ªæ•°é‡çº§ï¼ŒåŸºæœ¬ä¸Šå°±æ˜¯æ¯«ç§’çº§çš„ï¼Œä»Žå‡ æ¯«ç§’åˆ°å‡ ç™¾æ¯«ç§’ä¸ç­‰ã€‚&lt;/p>
&lt;p>è¿™é‡Œæœ‰ä¸ªçœŸå®žçš„æ¡ˆä¾‹ã€‚æŸä¸ªå…¬å¸ es èŠ‚ç‚¹æœ‰ 3 å°æœºå™¨ï¼Œæ¯å°æœºå™¨çœ‹èµ·æ¥å†…å­˜å¾ˆå¤šï¼Œ64Gï¼Œæ€»å†…å­˜å°±æ˜¯ &lt;code>64 * 3 = 192G&lt;/code>ã€‚æ¯å°æœºå™¨ç»™ es jvm heap æ˜¯ &lt;code>32G&lt;/code>ï¼Œé‚£ä¹ˆå‰©ä¸‹æ¥ç•™ç»™ &lt;code>filesystem cache&lt;/code> çš„å°±æ˜¯æ¯å°æœºå™¨æ‰ &lt;code>32G&lt;/code>ï¼Œæ€»å…±é›†ç¾¤é‡Œç»™ &lt;code>filesystem cache&lt;/code> çš„å°±æ˜¯ &lt;code>32 * 3 = 96G&lt;/code> å†…å­˜ã€‚è€Œæ­¤æ—¶ï¼Œæ•´ä¸ªç£ç›˜ä¸Šç´¢å¼•æ•°æ®æ–‡ä»¶ï¼Œåœ¨ 3 å°æœºå™¨ä¸Šä¸€å…±å ç”¨äº† &lt;code>1T&lt;/code> çš„ç£ç›˜å®¹é‡ï¼Œes æ•°æ®é‡æ˜¯ &lt;code>1T&lt;/code>ï¼Œé‚£ä¹ˆæ¯å°æœºå™¨çš„æ•°æ®é‡æ˜¯ &lt;code>300G&lt;/code>ã€‚è¿™æ ·æ€§èƒ½å¥½å—ï¼Ÿ &lt;code>filesystem cache&lt;/code> çš„å†…å­˜æ‰ 100Gï¼Œååˆ†ä¹‹ä¸€çš„æ•°æ®å¯ä»¥æ”¾å†…å­˜ï¼Œå…¶ä»–çš„éƒ½åœ¨ç£ç›˜ï¼Œç„¶åŽä½ æ‰§è¡Œæœç´¢æ“ä½œï¼Œå¤§éƒ¨åˆ†æ“ä½œéƒ½æ˜¯èµ°ç£ç›˜ï¼Œæ€§èƒ½è‚¯å®šå·®ã€‚&lt;/p>
&lt;p>å½’æ ¹ç»“åº•ï¼Œä½ è¦è®© es æ€§èƒ½è¦å¥½ï¼Œæœ€ä½³çš„æƒ…å†µä¸‹ï¼Œå°±æ˜¯ä½ çš„æœºå™¨çš„å†…å­˜ï¼Œè‡³å°‘å¯ä»¥å®¹çº³ä½ çš„æ€»æ•°æ®é‡çš„ä¸€åŠã€‚&lt;/p>
&lt;p>æ ¹æ®æˆ‘ä»¬è‡ªå·±çš„ç”Ÿäº§çŽ¯å¢ƒå®žè·µç»éªŒï¼Œæœ€ä½³çš„æƒ…å†µä¸‹ï¼Œæ˜¯ä»…ä»…åœ¨ es ä¸­å°±å­˜å°‘é‡çš„æ•°æ®ï¼Œå°±æ˜¯ä½ è¦&lt;strong>ç”¨æ¥æœç´¢çš„é‚£äº›ç´¢å¼•&lt;/strong>ï¼Œå¦‚æžœå†…å­˜ç•™ç»™ &lt;code>filesystem cache&lt;/code> çš„æ˜¯ 100Gï¼Œé‚£ä¹ˆä½ å°±å°†ç´¢å¼•æ•°æ®æŽ§åˆ¶åœ¨ &lt;code>100G&lt;/code> ä»¥å†…ï¼Œè¿™æ ·çš„è¯ï¼Œä½ çš„æ•°æ®å‡ ä¹Žå…¨éƒ¨èµ°å†…å­˜æ¥æœç´¢ï¼Œæ€§èƒ½éžå¸¸ä¹‹é«˜ï¼Œä¸€èˆ¬å¯ä»¥åœ¨ 1 ç§’ä»¥å†…ã€‚&lt;/p>
&lt;p>æ¯”å¦‚è¯´ä½ çŽ°åœ¨æœ‰ä¸€è¡Œæ•°æ®ã€‚&lt;code>id,name,age ....&lt;/code> 30 ä¸ªå­—æ®µã€‚ä½†æ˜¯ä½ çŽ°åœ¨æœç´¢ï¼Œåªéœ€è¦æ ¹æ® &lt;code>id,name,age&lt;/code> ä¸‰ä¸ªå­—æ®µæ¥æœç´¢ã€‚å¦‚æžœä½ å‚»ä¹Žä¹Žå¾€ es é‡Œå†™å…¥ä¸€è¡Œæ•°æ®æ‰€æœ‰çš„å­—æ®µï¼Œå°±ä¼šå¯¼è‡´è¯´ &lt;code>90%&lt;/code> çš„æ•°æ®æ˜¯ä¸ç”¨æ¥æœç´¢çš„ï¼Œç»“æžœç¡¬æ˜¯å æ®äº† es æœºå™¨ä¸Šçš„ &lt;code>filesystem cache&lt;/code> çš„ç©ºé—´ï¼Œå•æ¡æ•°æ®çš„æ•°æ®é‡è¶Šå¤§ï¼Œå°±ä¼šå¯¼è‡´ &lt;code>filesystem cahce&lt;/code> èƒ½ç¼“å­˜çš„æ•°æ®å°±è¶Šå°‘ã€‚å…¶å®žï¼Œä»…ä»…å†™å…¥ es ä¸­è¦ç”¨æ¥æ£€ç´¢çš„&lt;strong>å°‘æ•°å‡ ä¸ªå­—æ®µ&lt;/strong>å°±å¯ä»¥äº†ï¼Œæ¯”å¦‚è¯´å°±å†™å…¥es &lt;code>id,name,age&lt;/code> ä¸‰ä¸ªå­—æ®µï¼Œç„¶åŽä½ å¯ä»¥æŠŠå…¶ä»–çš„å­—æ®µæ•°æ®å­˜åœ¨ mysql/hbase é‡Œï¼Œæˆ‘ä»¬ä¸€èˆ¬æ˜¯å»ºè®®ç”¨ &lt;code>es + hbase&lt;/code> è¿™ä¹ˆä¸€ä¸ªæž¶æž„ã€‚&lt;/p>
&lt;p>hbase çš„ç‰¹ç‚¹æ˜¯&lt;strong>é€‚ç”¨äºŽæµ·é‡æ•°æ®çš„åœ¨çº¿å­˜å‚¨&lt;/strong>ï¼Œå°±æ˜¯å¯¹ hbase å¯ä»¥å†™å…¥æµ·é‡æ•°æ®ï¼Œä½†æ˜¯ä¸è¦åšå¤æ‚çš„æœç´¢ï¼Œåšå¾ˆç®€å•çš„ä¸€äº›æ ¹æ® id æˆ–è€…èŒƒå›´è¿›è¡ŒæŸ¥è¯¢çš„è¿™ä¹ˆä¸€ä¸ªæ“ä½œå°±å¯ä»¥äº†ã€‚ä»Ž es ä¸­æ ¹æ® name å’Œ age åŽ»æœç´¢ï¼Œæ‹¿åˆ°çš„ç»“æžœå¯èƒ½å°± 20 ä¸ª &lt;code>doc id&lt;/code>ï¼Œç„¶åŽæ ¹æ® &lt;code>doc id&lt;/code> åˆ° hbase é‡ŒåŽ»æŸ¥è¯¢æ¯ä¸ª &lt;code>doc id&lt;/code> å¯¹åº”çš„&lt;strong>å®Œæ•´çš„æ•°æ®&lt;/strong>ï¼Œç»™æŸ¥å‡ºæ¥ï¼Œå†è¿”å›žç»™å‰ç«¯ã€‚&lt;/p>
&lt;p>å†™å…¥ es çš„æ•°æ®æœ€å¥½å°äºŽç­‰äºŽï¼Œæˆ–è€…æ˜¯ç•¥å¾®å¤§äºŽ es çš„ filesystem cache çš„å†…å­˜å®¹é‡ã€‚ç„¶åŽä½ ä»Ž es æ£€ç´¢å¯èƒ½å°±èŠ±è´¹ 20msï¼Œç„¶åŽå†æ ¹æ® es è¿”å›žçš„ id åŽ» hbase é‡ŒæŸ¥è¯¢ï¼ŒæŸ¥ 20 æ¡æ•°æ®ï¼Œå¯èƒ½ä¹Ÿå°±è€—è´¹ä¸ª 30msï¼Œå¯èƒ½ä½ åŽŸæ¥é‚£ä¹ˆçŽ©å„¿ï¼Œ1T æ•°æ®éƒ½æ”¾esï¼Œä¼šæ¯æ¬¡æŸ¥è¯¢éƒ½æ˜¯ 5~10ç§’ï¼ŒçŽ°åœ¨å¯èƒ½æ€§èƒ½å°±ä¼šå¾ˆé«˜ï¼Œæ¯æ¬¡æŸ¥è¯¢å°±æ˜¯ 50msã€‚&lt;/p>
&lt;h4 id="æ•°æ®é¢„çƒ­">æ•°æ®é¢„çƒ­&lt;/h4>
&lt;p>å‡å¦‚è¯´ï¼Œå“ªæ€•æ˜¯ä½ å°±æŒ‰ç…§ä¸Šè¿°çš„æ–¹æ¡ˆåŽ»åšäº†ï¼Œes é›†ç¾¤ä¸­æ¯ä¸ªæœºå™¨å†™å…¥çš„æ•°æ®é‡è¿˜æ˜¯è¶…è¿‡äº† &lt;code>filesystem cache&lt;/code> ä¸€å€ï¼Œæ¯”å¦‚è¯´ä½ å†™å…¥ä¸€å°æœºå™¨ 60G æ•°æ®ï¼Œç»“æžœ &lt;code>filesystem cache&lt;/code> å°± 30Gï¼Œè¿˜æ˜¯æœ‰ 30G æ•°æ®ç•™åœ¨äº†ç£ç›˜ä¸Šã€‚&lt;/p>
&lt;p>å…¶å®žå¯ä»¥åš&lt;strong>æ•°æ®é¢„çƒ­&lt;/strong>ã€‚&lt;/p>
&lt;p>ä¸¾ä¸ªä¾‹å­ï¼Œæ‹¿å¾®åšæ¥è¯´ï¼Œä½ å¯ä»¥æŠŠä¸€äº›å¤§Vï¼Œå¹³æ—¶çœ‹çš„äººå¾ˆå¤šçš„æ•°æ®ï¼Œä½ è‡ªå·±æå‰åŽå°æžä¸ªç³»ç»Ÿï¼Œæ¯éš”ä¸€ä¼šå„¿ï¼Œè‡ªå·±çš„åŽå°ç³»ç»ŸåŽ»æœç´¢ä¸€ä¸‹çƒ­æ•°æ®ï¼Œåˆ·åˆ° &lt;code>filesystem cache&lt;/code> é‡ŒåŽ»ï¼ŒåŽé¢ç”¨æˆ·å®žé™…ä¸Šæ¥çœ‹è¿™ä¸ªçƒ­æ•°æ®çš„æ—¶å€™ï¼Œä»–ä»¬å°±æ˜¯ç›´æŽ¥ä»Žå†…å­˜é‡Œæœç´¢äº†ï¼Œå¾ˆå¿«ã€‚&lt;/p>
&lt;p>æˆ–è€…æ˜¯ç”µå•†ï¼Œä½ å¯ä»¥å°†å¹³æ—¶æŸ¥çœ‹æœ€å¤šçš„ä¸€äº›å•†å“ï¼Œæ¯”å¦‚è¯´ iphone 8ï¼Œçƒ­æ•°æ®æå‰åŽå°æžä¸ªç¨‹åºï¼Œæ¯éš” 1 åˆ†é’Ÿè‡ªå·±ä¸»åŠ¨è®¿é—®ä¸€æ¬¡ï¼Œåˆ·åˆ° &lt;code>filesystem cache&lt;/code> é‡ŒåŽ»ã€‚&lt;/p>
&lt;p>å¯¹äºŽé‚£äº›ä½ è§‰å¾—æ¯”è¾ƒçƒ­çš„ï¼Œç»å¸¸ä¼šæœ‰äººè®¿é—®çš„æ•°æ®ï¼Œæœ€å¥½&lt;strong>åšä¸€ä¸ªä¸“é—¨çš„ç¼“å­˜é¢„çƒ­å­ç³»ç»Ÿ&lt;/strong>ï¼Œå°±æ˜¯å¯¹çƒ­æ•°æ®æ¯éš”ä¸€æ®µæ—¶é—´ï¼Œå°±æå‰è®¿é—®ä¸€ä¸‹ï¼Œè®©æ•°æ®è¿›å…¥ &lt;code>filesystem cache&lt;/code> é‡Œé¢åŽ»ã€‚è¿™æ ·ä¸‹æ¬¡åˆ«äººè®¿é—®çš„æ—¶å€™ï¼Œä¸€å®šæ€§èƒ½ä¼šå¥½ä¸€äº›ã€‚&lt;/p>
&lt;h4 id="å†·çƒ­åˆ†ç¦»">å†·çƒ­åˆ†ç¦»&lt;/h4>
&lt;p>es å¯ä»¥åšç±»ä¼¼äºŽ mysql çš„æ°´å¹³æ‹†åˆ†ï¼Œå°±æ˜¯è¯´å°†å¤§é‡çš„è®¿é—®å¾ˆå°‘ã€é¢‘çŽ‡å¾ˆä½Žçš„æ•°æ®ï¼Œå•ç‹¬å†™ä¸€ä¸ªç´¢å¼•ï¼Œç„¶åŽå°†è®¿é—®å¾ˆé¢‘ç¹çš„çƒ­æ•°æ®å•ç‹¬å†™ä¸€ä¸ªç´¢å¼•ã€‚æœ€å¥½æ˜¯å°†&lt;strong>å†·æ•°æ®å†™å…¥ä¸€ä¸ªç´¢å¼•ä¸­ï¼Œç„¶åŽçƒ­æ•°æ®å†™å…¥å¦å¤–ä¸€ä¸ªç´¢å¼•ä¸­&lt;/strong>ï¼Œè¿™æ ·å¯ä»¥ç¡®ä¿çƒ­æ•°æ®åœ¨è¢«é¢„çƒ­ä¹‹åŽï¼Œå°½é‡éƒ½è®©ä»–ä»¬ç•™åœ¨ &lt;code>filesystem os cache&lt;/code> é‡Œï¼Œ&lt;strong>åˆ«è®©å†·æ•°æ®ç»™å†²åˆ·æŽ‰&lt;/strong>ã€‚&lt;/p>
&lt;p>ä½ çœ‹ï¼Œå‡è®¾ä½ æœ‰ 6 å°æœºå™¨ï¼Œ2 ä¸ªç´¢å¼•ï¼Œä¸€ä¸ªæ”¾å†·æ•°æ®ï¼Œä¸€ä¸ªæ”¾çƒ­æ•°æ®ï¼Œæ¯ä¸ªç´¢å¼• 3 ä¸ªshardã€‚3 å°æœºå™¨æ”¾çƒ­æ•°æ® indexï¼›å¦å¤– 3 å°æœºå™¨æ”¾å†·æ•°æ® indexã€‚ç„¶åŽè¿™æ ·çš„è¯ï¼Œä½ å¤§é‡çš„æ—¶å€™æ˜¯åœ¨è®¿é—®çƒ­æ•°æ® indexï¼Œçƒ­æ•°æ®å¯èƒ½å°±å æ€»æ•°æ®é‡çš„ 10%ï¼Œæ­¤æ—¶æ•°æ®é‡å¾ˆå°‘ï¼Œå‡ ä¹Žå…¨éƒ½ä¿ç•™åœ¨ &lt;code>filesystem cache&lt;/code> é‡Œé¢äº†ï¼Œå°±å¯ä»¥ç¡®ä¿çƒ­æ•°æ®çš„è®¿é—®æ€§èƒ½æ˜¯å¾ˆé«˜çš„ã€‚ä½†æ˜¯å¯¹äºŽå†·æ•°æ®è€Œè¨€ï¼Œæ˜¯åœ¨åˆ«çš„ index é‡Œçš„ï¼Œè·Ÿçƒ­æ•°æ® index ä¸åœ¨ç›¸åŒçš„æœºå™¨ä¸Šï¼Œå¤§å®¶äº’ç›¸ä¹‹é—´éƒ½æ²¡ä»€ä¹ˆè”ç³»äº†ã€‚å¦‚æžœæœ‰äººè®¿é—®å†·æ•°æ®ï¼Œå¯èƒ½å¤§é‡æ•°æ®æ˜¯åœ¨ç£ç›˜ä¸Šçš„ï¼Œæ­¤æ—¶æ€§èƒ½å·®ç‚¹ï¼Œå°± 10% çš„äººåŽ»è®¿é—®å†·æ•°æ®ï¼Œ90% çš„äººåœ¨è®¿é—®çƒ­æ•°æ®ï¼Œä¹Ÿæ— æ‰€è°“äº†ã€‚&lt;/p>
&lt;h4 id="document-æ¨¡åž‹è®¾è®¡">document æ¨¡åž‹è®¾è®¡&lt;/h4>
&lt;p>å¯¹äºŽ MySQLï¼Œæˆ‘ä»¬ç»å¸¸æœ‰ä¸€äº›å¤æ‚çš„å…³è”æŸ¥è¯¢ã€‚åœ¨ es é‡Œè¯¥æ€Žä¹ˆçŽ©å„¿ï¼Œes é‡Œé¢çš„å¤æ‚çš„å…³è”æŸ¥è¯¢å°½é‡åˆ«ç”¨ï¼Œä¸€æ—¦ç”¨äº†æ€§èƒ½ä¸€èˆ¬éƒ½ä¸å¤ªå¥½ã€‚&lt;/p>
&lt;p>æœ€å¥½æ˜¯å…ˆåœ¨ Java ç³»ç»Ÿé‡Œå°±å®Œæˆå…³è”ï¼Œå°†å…³è”å¥½çš„æ•°æ®ç›´æŽ¥å†™å…¥ es ä¸­ã€‚æœç´¢çš„æ—¶å€™ï¼Œå°±ä¸éœ€è¦åˆ©ç”¨ es çš„æœç´¢è¯­æ³•æ¥å®Œæˆ join ä¹‹ç±»çš„å…³è”æœç´¢äº†ã€‚&lt;/p>
&lt;p>document æ¨¡åž‹è®¾è®¡æ˜¯éžå¸¸é‡è¦çš„ï¼Œå¾ˆå¤šæ“ä½œï¼Œä¸è¦åœ¨æœç´¢çš„æ—¶å€™æ‰æƒ³åŽ»æ‰§è¡Œå„ç§å¤æ‚çš„ä¹±ä¸ƒå…«ç³Ÿçš„æ“ä½œã€‚es èƒ½æ”¯æŒçš„æ“ä½œå°±æ˜¯é‚£ä¹ˆå¤šï¼Œä¸è¦è€ƒè™‘ç”¨ es åšä¸€äº›å®ƒä¸å¥½æ“ä½œçš„äº‹æƒ…ã€‚å¦‚æžœçœŸçš„æœ‰é‚£ç§æ“ä½œï¼Œå°½é‡åœ¨ document æ¨¡åž‹è®¾è®¡çš„æ—¶å€™ï¼Œå†™å…¥çš„æ—¶å€™å°±å®Œæˆã€‚å¦å¤–å¯¹äºŽä¸€äº›å¤ªå¤æ‚çš„æ“ä½œï¼Œæ¯”å¦‚ join/nested/parent-child æœç´¢éƒ½è¦å°½é‡é¿å…ï¼Œæ€§èƒ½éƒ½å¾ˆå·®çš„ã€‚&lt;/p>
&lt;h4 id="åˆ†é¡µæ€§èƒ½ä¼˜åŒ–">åˆ†é¡µæ€§èƒ½ä¼˜åŒ–&lt;/h4>
&lt;p>es çš„åˆ†é¡µæ˜¯è¾ƒå‘çš„ï¼Œä¸ºå•¥å‘¢ï¼Ÿä¸¾ä¸ªä¾‹å­å§ï¼Œå‡å¦‚ä½ æ¯é¡µæ˜¯ 10 æ¡æ•°æ®ï¼Œä½ çŽ°åœ¨è¦æŸ¥è¯¢ç¬¬ 100 é¡µï¼Œå®žé™…ä¸Šæ˜¯ä¼šæŠŠæ¯ä¸ª shard ä¸Šå­˜å‚¨çš„å‰ &lt;code>1000&lt;/code> æ¡æ•°æ®éƒ½æŸ¥åˆ°ä¸€ä¸ªåè°ƒèŠ‚ç‚¹ä¸Šï¼Œå¦‚æžœä½ æœ‰ä¸ª 5 ä¸ªshardï¼Œé‚£ä¹ˆå°±æœ‰ 5000 æ¡æ•°æ®ï¼ŒæŽ¥ç€åè°ƒèŠ‚ç‚¹å¯¹è¿™ 5000 æ¡æ•°æ®è¿›è¡Œä¸€äº›åˆå¹¶ã€å¤„ç†ï¼Œå†èŽ·å–åˆ°æœ€ç»ˆç¬¬ 100 é¡µçš„ 10 æ¡æ•°æ®ã€‚&lt;/p>
&lt;p>åˆ†å¸ƒå¼çš„ï¼Œä½ è¦æŸ¥ç¬¬100é¡µçš„10æ¡æ•°æ®ï¼Œä¸å¯èƒ½è¯´ä»Ž5ä¸ª shardï¼Œæ¯ä¸ª shard å°±æŸ¥ 2 æ¡æ•°æ®ï¼Ÿæœ€åŽåˆ°åè°ƒèŠ‚ç‚¹åˆå¹¶æˆ 10 æ¡æ•°æ®ï¼Ÿä½ å¿…é¡»å¾—ä»Žæ¯ä¸ª shard éƒ½æŸ¥ 1000 æ¡æ•°æ®è¿‡æ¥ï¼Œç„¶åŽæ ¹æ®ä½ çš„éœ€æ±‚è¿›è¡ŒæŽ’åºã€ç­›é€‰ç­‰ç­‰æ“ä½œï¼Œæœ€åŽå†æ¬¡åˆ†é¡µï¼Œæ‹¿åˆ°é‡Œé¢ç¬¬ 100 é¡µçš„æ•°æ®ã€‚ä½ ç¿»é¡µçš„æ—¶å€™ï¼Œç¿»çš„è¶Šæ·±ï¼Œæ¯ä¸ª shard è¿”å›žçš„æ•°æ®å°±è¶Šå¤šï¼Œè€Œä¸”åè°ƒèŠ‚ç‚¹å¤„ç†çš„æ—¶é—´è¶Šé•¿ã€‚éžå¸¸å‘çˆ¹ã€‚æ‰€ä»¥ç”¨ es åšåˆ†é¡µçš„æ—¶å€™ï¼Œä½ ä¼šå‘çŽ°è¶Šç¿»åˆ°åŽé¢ï¼Œå°±è¶Šæ˜¯æ…¢ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬ä¹‹å‰ä¹Ÿæ˜¯é‡åˆ°è¿‡è¿™ä¸ªé—®é¢˜ï¼Œç”¨ es ä½œåˆ†é¡µï¼Œå‰å‡ é¡µå°±å‡ åæ¯«ç§’ï¼Œç¿»åˆ° 10 é¡µ or å‡ åé¡µçš„æ—¶å€™ï¼ŒåŸºæœ¬ä¸Šå°±è¦ 5~10ç§’ æ‰èƒ½æŸ¥å‡ºæ¥ä¸€é¡µæ•°æ®äº†ã€‚&lt;/p>
&lt;p>æœ‰ä»€ä¹ˆè§£å†³æ–¹æ¡ˆå—ï¼Ÿ&lt;/p>
&lt;h5 id="ä¸å…è®¸æ·±åº¦åˆ†é¡µé»˜è®¤æ·±åº¦åˆ†é¡µæ€§èƒ½å¾ˆæƒ¨">ä¸å…è®¸æ·±åº¦åˆ†é¡µ/é»˜è®¤æ·±åº¦åˆ†é¡µæ€§èƒ½å¾ˆæƒ¨&lt;/h5>
&lt;p>ä½ ç³»ç»Ÿä¸å…è®¸ç¿»é‚£ä¹ˆæ·±çš„é¡µï¼Œè·Ÿäº§å“ç»ç†è¯´ï¼Œé»˜è®¤ç¿»çš„è¶Šæ·±ï¼Œæ€§èƒ½å°±è¶Šå·®ã€‚&lt;/p>
&lt;h5 id="ç±»ä¼¼äºŽ-app-é‡Œçš„æŽ¨èå•†å“ä¸æ–­ä¸‹æ‹‰å‡ºæ¥ä¸€é¡µä¸€é¡µçš„">ç±»ä¼¼äºŽ app é‡Œçš„æŽ¨èå•†å“ä¸æ–­ä¸‹æ‹‰å‡ºæ¥ä¸€é¡µä¸€é¡µçš„&lt;/h5>
&lt;p>ç±»ä¼¼äºŽå¾®åšä¸­ï¼Œä¸‹æ‹‰åˆ·å¾®åšï¼Œåˆ·å‡ºæ¥ä¸€é¡µä¸€é¡µçš„ï¼Œä½ å¯ä»¥ç”¨ &lt;code>scroll api&lt;/code>ï¼Œå…³äºŽå¦‚ä½•ä½¿ç”¨ï¼Œè‡ªè¡Œä¸Šç½‘æœç´¢ã€‚&lt;/p>
&lt;p>scroll ä¼šä¸€æ¬¡æ€§ç»™ä½ ç”Ÿæˆ&lt;strong>æ‰€æœ‰æ•°æ®çš„ä¸€ä¸ªå¿«ç…§&lt;/strong>ï¼Œç„¶åŽæ¯æ¬¡ç¿»é¡µå°±æ˜¯é€šè¿‡&lt;strong>æ¸¸æ ‡ç§»åŠ¨&lt;/strong>ï¼ŒèŽ·å–ä¸‹ä¸€é¡µä¸‹ä¸€é¡µè¿™æ ·å­ï¼Œæ€§èƒ½ä¼šæ¯”ä¸Šé¢è¯´çš„é‚£ç§åˆ†é¡µæ€§èƒ½ä¹Ÿé«˜å¾ˆå¤šå¾ˆå¤šï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯æ¯«ç§’çº§çš„ã€‚&lt;/p>
&lt;p>ä½†æ˜¯ å”¯ä¸€çš„ä¸€ç‚¹å°±æ˜¯ï¼Œè¿™ä¸ªé€‚åˆäºŽé‚£ç§ç±»ä¼¼å¾®åšä¸‹æ‹‰ç¿»é¡µçš„ï¼Œ&lt;strong>ä¸èƒ½éšæ„è·³åˆ°ä»»ä½•ä¸€é¡µçš„åœºæ™¯&lt;/strong>ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½ ä¸èƒ½å…ˆè¿›å…¥ç¬¬ 10 é¡µï¼Œç„¶åŽåŽ» 120 é¡µï¼Œç„¶åŽåˆå›žåˆ° 58 é¡µï¼Œä¸èƒ½éšæ„ä¹±è·³é¡µã€‚æ‰€ä»¥çŽ°åœ¨å¾ˆå¤šäº§å“ï¼Œéƒ½æ˜¯ä¸å…è®¸ä½ éšæ„ç¿»é¡µçš„ï¼Œappï¼Œä¹Ÿæœ‰ä¸€äº›ç½‘ç«™ï¼Œåšçš„å°±æ˜¯ä½ åªèƒ½å¾€ä¸‹æ‹‰ï¼Œä¸€é¡µä¸€é¡µçš„ç¿»ã€‚&lt;/p>
&lt;p>å¦å¤–ï¼Œè¿™ä¸ª scroll æ˜¯è¦ä¿ç•™ä¸€æ®µæ—¶é—´å†…çš„æ•°æ®å¿«ç…§çš„ï¼Œä½ éœ€è¦ç¡®ä¿ç”¨æˆ·ä¸ä¼šæŒç»­ä¸æ–­ç¿»é¡µç¿»å‡ ä¸ªå°æ—¶ã€‚&lt;/p></description></item><item><title>å¸¸ç”¨æ¶ˆæ¯ä¸­é—´ä»¶æ‰«ç›²åŠé¢è¯•é¢˜</title><link>https://blog.itning.top/post/2019/03/22/%E5%B8%B8%E7%94%A8%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%89%AB%E7%9B%B2%E5%8F%8A%E9%9D%A2%E8%AF%95%E9%A2%98/</link><pubDate>Fri, 22 Mar 2019 19:42:50 +0800</pubDate><guid>https://blog.itning.top/post/2019/03/22/%E5%B8%B8%E7%94%A8%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%89%AB%E7%9B%B2%E5%8F%8A%E9%9D%A2%E8%AF%95%E9%A2%98/</guid><description>&lt;p>å†™åœ¨å‰é¢ï¼š
è¿™ç¯‡æ–‡ç« æ˜¯çœ‹&lt;code>Javaå·¥ç¨‹å¸ˆé¢è¯•çªå‡»ç¬¬1å­£ï¼ˆå¯èƒ½æ˜¯å²ä¸Šæœ€å¥½çš„Javaé¢è¯•çªå‡»è¯¾ç¨‹ï¼‰-ä¸­åŽçŸ³æ‰è€å¸ˆ&lt;/code>è§†é¢‘çš„ä¸€ä¸ªæ€»ç»“ï¼Œæ–‡ç« ä¸­ç¬¬ä¸‰æ–¹å›¾ç‰‡å‡å½’åŽŸä½œè€…æ‰€æœ‰ã€‚&lt;/p>
&lt;h2 id="ä»€ä¹ˆæ˜¯æ¶ˆæ¯é˜Ÿåˆ—">ä»€ä¹ˆæ˜¯æ¶ˆæ¯é˜Ÿåˆ—ï¼Ÿ&lt;/h2>
&lt;blockquote>
&lt;p>åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œæ¶ˆæ¯é˜Ÿåˆ—ï¼ˆè‹±è¯­ï¼šMessage queueï¼‰æ˜¯ä¸€ç§è¿›ç¨‹é—´é€šä¿¡æˆ–åŒä¸€è¿›ç¨‹çš„ä¸åŒçº¿ç¨‹é—´çš„é€šä¿¡æ–¹å¼ï¼Œè½¯ä»¶çš„è´®åˆ—ç”¨æ¥å¤„ç†ä¸€ç³»åˆ—çš„è¾“å…¥ï¼Œé€šå¸¸æ˜¯æ¥è‡ªç”¨æˆ·ã€‚æ¶ˆæ¯é˜Ÿåˆ—æä¾›äº†å¼‚æ­¥çš„é€šä¿¡åè®®ï¼Œæ¯ä¸€ä¸ªè´®åˆ—ä¸­çš„çºªå½•åŒ…å«è¯¦ç»†è¯´æ˜Žçš„æ•°æ®ï¼ŒåŒ…å«å‘ç”Ÿçš„æ—¶é—´ï¼Œè¾“å…¥è®¾å¤‡çš„ç§ç±»ï¼Œä»¥åŠç‰¹å®šçš„è¾“å…¥å‚æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼šæ¶ˆæ¯çš„å‘é€è€…å’ŒæŽ¥æ”¶è€…ä¸éœ€è¦åŒæ—¶ä¸Žæ¶ˆæ¯é˜Ÿåˆ—äº¤äº’ã€‚æ¶ˆæ¯ä¼šä¿å­˜åœ¨é˜Ÿåˆ—ä¸­ï¼Œç›´åˆ°æŽ¥æ”¶è€…å–å›žå®ƒã€‚&lt;/p>
&lt;/blockquote>
&lt;p>ç®€å•æ¥è¯´ï¼Œæ¶ˆæ¯é˜Ÿåˆ—æ˜¯ç”¨æ¥æ”¶å‘æ¶ˆæ¯çš„ã€‚è¿™é‡Œè¾¹çš„æ¶ˆæ¯å¹¶ä¸æ˜¯å•çº¯çš„æŒ‡å­—ç¬¦æ¶ˆæ¯ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€äº›å­—èŠ‚åºåˆ—ç­‰ç­‰ã€‚&lt;/p>
&lt;h2 id="æœ‰å“ªäº›å¸¸ç”¨çš„æ¶ˆæ¯é˜Ÿåˆ—">æœ‰å“ªäº›å¸¸ç”¨çš„æ¶ˆæ¯é˜Ÿåˆ—ï¼Ÿ&lt;/h2>
&lt;ol>
&lt;li>Kafka&lt;/li>
&lt;li>ActiveMQ&lt;/li>
&lt;li>RabbitMQ&lt;/li>
&lt;li>RocketMQ&lt;/li>
&lt;/ol>
&lt;h2 id="æ¶ˆæ¯é˜Ÿåˆ—çš„ä¼˜ç¼ºç‚¹">æ¶ˆæ¯é˜Ÿåˆ—çš„ä¼˜ç¼ºç‚¹ï¼Ÿ&lt;/h2>
&lt;h3 id="ä¼˜ç‚¹">ä¼˜ç‚¹&lt;/h3>
&lt;h4 id="è§£è€¦">è§£è€¦&lt;/h4>
&lt;p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå‡å°‘äº†ç³»ç»Ÿä¹‹é—´çš„è€¦åˆåº¦ã€‚&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-03-22-%E5%B8%B8%E7%94%A8%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%89%AB%E7%9B%B2%E5%8F%8A%E9%9D%A2%E8%AF%95%E9%A2%98/jieou.png" alt="è§£è€¦">&lt;/p>
&lt;h4 id="å¼‚æ­¥">å¼‚æ­¥&lt;/h4>
&lt;p>åœ¨æ•°æ®åº“åœºæ™¯ä¸‹ æŒä¹…åŒ–è¯·æ±‚å¼‚æ­¥çš„å†™å…¥æ•°æ®åº“ä¸­&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-03-22-%E5%B8%B8%E7%94%A8%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%89%AB%E7%9B%B2%E5%8F%8A%E9%9D%A2%E8%AF%95%E9%A2%98/yibu.png" alt="å¼‚æ­¥">&lt;/p>
&lt;h4 id="å‰Šå³°">å‰Šå³°&lt;/h4>
&lt;p>æ¶ˆæ¯é˜Ÿåˆ—å­˜å‚¨äº†ç³»ç»Ÿæ— æ³•ä¸€æ¬¡æ€§å“åº”çš„è¯·æ±‚&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-03-22-%E5%B8%B8%E7%94%A8%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%89%AB%E7%9B%B2%E5%8F%8A%E9%9D%A2%E8%AF%95%E9%A2%98/xiaofeng.png" alt="å‰Šå³°">&lt;/p>
&lt;h3 id="ç¼ºç‚¹">ç¼ºç‚¹&lt;/h3>
&lt;ol>
&lt;li>ç³»ç»Ÿå¯ç”¨æ€§é™ä½Ž&lt;/li>
&lt;li>ç³»ç»Ÿå¤æ‚æ€§æé«˜&lt;/li>
&lt;li>ä¸€è‡´æ€§é—®é¢˜&lt;/li>
&lt;/ol>
&lt;h2 id="æ¶ˆæ¯é˜Ÿåˆ—å¦‚ä½•ä¿è¯é«˜å¯ç”¨">æ¶ˆæ¯é˜Ÿåˆ—å¦‚ä½•ä¿è¯é«˜å¯ç”¨?&lt;/h2>
&lt;h3 id="rabbitmqçš„é«˜å¯ç”¨æ€§">RabbitMQçš„é«˜å¯ç”¨æ€§&lt;/h3>
&lt;h4 id="æ™®é€šé›†ç¾¤æ¨¡å¼">æ™®é€šé›†ç¾¤æ¨¡å¼&lt;/h4>
&lt;p>æ¯å°æœºå™¨ä¸Šéƒ½ä¼šæœ‰å…ƒæ•°æ®ï¼Œä½†æ˜¯åªæœ‰ä¸€å°æœºå™¨ä¸Šæœ‰ä½ éœ€è¦çš„æ•°æ®ï¼Œæ‰€ä»¥å¹¶ä¸èƒ½ä¿è¯å…¶é«˜å¯ç”¨ã€‚&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-03-22-%E5%B8%B8%E7%94%A8%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%89%AB%E7%9B%B2%E5%8F%8A%E9%9D%A2%E8%AF%95%E9%A2%98/ptjqms.png" alt="æ™®é€šé›†ç¾¤æ¨¡å¼">&lt;/p>
&lt;h4 id="é•œåƒé›†ç¾¤æ¨¡å¼">é•œåƒé›†ç¾¤æ¨¡å¼&lt;/h4>
&lt;p>è¿™ä¸ªæž¶æž„è§£å†³äº†ä¸Šä¸€ä¸ªæ™®é€šé›†ç¾¤æ¨¡å¼çš„é—®é¢˜ï¼Œä½†æ˜¯æ¶ˆæ¯å¤§å°ä¼šå—åˆ°æœºå™¨çš„é™åˆ¶ã€‚&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-03-22-%E5%B8%B8%E7%94%A8%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%89%AB%E7%9B%B2%E5%8F%8A%E9%9D%A2%E8%AF%95%E9%A2%98/jxjqms.png" alt="é•œåƒé›†ç¾¤æ¨¡å¼">&lt;/p>
&lt;h3 id="kafkaçš„é«˜å¯ç”¨æ€§">Kafkaçš„é«˜å¯ç”¨æ€§&lt;/h3>
&lt;p>Kafkaæ˜¯ç”±å¤šä¸ªbrokerç»„æˆçš„ï¼Œæ¯ä¸ªbrokeræ˜¯ä¸€ä¸ªèŠ‚ç‚¹ï¼›&lt;/p>
&lt;p>ä½ åˆ›å»ºä¸€ä¸ªtopicï¼Œè¿™ä¸ªtopicå¯ä»¥åˆ’åˆ†ä¸ºå¤šä¸ªpartitionï¼Œ&lt;/p>
&lt;p>æ¯ä¸ªpartitionå¯ä»¥å­˜åœ¨äºŽä¸åŒçš„brokerä¸Šï¼Œæ¯ä¸ªpartitionå°±æ”¾ä¸€éƒ¨åˆ†æ•°æ®ã€‚&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-03-22-%E5%B8%B8%E7%94%A8%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%89%AB%E7%9B%B2%E5%8F%8A%E9%9D%A2%E8%AF%95%E9%A2%98/kafkagaokeyong.png" alt="Kafkaçš„é«˜å¯ç”¨æ€§">&lt;/p>
&lt;h2 id="æ¶ˆæ¯é˜Ÿåˆ—å¦‚ä½•ç¡®ä¿ä¸æ¶ˆè´¹é‡å¤æ¶ˆæ¯">æ¶ˆæ¯é˜Ÿåˆ—å¦‚ä½•ç¡®ä¿ä¸æ¶ˆè´¹é‡å¤æ¶ˆæ¯ï¼Ÿ&lt;/h2>
&lt;h3 id="å¹‚ç­‰æ€§">å¹‚ç­‰æ€§&lt;/h3>
&lt;blockquote>
&lt;p>&lt;strong>å¹‚ç­‰æ€§&lt;/strong>åŽŸæœ¬æ˜¯æ•°å­¦ä¸Šçš„æ¦‚å¿µï¼Œå³ä½¿å…¬å¼ï¼šf(x)=f(f(x)) èƒ½å¤Ÿæˆç«‹çš„æ•°å­¦æ€§è´¨ã€‚ç”¨åœ¨ç¼–ç¨‹é¢†åŸŸï¼Œåˆ™æ„ä¸º&lt;code>å¯¹åŒä¸€ä¸ªç³»ç»Ÿï¼Œä½¿ç”¨åŒæ ·çš„æ¡ä»¶ï¼Œä¸€æ¬¡è¯·æ±‚å’Œé‡å¤çš„å¤šæ¬¡è¯·æ±‚å¯¹ç³»ç»Ÿèµ„æºçš„å½±å“æ˜¯ä¸€è‡´çš„&lt;/code>&lt;/p>
&lt;/blockquote>
&lt;p>ä¹Ÿå°±æ˜¯ç¡®ä¿æ¶ˆæ¯é‡å¤æ¶ˆè´¹ä¸ä¼šå¯¹ä¸šåŠ¡äº§ç”Ÿå½±å“&lt;/p>
&lt;h3 id="kafkaä¿è¯">Kafkaä¿è¯&lt;/h3>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-03-22-%E5%B8%B8%E7%94%A8%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%89%AB%E7%9B%B2%E5%8F%8A%E9%9D%A2%E8%AF%95%E9%A2%98/kafkachongfu.png" alt="Kafkaä¿è¯ä¸æ¶ˆè´¹é‡å¤æ¶ˆæ¯">&lt;/p>
&lt;h3 id="rabbitmqä¿è¯">RabbitMQä¿è¯&lt;/h3>
&lt;p>RabbitMQå¯ä»¥åœ¨æ¯æ¬¡æ¶ˆè´¹æ•°æ®æ—¶ï¼Œå°†æ¶ˆæ¯IDå†™å…¥åˆ°é›†åˆä¸­ï¼Œè¿™æ ·æ¯æ¬¡æ–°æ¶ˆæ¯æ¶ˆè´¹ä¹‹å‰éƒ½åœ¨é›†åˆä¸­æ‰¾æœ‰æ²¡æœ‰è¿™ä¸ªæ•°æ®ï¼Œå¦‚æžœæœ‰å°±ä¸¢å¼ƒæŽ‰ã€‚&lt;/p>
&lt;h2 id="æ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ä¸¢å¤±æ€Žä¹ˆåŠž">æ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ä¸¢å¤±æ€Žä¹ˆåŠžï¼Ÿ&lt;/h2>
&lt;h3 id="rabbitmq">RabbitMQ&lt;/h3>
&lt;ol>
&lt;li>
&lt;p>ç”Ÿäº§è€…ä¸¢æ•°æ®ï¼Ÿ&lt;/p>
&lt;p>ç”Ÿäº§è€…å°†æ•°æ®å‘é€åˆ°rabbitmqçš„æ—¶å€™ï¼Œå¯èƒ½æ•°æ®å°±åœ¨åŠè·¯ç»™æžä¸¢äº†ï¼Œæƒ³ä¸ä¸¢ä¸¤ç§æœºåˆ¶ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>äº‹åŠ¡æœºåˆ¶ï¼ˆé˜»å¡žï¼‰&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Confirmæ¨¡å¼ï¼ˆå›žè°ƒï¼‰&lt;/p>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>RabbitMQå¼„ä¸¢äº†æ•°æ®ï¼Ÿ&lt;/p>
&lt;p>å¯ä»¥åˆ›å»ºæŒä¹…åŒ–æ“ä½œã€‚&lt;/p>
&lt;ul>
&lt;li>
&lt;p>åˆ›å»ºqueueçš„æ—¶å€™å°†å…¶è®¾ç½®ä¸ºæŒä¹…åŒ–çš„ï¼Œè¿™æ ·å°±å¯ä»¥ä¿è¯rabbitmqæŒä¹…åŒ–queueçš„å…ƒæ•°æ®ï¼Œä½†æ˜¯ä¸ä¼šæŒä¹…åŒ–queueé‡Œçš„æ•°æ®&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ç¬¬äºŒä¸ªæ˜¯å‘é€æ¶ˆæ¯çš„æ—¶å€™å°†æ¶ˆæ¯çš„deliveryModeè®¾ç½®ä¸º2ï¼Œå°±æ˜¯å°†æ¶ˆæ¯è®¾ç½®ä¸ºæŒä¹…åŒ–çš„ï¼Œæ­¤æ—¶rabbitmqå°±ä¼šå°†æ¶ˆæ¯æŒä¹…åŒ–åˆ°ç£ç›˜ä¸ŠåŽ»ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>æ¶ˆè´¹ç«¯å¼„ä¸¢äº†æ•°æ®&lt;/p>
&lt;p>å…³é—­rabbitmqè‡ªåŠ¨ack&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-03-22-%E5%B8%B8%E7%94%A8%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%89%AB%E7%9B%B2%E5%8F%8A%E9%9D%A2%E8%AF%95%E9%A2%98/xiaoxidiushiribbitmq.png" alt="ä¿è¯æ¶ˆæ¯ä¸ä¸¢å¤±">&lt;/p>
&lt;h3 id="kafka">Kafka&lt;/h3>
&lt;p>è®¾ç½®ä¸€äº›å‚æ•°é¿å…ä¸¢æ•°æ®é—®é¢˜ï¼š&lt;/p>
&lt;ul>
&lt;li>ç»™è¿™ä¸ªtopicè®¾ç½®replication.factorå‚æ•°ï¼šè¿™ä¸ªå€¼å¿…é¡»å¤§äºŽ1ï¼Œè¦æ±‚æ¯ä¸ªpartitionå¿…é¡»æœ‰è‡³å°‘2ä¸ªå‰¯æœ¬&lt;/li>
&lt;li>åœ¨kafkaæœåŠ¡ç«¯è®¾ç½®min.insync.replicaså‚æ•°ï¼šè¿™ä¸ªå€¼å¿…é¡»å¤§äºŽ1ï¼Œè¿™ä¸ªæ˜¯è¦æ±‚ä¸€ä¸ªleaderè‡³å°‘æ„ŸçŸ¥åˆ°æœ‰è‡³å°‘ä¸€ä¸ªfollowerè¿˜è·Ÿè‡ªå·±ä¿æŒè”ç³»ï¼Œæ²¡æŽ‰é˜Ÿï¼Œè¿™æ ·æ‰èƒ½ç¡®ä¿leaderæŒ‚äº†è¿˜æœ‰ä¸€ä¸ªfollower&lt;/li>
&lt;li>åœ¨producerç«¯è®¾ç½®acks=allï¼šè¿™ä¸ªæ˜¯è¦æ±‚æ¯æ¡æ•°æ®ï¼Œå¿…é¡»æ˜¯å†™å…¥æ‰€æœ‰replicaä¹‹åŽï¼Œæ‰èƒ½è®¤ä¸ºæ˜¯å†™æˆåŠŸäº†&lt;/li>
&lt;li>åœ¨producerç«¯è®¾ç½®retries=MAXï¼ˆå¾ˆå¤§å¾ˆå¤§å¾ˆå¤§çš„ä¸€ä¸ªå€¼ï¼Œæ— é™æ¬¡é‡è¯•çš„æ„æ€ï¼‰ï¼šè¿™ä¸ªæ˜¯è¦æ±‚ä¸€æ—¦å†™å…¥å¤±è´¥ï¼Œå°±æ— é™é‡è¯•ï¼Œå¡åœ¨è¿™é‡Œäº†&lt;/li>
&lt;/ul>
&lt;ol>
&lt;li>
&lt;p>ç”Ÿäº§è€…ä¸¢æ•°æ®ï¼Ÿ&lt;/p>
&lt;p>å¦‚æžœè®¾ç½®äº†acks=all ä¸ä¼šä¸¢å¤±&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Kafkaå¼„ä¸¢äº†æ•°æ®ï¼Ÿ&lt;/p>
&lt;p>è®¾ç½®å‚æ•°&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ¶ˆè´¹ç«¯å¼„ä¸¢äº†æ•°æ®&lt;/p>
&lt;ul>
&lt;li>
&lt;p>å…³é—­è‡ªåŠ¨æäº¤offsetï¼Œåœ¨å¤„ç†å®Œä¹‹åŽè‡ªå·±æ‰‹åŠ¨æäº¤offsetï¼Œå°±å¯ä»¥ä¿è¯æ•°æ®ä¸ä¼šä¸¢&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ä¿è¯å¹‚ç­‰æ€§&lt;/p>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-03-22-%E5%B8%B8%E7%94%A8%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%89%AB%E7%9B%B2%E5%8F%8A%E9%9D%A2%E8%AF%95%E9%A2%98/xiaoxidiushikafka.png" alt="ä¿è¯æ¶ˆæ¯ä¸ä¸¢å¤±">&lt;/p>
&lt;h2 id="å¦‚ä½•ä¿è¯æ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯çš„é¡ºåº">å¦‚ä½•ä¿è¯æ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯çš„é¡ºåºï¼Ÿ&lt;/h2>
&lt;h3 id="rabbitmq-1">RabbitMQ&lt;/h3>
&lt;p>æ‹†åˆ†å¤šä¸ªqueueï¼Œæ¯ä¸ªqueueä¸€ä¸ªconsumerï¼Œå°±æ˜¯å¤šä¸€äº›queueè€Œå·²ï¼Œç¡®å®žæ˜¯éº»çƒ¦ç‚¹ï¼›æˆ–è€…å°±ä¸€ä¸ªqueueä½†æ˜¯å¯¹åº”ä¸€ä¸ªconsumerï¼Œç„¶åŽè¿™ä¸ªconsumerå†…éƒ¨ç”¨å†…å­˜é˜Ÿåˆ—åšæŽ’é˜Ÿï¼Œç„¶åŽåˆ†å‘ç»™åº•å±‚ä¸åŒçš„workeræ¥å¤„ç†&lt;/p>
&lt;h3 id="kafka-1">Kafka&lt;/h3>
&lt;p>ä¸€ä¸ªtopicï¼Œä¸€ä¸ªpartitionï¼Œä¸€ä¸ªconsumerï¼Œå†…éƒ¨å•çº¿ç¨‹æ¶ˆè´¹ï¼Œå†™Nä¸ªå†…å­˜queueï¼Œç„¶åŽNä¸ªçº¿ç¨‹åˆ†åˆ«æ¶ˆè´¹ä¸€ä¸ªå†…å­˜queueå³å¯&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-03-22-%E5%B8%B8%E7%94%A8%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%89%AB%E7%9B%B2%E5%8F%8A%E9%9D%A2%E8%AF%95%E9%A2%98/xiaoxishunxukafka.png" alt="ä¿è¯æ¶ˆæ¯é¡ºåº">&lt;/p>
&lt;h2 id="æ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ç§¯åŽ‹é—®é¢˜">æ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ç§¯åŽ‹é—®é¢˜ï¼Ÿ&lt;/h2>
&lt;p>ä¸€èˆ¬æ¥è¯´ï¼Œæ¶ˆè´¹è€…ç‚¸äº†ï¼Œæ¶ˆæ¯æ‰ä¼šç§¯åŽ‹ã€‚æ‰€ä»¥ç¬¬ä¸€æ­¥åº”è¯¥ä¿®å¤æ¶ˆè´¹è€…é—®é¢˜ã€‚&lt;/p>
&lt;p>è€Œä¸”æ¶ˆæ¯é˜Ÿåˆ—ä¸è¦è®¾ç½®æ•°æ®è‡ªåŠ¨è¿‡æœŸã€‚&lt;/p>
&lt;p>ä¿®å¤å®ŒæˆåŽï¼Œå¤šå¼„å‡ ä¸ªæ¶ˆè´¹è€…è¿›è¡Œæ¶ˆè´¹&lt;/p>
&lt;h2 id="æ¶ˆæ¯ä¸­é—´ä»¶å¯¹æ¯”">æ¶ˆæ¯ä¸­é—´ä»¶å¯¹æ¯”ï¼Ÿ&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>ç‰¹æ€§&lt;/th>
&lt;th>ActiveMQ&lt;/th>
&lt;th>RabbitMQ&lt;/th>
&lt;th>RocketMQ&lt;/th>
&lt;th>Kafka&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>å•æœºåžåé‡&lt;/td>
&lt;td>ä¸‡çº§ï¼Œåžåé‡æ¯”RocketMQå’ŒKafkaè¦ä½Žäº†ä¸€ä¸ªæ•°é‡çº§&lt;/td>
&lt;td>ä¸‡çº§ï¼Œåžåé‡æ¯”RocketMQå’ŒKafkaè¦ä½Žäº†ä¸€ä¸ªæ•°é‡çº§&lt;/td>
&lt;td>10ä¸‡çº§ï¼ŒRocketMQä¹Ÿæ˜¯å¯ä»¥æ”¯æ’‘é«˜åžåçš„ä¸€ç§MQ&lt;/td>
&lt;td>10ä¸‡çº§åˆ«ï¼Œè¿™æ˜¯kafkaæœ€å¤§çš„ä¼˜ç‚¹ï¼Œå°±æ˜¯åžåé‡é«˜ã€‚ ä¸€èˆ¬é…åˆå¤§æ•°æ®ç±»çš„ç³»ç»Ÿæ¥è¿›è¡Œå®žæ—¶æ•°æ®è®¡ç®—ã€æ—¥å¿—é‡‡é›†ç­‰åœºæ™¯&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>topicæ•°é‡å¯¹åžåé‡çš„å½±å“&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>topicå¯ä»¥è¾¾åˆ°å‡ ç™¾ï¼Œå‡ åƒä¸ªçš„çº§åˆ«ï¼Œåžåé‡ä¼šæœ‰è¾ƒå°å¹…åº¦çš„ä¸‹é™ è¿™æ˜¯RocketMQçš„ä¸€å¤§ä¼˜åŠ¿ï¼Œåœ¨åŒç­‰æœºå™¨ä¸‹ï¼Œå¯ä»¥æ”¯æ’‘å¤§é‡çš„topic&lt;/td>
&lt;td>topicä»Žå‡ åä¸ªåˆ°å‡ ç™¾ä¸ªçš„æ—¶å€™ï¼Œåžåé‡ä¼šå¤§å¹…åº¦ä¸‹é™ æ‰€ä»¥åœ¨åŒç­‰æœºå™¨ä¸‹ï¼Œkafkaå°½é‡ä¿è¯topicæ•°é‡ä¸è¦è¿‡å¤šã€‚å¦‚æžœè¦æ”¯æ’‘å¤§è§„æ¨¡topicï¼Œéœ€è¦å¢žåŠ æ›´å¤šçš„æœºå™¨èµ„æº&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>æ—¶æ•ˆæ€§&lt;/td>
&lt;td>msçº§&lt;/td>
&lt;td>å¾®ç§’çº§ï¼Œè¿™æ˜¯rabbitmqçš„ä¸€å¤§ç‰¹ç‚¹ï¼Œå»¶è¿Ÿæ˜¯æœ€ä½Žçš„&lt;/td>
&lt;td>msçº§&lt;/td>
&lt;td>å»¶è¿Ÿåœ¨msçº§ä»¥å†…&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>å¯ç”¨æ€§&lt;/td>
&lt;td>é«˜ï¼ŒåŸºäºŽä¸»ä»Žæž¶æž„å®žçŽ°é«˜å¯ç”¨æ€§&lt;/td>
&lt;td>é«˜ï¼ŒåŸºäºŽä¸»ä»Žæž¶æž„å®žçŽ°é«˜å¯ç”¨æ€§&lt;/td>
&lt;td>éžå¸¸é«˜ï¼Œåˆ†å¸ƒå¼æž¶æž„&lt;/td>
&lt;td>éžå¸¸é«˜ï¼Œkafkaæ˜¯åˆ†å¸ƒå¼çš„ï¼Œä¸€ä¸ªæ•°æ®å¤šä¸ªå‰¯æœ¬ï¼Œå°‘æ•°æœºå™¨å®•æœºï¼Œä¸ä¼šä¸¢å¤±æ•°æ®ï¼Œä¸ä¼šå¯¼è‡´ä¸å¯ç”¨&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>æ¶ˆæ¯å¯é æ€§&lt;/td>
&lt;td>æœ‰è¾ƒä½Žçš„æ¦‚çŽ‡ä¸¢å¤±æ•°æ®&lt;/td>
&lt;td>&lt;/td>
&lt;td>ç»è¿‡å‚æ•°ä¼˜åŒ–é…ç½®ï¼Œå¯ä»¥åšåˆ°0ä¸¢å¤±&lt;/td>
&lt;td>ç»è¿‡å‚æ•°ä¼˜åŒ–é…ç½®ï¼Œæ¶ˆæ¯å¯ä»¥åšåˆ°0ä¸¢å¤±&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>åŠŸèƒ½æ”¯æŒ&lt;/td>
&lt;td>MQé¢†åŸŸçš„åŠŸèƒ½æžå…¶å®Œå¤‡&lt;/td>
&lt;td>åŸºäºŽerlangå¼€å‘ï¼Œæ‰€ä»¥å¹¶å‘èƒ½åŠ›å¾ˆå¼ºï¼Œæ€§èƒ½æžå…¶å¥½ï¼Œå»¶æ—¶å¾ˆä½Ž&lt;/td>
&lt;td>MQåŠŸèƒ½è¾ƒä¸ºå®Œå–„ï¼Œè¿˜æ˜¯åˆ†å¸ƒå¼çš„ï¼Œæ‰©å±•æ€§å¥½&lt;/td>
&lt;td>åŠŸèƒ½è¾ƒä¸ºç®€å•ï¼Œä¸»è¦æ”¯æŒç®€å•çš„MQåŠŸèƒ½ï¼Œåœ¨å¤§æ•°æ®é¢†åŸŸçš„å®žæ—¶è®¡ç®—ä»¥åŠæ—¥å¿—é‡‡é›†è¢«å¤§è§„æ¨¡ä½¿ç”¨ï¼Œæ˜¯äº‹å®žä¸Šçš„æ ‡å‡†&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ä¼˜åŠ£åŠ¿æ€»ç»“&lt;/td>
&lt;td>éžå¸¸æˆç†Ÿï¼ŒåŠŸèƒ½å¼ºå¤§ï¼Œåœ¨ä¸šå†…å¤§é‡çš„å…¬å¸ä»¥åŠé¡¹ç›®ä¸­éƒ½æœ‰åº”ç”¨ å¶å°”ä¼šæœ‰è¾ƒä½Žæ¦‚çŽ‡ä¸¢å¤±æ¶ˆæ¯ è€Œä¸”çŽ°åœ¨ç¤¾åŒºä»¥åŠå›½å†…åº”ç”¨éƒ½è¶Šæ¥è¶Šå°‘ï¼Œå®˜æ–¹ç¤¾åŒºçŽ°åœ¨å¯¹ActiveMQ 5.xç»´æŠ¤è¶Šæ¥è¶Šå°‘ï¼Œå‡ ä¸ªæœˆæ‰å‘å¸ƒä¸€ä¸ªç‰ˆæœ¬ è€Œä¸”ç¡®å®žä¸»è¦æ˜¯åŸºäºŽè§£è€¦å’Œå¼‚æ­¥æ¥ç”¨çš„ï¼Œè¾ƒå°‘åœ¨å¤§è§„æ¨¡åžåçš„åœºæ™¯ä¸­ä½¿ç”¨&lt;/td>
&lt;td>erlangè¯­è¨€å¼€å‘ï¼Œæ€§èƒ½æžå…¶å¥½ï¼Œå»¶æ—¶å¾ˆä½Žï¼› åžåé‡åˆ°ä¸‡çº§ï¼ŒMQåŠŸèƒ½æ¯”è¾ƒå®Œå¤‡ è€Œä¸”å¼€æºæä¾›çš„ç®¡ç†ç•Œé¢éžå¸¸æ£’ï¼Œç”¨èµ·æ¥å¾ˆå¥½ç”¨ ç¤¾åŒºç›¸å¯¹æ¯”è¾ƒæ´»è·ƒï¼Œå‡ ä¹Žæ¯ä¸ªæœˆéƒ½å‘å¸ƒå‡ ä¸ªç‰ˆæœ¬åˆ† åœ¨å›½å†…ä¸€äº›äº’è”ç½‘å…¬å¸è¿‘å‡ å¹´ç”¨rabbitmqä¹Ÿæ¯”è¾ƒå¤šä¸€äº› ä½†æ˜¯é—®é¢˜ä¹Ÿæ˜¯æ˜¾è€Œæ˜“è§çš„ï¼ŒRabbitMQç¡®å®žåžåé‡ä¼šä½Žä¸€äº›ï¼Œè¿™æ˜¯å› ä¸ºä»–åšçš„å®žçŽ°æœºåˆ¶æ¯”è¾ƒé‡ã€‚ è€Œä¸”erlangå¼€å‘ï¼Œå›½å†…æœ‰å‡ ä¸ªå…¬å¸æœ‰å®žåŠ›åšerlangæºç çº§åˆ«çš„ç ”ç©¶å’Œå®šåˆ¶ï¼Ÿå¦‚æžœè¯´ä½ æ²¡è¿™ä¸ªå®žåŠ›çš„è¯ï¼Œç¡®å®žå¶å°”ä¼šæœ‰ä¸€äº›é—®é¢˜ï¼Œä½ å¾ˆéš¾åŽ»çœ‹æ‡‚æºç ï¼Œä½ å…¬å¸å¯¹è¿™ä¸ªä¸œè¥¿çš„æŽŒæŽ§å¾ˆå¼±ï¼ŒåŸºæœ¬èŒèƒ½ä¾èµ–äºŽå¼€æºç¤¾åŒºçš„å¿«é€Ÿç»´æŠ¤å’Œä¿®å¤bugã€‚ è€Œä¸”rabbitmqé›†ç¾¤åŠ¨æ€æ‰©å±•ä¼šå¾ˆéº»çƒ¦ï¼Œä¸è¿‡è¿™ä¸ªæˆ‘è§‰å¾—è¿˜å¥½ã€‚å…¶å®žä¸»è¦æ˜¯erlangè¯­è¨€æœ¬èº«å¸¦æ¥çš„é—®é¢˜ã€‚å¾ˆéš¾è¯»æºç ï¼Œå¾ˆéš¾å®šåˆ¶å’ŒæŽŒæŽ§ã€‚&lt;/td>
&lt;td>æŽ¥å£ç®€å•æ˜“ç”¨ï¼Œè€Œä¸”æ¯•ç«Ÿåœ¨é˜¿é‡Œå¤§è§„æ¨¡åº”ç”¨è¿‡ï¼Œæœ‰é˜¿é‡Œå“ç‰Œä¿éšœ æ—¥å¤„ç†æ¶ˆæ¯ä¸Šç™¾äº¿ä¹‹å¤šï¼Œå¯ä»¥åšåˆ°å¤§è§„æ¨¡åžåï¼Œæ€§èƒ½ä¹Ÿéžå¸¸å¥½ï¼Œåˆ†å¸ƒå¼æ‰©å±•ä¹Ÿå¾ˆæ–¹ä¾¿ï¼Œç¤¾åŒºç»´æŠ¤è¿˜å¯ä»¥ï¼Œå¯é æ€§å’Œå¯ç”¨æ€§éƒ½æ˜¯okçš„ï¼Œè¿˜å¯ä»¥æ”¯æ’‘å¤§è§„æ¨¡çš„topicæ•°é‡ï¼Œæ”¯æŒå¤æ‚MQä¸šåŠ¡åœºæ™¯ è€Œä¸”ä¸€ä¸ªå¾ˆå¤§çš„ä¼˜åŠ¿åœ¨äºŽï¼Œé˜¿é‡Œå‡ºå“éƒ½æ˜¯javaç³»çš„ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå·±é˜…è¯»æºç ï¼Œå®šåˆ¶è‡ªå·±å…¬å¸çš„MQï¼Œå¯ä»¥æŽŒæŽ§ ç¤¾åŒºæ´»è·ƒåº¦ç›¸å¯¹è¾ƒä¸ºä¸€èˆ¬ï¼Œä¸è¿‡ä¹Ÿè¿˜å¯ä»¥ï¼Œæ–‡æ¡£ç›¸å¯¹æ¥è¯´ç®€å•ä¸€äº›ï¼Œç„¶åŽæŽ¥å£è¿™å—ä¸æ˜¯æŒ‰ç…§æ ‡å‡†JMSè§„èŒƒèµ°çš„æœ‰äº›ç³»ç»Ÿè¦è¿ç§»éœ€è¦ä¿®æ”¹å¤§é‡ä»£ç  è¿˜æœ‰å°±æ˜¯é˜¿é‡Œå‡ºå°çš„æŠ€æœ¯ï¼Œä½ å¾—åšå¥½è¿™ä¸ªæŠ€æœ¯ä¸‡ä¸€è¢«æŠ›å¼ƒï¼Œç¤¾åŒºé»„æŽ‰çš„é£Žé™©ï¼Œé‚£å¦‚æžœä½ ä»¬å…¬å¸æœ‰æŠ€æœ¯å®žåŠ›æˆ‘è§‰å¾—ç”¨RocketMQæŒºå¥½çš„&lt;/td>
&lt;td>kafkaçš„ç‰¹ç‚¹å…¶å®žå¾ˆæ˜Žæ˜¾ï¼Œå°±æ˜¯ä»…ä»…æä¾›è¾ƒå°‘çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œä½†æ˜¯æä¾›è¶…é«˜çš„åžåé‡ï¼Œmsçº§çš„å»¶è¿Ÿï¼Œæžé«˜çš„å¯ç”¨æ€§ä»¥åŠå¯é æ€§ï¼Œè€Œä¸”åˆ†å¸ƒå¼å¯ä»¥ä»»æ„æ‰©å±• åŒæ—¶kafkaæœ€å¥½æ˜¯æ”¯æ’‘è¾ƒå°‘çš„topicæ•°é‡å³å¯ï¼Œä¿è¯å…¶è¶…é«˜åžåé‡ è€Œä¸”kafkaå”¯ä¸€çš„ä¸€ç‚¹åŠ£åŠ¿æ˜¯æœ‰å¯èƒ½æ¶ˆæ¯é‡å¤æ¶ˆè´¹ï¼Œé‚£ä¹ˆå¯¹æ•°æ®å‡†ç¡®æ€§ä¼šé€ æˆæžå…¶è½»å¾®çš„å½±å“ï¼Œåœ¨å¤§æ•°æ®é¢†åŸŸä¸­ä»¥åŠæ—¥å¿—é‡‡é›†ä¸­ï¼Œè¿™ç‚¹è½»å¾®å½±å“å¯ä»¥å¿½ç•¥ è¿™ä¸ªç‰¹æ€§å¤©ç„¶é€‚åˆå¤§æ•°æ®å®žæ—¶è®¡ç®—ä»¥åŠæ—¥å¿—æ”¶é›†&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;a href="https://juejin.im/post/5b32044ef265da59654c3027">æ¶ˆæ¯ä¸­é—´ä»¶éƒ¨ç½²åŠæ¯”è¾ƒï¼šrabbitMQã€activeMQã€zeroMQã€rocketMQã€Kafkaã€redis&lt;/a>&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-03-22-%E5%B8%B8%E7%94%A8%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%89%AB%E7%9B%B2%E5%8F%8A%E9%9D%A2%E8%AF%95%E9%A2%98/duibi.png" alt="æ¶ˆæ¯ä¸­é—´ä»¶å¯¹æ¯”">&lt;/p></description></item><item><title>SpringCloudç»„ä»¶ç”¨é€”å®žçŽ°åŽŸç†åŠPOMåæ ‡</title><link>https://blog.itning.top/post/2019/03/19/springcloud%E7%BB%84%E4%BB%B6%E7%94%A8%E9%80%94%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%E5%8F%8Apom%E5%9D%90%E6%A0%87/</link><pubDate>Tue, 19 Mar 2019 17:57:31 +0800</pubDate><guid>https://blog.itning.top/post/2019/03/19/springcloud%E7%BB%84%E4%BB%B6%E7%94%A8%E9%80%94%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%E5%8F%8Apom%E5%9D%90%E6%A0%87/</guid><description>&lt;h2 id="spring-cloudæ˜¯ä»€ä¹ˆ">Spring Cloudæ˜¯ä»€ä¹ˆï¼Ÿ&lt;/h2>
&lt;blockquote>
&lt;p>Spring Cloudä¸ºå¼€å‘äººå‘˜æä¾›äº†å¿«é€Ÿæž„å»ºåˆ†å¸ƒå¼ç³»ç»Ÿä¸­ä¸€äº›å¸¸è§æ¨¡å¼çš„å·¥å…·ï¼ˆä¾‹å¦‚é…ç½®ç®¡ç†ï¼ŒæœåŠ¡å‘çŽ°ï¼Œæ–­è·¯å™¨ï¼Œæ™ºèƒ½è·¯ç”±ï¼Œå¾®ä»£ç†ï¼ŒæŽ§åˆ¶æ€»çº¿ï¼Œä¸€æ¬¡æ€§ä»¤ç‰Œï¼Œå…¨å±€é”å®šï¼Œé¢†å¯¼é€‰ä¸¾ï¼Œåˆ†å¸ƒå¼ä¼šè¯ï¼Œé›†ç¾¤çŠ¶æ€ï¼‰&lt;/p>
&lt;p>&amp;mdash;&lt;a href="https://spring.io/projects/spring-cloud">https://spring.io/projects/spring-cloud&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;p>Spring Cloud POM ä¾‹å­&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-xml" data-lang="xml">&lt;span class="nt">&amp;lt;properties&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;spring-cloud.version&amp;gt;&lt;/span>Greenwich.SR1&lt;span class="nt">&amp;lt;/spring-cloud.version&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;/properties&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;dependencyManagement&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;dependencies&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;dependency&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;groupId&amp;gt;&lt;/span>org.springframework.cloud&lt;span class="nt">&amp;lt;/groupId&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;artifactId&amp;gt;&lt;/span>spring-cloud-dependencies&lt;span class="nt">&amp;lt;/artifactId&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;version&amp;gt;&lt;/span>${spring-cloud.version}&lt;span class="nt">&amp;lt;/version&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;type&amp;gt;&lt;/span>pom&lt;span class="nt">&amp;lt;/type&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;scope&amp;gt;&lt;/span>import&lt;span class="nt">&amp;lt;/scope&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;/dependency&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;/dependencies&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;/dependencyManagement&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;repositories&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;repository&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;id&amp;gt;&lt;/span>spring-milestones&lt;span class="nt">&amp;lt;/id&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;name&amp;gt;&lt;/span>Spring Milestones&lt;span class="nt">&amp;lt;/name&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;url&amp;gt;&lt;/span>https://repo.spring.io/milestone&lt;span class="nt">&amp;lt;/url&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;/repository&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;/repositories&amp;gt;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å­¦ä¹ èµ„æºï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;a href="http://www.ityouknow.com/spring-cloud">çº¯æ´çš„å¾®ç¬‘&lt;/a>&lt;/li>
&lt;li>&lt;a href="http://blog.didispace.com/categories/Spring-Cloud/">ç¨‹åºçŒ¿DD&lt;/a>&lt;/li>
&lt;li>&lt;a href="http://blog.csdn.net/liaokailin/article/category/6212338">liaokailinçš„ä¸“æ &lt;/a>&lt;/li>
&lt;li>&lt;a href="http://www.itmuch.com/">å‘¨ç«‹ Spring Cloud&lt;/a>&lt;/li>
&lt;li>&lt;a href="http://blog.csdn.net/column/details/15197.html">æ–¹å¿—æœ‹ Spring Cloud ä¸“æ &lt;/a>&lt;/li>
&lt;li>&lt;a href="http://xujin.org/categories/%E8%B7%9F%E6%88%91%E5%AD%A6Spring-Cloud/">è®¸è¿› è·Ÿæˆ‘å­¦Spring Cloud&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="spring-cloud-éƒ½æœ‰å“ªäº›å¸¸ç”¨ç»„ä»¶">Spring Cloud éƒ½æœ‰å“ªäº›å¸¸ç”¨ç»„ä»¶ï¼Ÿ&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>ç»„ä»¶å&lt;/th>
&lt;th>æè¿°&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Eureka&lt;/td>
&lt;td>Eurekaç”¨äºŽæœåŠ¡çš„æ³¨å†Œä¸Žå‘çŽ°ã€‚Eurekaæ˜¯Netflixå¼€æºçš„ä¸€æ¬¾æä¾›æœåŠ¡æ³¨å†Œå’Œå‘çŽ°çš„äº§å“ï¼Œå®ƒæä¾›äº†å®Œæ•´çš„Service Registryå’ŒService Discoveryå®žçŽ°ã€‚ä¹Ÿæ˜¯spring Cloudä½“ç³»ä¸­æœ€é‡è¦æœ€æ ¸å¿ƒçš„ç»„ä»¶ä¹‹ä¸€ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Ribbon&lt;/td>
&lt;td>Ribbonæ˜¯Netflixå‘å¸ƒçš„äº‘ä¸­é—´å±‚æœåŠ¡å¼€æºé¡¹ç›®ï¼Œå…¶ä¸»è¦åŠŸèƒ½æ˜¯æä¾›å®¢æˆ·ç«¯å®žçŽ°è´Ÿè½½å‡è¡¡ç®—æ³•ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Feign&lt;/td>
&lt;td>Feignæ”¯æŒæœåŠ¡çš„è°ƒç”¨ä»¥åŠå‡è¡¡è´Ÿè½½ã€‚Feignæ˜¯ä»ŽNetflixä¸­åˆ†ç¦»å‡ºæ¥çš„è½»é‡çº§é¡¹ç›®ï¼Œèƒ½å¤Ÿåœ¨ç±»æŽ¥å£ä¸Šæ·»åŠ æ³¨é‡Šï¼Œæˆä¸ºä¸€ä¸ªREST API å®¢æˆ·ç«¯ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Config&lt;/td>
&lt;td>Spring Cloud Configä¸ºåˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„å¤–éƒ¨é…ç½®æä¾›æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯æ”¯æŒã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Bus&lt;/td>
&lt;td>Spring Cloud Busé€šè¿‡è½»é‡æ¶ˆæ¯ä»£ç†è¿žæŽ¥å„ä¸ªåˆ†å¸ƒçš„èŠ‚ç‚¹ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Stream&lt;/td>
&lt;td>Spring Cloud Stream æ˜¯ä¸€ä¸ªæž„å»ºæ¶ˆæ¯é©±åŠ¨å¾®æœåŠ¡çš„æ¡†æž¶ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Zuul&lt;/td>
&lt;td>å¾®æœåŠ¡ç½‘å…³&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Hystrix&lt;/td>
&lt;td>Hystrixå¤„ç†æœåŠ¡çš„ç†”æ–­é˜²æ­¢æ•…éšœæ‰©æ•£ã€‚Hystrix-dashboard æ˜¯ä¸€æ¬¾é’ˆå¯¹Hystrixè¿›è¡Œå®žæ—¶ç›‘æŽ§çš„å·¥å…·ï¼Œé€šè¿‡Hystrix Dashboardæˆ‘ä»¬å¯ä»¥åœ¨ç›´è§‚åœ°çœ‹åˆ°å„Hystrix Commandçš„è¯·æ±‚å“åº”æ—¶é—´, è¯·æ±‚æˆåŠŸçŽ‡ç­‰æ•°æ®ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Sleuth&lt;/td>
&lt;td>Spring Cloud Sleuthä¸ºæœåŠ¡ä¹‹é—´è°ƒç”¨æä¾›é“¾è·¯è¿½è¸ªã€‚é€šè¿‡Sleuthå¯ä»¥å¾ˆæ¸…æ¥šçš„äº†è§£åˆ°ä¸€ä¸ªæœåŠ¡è¯·æ±‚ç»è¿‡äº†å“ªäº›æœåŠ¡ï¼Œæ¯ä¸ªæœåŠ¡å¤„ç†èŠ±è´¹äº†å¤šé•¿ã€‚ä»Žè€Œè®©æˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿çš„ç†æ¸…å„å¾®æœåŠ¡é—´çš„è°ƒç”¨å…³ç³»ã€‚&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="ä½¿ç”¨spring-cloudå¾®æœåŠ¡çš„ä¼˜åŠ£">ä½¿ç”¨Spring Cloud/å¾®æœåŠ¡çš„ä¼˜åŠ£ï¼Ÿ&lt;/h2>
&lt;p>å•ä½“ï¼ˆMonolithicï¼‰æž¶æž„ä¸»è¦å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š&lt;/p>
&lt;ol>
&lt;li>ç³»ç»Ÿé—´é€šå¸¸ä»¥APIçš„å½¢å¼äº’ç›¸è®¿é—®ï¼Œè€¦åˆç´§å¯†å¯¼è‡´éš¾ä»¥ç»´æŠ¤ï¼›&lt;/li>
&lt;li>å„ä¸šåŠ¡é¢†åŸŸéœ€è¦é‡‡ç”¨ç›¸åŒçš„æŠ€æœ¯æ ˆï¼Œéš¾ä»¥å¿«é€Ÿåº”ç”¨æ–°æŠ€æœ¯ï¼›&lt;/li>
&lt;li>å¯¹ç³»ç»Ÿçš„ä»»ä½•ä¿®æ”¹éƒ½å¿…é¡»æ•´ä¸ªç³»ç»Ÿä¸€èµ·é‡æ–°éƒ¨ç½²/å‡çº§ï¼Œè¿ç»´æˆæœ¬é«˜ï¼›&lt;/li>
&lt;li>åœ¨ç³»ç»Ÿè´Ÿè½½å¢žåŠ æ—¶ï¼Œéš¾ä»¥è¿›è¡Œæ°´å¹³æ‰©å±•ï¼›&lt;/li>
&lt;li>å½“ç³»ç»Ÿä¸­ä¸€å¤„å‡ºçŽ°é—®é¢˜ï¼Œä¼šå½±å“æ•´ä¸ªç³»ç»Ÿï¼›&lt;/li>
&lt;/ol>
&lt;p>è€Œå¾®æœåŠ¡æž¶æž„çš„å‡ºçŽ°æ”¹å–„äº†å•ä½“æž¶æž„çš„ä¸è¶³ï¼Œå¾®æœåŠ¡çš„ä¼˜åŠ¿ä¹Ÿå°±ä½“çŽ°å‡ºæ¥äº†ï¼š&lt;/p>
&lt;ol>
&lt;li>æ¯ä¸ªå¾®æœåŠ¡å¯ä»¥æœ‰ä¸“é—¨çš„å›¢é˜Ÿå¼€å‘ï¼Œå¼€å‘è€…å¯ä»¥è‡ªå·±é€‰æ‹©è‡ªå·±å¼€å‘çš„å¾®æœåŠ¡æ‰€ç”¨çš„æŠ€æœ¯&lt;/li>
&lt;li>å¾®æœåŠ¡å•ç‹¬éƒ¨ç½²ï¼ŒåŠ å¿«éƒ¨ç½²é€Ÿåº¦&lt;/li>
&lt;li>ç‹¬ç«‹æ‰©å±•ï¼Œå¿«é€Ÿæ–¹ä¾¿&lt;/li>
&lt;/ol>
&lt;p>å½“ç„¶å¾®æœåŠ¡ä¹Ÿæœ‰ä¸è¶³ä¹‹å¤„ï¼š&lt;/p>
&lt;ol>
&lt;li>éƒ¨ç½²å¤æ‚ï¼šå¾®æœåŠ¡æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œæ‰€ä»¥ä¼šå¸¦æ¥å›ºæœ‰çš„å¤æ‚æ€§ã€‚&lt;/li>
&lt;li>è¿›ç¨‹é—´ç›¸äº’é€šè®¯å½±å“æ•ˆçŽ‡ï¼šå¾®æœåŠ¡ä¹‹é—´ç›¸äº’é€šä¿¡å¿…ç„¶è¦ç›¸å¯¹äºŽå•ä½“æž¶æž„çš„æ—¶é—´è¦é•¿ï¼Œè€Œä¸”ç½‘ç»œé€šè®¯å¿…ç„¶æ˜¯æœ‰å®‰å…¨éšæ‚£çš„&lt;/li>
&lt;li>æµ‹è¯•å¤æ‚ï¼šæµ‹è¯•æŸä¸ªæœåŠ¡æµç¨‹æ˜¯å¦æ­£ç¡®ï¼Œéœ€è¦å°†æ‰€ä½¿ç”¨çš„å¾®æœåŠ¡å…¨éƒ¨æ‰“å¼€ï¼Œå¤æ‚æ€§æœ‰æ‰€æé«˜ã€‚&lt;/li>
&lt;li>å¾®æœåŠ¡å¤ªå¤šç«¯å£å¤æ‚ï¼Œå†…å­˜å ç”¨ä¹Ÿæé«˜å¾ˆå¤š&lt;/li>
&lt;/ol>
&lt;h2 id="spring-cloud-vs-dubbo">Spring Cloud VS Dubbo&lt;/h2>
&lt;blockquote>
&lt;p>Dubboæ˜¯é˜¿é‡Œå·´å·´å…¬å¸å¼€æºçš„ä¸€ä¸ªé«˜æ€§èƒ½ä¼˜ç§€çš„æœåŠ¡æ¡†æž¶ï¼Œä½¿å¾—åº”ç”¨å¯é€šè¿‡é«˜æ€§èƒ½çš„ RPC å®žçŽ°æœåŠ¡çš„è¾“å‡ºå’Œè¾“å…¥åŠŸèƒ½ï¼Œå¯ä»¥å’ŒSpringæ¡†æž¶æ— ç¼é›†æˆã€‚æ¥æºï¼šç™¾åº¦ç™¾ç§‘&lt;/p>
&lt;/blockquote>
&lt;p>&lt;a href="https://www.zhihu.com/question/45413135">è¯·é—®å“ªä½å¤§ç¥žæ¯”è¾ƒè¿‡spring cloudå’Œdubboï¼Œå„è‡ªçš„ä¼˜ç¼ºç‚¹æ˜¯ä»€ä¹ˆ?ã€çŸ¥ä¹Žã€‘&lt;/a>&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-03-19-SpringCloud%E7%BB%84%E4%BB%B6%E7%94%A8%E9%80%94%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%E5%8F%8APOM%E5%9D%90%E6%A0%87/cloudvsdubbo.jpg" alt="SpringCloudVSDubbo">&lt;/p>
&lt;h2 id="å¸¸ç”¨ç»„ä»¶mavenåæ ‡">å¸¸ç”¨ç»„ä»¶Mavenåæ ‡&lt;/h2>
&lt;h3 id="eureka-æœåŠ¡æ³¨å†Œä¸Žå‘çŽ°">Eureka æœåŠ¡æ³¨å†Œä¸Žå‘çŽ°&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-xml" data-lang="xml">&lt;span class="nt">&amp;lt;dependency&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;groupId&amp;gt;&lt;/span>org.springframework.cloud&lt;span class="nt">&amp;lt;/groupId&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;artifactId&amp;gt;&lt;/span>spring-cloud-starter-netflix-eureka-server&lt;span class="nt">&amp;lt;/artifactId&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;/dependency&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;dependency&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;groupId&amp;gt;&lt;/span>org.springframework.cloud&lt;span class="nt">&amp;lt;/groupId&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;artifactId&amp;gt;&lt;/span>spring-cloud-starter-netflix-eureka-client&lt;span class="nt">&amp;lt;/artifactId&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;/dependency&amp;gt;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="ribbon-è´Ÿè½½å‡è¡¡">Ribbon è´Ÿè½½å‡è¡¡&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-xml" data-lang="xml">&lt;span class="nt">&amp;lt;dependency&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;groupId&amp;gt;&lt;/span>org.springframework.cloud&lt;span class="nt">&amp;lt;/groupId&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;artifactId&amp;gt;&lt;/span>spring-cloud-starter-netflix-ribbon&lt;span class="nt">&amp;lt;/artifactId&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;/dependency&amp;gt;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="feign-restå®¢æˆ·ç«¯">Feign RESTå®¢æˆ·ç«¯&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-xml" data-lang="xml">&lt;span class="nt">&amp;lt;dependency&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;groupId&amp;gt;&lt;/span>org.springframework.cloud&lt;span class="nt">&amp;lt;/groupId&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;artifactId&amp;gt;&lt;/span>spring-cloud-starter-openfeign&lt;span class="nt">&amp;lt;/artifactId&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;/dependency&amp;gt;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="config-é…ç½®ä¸­å¿ƒ">Config é…ç½®ä¸­å¿ƒ&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-xml" data-lang="xml">&lt;span class="nt">&amp;lt;dependency&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;groupId&amp;gt;&lt;/span>org.springframework.cloud&lt;span class="nt">&amp;lt;/groupId&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;artifactId&amp;gt;&lt;/span>spring-cloud-config-server&lt;span class="nt">&amp;lt;/artifactId&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;/dependency&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;dependency&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;groupId&amp;gt;&lt;/span>org.springframework.cloud&lt;span class="nt">&amp;lt;/groupId&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;artifactId&amp;gt;&lt;/span>spring-cloud-starter-config&lt;span class="nt">&amp;lt;/artifactId&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;/dependency&amp;gt;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="busamqlå®žçŽ°-æ€»çº¿">Bus(AMQLå®žçŽ°) æ€»çº¿&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-xml" data-lang="xml">&lt;span class="nt">&amp;lt;dependency&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;groupId&amp;gt;&lt;/span>org.springframework.cloud&lt;span class="nt">&amp;lt;/groupId&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;artifactId&amp;gt;&lt;/span>spring-cloud-starter-bus-amqp&lt;span class="nt">&amp;lt;/artifactId&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;/dependency&amp;gt;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="stream-æ¶ˆæ¯">Stream æ¶ˆæ¯&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-xml" data-lang="xml">&lt;span class="c">&amp;lt;!-- or &amp;#39;*-stream-kafka&amp;#39; --&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;dependency&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;groupId&amp;gt;&lt;/span>org.springframework.cloud&lt;span class="nt">&amp;lt;/groupId&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;artifactId&amp;gt;&lt;/span>spring-cloud-starter-stream-rabbit&lt;span class="nt">&amp;lt;/artifactId&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;/dependency&amp;gt;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="zuul-ç½‘å…³">Zuul ç½‘å…³&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-xml" data-lang="xml">&lt;span class="nt">&amp;lt;dependency&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;groupId&amp;gt;&lt;/span>org.springframework.cloud&lt;span class="nt">&amp;lt;/groupId&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;artifactId&amp;gt;&lt;/span>spring-cloud-starter-netflix-zuul&lt;span class="nt">&amp;lt;/artifactId&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;/dependency&amp;gt;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="hystrix-å®¹ç¾">Hystrix å®¹ç¾&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-xml" data-lang="xml">&lt;span class="nt">&amp;lt;dependency&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;groupId&amp;gt;&lt;/span>org.springframework.cloud&lt;span class="nt">&amp;lt;/groupId&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;artifactId&amp;gt;&lt;/span>spring-cloud-starter-netflix-hystrix&lt;span class="nt">&amp;lt;/artifactId&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;/dependency&amp;gt;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="sleuth-é“¾è·¯ç›‘æµ‹">Sleuth é“¾è·¯ç›‘æµ‹&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-xml" data-lang="xml">&lt;span class="nt">&amp;lt;dependency&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;groupId&amp;gt;&lt;/span>org.springframework.cloud&lt;span class="nt">&amp;lt;/groupId&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;artifactId&amp;gt;&lt;/span>spring-cloud-starter-sleuth&lt;span class="nt">&amp;lt;/artifactId&amp;gt;&lt;/span>
&lt;span class="nt">&amp;lt;/dependency&amp;gt;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>è®°äººç”Ÿä¸­ç¬¬ä¸€æ¬¡å‚åŠ æ ¡æ‹›</title><link>https://blog.itning.top/post/2019/03/17/%E8%AE%B0%E4%BA%BA%E7%94%9F%E4%B8%AD%E7%AC%AC%E4%B8%80%E6%AC%A1%E5%8F%82%E5%8A%A0%E6%A0%A1%E6%8B%9B/</link><pubDate>Sun, 17 Mar 2019 18:30:42 +0800</pubDate><guid>https://blog.itning.top/post/2019/03/17/%E8%AE%B0%E4%BA%BA%E7%94%9F%E4%B8%AD%E7%AC%AC%E4%B8%80%E6%AC%A1%E5%8F%82%E5%8A%A0%E6%A0%A1%E6%8B%9B/</guid><description>&lt;p>6ç‚¹åŠèµ·åºŠï¼Œæ´—æ¼±ã€‚å­¦æ ¡åœ¨è’æ— äººçƒŸçš„å®¾åŽ¿ï¼Œå®žåœ¨æ˜¯åè¿œã€‚æ— å¥ˆåªèƒ½æ—©èµ·ã€‚
åšå¤§å®¢è½¦ä¸€ä¸ªå°æ—¶è¿·è¿·ç³Šç³ŠæŠŠJVMåŽŸç†å’Œè®¡ç®—æœºç½‘ç»œçš„é¢è¯•é¢˜çœ‹äº†ä¸€éï¼Œåˆ°åœ°é“ç«™ã€‚è¿˜å¥½äººä¸å¤šã€‚
åäº†åŠä¸ªå°æ—¶åœ°é“ã€‚ç»ˆäºŽåˆ°äº†å“ˆå·¥å¤§ã€‚&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-03-17-%E8%AE%B0%E4%BA%BA%E7%94%9F%E4%B8%AD%E7%AC%AC%E4%B8%80%E6%AC%A1%E5%8F%82%E5%8A%A0%E6%A0%A1%E6%8B%9B/a.png" alt="ditie">&lt;/p>
&lt;p>ç¬¬ä¸€æ¬¡æ¥å“ˆå·¥å¤§ï¼Œæ„Ÿå¹å“ˆå·¥å¤§çœŸçš„æ˜¯å¤§ã€‚ç›´æŽ¥è¿·è·¯
é—®äº†åŒå­¦æ‰¾åˆ°äº†å“ˆå·¥å¤§çš„ä½“è‚²é¦†&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-03-17-%E8%AE%B0%E4%BA%BA%E7%94%9F%E4%B8%AD%E7%AC%AC%E4%B8%80%E6%AC%A1%E5%8F%82%E5%8A%A0%E6%A0%A1%E6%8B%9B/men.jpg" alt="men">&lt;/p>
&lt;p>è¿›é—¨éœ€è¦æ‰«äºŒç»´ç è¿›è¡Œèº«ä»½ä¿¡æ¯ç™»è®°&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-03-17-%E8%AE%B0%E4%BA%BA%E7%94%9F%E4%B8%AD%E7%AC%AC%E4%B8%80%E6%AC%A1%E5%8F%82%E5%8A%A0%E6%A0%A1%E6%8B%9B/dengji.png" alt="dengji">&lt;/p>
&lt;p>è¿›åŽ»ä¸‹æ¥¼ï¼Œå‘çŽ°äººçœŸçš„å¾ˆå¤šå•Š&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-03-17-%E8%AE%B0%E4%BA%BA%E7%94%9F%E4%B8%AD%E7%AC%AC%E4%B8%80%E6%AC%A1%E5%8F%82%E5%8A%A0%E6%A0%A1%E6%8B%9B/a.png" alt="a">
æ ¡æ‹›çŽ°åœº,äººå¾ˆå¤š&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-03-17-%E8%AE%B0%E4%BA%BA%E7%94%9F%E4%B8%AD%E7%AC%AC%E4%B8%80%E6%AC%A1%E5%8F%82%E5%8A%A0%E6%A0%A1%E6%8B%9B/b.png" alt="b">
æ ¡æ‹›çŽ°åœº&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-03-17-%E8%AE%B0%E4%BA%BA%E7%94%9F%E4%B8%AD%E7%AC%AC%E4%B8%80%E6%AC%A1%E5%8F%82%E5%8A%A0%E6%A0%A1%E6%8B%9B/c.png" alt="c">
æ ¡æ‹›çŽ°åœº&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-03-17-%E8%AE%B0%E4%BA%BA%E7%94%9F%E4%B8%AD%E7%AC%AC%E4%B8%80%E6%AC%A1%E5%8F%82%E5%8A%A0%E6%A0%A1%E6%8B%9B/d.png" alt="d">&lt;/p>
&lt;p>ä¸å¾—ä¸è¯´çœŸçš„å¾ˆéœ‡æ’¼ å­¦åˆ°äº†å¾ˆå¤š æ€»ç»“äº†è®¸å¤šæŠ•ç®€åŽ†çš„ç»éªŒ
ä¾‹å¦‚ ç®€åŽ†ä¸€å®šè¦å¥½å¥½å†™ï¼Œå› ä¸ºä½ ä¸æ˜¯211ï¼Œ985å‡ºèº«è¿™å°±æ¯”ä»–ä»¬å·®ä¸€æˆªäº†ï¼Œç„¶åŽç®€åŽ†è¿˜ä¸çªå‡ºï¼ŒåŸºæœ¬ä¸Šä½ å°±PASSäº†ï¼Œæ‰€ä»¥ç®€åŽ†å¾ˆé‡è¦ã€‚
å› ä¸ºæˆ‘æ˜Žå¹´æ‰æ¯•ä¸šï¼Œæ‰€ä»¥çŽ°åœ¨æ˜¯åŽ»æ‰¾å®žä¹ ç”Ÿå¼€å‘å²—ä½ï¼Œå¸Œæœ›æš‘æœŸèƒ½å¤ŸåŽ»å®žä¹ ã€‚å¢žé•¿è‡ªå·±çš„é˜…åŽ†ã€‚
ä¸è¿‡é—®äº†å‡ å®¶éƒ½ä¸æ‹›å®žä¹ ç”Ÿï¼Œä¸è¿‡è¿˜å¥½æœ‰å‡ å®¶æ‹›ï¼Œä¸€ä¸Šåˆçš„æ—¶é—´æŠ•äº†å‡ å®¶ã€‚
æ€»ç»“è¿™æ¬¡åŽ»çš„æ”¶èŽ·ï¼š&lt;/p>
&lt;ol>
&lt;li>ç®€åŽ†ä¸€å®šè¦å¥½å¥½åš&lt;/li>
&lt;li>è¦å‹‡æ•¢ï¼Œä½ è¦ä¸»åŠ¨æ‰æœ‰æœºä¼š&lt;/li>
&lt;li>åŸºç¡€å¾ˆé‡è¦ï¼Œèµ¶ç´§å›žåŽ»å¤ä¹ åŸºç¡€&lt;/li>
&lt;li>åšçš„é¡¹ç›®ä¸€å®šè¦å†™çš„è¯¦ç»†äº›ï¼Œè®©è‡ªå·±åœ¨å®žä¹ ç”Ÿä¸­è„±é¢–è€Œå‡º&lt;/li>
&lt;/ol>
&lt;p>åŠ æ²¹ï¼&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2019-03-17-%E8%AE%B0%E4%BA%BA%E7%94%9F%E4%B8%AD%E7%AC%AC%E4%B8%80%E6%AC%A1%E5%8F%82%E5%8A%A0%E6%A0%A1%E6%8B%9B/end.jpg" alt="end">&lt;/p>
&lt;p>äººç”Ÿè‹¦çŸ­ï¼Œä½•å¦¨ä¸€è¯•ã€‚&lt;/p></description></item><item><title>jsoupåº“apiç®€ä»‹</title><link>https://blog.itning.top/post/2018/09/16/jsoup%E5%BA%93api%E7%AE%80%E4%BB%8B/</link><pubDate>Sun, 16 Sep 2018 19:27:01 +0800</pubDate><guid>https://blog.itning.top/post/2018/09/16/jsoup%E5%BA%93api%E7%AE%80%E4%BB%8B/</guid><description>&lt;h2 id="getelementsbytag">getElementsByTag&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="n">Elements&lt;/span> &lt;span class="nf">getElementsByTag&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">String&lt;/span> &lt;span class="n">tagName&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ ¹æ®æ ‡ç­¾èŽ·å–å…ƒç´ 
&lt;strong>ä»€ä¹ˆæ˜¯æ ‡ç­¾ï¼Ÿ&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">&amp;lt;div&amp;gt;æ ‡ç­¾
&amp;lt;p&amp;gt;æ ‡ç­¾
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="getelementbyid">getElementById&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="n">Element&lt;/span> &lt;span class="nf">getElementById&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">String&lt;/span> &lt;span class="n">id&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ ¹æ®IDå±žæ€§èŽ·å–å”¯ä¸€å…ƒç´ &lt;/p>
&lt;h2 id="getelementsbyclass">getElementsByClass&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="n">Elements&lt;/span> &lt;span class="nf">getElementsByClass&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">String&lt;/span> &lt;span class="n">className&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ ¹æ®Classæ¥èŽ·å–å…ƒç´ &lt;/p>
&lt;h2 id="getelementsbyattribute">getElementsByAttribute&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="n">Elements&lt;/span> &lt;span class="nf">getElementsByAttribute&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">String&lt;/span> &lt;span class="n">key&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ ¹æ®å±žæ€§æ¥èŽ·å–å…ƒç´ &lt;/p>
&lt;h2 id="getelementsbyattributestarting">getElementsByAttributeStarting&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="n">Elements&lt;/span> &lt;span class="nf">getElementsByAttributeStarting&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">String&lt;/span> &lt;span class="n">keyPrefix&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æŸ¥æ‰¾å…·æœ‰ç¬¦åˆkeyPrefixå‰ç¼€çš„å±žæ€§
ä¾‹å¦‚æŸ¥æ‰¾æ‰€æœ‰**data-**å±žæ€§çš„å…ƒç´ &lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="n">getElementsByAttributeStarting&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;data-&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="getelementsbyattributevalue">getElementsByAttributeValue&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="n">Elements&lt;/span> &lt;span class="nf">getElementsByAttributeValue&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">String&lt;/span> &lt;span class="n">key&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">value&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ ¹æ®ç»™å®šçš„å±žæ€§åå’Œå±žæ€§å€¼æŸ¥æ‰¾å…ƒç´ 
å˜å¼‚ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="c1">//æŸ¥æ‰¾ä¸æ˜¯ç»™å®šå±žæ€§åå’Œå±žæ€§å€¼çš„å…ƒç´ 
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="n">Elements&lt;/span> &lt;span class="nf">getElementsByAttributeValueNot&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">String&lt;/span> &lt;span class="n">key&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">value&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="c1">//æ ¹æ®æŒ‡å®šçš„å±žæ€§åæŸ¥æ‰¾å…·æœ‰valuePrefixå‰ç¼€çš„å±žæ€§å€¼çš„å…ƒç´ 
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="n">Elements&lt;/span> &lt;span class="nf">getElementsByAttributeValueStarting&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">String&lt;/span> &lt;span class="n">key&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">valuePrefix&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="c1">//æ ¹æ®æŒ‡å®šçš„å±žæ€§åæŸ¥æ‰¾å…·æœ‰valuePrefixåŽç¼€çš„å±žæ€§å€¼çš„å…ƒç´ 
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="n">Elements&lt;/span> &lt;span class="nf">getElementsByAttributeValueEnding&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">String&lt;/span> &lt;span class="n">key&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">valueSuffix&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="c1">//æ ¹æ®æŒ‡å®šçš„å±žæ€§åæŸ¥æ‰¾åŒ…å«valuePrefixå­—ç¬¦ä¸²çš„å±žæ€§å€¼çš„å…ƒç´ 
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="n">Elements&lt;/span> &lt;span class="nf">getElementsByAttributeValueContaining&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">String&lt;/span> &lt;span class="n">key&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">match&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="c1">//æŸ¥æ‰¾å…·æœ‰å…¶å€¼ä¸Žæä¾›çš„æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„å±žæ€§çš„å…ƒç´ 
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="n">Elements&lt;/span> &lt;span class="nf">getElementsByAttributeValueMatching&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">String&lt;/span> &lt;span class="n">key&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">Pattern&lt;/span> &lt;span class="n">pattern&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="n">Elements&lt;/span> &lt;span class="nf">getElementsByAttributeValueMatching&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">String&lt;/span> &lt;span class="n">key&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">regex&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="getelementscontainingtext">getElementsContainingText&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="n">Elements&lt;/span> &lt;span class="nf">getElementsContainingText&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">String&lt;/span> &lt;span class="n">searchText&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æŸ¥æ‰¾åŒ…å«æŒ‡å®šå­—ç¬¦ä¸²çš„å…ƒç´ ã€‚ æœç´¢ä¸åŒºåˆ†å¤§å°å†™ã€‚ æ–‡æœ¬å¯ä»¥ç›´æŽ¥å‡ºçŽ°åœ¨å…ƒç´ ä¸­ï¼Œä¹Ÿå¯ä»¥å‡ºçŽ°åœ¨ä»»ä½•åŽä»£ä¸­&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="c1">//æŸ¥æ‰¾ç›´æŽ¥åŒ…å«æŒ‡å®šå­—ç¬¦ä¸²çš„å…ƒç´ ã€‚ æœç´¢ä¸åŒºåˆ†å¤§å°å†™ã€‚ æ–‡æœ¬å¿…é¡»ç›´æŽ¥å‡ºçŽ°åœ¨å…ƒç´ ä¸­ï¼Œè€Œä¸æ˜¯å‡ºçŽ°åœ¨ä»»ä½•åŽä»£ä¸­
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="n">Elements&lt;/span> &lt;span class="nf">getElementsContainingOwnText&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">String&lt;/span> &lt;span class="n">searchText&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="getelementsmatchingtext">getElementsMatchingText&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="n">Elements&lt;/span> &lt;span class="nf">getElementsMatchingText&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">Pattern&lt;/span> &lt;span class="n">pattern&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="n">Elements&lt;/span> &lt;span class="nf">getElementsMatchingText&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">String&lt;/span> &lt;span class="n">regex&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æŸ¥æ‰¾æ–‡æœ¬ä¸Žæä¾›çš„æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„å…ƒç´ &lt;/p>
&lt;p>&lt;a href="https://www.ibm.com/developerworks/cn/java/j-lo-jsouphtml/index.html">ä½¿ç”¨ jsoup å¯¹ HTML æ–‡æ¡£è¿›è¡Œè§£æžå’Œæ“ä½œ&lt;/a>&lt;/p>
&lt;p>&lt;a href="https://www.cnblogs.com/zhangyinhua/p/8037599.html">Jsoupï¼ˆä¸€ï¼‰Jsoupè¯¦è§£ï¼ˆå®˜æ–¹ï¼‰&lt;/a>&lt;/p></description></item><item><title>è®°ä¸€æ¬¡ç¬”è®°æœ¬è°ƒèŠ‚äº®åº¦å¿«æ·é”®å¤±æ•ˆçš„è§£å†³ç»åŽ†</title><link>https://blog.itning.top/post/2018/09/11/%E8%AE%B0%E4%B8%80%E6%AC%A1%E7%AC%94%E8%AE%B0%E6%9C%AC%E8%B0%83%E8%8A%82%E4%BA%AE%E5%BA%A6%E5%BF%AB%E6%8D%B7%E9%94%AE%E5%A4%B1%E6%95%88%E7%9A%84%E8%A7%A3%E5%86%B3%E7%BB%8F%E5%8E%86/</link><pubDate>Tue, 11 Sep 2018 18:41:24 +0800</pubDate><guid>https://blog.itning.top/post/2018/09/11/%E8%AE%B0%E4%B8%80%E6%AC%A1%E7%AC%94%E8%AE%B0%E6%9C%AC%E8%B0%83%E8%8A%82%E4%BA%AE%E5%BA%A6%E5%BF%AB%E6%8D%B7%E9%94%AE%E5%A4%B1%E6%95%88%E7%9A%84%E8%A7%A3%E5%86%B3%E7%BB%8F%E5%8E%86/</guid><description>&lt;p>ç¬”è®°æœ¬æœ€è¿‘å‡çº§åˆ°Win10 1803 åŽ&lt;/p>
&lt;p>å¿«æ·é”®è°ƒèŠ‚äº®åº¦å±…ç„¶å¤±æ•ˆçš„&lt;/p>
&lt;p>ä½†æ˜¯è°ƒèŠ‚å£°éŸ³è¿˜èƒ½ç”¨&lt;/p>
&lt;p>æƒ³æƒ³è§£å†³å§..&lt;/p>
&lt;p>é‡è£…äº†ç”µè„‘çš„çƒ­é”®é©±åŠ¨æ²¡æœ‰ç”¨&amp;hellip;&lt;/p>
&lt;p>åŽæ¥Googleå‘çŽ°å¯èƒ½æ˜¯é›†æ˜¾é©±åŠ¨é—®é¢˜&lt;/p>
&lt;p>ç«‹é©¬å›žæ»šäº†æ˜¾å¡é©±åŠ¨&lt;/p>
&lt;p>é‡å¯åŽå‘çŽ°äº®åº¦å¯ä»¥é€šè¿‡å¿«æ·é”®è¿›è¡Œè°ƒèŠ‚äº†&lt;/p>
&lt;p>åŽ»å› ç‰¹å°”å®˜ç½‘çœ‹äº†ä¸‹æœ€æ–°çš„æ˜¾å¡é©±åŠ¨,å‘çŽ°æœ€è¿‘ä¸€ä¸ªæœˆæœ‰æ›´æ–°&lt;/p>
&lt;p>ä¸‹è½½å®‰è£…åŽè°ƒèŠ‚äº®åº¦åŠŸèƒ½ä¾ç„¶å¥½ä½¿&lt;/p>
&lt;p>è¿™ä¸ªé—®é¢˜å°±è§£å†³äº†&lt;/p>
&lt;p>æ³¨: ç”µè„‘æˆ˜ç¥žZ7M&lt;/p></description></item><item><title>AndroidæŽ§ä»¶&amp;Material-DesignæŽ§ä»¶</title><link>https://blog.itning.top/post/2018/07/24/android%E6%8E%A7%E4%BB%B6material-design%E6%8E%A7%E4%BB%B6/</link><pubDate>Tue, 24 Jul 2018 12:23:08 +0800</pubDate><guid>https://blog.itning.top/post/2018/07/24/android%E6%8E%A7%E4%BB%B6material-design%E6%8E%A7%E4%BB%B6/</guid><description>&lt;h2 id="linearlayoutçº¿æ€§å¸ƒå±€">LinearLayout(çº¿æ€§å¸ƒå±€)&lt;/h2>
&lt;p>&lt;img src="https://blog.itning.top/images/2018-07-24-Android%E6%8E%A7%E4%BB%B6-Material-Design%E6%8E%A7%E4%BB%B6/linearlayout1.png" alt="linearlayout1">&lt;/p>
&lt;p>&lt;a href="https://developer.android.com/guide/topics/ui/layout/linear?hl=zh-cn">Googleå®˜æ–¹æ•™ç¨‹&lt;/a>&lt;/p>
&lt;p>&lt;a href="https://blog.csdn.net/u014450015/article/details/50178415">androidå¸ƒå±€&amp;mdash;&amp;mdash;LinearLayout(çº¿æ€§å¸ƒå±€)è¯¦è§£&lt;/a>&lt;/p>
&lt;p>&lt;a href="https://www.jianshu.com/p/e6835ed20d9a">Androidå¸ƒå±€-LinearLayoutå±žæ€§è¯¦è§£&lt;/a>&lt;/p>
&lt;h2 id="relativelayoutç›¸å¯¹å¸ƒå±€">RelativeLayout(ç›¸å¯¹å¸ƒå±€)&lt;/h2>
&lt;p>&lt;img src="https://blog.itning.top/images/2018-07-24-Android%E6%8E%A7%E4%BB%B6-Material-Design%E6%8E%A7%E4%BB%B6/relativelayout1.png" alt="relativelayout1">&lt;/p>
&lt;p>&lt;a href="https://www.jianshu.com/p/16894af17ea4">Androidå¸ƒå±€-RelativeLayoutå±žæ€§è¯¦è§£&lt;/a>&lt;/p>
&lt;p>&lt;a href="https://www.cnblogs.com/yanglh6-jyx/p/Android_RelativeLayout.html">Androidå¼€å‘é‡ç‚¹éš¾ç‚¹1ï¼šRelativeLayout(ç›¸å¯¹å¸ƒå±€)è¯¦è§£&lt;/a>&lt;/p>
&lt;h2 id="framelayoutå¸§å¸ƒå±€">FrameLayout(å¸§å¸ƒå±€)&lt;/h2>
&lt;p>&lt;a href="https://www.cnblogs.com/skywang12345/p/3154093.html">Android å¸ƒå±€ä¹‹FrameLayout&lt;/a>&lt;/p>
&lt;h2 id="appbarlayoutåº”ç”¨æ å¸ƒå±€">AppBarLayout(åº”ç”¨æ å¸ƒå±€)&lt;/h2>
&lt;p>&lt;img src="https://blog.itning.top/images/2018-07-24-Android%E6%8E%A7%E4%BB%B6-Material-Design%E6%8E%A7%E4%BB%B6/AppBarLayout.gif" alt="AppBarLayout">&lt;/p>
&lt;p>&lt;a href="https://www.jianshu.com/p/d159f0176576">çŽ©è½¬AppBarLayoutï¼Œæ›´é…·ç‚«çš„é¡¶éƒ¨æ &lt;/a>&lt;/p>
&lt;p>&lt;a href="https://www.jianshu.com/p/d4fd636d7c44">Material Design æŽ§ä»¶çŸ¥è¯†æ¢³ç†(2) - AppBarLayout &amp;amp; CollapsingToolbarLayout&lt;/a>&lt;/p>
&lt;h2 id="coordinatorlayout">CoordinatorLayout&lt;/h2>
&lt;p>&lt;img src="https://blog.itning.top/images/2018-07-24-Android%E6%8E%A7%E4%BB%B6-Material-Design%E6%8E%A7%E4%BB%B6/CoordinatorLayout.gif" alt="CoordinatorLayout">&lt;/p>
&lt;p>&lt;a href="https://www.jianshu.com/p/4a77ae4cd82f">CoordinatorLayout å®Œå…¨è§£æž&lt;/a>&lt;/p>
&lt;h2 id="collapsingtoolbarlayout">CollapsingToolbarLayout&lt;/h2>
&lt;p>&lt;img src="https://blog.itning.top/images/2018-07-24-Android%E6%8E%A7%E4%BB%B6-Material-Design%E6%8E%A7%E4%BB%B6/CollapsingToolbarLayout.gif" alt="CollapsingToolbarLayout">&lt;/p>
&lt;p>&lt;a href="https://www.jianshu.com/p/564a0c56022b">Material Designä¹‹CollapsingToolbarLayoutä½¿ç”¨ï¼ˆæŠ˜å å¼æ ‡é¢˜æ ï¼‰&lt;/a>&lt;/p>
&lt;p>&lt;a href="https://blog.csdn.net/u010687392/article/details/46906657">Material Designä¹‹CollapsingToolbarLayoutä½¿ç”¨&lt;/a>&lt;/p>
&lt;h2 id="bottomsheetåº•éƒ¨æ“ä½œæŽ§ä»¶-">BottomSheet(åº•éƒ¨æ“ä½œæŽ§ä»¶ )&lt;/h2>
&lt;p>&lt;img src="https://blog.itning.top/images/2018-07-24-Android%E6%8E%A7%E4%BB%B6-Material-Design%E6%8E%A7%E4%BB%B6/BottomSheet.gif" alt="BottomSheet">&lt;/p>
&lt;p>&lt;a href="https://www.jianshu.com/p/0a7383e0ad0f">BottomSheetã€BottomSheetDialogä½¿ç”¨è¯¦è§£&lt;/a>&lt;/p>
&lt;p>&lt;a href="https://www.jianshu.com/p/2a5be29123e5">Material Design æŽ§ä»¶çŸ¥è¯†æ¢³ç†(3) - BottomSheet &amp;amp;&amp;amp; BottomSheetDialog &amp;amp;&amp;amp; BottomSheetDialogFragment&lt;/a>&lt;/p>
&lt;h2 id="bottomsheetdialog">BottomSheetDialog&lt;/h2>
&lt;p>&lt;a href="https://blog.csdn.net/wangkeke1860/article/details/55100901">ã€Androidã€‘BottomSheetDialogè¯¦è§£&lt;/a>&lt;/p>
&lt;h2 id="bottomsheetdialogfragment">BottomSheetDialogFragment&lt;/h2>
&lt;h2 id="floatingactionbuttonæµ®åŠ¨æ“ä½œæŒ‰é’®">FloatingActionButton(æµ®åŠ¨æ“ä½œæŒ‰é’®)&lt;/h2>
&lt;p>&lt;a href="https://www.jianshu.com/p/5a354e318019">Material Design æŽ§ä»¶çŸ¥è¯†æ¢³ç†(4) - FloatingActionButton&lt;/a>&lt;/p>
&lt;h2 id="drawerlayoutæŠ½å±‰å¸ƒå±€">DrawerLayout(æŠ½å±‰å¸ƒå±€)&lt;/h2>
&lt;p>&lt;a href="https://www.jianshu.com/p/d2b1689a23bf">DrawerLayoutå’ŒNavigationViewä½¿ç”¨è¯¦è§£&lt;/a>&lt;/p>
&lt;p>&lt;a href="https://www.jianshu.com/p/d70cfd724c7f">Material Design æŽ§ä»¶çŸ¥è¯†æ¢³ç†(5) - DrawerLayout &amp;amp;&amp;amp; NavigationView&lt;/a>&lt;/p>
&lt;h2 id="navigationviewå¯¼èˆªè§†å›¾">NavigationView(å¯¼èˆªè§†å›¾)&lt;/h2>
&lt;p>&lt;a href="https://blog.csdn.net/u012702547/article/details/51253222">Android5.0ä¹‹NavigationViewçš„ä½¿ç”¨&lt;/a>&lt;/p>
&lt;h2 id="snackbar">Snackbar&lt;/h2>
&lt;p>&lt;a href="https://www.jianshu.com/p/6aea94f9ae2f">Material Design æŽ§ä»¶çŸ¥è¯†æ¢³ç†(6) - Snackbar&lt;/a>&lt;/p>
&lt;h2 id="bottomnavigationbaråº•éƒ¨å¯¼èˆªæ ">BottomNavigationBar(åº•éƒ¨å¯¼èˆªæ )&lt;/h2>
&lt;p>&lt;a href="https://www.jianshu.com/p/aa499cc64f72">BottomNavigationView&amp;ndash;åŸºæœ¬ä½¿ç”¨æ€»ç»“&lt;/a>&lt;/p>
&lt;p>&lt;a href="https://www.jianshu.com/p/22ec4fc1cb71">Material Design æŽ§ä»¶çŸ¥è¯†æ¢³ç†(7) - BottomNavigationBar&lt;/a>&lt;/p>
&lt;h2 id="tablayoutå¸ƒå±€é€‰é¡¹å¡">TabLayout(å¸ƒå±€é€‰é¡¹å¡)&lt;/h2>
&lt;p>&lt;a href="https://www.jianshu.com/p/5dd04fda13ab">Material Design æŽ§ä»¶çŸ¥è¯†æ¢³ç†(8) - TabLayout&lt;/a>&lt;/p>
&lt;h2 id="textinputlayoutæ–‡æœ¬è¾“å…¥å¸ƒå±€">TextInputLayout(æ–‡æœ¬è¾“å…¥å¸ƒå±€)&lt;/h2>
&lt;p>&lt;a href="https://www.jianshu.com/p/ed9642fc8634">Material Design æŽ§ä»¶çŸ¥è¯†æ¢³ç†(9) - TextInputLayout&lt;/a>&lt;/p>
&lt;h2 id="listview">ListView&lt;/h2>
&lt;p>&lt;a href="http://www.jcodecraeer.com/a/anzhuokaifa/androidkaifa/2014/1021/1815.html">ListViewä¹‹BaseAdapterçš„åŸºæœ¬ä½¿ç”¨ä»¥åŠViewHolderæ¨¡å¼&lt;/a>&lt;/p>
&lt;h2 id="recyclerview">RecyclerView&lt;/h2>
&lt;p>&lt;a href="https://blog.csdn.net/lmj623565791/article/details/45059587">Android RecyclerView ä½¿ç”¨å®Œå…¨è§£æž ä½“éªŒè‰ºæœ¯èˆ¬çš„æŽ§ä»¶&lt;/a>
&lt;a href="https://www.jianshu.com/p/21a1384df9a1">RecyclerView çŸ¥è¯†æ¢³ç†(1) - ç»¼è¿°&lt;/a>
&lt;a href="https://www.jianshu.com/p/ec6585e5220d">RecyclerView çŸ¥è¯†æ¢³ç†(2) - Adapter&lt;/a>
&lt;a href="https://www.jianshu.com/p/1cfca4d34402">RecyclerView çŸ¥è¯†æ¢³ç†(3) - LayoutManager&lt;/a>
&lt;a href="https://www.jianshu.com/p/b2ef4f8e859f">RecyclerView çŸ¥è¯†æ¢³ç†(4) - ItemDecoration&lt;/a>
&lt;a href="https://www.jianshu.com/p/0bbc44cc1582">RecyclerView çŸ¥è¯†æ¢³ç†(5) - ItemTouchHelper&lt;/a>&lt;/p>
&lt;h2 id="viewpager">ViewPager&lt;/h2>
&lt;p>&lt;img src="https://blog.itning.top/images/2018-07-24-Android%E6%8E%A7%E4%BB%B6-Material-Design%E6%8E%A7%E4%BB%B6/ViewPager.gif" alt="ViewPager">&lt;/p>
&lt;p>&lt;a href="https://www.jianshu.com/p/e5abbda4a71c">ViewPager å…¨é¢å‰–æžåŠä½¿ç”¨è¯¦è§£&lt;/a>&lt;/p>
&lt;p>&lt;a href="https://blog.csdn.net/wangjinyu501/article/details/8169924">Android ViewPagerä½¿ç”¨è¯¦è§£&lt;/a>&lt;/p>
&lt;p>&lt;a href="https://blog.csdn.net/u012702547/article/details/52334161">ä¸€ä¸ªå¡ç‰‡å¼çš„ViewPagerï¼Œå¸¦ä½ çŽ©è½¬ViewPagerçš„PageTransformerå±žæ€§ï¼&lt;/a>&lt;/p>
&lt;h2 id="toolbarå·¥å…·æ ">Toolbar(å·¥å…·æ )&lt;/h2>
&lt;p>&lt;a href="http://yifeng.studio/2016/10/12/android-toolbar/">Android Toolbarï¼Œä½ æƒ³çŸ¥é“çš„éƒ½åœ¨è¿™é‡Œäº† &lt;/a>&lt;/p>
&lt;p>&lt;a href="https://www.jianshu.com/p/e2ae6aaff696">Material Design ä¹‹ Toolbar å¼€å‘å®žè·µæ€»ç»“&lt;/a>&lt;/p>
&lt;p>&lt;a href="http://www.jcodecraeer.com/a/anzhuokaifa/androidkaifa/2014/1118/2006.html">androidï¼šToolBarè¯¦è§£ï¼ˆæ‰‹æŠŠæ‰‹æ•™ç¨‹ï¼‰&lt;/a>&lt;/p>
&lt;h2 id="cardviewå¡ç‰‡">CardView(å¡ç‰‡)&lt;/h2>
&lt;p>&lt;a href="https://www.jianshu.com/p/b105019028b6">CardViewçš„ä½¿ç”¨&lt;/a>&lt;/p>
&lt;p>&lt;a href="https://www.jianshu.com/p/ae9d654599ef"># Android5.0 CardViewçš„ä½¿ç”¨&lt;/a>&lt;/p>
&lt;p>&lt;a href="http://www.jcodecraeer.com/a/anzhuokaifa/androidkaifa/2015/1025/3621.html">å…³äºŽä½¿ç”¨ CardView å¼€å‘è¿‡ç¨‹ä¸­è¦æ³¨æ„çš„ç»†èŠ‚&lt;/a>&lt;/p>
&lt;h2 id="preferencefragmentcompat">PreferenceFragmentCompat&lt;/h2>
&lt;p>&lt;a href="https://developer.android.com/reference/android/support/v7/preference/PreferenceFragmentCompat">å®˜æ–¹æ•™ç¨‹&lt;/a>&lt;/p>
&lt;blockquote>
&lt;p>æ–‡ç« ä¸­æ‰€æœ‰å›¾ç‰‡ç‰ˆæƒå‡å½’åŽŸä½œè€…æ‰€æœ‰,å¦‚æœ‰ä¾µæƒ,å³åˆ»åˆ é™¤&lt;/p>
&lt;/blockquote></description></item><item><title>Hibernateæ³¨è§£</title><link>https://blog.itning.top/post/2018/06/19/hibernate%E6%B3%A8%E8%A7%A3/</link><pubDate>Tue, 19 Jun 2018 20:57:34 +0800</pubDate><guid>https://blog.itning.top/post/2018/06/19/hibernate%E6%B3%A8%E8%A7%A3/</guid><description>&lt;h2 id="ç±»çº§åˆ«">ç±»çº§åˆ«&lt;/h2>
&lt;h3 id="entity">@Entity&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="cm">/**
&lt;/span>&lt;span class="cm">*ï¼ˆå¯é€‰ï¼‰å®žä½“åç§°ã€‚
&lt;/span>&lt;span class="cm">*å®žä½“ç±»çš„åç§°ã€‚ æ­¤åç§°æ˜¯ç”¨æ¥æŒ‡
&lt;/span>&lt;span class="cm">*æŸ¥è¯¢ä¸­çš„å®žä½“ã€‚ è¯¥åç§°ä¸èƒ½æ˜¯ä¿ç•™å­—é¢å€¼
&lt;/span>&lt;span class="cm">*åœ¨JavaæŒä¹…æ€§æŸ¥è¯¢è¯­è¨€ä¸­ã€‚
&lt;/span>&lt;span class="cm">*/&lt;/span>
&lt;span class="n">String&lt;/span> &lt;span class="nf">name&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="k">default&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="table">@Table&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="c1">//è¡¨å ä¼˜å…ˆäºŽ@Entity(name=&amp;#34;&amp;#34;)
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="n">String&lt;/span> &lt;span class="nf">name&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="k">default&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="n">String&lt;/span> &lt;span class="nf">catalog&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="k">default&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="n">String&lt;/span> &lt;span class="nf">schema&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="k">default&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="c1">//è¡¨çš„å”¯ä¸€çº¦æŸ
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="n">UniqueConstraint&lt;/span>&lt;span class="o">[]&lt;/span> &lt;span class="nf">uniqueConstraints&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="k">default&lt;/span> &lt;span class="o">{&lt;/span> &lt;span class="o">};&lt;/span>
&lt;span class="c1">//è¡¨çš„ç´¢å¼•
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="n">Index&lt;/span>&lt;span class="o">[]&lt;/span> &lt;span class="nf">indexes&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="k">default&lt;/span> &lt;span class="o">{};&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="embeddable">@Embeddable&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-mysql" data-lang="mysql">&lt;span class="cm">/**
&lt;/span>&lt;span class="cm">åµŒå…¥ç±»
&lt;/span>&lt;span class="cm">@Embeddable
&lt;/span>&lt;span class="cm">public class Info implements Serializable {
&lt;/span>&lt;span class="cm"> /**
&lt;/span>&lt;span class="cm"> * å®¶åº­åœ°å€
&lt;/span>&lt;span class="cm"> */
&lt;/span>&lt;span class="cm"> private String address;
&lt;/span>&lt;span class="cm"> /**
&lt;/span>&lt;span class="cm"> * ç”µè¯
&lt;/span>&lt;span class="cm"> */
&lt;/span>&lt;span class="cm"> private int tel;
&lt;/span>&lt;span class="cm"> }
&lt;/span>&lt;span class="cm">
&lt;/span>&lt;span class="cm">@Entity(name = &amp;#34;t_user&amp;#34;)
&lt;/span>&lt;span class="cm">public class User implements Serializable {
&lt;/span>&lt;span class="cm"> /**
&lt;/span>&lt;span class="cm"> * Id
&lt;/span>&lt;span class="cm"> */
&lt;/span>&lt;span class="cm"> @Id
&lt;/span>&lt;span class="cm"> private String id;
&lt;/span>&lt;span class="cm"> /**
&lt;/span>&lt;span class="cm"> * ç”¨æˆ·å
&lt;/span>&lt;span class="cm"> */
&lt;/span>&lt;span class="cm"> @Column
&lt;/span>&lt;span class="cm"> private String username;
&lt;/span>&lt;span class="cm"> /**
&lt;/span>&lt;span class="cm"> * å¯†ç 
&lt;/span>&lt;span class="cm"> */
&lt;/span>&lt;span class="cm"> private String password;
&lt;/span>&lt;span class="cm"> /**
&lt;/span>&lt;span class="cm"> * å…¶ä»–ä¿¡æ¯
&lt;/span>&lt;span class="cm"> */
&lt;/span>&lt;span class="cm"> private Info info;
&lt;/span>&lt;span class="cm">**/&lt;/span>
&lt;span class="k">create&lt;/span> &lt;span class="k">table&lt;/span> &lt;span class="nf">t_user&lt;/span> &lt;span class="p">(&lt;/span>
&lt;span class="n">id&lt;/span> &lt;span class="kt">varchar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">255&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">not&lt;/span> &lt;span class="no">null&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">address&lt;/span> &lt;span class="kt">varchar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">255&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="n">tel&lt;/span> &lt;span class="kt">integer&lt;/span> &lt;span class="k">not&lt;/span> &lt;span class="no">null&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">password&lt;/span> &lt;span class="kt">varchar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">255&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="n">username&lt;/span> &lt;span class="kt">varchar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">255&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="k">primary&lt;/span> &lt;span class="k">key&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">)&lt;/span> &lt;span class="kp">engine&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">MyISAM&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="æ–¹æ³•å±žæ€§çº§åˆ«">æ–¹æ³•/å±žæ€§çº§åˆ«&lt;/h2>
&lt;h3 id="id">@Id&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="c1">//è¡¨ç¤ºä¸»é”®
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="colum">@Colum&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="c1">//å­—æ®µå,é»˜è®¤å±žæ€§å
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="n">String&lt;/span> &lt;span class="nf">name&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="k">default&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="c1">//å”¯ä¸€
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="kt">boolean&lt;/span> &lt;span class="nf">unique&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="k">default&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="c1">//è¯¥å­—æ®µæ˜¯å¦å…è®¸ç©º
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="kt">boolean&lt;/span> &lt;span class="nf">nullable&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="k">default&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="c1">//æ‰§è¡Œinsertè¯­å¥æ—¶,è¯¥å­—æ®µæ˜¯å¦å‡ºçŽ°åœ¨insertè¯­å¥ä¸­
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="kt">boolean&lt;/span> &lt;span class="nf">insertable&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="k">default&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="c1">//æ›´æ–°(update)çš„æ—¶å€™æ˜¯å¦æ›´æ–°è¯¥å­—æ®µ
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="kt">boolean&lt;/span> &lt;span class="nf">updatable&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="k">default&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="cm">/*
&lt;/span>&lt;span class="cm">å½“ä½¿ç”¨è¯¥å±žæ€§
&lt;/span>&lt;span class="cm">@Column(name = &amp;#34;Email&amp;#34;,columnDefinition=&amp;#34;varchar(128) not null&amp;#34;)
&lt;/span>&lt;span class="cm"> private String email;
&lt;/span>&lt;span class="cm">SQLè¯­å¥ä¸º:
&lt;/span>&lt;span class="cm"> `Email` varchar(128) NOT NULL
&lt;/span>&lt;span class="cm"> ----------------
&lt;/span>&lt;span class="cm"> @Column(name = &amp;#34;Remark&amp;#34;,columnDefinition=&amp;#34;text&amp;#34;)
&lt;/span>&lt;span class="cm"> private String remark;
&lt;/span>&lt;span class="cm">SQLè¯­å¥:
&lt;/span>&lt;span class="cm"> `Remark` text
&lt;/span>&lt;span class="cm">*/&lt;/span>
&lt;span class="n">String&lt;/span> &lt;span class="nf">columnDefinition&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="k">default&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="c1">//ï¼ˆå¯é€‰ï¼‰åŒ…å«è¯¥åˆ—çš„è¡¨çš„åç§°ã€‚
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="n">String&lt;/span> &lt;span class="nf">table&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="k">default&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="c1">//åˆ—é•¿åº¦ é€‚ç”¨äºŽstring
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="nf">length&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="k">default&lt;/span> &lt;span class="n">255&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="c1">//precisionå±žæ€§å’Œscaleå±žæ€§è¡¨ç¤ºç²¾åº¦ï¼Œå½“å­—æ®µç±»åž‹ä¸ºdoubleæ—¶ï¼Œprecisionè¡¨ç¤ºæ•°å€¼çš„æ€»é•¿åº¦ï¼Œscaleè¡¨ç¤ºå°æ•°ç‚¹æ‰€å çš„ä½æ•°ã€‚
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="nf">precision&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="k">default&lt;/span> &lt;span class="n">0&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kt">int&lt;/span> &lt;span class="nf">scale&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="k">default&lt;/span> &lt;span class="n">0&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="generatedvalue">@GeneratedValue&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="c1">//è¡¨ç¤ºä¸»é”®ç”Ÿæˆç­–ç•¥
&lt;/span>&lt;span class="c1">//public enum GenerationType{
&lt;/span>&lt;span class="c1">// TABLE, ä½¿ç”¨æŒ‡å®šè¡¨æ¥å†³å®šä¸»é”®å–å€¼ ç»“åˆ@TableGeneratorä½¿ç”¨
&lt;/span>&lt;span class="c1">// SEQUENCE, ä½¿ç”¨åºåˆ—æ¥å†³å®šä¸»é”®å–å€¼
&lt;/span>&lt;span class="c1">// IDENTITY, æ ¹æ®æ•°æ®åº“çš„Identityå­—æ®µç”Ÿæˆ
&lt;/span>&lt;span class="c1">// AUTO æ ¹æ®åº•å±‚æ•°æ®åº“è‡ªåŠ¨é€‰æ‹©(mysql é»˜è®¤è‡ªåŠ¨å¢žé•¿(int))
&lt;/span>&lt;span class="c1">//}
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="n">GenerationType&lt;/span> &lt;span class="nf">strategy&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="k">default&lt;/span> &lt;span class="n">AUTO&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="c1">//è¡¨ç¤ºä¸»é”®ç”Ÿæˆå™¨çš„åç§°
&lt;/span>&lt;span class="c1">//@GeneratedValue(generator=&amp;#34;aaa&amp;#34;)
&lt;/span>&lt;span class="c1">//@GenericGenerator(name = &amp;#34;aaa&amp;#34;,strategy = &amp;#34;assigned&amp;#34;) //æ‰‹å·¥èµ‹å€¼
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="n">String&lt;/span> &lt;span class="nf">generator&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="k">default&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="genericgenerator">@GenericGenerator&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="cm">/**
&lt;/span>&lt;span class="cm">hibernateæä¾›å¤šç§ä¸»é”®ç”Ÿæˆç­–ç•¥ï¼Œæœ‰ç‚¹æ˜¯ç±»ä¼¼äºŽJPAï¼Œæœ‰çš„æ˜¯hibernateç‰¹æœ‰ï¼š
&lt;/span>&lt;span class="cm">native: å¯¹äºŽ oracle é‡‡ç”¨ Sequence æ–¹å¼ï¼Œå¯¹äºŽMySQL å’Œ SQL Server é‡‡ç”¨identityï¼ˆè‡ªå¢žä¸»é”®ç”Ÿæˆæœºåˆ¶ï¼‰ï¼Œnativeå°±æ˜¯å°†ä¸»é”®çš„ç”Ÿæˆå·¥ä½œäº¤ç”±æ•°æ®åº“å®Œæˆï¼Œhibernateä¸ç®¡ï¼ˆå¾ˆå¸¸ç”¨ï¼‰ã€‚
&lt;/span>&lt;span class="cm">uuid: é‡‡ç”¨128ä½çš„uuidç®—æ³•ç”Ÿæˆä¸»é”®ï¼Œuuidè¢«ç¼–ç ä¸ºä¸€ä¸ª32ä½16è¿›åˆ¶æ•°å­—çš„å­—ç¬¦ä¸²ã€‚å ç”¨ç©ºé—´å¤§ï¼ˆå­—ç¬¦ä¸²ç±»åž‹ï¼‰ã€‚
&lt;/span>&lt;span class="cm">hilo: ä½¿ç”¨hiloç”Ÿæˆç­–ç•¥ï¼Œè¦åœ¨æ•°æ®åº“ä¸­å»ºç«‹ä¸€å¼ é¢å¤–çš„è¡¨ï¼Œé»˜è®¤è¡¨åä¸ºhibernate_unique_key,é»˜è®¤å­—æ®µä¸ºintegerç±»åž‹ï¼Œåç§°æ˜¯next_hiï¼ˆæ¯”è¾ƒå°‘ç”¨ï¼‰ã€‚
&lt;/span>&lt;span class="cm">assigned: åœ¨æ’å…¥æ•°æ®çš„æ—¶å€™ä¸»é”®ç”±ç¨‹åºå¤„ç†ï¼ˆå¾ˆå¸¸ç”¨ï¼‰ï¼Œè¿™æ˜¯ &amp;lt;generator&amp;gt;å…ƒç´ æ²¡æœ‰æŒ‡å®šæ—¶çš„é»˜è®¤ç”Ÿæˆç­–ç•¥ã€‚ç­‰åŒäºŽJPAä¸­çš„AUTOã€‚
&lt;/span>&lt;span class="cm">identity: ä½¿ç”¨SQL Server å’Œ MySQL çš„è‡ªå¢žå­—æ®µï¼Œè¿™ä¸ªæ–¹æ³•ä¸èƒ½æ”¾åˆ° Oracle ä¸­ï¼ŒOracle ä¸æ”¯æŒè‡ªå¢žå­—æ®µï¼Œè¦è®¾å®šsequenceï¼ˆMySQL å’Œ SQL Server ä¸­å¾ˆå¸¸ç”¨ï¼‰ã€‚
&lt;/span>&lt;span class="cm"> ç­‰åŒäºŽJPAä¸­çš„INDENTITYã€‚
&lt;/span>&lt;span class="cm">select: ä½¿ç”¨è§¦å‘å™¨ç”Ÿæˆä¸»é”®ï¼ˆä¸»è¦ç”¨äºŽæ—©æœŸçš„æ•°æ®åº“ä¸»é”®ç”Ÿæˆæœºåˆ¶ï¼Œå°‘ç”¨ï¼‰ã€‚
&lt;/span>&lt;span class="cm">sequence: è°ƒç”¨åº•å±‚æ•°æ®åº“çš„åºåˆ—æ¥ç”Ÿæˆä¸»é”®ï¼Œè¦è®¾å®šåºåˆ—åï¼Œä¸ç„¶hibernateæ— æ³•æ‰¾åˆ°ã€‚
&lt;/span>&lt;span class="cm">seqhilo: é€šè¿‡hiloç®—æ³•å®žçŽ°ï¼Œä½†æ˜¯ä¸»é”®åŽ†å²ä¿å­˜åœ¨Sequenceä¸­ï¼Œé€‚ç”¨äºŽæ”¯æŒ Sequence çš„æ•°æ®åº“ï¼Œå¦‚ Oracleï¼ˆæ¯”è¾ƒå°‘ç”¨ï¼‰
&lt;/span>&lt;span class="cm">increment: æ’å…¥æ•°æ®çš„æ—¶å€™hibernateä¼šç»™ä¸»é”®æ·»åŠ ä¸€ä¸ªè‡ªå¢žçš„ä¸»é”®ï¼Œä½†æ˜¯ä¸€ä¸ªhibernateå®žä¾‹å°±ç»´æŠ¤ä¸€ä¸ªè®¡æ•°å™¨ï¼Œæ‰€ä»¥åœ¨å¤šä¸ªå®žä¾‹è¿è¡Œçš„æ—¶å€™ä¸èƒ½ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ã€‚
&lt;/span>&lt;span class="cm">foreign: ä½¿ç”¨å¦å¤–ä¸€ä¸ªç›¸å…³è”çš„å¯¹è±¡çš„ä¸»é”®ã€‚é€šå¸¸å’Œ&amp;lt;one-to-one&amp;gt;è”åˆèµ·æ¥ä½¿ç”¨ã€‚
&lt;/span>&lt;span class="cm">guid: é‡‡ç”¨æ•°æ®åº“åº•å±‚çš„guidç®—æ³•æœºåˆ¶ï¼Œå¯¹åº”MYSQLçš„uuid()å‡½æ•°ï¼ŒSQL Serverçš„newid()å‡½æ•°ï¼ŒORACLEçš„rawtohex(sys_guid())å‡½æ•°ç­‰ã€‚
&lt;/span>&lt;span class="cm">uuid.hex: çœ‹uuidï¼Œå»ºè®®ç”¨uuidæ›¿æ¢ã€‚
&lt;/span>&lt;span class="cm">**/&lt;/span>
&lt;span class="nd">@GeneratedValue&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">generator&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;paymentableGenerator&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="nd">@GenericGenerator&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;paymentableGenerator&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">strategy&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;uuid&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">id&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="embedded">@Embedded&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="c1">//è¡¨ç¤ºè¯¥å±žæ€§çš„ç±»æ˜¯åµŒå…¥ç±»,å¿…é¡»ç»“åˆ@Embeddableæ³¨è§£
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="embeddedid">@EmbeddedId&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="c1">//ä½¿ç”¨åµŒå…¥å¼ä¸»é”®ç±»å®žçŽ°å¤åˆä¸»é”®
&lt;/span>&lt;span class="c1">//å¿…é¡»å®žçŽ° java.io.Serializable;
&lt;/span>&lt;span class="c1">//å¿…é¡»è¦†ç›– equals hashCodeæ–¹æ³•
&lt;/span>&lt;span class="c1">//å¤åˆä¸»é”®ç±»ä¸Šç»“åˆ@Embeddableç±»æ³¨è§£
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="transient">@Transient&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="c1">//è¡¨ç¤ºè¯¥å±žæ€§ä¸éœ€è¦æ˜ å°„ä¸ºä¸€ä¸ªå­—æ®µ
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="onetoone">@OneToOne&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="c1">//å±žæ€§è¡¨ç¤ºé»˜è®¤å…³è”çš„å®žä½“ç±»åž‹ã€‚å¦‚æžœé›†åˆç±»ä¸­æŒ‡å®šäº†å…·ä½“ç±»åž‹äº†ï¼Œä¸éœ€è¦ä½¿ç”¨targetEntity.å¦åˆ™è¦æŒ‡å®š
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="n">Class&lt;/span> &lt;span class="nf">targetEntity&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="k">default&lt;/span> &lt;span class="kt">void&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="c1">//çº§è”ç­–ç•¥
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="n">CascadeType&lt;/span>&lt;span class="o">[]&lt;/span> &lt;span class="nf">cascade&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="k">default&lt;/span> &lt;span class="o">{};&lt;/span>
&lt;span class="c1">//åŠ è½½ç­–ç•¥:å»¶è¿ŸåŠ è½½ ç«‹å³åŠ è½½
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="n">FetchType&lt;/span> &lt;span class="nf">fetch&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="k">default&lt;/span> &lt;span class="n">EAGER&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="cm">/**
&lt;/span>&lt;span class="cm">*ï¼ˆå¯é€‰ï¼‰å…³è”æ˜¯å¦å¯é€‰ã€‚ å¦‚æžœè®¾ç½®
&lt;/span>&lt;span class="cm">*ä¸ºfalseï¼Œåˆ™å¿…é¡»å§‹ç»ˆå­˜åœ¨éžç©ºå…³ç³»ã€‚
&lt;/span>&lt;span class="cm">*/&lt;/span>
&lt;span class="kt">boolean&lt;/span> &lt;span class="nf">optional&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="k">default&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="c1">//ç”¨äºŽæ ‡è®°å½“å®žä½“ä¹‹é—´æ˜¯åŒå‘ æŽ§åˆ¶æƒåŠ›äº¤ç»™ä¸»æŽ§æ–¹ åœ¨è¢«æŽ§æ–¹åŠ è¿™ä¸ªå±žæ€§
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="n">String&lt;/span> &lt;span class="nf">mappedBy&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="k">default&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="cm">/**
&lt;/span>&lt;span class="cm">ç†è§£CascadeType.REMOVEå’ŒorphanRemoval = trueä¹‹é—´å·®å¼‚çš„ç®€å•æ–¹æ³•ã€‚
&lt;/span>&lt;span class="cm">
&lt;/span>&lt;span class="cm">å¯¹äºŽorphanRemovalï¼šå¦‚æžœæ‚¨è°ƒç”¨setOrdersï¼ˆnullï¼‰ï¼Œç›¸å…³çš„Orderå®žä½“å°†è‡ªåŠ¨åœ¨æ•°æ®åº“ä¸­è¢«åˆ é™¤ã€‚
&lt;/span>&lt;span class="cm">
&lt;/span>&lt;span class="cm">åˆ é™¤çº§è”ï¼šå¦‚æžœæ‚¨è°ƒç”¨setOrdersï¼ˆnullï¼‰ï¼Œç›¸å…³çš„Orderå®žä½“å°†ä¸ä¼šåœ¨æ•°æ®åº“ä¸­è‡ªåŠ¨åˆ é™¤ã€‚
&lt;/span>&lt;span class="cm">**/&lt;/span>
&lt;span class="kt">boolean&lt;/span> &lt;span class="nf">orphanRemoval&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="k">default&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="joincolumn">@JoinColumn&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="c1">//å¤–é”®å,ç”Ÿæˆå­—æ®µçš„æ—¶å€™ç”¨è¿™ä¸ªåå­—
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="n">String&lt;/span> &lt;span class="nf">name&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="k">default&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="c1">//å¯¹åº”çš„å…³è”å­—æ®µåç§°,é»˜è®¤å¯¹é¢çš„ä¸»é”®
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="n">String&lt;/span> &lt;span class="nf">referencedColumnName&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="k">default&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="c1">//æ˜¯å¦å”¯ä¸€
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="kt">boolean&lt;/span> &lt;span class="nf">unique&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="k">default&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kt">boolean&lt;/span> &lt;span class="nf">nullable&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="k">default&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kt">boolean&lt;/span> &lt;span class="nf">insertable&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="k">default&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="kt">boolean&lt;/span> &lt;span class="nf">updatable&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="k">default&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="n">String&lt;/span> &lt;span class="nf">columnDefinition&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="k">default&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="n">String&lt;/span> &lt;span class="nf">table&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="k">default&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="n">ForeignKey&lt;/span> &lt;span class="nf">foreignKey&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="k">default&lt;/span> &lt;span class="nd">@ForeignKey&lt;/span>&lt;span class="o">();&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="jointable">@JoinTable&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="c1">//å¤šå¯¹å¤š
&lt;/span>&lt;span class="c1">//ä¸­é—´è¡¨ è¡¨å
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="n">String&lt;/span> &lt;span class="nf">name&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="k">default&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="c1">//æŽ§åˆ¶å­—æ®µå
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="n">JoinColumn&lt;/span>&lt;span class="o">[]&lt;/span> &lt;span class="nf">joinColumns&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="k">default&lt;/span> &lt;span class="o">{};&lt;/span>
&lt;span class="c1">//åè½¬æŽ§åˆ¶å­—æ®µå
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="n">JoinColumn&lt;/span>&lt;span class="o">[]&lt;/span> &lt;span class="nf">inverseJoinColumns&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="k">default&lt;/span> &lt;span class="o">{};&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="onetomany">@OneToMany&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="cm">/**
&lt;/span>&lt;span class="cm"> * è®¢å• ä¼šå‘orderè¡¨è‡ªåŠ¨æ·»åŠ å­—æ®µ:uid
&lt;/span>&lt;span class="cm"> * alter table t_order add constraint FKkymvvaj9rps3st3bkniqi0oci foreign key (uid) * references t_user (id)
&lt;/span>&lt;span class="cm"> */&lt;/span>
&lt;span class="nd">@OneToMany&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">cascade&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">{&lt;/span>&lt;span class="n">CascadeType&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">MERGE&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">CascadeType&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">REFRESH&lt;/span>&lt;span class="o">})&lt;/span>
&lt;span class="nd">@JoinColumn&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">List&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Order&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">orderList&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="manytomany">@ManyToMany&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="c1">//ç”¨äºŽæ ‡è®°å½“å®žä½“ä¹‹é—´æ˜¯åŒå‘ æŽ§åˆ¶æƒåŠ›äº¤ç»™ä¸»æŽ§æ–¹ åœ¨è¢«æŽ§æ–¹åŠ è¿™ä¸ªå±žæ€§
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="n">String&lt;/span> &lt;span class="nf">mappedBy&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="k">default&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>æ“ä½œç³»ç»Ÿ</title><link>https://blog.itning.top/post/2018/06/17/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/</link><pubDate>Sun, 17 Jun 2018 19:20:31 +0800</pubDate><guid>https://blog.itning.top/post/2018/06/17/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/</guid><description>&lt;h2 id="æ“ä½œç³»ç»Ÿæ¦‚è¿°">æ“ä½œç³»ç»Ÿæ¦‚è¿°&lt;/h2>
&lt;p>æ“ä½œç³»ç»Ÿå«ä¹‰å¾ˆå¹¿æ³›,åŒ…æ‹¬è¿è¡Œåœ¨ç”µè„‘,ç¬”è®°æœ¬,æ‰‹æœº,ç”šè‡³æœºé¡¶ç›’ä¸­&lt;/p>
&lt;p>æ“ä½œç³»ç»Ÿä»‹äºŽç¡¬ä»¶å’Œåº”ç”¨è½¯ä»¶ç¨‹åºä¹‹é—´&lt;/p>
&lt;h3 id="è¿›ç¨‹ä¸Žçº¿ç¨‹">è¿›ç¨‹ä¸Žçº¿ç¨‹&lt;/h3>
&lt;p>è¿›ç¨‹ä¸Žçº¿ç¨‹æœ‰ä»€ä¹ˆåŒºåˆ«?&lt;/p>
&lt;p>è¿›ç¨‹(process) çº¿ç¨‹(thread)&lt;/p>
&lt;p>è¿›ç¨‹æœ¬èº«æ˜¯å®¹å™¨ çº¿ç¨‹æ‰§è¡Œä»£ç &lt;/p>
&lt;p>è¿›ç¨‹ä¸Žè¿›ç¨‹ä¹‹é—´ç›¸äº’äº¤äº’å¸¸è§ä¸ºTCP/IPç«¯å£&lt;/p>
&lt;h4 id="è¿›ç¨‹">è¿›ç¨‹&lt;/h4>
&lt;p>&lt;img src="https://blog.itning.top/images/2018-06-17-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/a.PNG" alt="a">&lt;/p>
&lt;p>è¿›ç¨‹ä¸Žè¿›ç¨‹ä¹‹é—´ç‹¬ç«‹&lt;/p>
&lt;p>è¿›ç¨‹é‡Œè¾¹æœ‰çº¿ç¨‹&lt;/p>
&lt;p>è¿›ç¨‹é‡Œè¾¹æœ‰é€»è¾‘å†…å­˜&lt;/p>
&lt;p>32X ç³»ç»Ÿæœ‰4Gçš„å¯»å€ç©ºé—´ (é€»è¾‘å†…å­˜)&lt;/p>
&lt;p>è¿›ç¨‹é‡Œè¾¹å¯»å€ç©ºé—´ç›¸äº’ç‹¬ç«‹&lt;/p>
&lt;p>æ–‡ä»¶/ç½‘ç»œå¥æŸ„&lt;/p>
&lt;h4 id="çº¿ç¨‹">çº¿ç¨‹&lt;/h4>
&lt;p>&lt;img src="https://blog.itning.top/images/2018-06-17-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/b.PNG" alt="b">&lt;/p>
&lt;p>çº¿ç¨‹é‡Œè¾¹æœ‰ æ ˆ&lt;/p>
&lt;p>æ ˆé‡Œè¾¹æœ‰ æœ‰å‚æ•°å’Œæ–¹æ³•è¿”å›žå€¼&lt;/p>
&lt;p>PC ç¨‹åºè®¡æ•°å™¨ å­˜æ”¾ä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€&lt;/p>
&lt;p>æŒ‡ä»¤æœ¬èº«å­˜æ”¾åœ¨å†…å­˜ä¸­&lt;/p>
&lt;p>TLS(Thread-local storage) çº¿ç¨‹ä¸­ç‹¬ç«‹çš„å†…å­˜&lt;/p>
&lt;h3 id="å­˜å‚¨å’Œå¯»å€">å­˜å‚¨å’Œå¯»å€&lt;/h3>
&lt;h4 id="å­˜å‚¨">å­˜å‚¨&lt;/h4>
&lt;p>æ“ä½œç³»ç»Ÿç»“æž„åŒ–å­˜å‚¨&lt;/p>
&lt;p>è´µ å¯„å­˜å™¨ å¿«&lt;/p>
&lt;p>â€‹ ç¼“å­˜&lt;/p>
&lt;p>â€‹ å†…å­˜&lt;/p>
&lt;p>å»‰ ç¡¬ç›˜ æ»¡&lt;/p>
&lt;h4 id="å¯»å€">å¯»å€&lt;/h4>
&lt;p>å¯»å€ç©ºé—´æ˜¯è¿›ç¨‹ä¸­æŒ‡é’ˆå¯ä»¥å–åˆ°åœ°å€çš„èŒƒå›´&lt;/p>
&lt;p>å¯»å€ç©ºé—´å’Œæœºå™¨ä¸Šè£…æœ‰å¤šå°‘ç‰©ç†å†…å­˜æ— å…³,å’Œè¿›ç¨‹æ•°é‡æ— å…³&lt;/p>
&lt;p>å¯»å€ç©ºé—´å¤§å°: 32X 4G 64X 2çš„64æ¬¡æ–¹&lt;/p>
&lt;p>int n = * p;&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2018-06-17-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/c.PNG" alt="c">&lt;/p>
&lt;p>æŒ‡é’ˆp æŒ‡å‘é€»è¾‘å†…å­˜ 2çš„32æ¬¡æ–¹æˆ–2çš„64æ¬¡æ–¹&lt;/p>
&lt;p>é€»è¾‘å†…å­˜å¯¹åº”ç‰©ç†å†…å­˜(é€»è¾‘å†…å­˜ä¸€èˆ¬å¤§äºŽç‰©ç†å†…å­˜)&lt;/p>
&lt;p>æ•°æ®å¯èƒ½ä¸åœ¨ç‰©ç†å†…å­˜ä¸­,åœ¨è™šæ‹Ÿå†…å­˜ä¸­(ç¡¬ç›˜)&lt;/p>
&lt;p>è™šæ‹Ÿå†…å­˜æ•°æ®æ”¾åœ¨ç‰©ç†å†…å­˜ä¸­&lt;/p>
&lt;p>ç”±äºŽpæŒ‡å‘æ•°æ®å¾ˆå°,æ¯æ¬¡åªæŠŠè¿™ä¸ªæ”¾è¿‡åŽ»å¯¹ç³»ç»Ÿå¼€é”€å¾ˆå¤§,æ‰€ä»¥æœ‰åˆ†é¡µæ¦‚å¿µ,æ”¾çš„æ—¶å€™å°†pæ‰€åœ¨çš„åˆ†é¡µæ”¾è¿‡åŽ»&lt;/p>
&lt;p>å¦‚æžœç‰©ç†å†…å­˜æ”¾ä¸ä¸‹åˆ†é¡µ å¯ä»¥å°†ç‰©ç†å†…å­˜ä¸­çš„ä¸é‡è¦ä¸œè¥¿äº¤æ¢åˆ°è™šæ‹Ÿå†…å­˜ä¸­&lt;/p>
&lt;p>ç‰©ç†å†…å­˜ä¸­æœ‰pæ•°æ®,å°†å…¶å–å‡ºæ¥æ”¾åœ¨å¯„å­˜å™¨ä¸­&lt;/p></description></item><item><title>JAVA8ä¸­StreamæŽ¥å£ç”¨æ³•</title><link>https://blog.itning.top/post/2018/06/09/java8%E4%B8%ADstream%E6%8E%A5%E5%8F%A3%E7%94%A8%E6%B3%95/</link><pubDate>Sat, 09 Jun 2018 00:36:46 +0800</pubDate><guid>https://blog.itning.top/post/2018/06/09/java8%E4%B8%ADstream%E6%8E%A5%E5%8F%A3%E7%94%A8%E6%B3%95/</guid><description>&lt;p>JAVA8 ä¸­æ‰€æœ‰StreamæŽ¥å£&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2018-06-09-JAVA8%E4%B8%ADStream%E6%8E%A5%E5%8F%A3%E7%94%A8%E6%B3%95/a.png" alt="a">&lt;/p>
&lt;h2 id="count">count&lt;/h2>
&lt;p>è¿”å›žStreamä¸­å…ƒç´ çš„æ•°é‡&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="n">List&lt;/span> &lt;span class="n">list&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">ArrayList&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="n">list&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">add&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;aa&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">list&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">add&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">1&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="kt">long&lt;/span> &lt;span class="n">count&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">list&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">stream&lt;/span>&lt;span class="o">().&lt;/span>&lt;span class="na">count&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="c1">//è¾“å‡º 2
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="n">System&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">out&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">println&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">count&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="filterforeach">filter&amp;amp;forEach&lt;/h2>
&lt;p>filter : è¿”å›žåŒ¹é…çš„å…ƒç´ &lt;/p>
&lt;p>forEach:ä¸ºæ¯ä¸ªå…ƒç´ æ‰§è¡Œæ“ä½œ&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="n">List&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Integer&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">list&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">ArrayList&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="n">list&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">add&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">2&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">list&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">add&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">1&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">list&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">add&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">3&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="kt">long&lt;/span> &lt;span class="n">count&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">list&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">stream&lt;/span>&lt;span class="o">().&lt;/span>&lt;span class="na">filter&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="n">s&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">2&lt;/span>&lt;span class="o">).&lt;/span>&lt;span class="na">count&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="c1">//è¾“å‡º1
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="n">System&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">out&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">println&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">count&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="c1">//è¾“å‡º3
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="n">list&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">stream&lt;/span>&lt;span class="o">().&lt;/span>&lt;span class="na">filter&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="n">s&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">2&lt;/span>&lt;span class="o">).&lt;/span>&lt;span class="na">forEach&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="n">System&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">out&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">println&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="o">));&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="anymatchallmatch">anyMatch&amp;amp;allMatch&lt;/h2>
&lt;p>anyMatch: æ­¤æµä¸­æœ‰ä¸€ä¸ªå…ƒç´ åŒ¹é…å°±è¿”å›žtrue&lt;/p>
&lt;p>allMatch : æ­¤æµä¸­æ‰€æœ‰å…ƒç´ éƒ½åŒ¹é…è¿”å›žtrue&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">List&amp;lt;Integer&amp;gt; list = new ArrayList&amp;lt;&amp;gt;();
list.add(2);
list.add(1);
list.add(3);
boolean anyMatch = list.stream().anyMatch(s -&amp;gt; s &amp;gt; 2);
//è¾“å‡ºtrue
System.out.println(anyMatch);
boolean allMatch = list.stream().allMatch(s -&amp;gt; s &amp;gt; 2);
//è¾“å‡ºfalse
System.out.println(allMatch);
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="map">map&lt;/h2>
&lt;p>ç»™å®šæµå¤„ç†å¹¶è¿”å›žå€¼&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="n">List&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Integer&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">list&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">ArrayList&lt;/span>&lt;span class="o">&amp;lt;&amp;gt;();&lt;/span>
&lt;span class="n">list&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">add&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">2&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">list&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">add&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">1&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">list&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">add&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">3&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">list&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">stream&lt;/span>&lt;span class="o">().&lt;/span>&lt;span class="na">map&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="n">s&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="o">).&lt;/span>&lt;span class="na">forEach&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">System&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">out&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">println&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>JAVAè®¾è®¡æ¨¡å¼</title><link>https://blog.itning.top/post/2018/06/07/java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/</link><pubDate>Thu, 07 Jun 2018 09:20:29 +0800</pubDate><guid>https://blog.itning.top/post/2018/06/07/java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/</guid><description>&lt;blockquote>
&lt;p>åœ¨&lt;a href="https://zh.wikipedia.org/wiki/%E8%BB%9F%E9%AB%94%E5%B7%A5%E7%A8%8B">è½¯ä»¶å·¥ç¨‹&lt;/a>ä¸­ï¼Œ&lt;strong>è®¾è®¡æ¨¡å¼&lt;/strong>ï¼ˆdesign patternï¼‰æ˜¯å¯¹&lt;a href="https://zh.wikipedia.org/wiki/%E8%BB%9F%E4%BB%B6%E8%A8%AD%E8%A8%88">è½¯ä»¶è®¾è®¡&lt;/a>ä¸­æ™®éå­˜åœ¨ï¼ˆåå¤å‡ºçŽ°ï¼‰çš„å„ç§é—®é¢˜ï¼Œæ‰€æå‡ºçš„è§£å†³æ–¹æ¡ˆã€‚&lt;/p>
&lt;/blockquote>
&lt;p>&lt;img src="https://blog.itning.top/images/2018-06-07-JAVA%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/a.png" alt="a">&lt;/p>
&lt;h2 id="å•ä¾‹è®¾è®¡æ¨¡å¼">å•ä¾‹è®¾è®¡æ¨¡å¼&lt;/h2>
&lt;p>å•ä¾‹å¯¹è±¡çš„ç±»å¿…é¡»ä¿è¯åªæœ‰ä¸€ä¸ªå®žä¾‹å­˜åœ¨ã€‚&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;strong>æŽ¨èä½¿ç”¨é¥¿æ±‰å¼å•ä¾‹è®¾è®¡æ¨¡å¼&lt;/strong>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;h3 id="é¥¿æ±‰å¼å•ä¾‹è®¾è®¡æ¨¡å¼">é¥¿æ±‰å¼å•ä¾‹è®¾è®¡æ¨¡å¼&lt;/h3>
&lt;ol>
&lt;li>ç§æœ‰åŒ–æž„é€ å‡½æ•°ã€‚&lt;/li>
&lt;li>å£°æ˜Žæœ¬ç±»çš„å¼•ç”¨ç±»åž‹å˜é‡ï¼Œå¹¶ä¸”ä½¿ç”¨è¯¥å˜é‡æŒ‡å‘æœ¬ç±»å¯¹è±¡ã€‚&lt;/li>
&lt;li>æä¾›ä¸€ä¸ªå…¬å…±é™æ€çš„æ–¹æ³•èŽ·å–æœ¬ç±»çš„å¯¹è±¡ã€‚&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="kd">class&lt;/span> &lt;span class="nc">Single&lt;/span>&lt;span class="o">{&lt;/span>
&lt;span class="c1">//å£°æ˜Žæœ¬ç±»çš„å¼•ç”¨ç±»åž‹å˜é‡ï¼Œå¹¶ä¸”ä½¿ç”¨è¯¥å˜é‡æŒ‡å‘æœ¬ç±»å¯¹è±¡
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="kd">private&lt;/span> &lt;span class="kd">static&lt;/span> &lt;span class="n">Single&lt;/span> &lt;span class="n">s&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">Single&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="c1">//ç§æœ‰åŒ–æž„é€ å‡½æ•°
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="kd">private&lt;/span> &lt;span class="nf">Single&lt;/span>&lt;span class="o">(){}&lt;/span>
&lt;span class="c1">//æä¾›ä¸€ä¸ªå…¬å…±é™æ€çš„æ–¹æ³•èŽ·å–æœ¬ç±»çš„å¯¹è±¡
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="kd">public&lt;/span> &lt;span class="kd">static&lt;/span> &lt;span class="n">Single&lt;/span> &lt;span class="nf">getInstance&lt;/span>&lt;span class="o">(){&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="æ‡’æ±‰å¼å•ä¾‹è®¾è®¡æ¨¡å¼">æ‡’æ±‰å¼å•ä¾‹è®¾è®¡æ¨¡å¼&lt;/h3>
&lt;ol>
&lt;li>ç§æœ‰åŒ–æž„é€ å‡½æ•°ã€‚&lt;/li>
&lt;li>å£°æ˜Žæœ¬ç±»çš„å¼•ç”¨ç±»åž‹å˜é‡ï¼Œä½†æ˜¯ä¸è¦åˆ›å»ºå¯¹è±¡ï¼Œ&lt;/li>
&lt;li>æä¾›å…¬å…±é™æ€ çš„æ–¹æ³•èŽ·å–æœ¬ç±» çš„å¯¹è±¡ï¼ŒèŽ·å–ä¹‹å‰å…ˆåˆ¤æ–­æ˜¯å¦å·²ç»åˆ›å»ºäº†æœ¬ç±» å¯¹è±¡
ï¼Œå¦‚æžœå·²ç»åˆ›å»ºäº†ï¼Œé‚£ä¹ˆç›´æŽ¥è¿”å›žå¯¹è±¡å³å¯ï¼Œå¦‚æžœè¿˜æ²¡æœ‰åˆ›å»ºï¼Œé‚£ä¹ˆå…ˆåˆ›å»ºæœ¬ç±»çš„å¯¹è±¡ï¼Œ
ç„¶åŽå†è¿”å›žã€‚&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java"> &lt;span class="kd">class&lt;/span> &lt;span class="nc">Single2&lt;/span>&lt;span class="o">{&lt;/span>
&lt;span class="c1">//å£°æ˜Žæœ¬ç±»çš„å¼•ç”¨ç±»åž‹å˜é‡ï¼Œä¸åˆ›å»ºæœ¬ç±»çš„å¯¹è±¡
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="kd">private&lt;/span> &lt;span class="kd">static&lt;/span> &lt;span class="n">Single2&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="c1">//ç§æœ‰åŒ–äº†æž„é€ å‡½æ•°
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="kd">private&lt;/span> &lt;span class="nf">Single2&lt;/span>&lt;span class="o">(){}&lt;/span>
&lt;span class="c1">//æ‡’æ±‰å¼è®¾è®¡æ¨¡å¼æœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜ ç®€å•è§£å†³:synchronized
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="kd">public&lt;/span> &lt;span class="kd">static&lt;/span> &lt;span class="kd">synchronized&lt;/span> &lt;span class="n">Single2&lt;/span> &lt;span class="nf">getInstance&lt;/span>&lt;span class="o">(){&lt;/span>
&lt;span class="k">if&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="o">==&lt;/span>&lt;span class="kc">null&lt;/span>&lt;span class="o">){&lt;/span>
&lt;span class="n">s&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">Single2&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="å·¥åŽ‚è®¾è®¡æ¨¡å¼">å·¥åŽ‚è®¾è®¡æ¨¡å¼&lt;/h2>
&lt;p>å·¥åŽ‚æ–¹æ³•æ¨¡å¼(å¸¸ç”¨)&lt;/p>
&lt;blockquote>
&lt;p>å®šä¹‰ä¸€ä¸ªç”¨äºŽåˆ›å»ºå¯¹è±¡çš„æŽ¥å£ï¼Œè®©å­ç±»å†³å®šå°†å“ªä¸€ä¸ªç±»å®žä¾‹åŒ–ã€‚å·¥åŽ‚æ–¹æ³•æ¨¡å¼è®©ä¸€ä¸ªç±»çš„å®žä¾‹åŒ–å»¶è¿Ÿåˆ°å…¶å­ç±»ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>&lt;strong>é€‚ç”¨åœºæ™¯ï¼š&lt;/strong>&lt;/p>
&lt;p>ã€€ã€€ï¼ˆ1ï¼‰å®¢æˆ·ç«¯ä¸éœ€è¦çŸ¥é“å®ƒæ‰€åˆ›å»ºçš„å¯¹è±¡çš„ç±»ã€‚ä¾‹å­ä¸­æˆ‘ä»¬ä¸çŸ¥é“æ¯ä¸ªå›¾ç‰‡åŠ è½½å™¨å…·ä½“å«ä»€ä¹ˆåï¼ŒåªçŸ¥é“åˆ›å»ºå®ƒçš„å·¥åŽ‚åå°±å®Œæˆäº†åºŠæž¶è¿‡ç¨‹ã€‚
ã€€ã€€ï¼ˆ2ï¼‰å®¢æˆ·ç«¯å¯ä»¥é€šè¿‡å­ç±»æ¥æŒ‡å®šåˆ›å»ºå¯¹åº”çš„å¯¹è±¡ã€‚
ä»¥ä¸Šåœºæ™¯ä½¿ç”¨äºŽé‡‡ç”¨å·¥åŽ‚æ–¹æ³•æ¨¡å¼ã€‚&lt;/p>
&lt;hr>
&lt;p>çŽ°åœ¨éœ€è¦è®¾è®¡ä¸€ä¸ªè¿™æ ·çš„å›¾ç‰‡åŠ è½½ç±»ï¼Œå®ƒå…·æœ‰å¤šä¸ªå›¾ç‰‡åŠ è½½å™¨ï¼Œç”¨æ¥åŠ è½½jpgï¼Œpngæ ¼å¼çš„å›¾ç‰‡ï¼Œæ¯ä¸ªåŠ è½½å™¨éƒ½æœ‰ä¸€ä¸ªreadï¼ˆï¼‰æ–¹æ³•ï¼Œç”¨äºŽè¯»å–å›¾ç‰‡ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="c1">//ç¼–å†™ä¸€ä¸ªåŠ è½½å™¨çš„å…¬å…±æŽ¥å£ã€‚
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="kd">public&lt;/span> &lt;span class="kd">interface&lt;/span> &lt;span class="nc">Reader&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="kt">void&lt;/span> &lt;span class="nf">read&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="c1">//Jpgå›¾ç‰‡åŠ è½½å™¨
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="kd">public&lt;/span> &lt;span class="kd">class&lt;/span> &lt;span class="nc">JpgReader&lt;/span> &lt;span class="kd">implements&lt;/span> &lt;span class="n">Reader&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="nd">@Override&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">read&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">System&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">out&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">print&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;read jpg&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="c1">//Pngå›¾ç‰‡åŠ è½½å™¨
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="kd">public&lt;/span> &lt;span class="kd">class&lt;/span> &lt;span class="nc">PngReader&lt;/span> &lt;span class="kd">implements&lt;/span> &lt;span class="n">Reader&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="nd">@Override&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">read&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">System&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">out&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">print&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;read png&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="c1">//å®šä¹‰ä¸€ä¸ªæŠ½è±¡çš„å·¥åŽ‚æŽ¥å£ReaderFactory
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="kd">public&lt;/span> &lt;span class="kd">interface&lt;/span> &lt;span class="nc">ReaderFactory&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">Reader&lt;/span> &lt;span class="nf">getReader&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="c1">//JpgåŠ è½½å™¨å·¥åŽ‚
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="kd">public&lt;/span> &lt;span class="kd">class&lt;/span> &lt;span class="nc">JpgReaderFactory&lt;/span> &lt;span class="kd">implements&lt;/span> &lt;span class="n">ReaderFactory&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="nd">@Override&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="n">Reader&lt;/span> &lt;span class="nf">getReader&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">JpgReader&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="c1">//PngåŠ è½½å™¨å·¥åŽ‚
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="kd">public&lt;/span> &lt;span class="kd">class&lt;/span> &lt;span class="nc">PngReaderFactory&lt;/span> &lt;span class="kd">implements&lt;/span> &lt;span class="n">ReaderFactory&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="nd">@Override&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="n">Reader&lt;/span> &lt;span class="nf">getReader&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">PngReader&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="c1">//è¯»å–Jpg
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="n">ReaderFactory&lt;/span> &lt;span class="n">factory&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">new&lt;/span> &lt;span class="n">JpgReaderFactory&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="n">Reader&lt;/span> &lt;span class="n">reader&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">factory&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getReader&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="n">reader&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">read&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="c1">//è¯»å–Png
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="n">ReaderFactory&lt;/span> &lt;span class="n">factory&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">new&lt;/span> &lt;span class="n">PngReaderFactory&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="n">Reader&lt;/span> &lt;span class="n">reader&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">factory&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getReader&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="n">reader&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">read&lt;/span>&lt;span class="o">();&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>volatileå·¥ä½œæœºåˆ¶</title><link>https://blog.itning.top/post/2018/05/30/volatile%E5%B7%A5%E4%BD%9C%E6%9C%BA%E5%88%B6/</link><pubDate>Wed, 30 May 2018 08:23:52 +0800</pubDate><guid>https://blog.itning.top/post/2018/05/30/volatile%E5%B7%A5%E4%BD%9C%E6%9C%BA%E5%88%B6/</guid><description>&lt;p>&lt;strong>volatileå¹¶éžçº¿ç¨‹å®‰å…¨çš„&lt;/strong>&lt;/p>
&lt;blockquote>
&lt;p>volatileä¿®é¥°ä¹‹åŽï¼š
ã€€ã€€ç¬¬ä¸€ï¼šä½¿ç”¨volatileå…³é”®å­—ä¼šå¼ºåˆ¶å°†ä¿®æ”¹çš„å€¼ç«‹å³å†™å…¥ä¸»å­˜ï¼›
ã€€ã€€ç¬¬äºŒï¼šä½¿ç”¨volatileå…³é”®å­—çš„è¯ï¼Œå½“çº¿ç¨‹2è¿›è¡Œä¿®æ”¹æ—¶ï¼Œä¼šå¯¼è‡´çº¿ç¨‹1çš„å·¥ä½œå†…å­˜ä¸­ç¼“å­˜å˜é‡stopçš„ç¼“å­˜è¡Œæ— æ•ˆï¼ˆåæ˜ åˆ°ç¡¬ä»¶å±‚çš„è¯ï¼Œå°±æ˜¯CPUçš„L1æˆ–è€…L2ç¼“å­˜ä¸­å¯¹åº”çš„ç¼“å­˜è¡Œæ— æ•ˆï¼‰ï¼›
ã€€ã€€ç¬¬ä¸‰ï¼šç”±äºŽçº¿ç¨‹1çš„å·¥ä½œå†…å­˜ä¸­ç¼“å­˜å˜é‡stopçš„ç¼“å­˜è¡Œæ— æ•ˆï¼Œæ‰€ä»¥çº¿ç¨‹1å†æ¬¡è¯»å–å˜é‡stopçš„å€¼æ—¶ä¼šåŽ»ä¸»å­˜è¯»å–ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>volatileä¿è¯äº†æ“ä½œçš„å¯è§æ€§ ä½†æ˜¯ä¸ä¿è¯å¯¹å˜é‡çš„æ“ä½œæ˜¯åŽŸå­æ€§
&lt;img src="https://blog.itning.top/images/2018-05-30-volatile%E5%B7%A5%E4%BD%9C%E6%9C%BA%E5%88%B6/a.PNG" alt="a">&lt;/p></description></item><item><title>Win10æ“ä½œç³»ç»Ÿå®‰è£…è¯¦è§£</title><link>https://blog.itning.top/post/2018/05/29/win10%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85%E8%AF%A6%E8%A7%A3/</link><pubDate>Tue, 29 May 2018 19:19:25 +0800</pubDate><guid>https://blog.itning.top/post/2018/05/29/win10%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85%E8%AF%A6%E8%A7%A3/</guid><description>&lt;h2 id="ä»€ä¹ˆæ˜¯bios">ä»€ä¹ˆæ˜¯BIOS?&lt;/h2>
&lt;blockquote>
&lt;p>&lt;strong>BIOS&lt;/strong>ï¼ˆ&lt;strong>B&lt;/strong>asicÂ &lt;strong>I&lt;/strong>nput/&lt;strong>O&lt;/strong>utputÂ &lt;strong>S&lt;/strong>ystemçš„ç¼©å†™ã€ä¸­æ–‡ï¼š&lt;strong>åŸºæœ¬è¾“å…¥è¾“å‡ºç³»ç»Ÿ&lt;/strong>ï¼‰ï¼Œåœ¨&lt;a href="https://zh.wikipedia.org/w/index.php?title=IBM_PC%E7%9B%B8%E5%AE%B9%E7%B3%BB%E7%B5%B1&amp;amp;action=edit&amp;amp;redlink=1">IBM PCå…¼å®¹ç³»ç»Ÿ&lt;/a>ä¸Šï¼Œæ˜¯ä¸€ç§ä¸šç•Œæ ‡å‡†çš„&lt;a href="https://zh.wikipedia.org/wiki/%E9%9F%8C%E9%AB%94">å›ºä»¶&lt;/a>&lt;a href="https://zh.wikipedia.org/wiki/%E4%BB%8B%E9%9D%A2_(%E8%B3%87%E8%A8%8A%E7%A7%91%E6%8A%80)">æŽ¥å£&lt;/a>ã€‚[&lt;a href="https://zh.wikipedia.org/wiki/BIOS#cite_note-pcguidedefinition-1">1]&lt;/a>ã€‚BIOSè¿™ä¸ªå­—çœ¼æ˜¯åœ¨1975å¹´ç¬¬ä¸€æ¬¡ç”±&lt;a href="https://zh.wikipedia.org/wiki/CP/M">CP/M&lt;/a>æ“ä½œç³»ç»Ÿä¸­å‡ºçŽ°ã€‚BIOSæ˜¯&lt;a href="https://zh.wikipedia.org/wiki/%E4%B8%AA%E4%BA%BA%E7%94%B5%E8%84%91">ä¸ªäººç”µè„‘&lt;/a>å¯åŠ¨æ—¶åŠ è½½çš„ç¬¬ä¸€ä¸ªè½¯ä»¶ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>è¿™æ˜¯ç»´åŸºç™¾ç§‘å¯¹BIOSçš„ä»‹ç»&lt;/p>
&lt;p>åœ¨æˆ‘ä»¬ç”µè„‘å¯åŠ¨çš„æ—¶å€™ç¬¬ä¸€ä¸ªåŠ è½½çš„è½¯ä»¶å°±æ˜¯BIOS,å®ƒå¯ä»¥é€‰æ‹©å¼€æœºçš„å¯åŠ¨è®¾å¤‡,æ˜¯ç¡¬ç›˜è¿˜æ˜¯Uç›˜,è¿˜æ˜¯å…‰é©±&lt;/p>
&lt;h2 id="ä»€ä¹ˆæ˜¯uefi">ä»€ä¹ˆæ˜¯UEFI?&lt;/h2>
&lt;p>UEFIä¸­æ–‡åä¸º&lt;strong>ç»Ÿä¸€å¯æ‰©å±•å›ºä»¶æŽ¥å£&lt;/strong>æ˜¯BIOSçš„æ›¿ä»£æ–¹æ¡ˆ&lt;/p>
&lt;h2 id="gpt-mbråˆæ˜¯ä»€ä¹ˆ">GPT MBRåˆæ˜¯ä»€ä¹ˆ?&lt;/h2>
&lt;p>MBRå«&lt;strong>ä¸»å¼•å¯¼è®°å½•&lt;/strong>&lt;/p>
&lt;p>GPTå«&lt;strong>å…¨å±€å”¯ä¸€æ ‡è¯†åˆ†åŒºè¡¨&lt;/strong> æ˜¯EFIæ ‡å‡†çš„ä¸€éƒ¨åˆ†&lt;/p>
&lt;p>å®ƒä¿©ä¸»è¦åŒºåˆ«&lt;/p>
&lt;p>GPTæ”¯æŒå¤§äºŽ2.2TBçš„ç¡¬ç›˜,MBRä¸æ”¯æŒ&lt;/p>
&lt;p>GPTåˆ†åŒºæ•°é‡ä¸é™åˆ¶&lt;/p>
&lt;p>GPTæ²¡æœ‰BIOSè‡ªæ£€,èŠ‚çœæ—¶é—´,åŠ å¿«å¼€æœºé€Ÿåº¦&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2018-05-29-Win10%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85%E8%AF%A6%E8%A7%A3/a.png" alt="a">&lt;/p>
&lt;p>ç£ç›˜ç»“æž„ï¼š&lt;/p>
&lt;p>A. ç£é“
B. å‡ ä½•æ‰‡åŒº
C. ç£é“æ‰‡åŒº
D. &lt;a href="https://zh.wikipedia.org/wiki/Data_cluster">Cluster&lt;/a>&lt;/p>
&lt;h2 id="diskpartå‘½ä»¤">diskpartå‘½ä»¤&lt;/h2>
&lt;p>åœ¨å®‰è£…ç³»ç»Ÿçš„æ—¶å€™æŒ‰shift+F10 å¼¹å‡ºå‘½ä»¤æç¤ºç¬¦&lt;/p>
&lt;p>è¾“å…¥diskpartè¿›å…¥&lt;/p>
&lt;p>list disk ä¼šå°†è®¡ç®—æœºä¸Šçš„æ‰€æœ‰ç‰©ç†ç¡¬ç›˜å…¨éƒ¨åˆ—å‡º&lt;/p>
&lt;p>select disk X é€‰æ‹©è¦æ“ä½œçš„ç¡¬ç›˜&lt;/p>
&lt;p>ä¾‹å¦‚ select disk 0&lt;/p>
&lt;p>clean å‘½ä»¤æ¥å°†ç¡¬ç›˜æ“¦é™¤æ•°æ®&lt;/p>
&lt;p>convert gpt å¯ä»¥å°†ç¡¬ç›˜åˆ†åŒºæ ¼å¼è½¬æ¢ä¸ºGPTæ ¼å¼&lt;/p>
&lt;h2 id="ç³»ç»Ÿå®‰è£…å¤§è‡´æ­¥éª¤">ç³»ç»Ÿå®‰è£…å¤§è‡´æ­¥éª¤&lt;/h2>
&lt;ol>
&lt;li>å°†Uç›˜æ’å…¥åˆ°ç”µè„‘ä¸Š&lt;/li>
&lt;li>å¼€å¯å¯åŠ¨é€‰æ‹©Uç›˜å¯åŠ¨&lt;/li>
&lt;li>å¦‚æžœè®¡ç®—æœºæ²¡æœ‰é…ç½®UEFIå¯åŠ¨,éœ€è¦è¿›å…¥BIOSè¿›è¡Œè®¾ç½®&lt;/li>
&lt;li>ä½¿ç”¨diskpartå‘½ä»¤è¿›è¡Œè½¬æ¢ç¡¬ç›˜åˆ†åŒº&lt;/li>
&lt;li>æ¿€æ´»ç³»ç»Ÿ&lt;/li>
&lt;li>å®‰è£…é©±åŠ¨ç¨‹åº&lt;/li>
&lt;/ol></description></item><item><title>Zookeeper ç»“æž„ å‘½ä»¤è¡Œæ“ä½œ</title><link>https://blog.itning.top/post/2018/05/29/zookeeper-%E7%BB%93%E6%9E%84-%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%93%8D%E4%BD%9C/</link><pubDate>Tue, 29 May 2018 19:08:41 +0800</pubDate><guid>https://blog.itning.top/post/2018/05/29/zookeeper-%E7%BB%93%E6%9E%84-%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%93%8D%E4%BD%9C/</guid><description>&lt;h2 id="zookeeper-ç‰¹æ€§">Zookeeper ç‰¹æ€§&lt;/h2>
&lt;p>1ã€Zookeeperï¼šä¸€ä¸ªleaderï¼Œå¤šä¸ªfollowerç»„æˆçš„é›†ç¾¤
2ã€å…¨å±€æ•°æ®ä¸€è‡´ï¼šæ¯ä¸ªserverä¿å­˜ä¸€ä»½ç›¸åŒçš„æ•°æ®å‰¯æœ¬ï¼Œclientæ— è®ºè¿žæŽ¥åˆ°å“ªä¸ªserverï¼Œæ•°æ®éƒ½æ˜¯ä¸€è‡´çš„
3ã€åˆ†å¸ƒå¼è¯»å†™ï¼Œæ›´æ–°è¯·æ±‚è½¬å‘ï¼Œç”±leaderå®žæ–½
4ã€æ›´æ–°è¯·æ±‚é¡ºåºè¿›è¡Œï¼Œæ¥è‡ªåŒä¸€ä¸ªclientçš„æ›´æ–°è¯·æ±‚æŒ‰å…¶å‘é€é¡ºåºä¾æ¬¡æ‰§è¡Œ
5ã€æ•°æ®æ›´æ–°åŽŸå­æ€§ï¼Œä¸€æ¬¡æ•°æ®æ›´æ–°è¦ä¹ˆæˆåŠŸï¼Œè¦ä¹ˆå¤±è´¥
6ã€å®žæ—¶æ€§ï¼Œåœ¨ä¸€å®šæ—¶é—´èŒƒå›´å†…ï¼Œclientèƒ½è¯»åˆ°æœ€æ–°æ•°æ®&lt;/p>
&lt;h2 id="èŠ‚ç‚¹ç±»åž‹">èŠ‚ç‚¹ç±»åž‹&lt;/h2>
&lt;p>&lt;img src="https://blog.itning.top/images/2018-05-29-Zookeeper-%E7%BB%93%E6%9E%84-%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%93%8D%E4%BD%9C/b.png" alt="b">&lt;/p>
&lt;p>1ã€Znodeæœ‰ä¸¤ç§ç±»åž‹ï¼š
çŸ­æš‚ï¼ˆephemeralï¼‰ï¼ˆæ–­å¼€è¿žæŽ¥è‡ªå·±åˆ é™¤ï¼‰
æŒä¹…ï¼ˆpersistentï¼‰ï¼ˆæ–­å¼€è¿žæŽ¥ä¸åˆ é™¤ï¼‰
2ã€Znodeæœ‰å››ç§å½¢å¼çš„ç›®å½•èŠ‚ç‚¹ï¼ˆé»˜è®¤æ˜¯persistent ï¼‰
PERSISTENT
PERSISTENT_SEQUENTIALï¼ˆæŒä¹…åºåˆ—/test0000000019 ï¼‰
EPHEMERAL
EPHEMERAL_SEQUENTIAL
3ã€åˆ›å»ºznodeæ—¶è®¾ç½®é¡ºåºæ ‡è¯†ï¼Œznodeåç§°åŽä¼šé™„åŠ ä¸€ä¸ªå€¼ï¼Œé¡ºåºå·æ˜¯ä¸€ä¸ªå•è°ƒé€’å¢žçš„è®¡æ•°å™¨ï¼Œç”±çˆ¶èŠ‚ç‚¹ç»´æŠ¤
4ã€åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œé¡ºåºå·å¯ä»¥è¢«ç”¨äºŽä¸ºæ‰€æœ‰çš„äº‹ä»¶è¿›è¡Œå…¨å±€æŽ’åºï¼Œè¿™æ ·å®¢æˆ·ç«¯å¯ä»¥é€šè¿‡é¡ºåºå·æŽ¨æ–­äº‹ä»¶çš„é¡ºåº&lt;/p>
&lt;h2 id="å‘½ä»¤è¡Œå·¥å…·">å‘½ä»¤è¡Œå·¥å…·&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback"> ./zkCli.sh â€“server &amp;lt;ip&amp;gt;
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blog.itning.top/images/2018-05-29-Zookeeper-%E7%BB%93%E6%9E%84-%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%93%8D%E4%BD%9C/a.png" alt="a">&lt;/p></description></item><item><title>Zookeeper åŸºç¡€</title><link>https://blog.itning.top/post/2018/05/29/zookeeper-%E5%9F%BA%E7%A1%80/</link><pubDate>Tue, 29 May 2018 19:07:07 +0800</pubDate><guid>https://blog.itning.top/post/2018/05/29/zookeeper-%E5%9F%BA%E7%A1%80/</guid><description>&lt;blockquote>
&lt;p>Apache ZooKeeper is an effort to develop and maintain an open-source server which enables highly reliable distributed coordination.&lt;/p>
&lt;/blockquote>
&lt;p>Zookeeper ç›´è¯‘è¿‡æ¥æ˜¯ åŠ¨ç‰©å›­ç®¡ç†å‘˜ è¯´ç™½äº†å°±æ˜¯ç”¨æ¥ç®¡ç†Hadoop(å¤§è±¡),Hive(èœœèœ‚) çš„åˆ†å¸ƒå¼åè°ƒæœåŠ¡&lt;/p>
&lt;p>Zookeeper æä¾›ä¸¤ç§æœåŠ¡
&amp;ndash;&amp;gt;ç®¡ç†(å­˜å‚¨ï¼Œè¯»å–)ç”¨æˆ·ç¨‹åºæäº¤çš„æ•°æ®ï¼›
&amp;ndash;&amp;gt;ä¸ºç”¨æˆ·ç¨‹åºæä¾›æ•°æ®èŠ‚ç‚¹ç›‘å¬æœåŠ¡ï¼›&lt;/p>
&lt;hr>
&lt;p>&lt;strong>æ³¨æ„ å…³é—­é˜²ç«å¢™ SSHå…å¯†ç™»é™†&lt;/strong>
&lt;strong>Zookeeperé€‚åˆå®‰è£…åœ¨å¥‡æ•°å°æœºå™¨ä¸Š&lt;/strong>
éœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback"># å¿ƒè·³é—´éš”å‘¨æœŸ(æ¯«ç§’)
tickTime=2000
# initLimitå‚æ•°é…ç½®åˆå§‹åŒ–è¿žæŽ¥æ—¶, followerå’Œleaderä¹‹é—´çš„æœ€é•¿å¿ƒè·³æ—¶é—´
initLimit=10
# é…ç½®leaderå’Œfollowerä¹‹é—´å‘é€æ¶ˆæ¯, è¯·æ±‚å’Œåº”ç­”çš„æœ€å¤§æ—¶é—´é•¿åº¦
syncLimit=5
# æ•°æ®ç›®å½•
dataDir=/home/ning/data/zookeeper
# å®¢æˆ·ç«¯è¿žæŽ¥çš„ç«¯å£
clientPort=2181
# the maximum number of client connections.
# increase this if you need to handle more clients
#maxClientCnxns=60
#
# Be sure to read the maintenance section of the
# administrator guide before turning on autopurge.
#
# http://zookeeper.apache.org/doc/current/zookeeperAdmin.html#sc_maintenance
#
# The number of snapshots to retain in dataDir
#autopurge.snapRetainCount=3
# Purge task interval in hours
# Set to &amp;#34;0&amp;#34; to disable auto purge feature
#autopurge.purgeInterval=1
server.1=node1:2888:3888
server.2=node2:2888:3888
server.3=node3:2888:3888
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>&lt;a href="http://shift-alt-ctrl.iteye.com/blog/1845568">http://shift-alt-ctrl.iteye.com/blog/1845568&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;p>éœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­è®¾ç½®çš„ç›®å½•ä¸­æ–°å»ºåä¸º myid çš„æ–‡ä»¶ å†…å®¹ä¸ºå½“å‰æœºå™¨ID&lt;/p>
&lt;p>ä¾‹å¦‚ node1 æœºå™¨åœ¨é…ç½®æ–‡ä»¶ä¸­ID ä¸º1 åˆ™åœ¨myidæ–‡ä»¶ä¸­ å†…å®¹ä¸º 1&lt;/p>
&lt;p>åœ¨ bin ç›®å½•ä¸­&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">./zkServer.sh start
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ¥è¿›è¡Œå¯åŠ¨&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">./zkServer.sh status
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ¥è¿›è¡ŒæŸ¥çœ‹èŠ‚ç‚¹çŠ¶æ€&lt;/p>
&lt;p>Zookeeperé›†ç¾¤çš„è§’è‰²ï¼š Leader å’Œ follower ï¼ˆObserverï¼‰&lt;/p>
&lt;p>&lt;strong>zookeeperçš„é€‰ä¸¾æœºåˆ¶ï¼ˆå…¨æ–°é›†ç¾¤paxosï¼‰&lt;/strong>
ä»¥ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥è¯´æ˜Žæ•´ä¸ªé€‰ä¸¾çš„è¿‡ç¨‹.
å‡è®¾æœ‰äº”å°æœåŠ¡å™¨ç»„æˆçš„zookeeperé›†ç¾¤,å®ƒä»¬çš„idä»Ž1-5,åŒæ—¶å®ƒä»¬éƒ½æ˜¯æœ€æ–°å¯åŠ¨çš„,ä¹Ÿå°±æ˜¯æ²¡æœ‰åŽ†å²æ•°æ®,åœ¨å­˜æ”¾æ•°æ®é‡è¿™ä¸€ç‚¹ä¸Š,éƒ½æ˜¯ä¸€æ ·çš„.å‡è®¾è¿™äº›æœåŠ¡å™¨ä¾åºå¯åŠ¨,æ¥çœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆ.&lt;/p>
&lt;ol>
&lt;li>æœåŠ¡å™¨1å¯åŠ¨,æ­¤æ—¶åªæœ‰å®ƒä¸€å°æœåŠ¡å™¨å¯åŠ¨äº†,å®ƒå‘å‡ºåŽ»çš„æŠ¥æ²¡æœ‰ä»»ä½•å“åº”,æ‰€ä»¥å®ƒçš„é€‰ä¸¾çŠ¶æ€ä¸€ç›´æ˜¯LOOKINGçŠ¶æ€&lt;/li>
&lt;li>æœåŠ¡å™¨2å¯åŠ¨,å®ƒä¸Žæœ€å¼€å§‹å¯åŠ¨çš„æœåŠ¡å™¨1è¿›è¡Œé€šä¿¡,äº’ç›¸äº¤æ¢è‡ªå·±çš„é€‰ä¸¾ç»“æžœ,ç”±äºŽä¸¤è€…éƒ½æ²¡æœ‰åŽ†å²æ•°æ®,æ‰€ä»¥idå€¼è¾ƒå¤§çš„æœåŠ¡å™¨2èƒœå‡º,ä½†æ˜¯ç”±äºŽæ²¡æœ‰è¾¾åˆ°è¶…è¿‡åŠæ•°ä»¥ä¸Šçš„æœåŠ¡å™¨éƒ½åŒæ„é€‰ä¸¾å®ƒ(è¿™ä¸ªä¾‹å­ä¸­çš„åŠæ•°ä»¥ä¸Šæ˜¯3),æ‰€ä»¥æœåŠ¡å™¨1,2è¿˜æ˜¯ç»§ç»­ä¿æŒLOOKINGçŠ¶æ€.&lt;/li>
&lt;li>æœåŠ¡å™¨3å¯åŠ¨,æ ¹æ®å‰é¢çš„ç†è®ºåˆ†æž,æœåŠ¡å™¨3æˆä¸ºæœåŠ¡å™¨1,2,3ä¸­çš„è€å¤§,è€Œä¸Žä¸Šé¢ä¸åŒçš„æ˜¯,æ­¤æ—¶æœ‰ä¸‰å°æœåŠ¡å™¨é€‰ä¸¾äº†å®ƒ,æ‰€ä»¥å®ƒæˆä¸ºäº†è¿™æ¬¡é€‰ä¸¾çš„leader.&lt;/li>
&lt;li>æœåŠ¡å™¨4å¯åŠ¨,æ ¹æ®å‰é¢çš„åˆ†æž,ç†è®ºä¸ŠæœåŠ¡å™¨4åº”è¯¥æ˜¯æœåŠ¡å™¨1,2,3,4ä¸­æœ€å¤§çš„,ä½†æ˜¯ç”±äºŽå‰é¢å·²ç»æœ‰åŠæ•°ä»¥ä¸Šçš„æœåŠ¡å™¨é€‰ä¸¾äº†æœåŠ¡å™¨3,æ‰€ä»¥å®ƒåªèƒ½æŽ¥æ”¶å½“å°å¼Ÿçš„å‘½äº†.&lt;/li>
&lt;li>æœåŠ¡å™¨5å¯åŠ¨,åŒ4ä¸€æ ·,å½“å°å¼Ÿ.&lt;/li>
&lt;/ol>
&lt;p>&lt;strong>éžå…¨æ–°é›†ç¾¤çš„é€‰ä¸¾æœºåˆ¶(æ•°æ®æ¢å¤)&lt;/strong>
é‚£ä¹ˆï¼Œåˆå§‹åŒ–çš„æ—¶å€™ï¼Œæ˜¯æŒ‰ç…§ä¸Šè¿°çš„è¯´æ˜Žè¿›è¡Œé€‰ä¸¾çš„ï¼Œä½†æ˜¯å½“zookeeperè¿è¡Œäº†ä¸€æ®µæ—¶é—´ä¹‹åŽï¼Œæœ‰æœºå™¨downæŽ‰ï¼Œé‡æ–°é€‰ä¸¾æ—¶ï¼Œé€‰ä¸¾è¿‡ç¨‹å°±ç›¸å¯¹å¤æ‚äº†ã€‚
éœ€è¦åŠ å…¥æ•°æ®idã€leader idå’Œé€»è¾‘æ—¶é’Ÿã€‚
æ•°æ®idï¼šæ•°æ®æ–°çš„idå°±å¤§ï¼Œæ•°æ®æ¯æ¬¡æ›´æ–°éƒ½ä¼šæ›´æ–°idã€‚
Leader idï¼šå°±æ˜¯æˆ‘ä»¬é…ç½®çš„myidä¸­çš„å€¼ï¼Œæ¯ä¸ªæœºå™¨ä¸€ä¸ªã€‚
é€»è¾‘æ—¶é’Ÿï¼šè¿™ä¸ªå€¼ä»Ž0å¼€å§‹é€’å¢ž,æ¯æ¬¡é€‰ä¸¾å¯¹åº”ä¸€ä¸ªå€¼,ä¹Ÿå°±æ˜¯è¯´: å¦‚æžœåœ¨åŒä¸€æ¬¡é€‰ä¸¾ä¸­,é‚£ä¹ˆè¿™ä¸ªå€¼åº”è¯¥æ˜¯ä¸€è‡´çš„ ; é€»è¾‘æ—¶é’Ÿå€¼è¶Šå¤§,è¯´æ˜Žè¿™ä¸€æ¬¡é€‰ä¸¾leaderçš„è¿›ç¨‹æ›´æ–°.
é€‰ä¸¾çš„æ ‡å‡†å°±å˜æˆï¼š
1ã€é€»è¾‘æ—¶é’Ÿå°çš„é€‰ä¸¾ç»“æžœè¢«å¿½ç•¥ï¼Œé‡æ–°æŠ•ç¥¨
2ã€ç»Ÿä¸€é€»è¾‘æ—¶é’ŸåŽï¼Œæ•°æ®idå¤§çš„èƒœå‡º
3ã€æ•°æ®idç›¸åŒçš„æƒ…å†µä¸‹ï¼Œleader idå¤§çš„èƒœå‡º
æ ¹æ®è¿™ä¸ªè§„åˆ™é€‰å‡ºleaderã€‚&lt;/p></description></item><item><title>hadoopé›†ç¾¤å®‰è£… 7èŠ‚ç‚¹;HA</title><link>https://blog.itning.top/post/2018/05/27/hadoop%E9%9B%86%E7%BE%A4%E5%AE%89%E8%A3%85-7%E8%8A%82%E7%82%B9ha/</link><pubDate>Sun, 27 May 2018 11:57:36 +0800</pubDate><guid>https://blog.itning.top/post/2018/05/27/hadoop%E9%9B%86%E7%BE%A4%E5%AE%89%E8%A3%85-7%E8%8A%82%E7%82%B9ha/</guid><description>&lt;blockquote>
&lt;p>æ•™ç¨‹ä½¿ç”¨ç‰ˆæœ¬:
hadoop-2.8.1.tar.gz
zookeeper-3.4.10.tar.gz
Linux: Centos 7 x64 (CentOS-7-x86_64-DVD-1708)&lt;/p>
&lt;/blockquote>
&lt;h2 id="å‰æœŸå‡†å¤‡">å‰æœŸå‡†å¤‡:&lt;/h2>
&lt;p>&lt;strong>é›†ç¾¤è§„åˆ’ï¼š&lt;/strong>&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th align="left">ä¸»æœºå&lt;/th>
&lt;th align="center">IP&lt;/th>
&lt;th align="center">å®‰è£…çš„è½¯ä»¶&lt;/th>
&lt;th align="center">è¿è¡Œçš„è¿›ç¨‹&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td align="left">node1&lt;/td>
&lt;td align="center">192.168.66.3&lt;/td>
&lt;td align="center">jdkã€hadoop&lt;/td>
&lt;td align="center">NameNodeã€DFSZKFailoverController(zkfc)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="left">node2&lt;/td>
&lt;td align="center">192.168.66.4&lt;/td>
&lt;td align="center">jdkã€hadoop&lt;/td>
&lt;td align="center">NameNodeã€DFSZKFailoverController(zkfc)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="left">node3&lt;/td>
&lt;td align="center">192.168.66.5&lt;/td>
&lt;td align="center">jdkã€hadoop&lt;/td>
&lt;td align="center">ResourceManager&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="left">node4&lt;/td>
&lt;td align="center">192.168.66.6&lt;/td>
&lt;td align="center">jdkã€hadoop&lt;/td>
&lt;td align="center">ResourceManager&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="left">node5&lt;/td>
&lt;td align="center">192.168.66.7&lt;/td>
&lt;td align="center">jdkã€hadoopã€zookeeper&lt;/td>
&lt;td align="center">DataNodeã€NodeManagerã€JournalNodeã€QuorumPeerMain&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="left">node6&lt;/td>
&lt;td align="center">192.168.66.8&lt;/td>
&lt;td align="center">jdkã€hadoopã€zookeeper&lt;/td>
&lt;td align="center">DataNodeã€NodeManagerã€JournalNodeã€QuorumPeerMain&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="left">node7&lt;/td>
&lt;td align="center">192.168.66.9&lt;/td>
&lt;td align="center">jdkã€hadoopã€zookeeper&lt;/td>
&lt;td align="center">DataNodeã€NodeManagerã€JournalNodeã€QuorumPeerMain&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="ä¿®æ”¹ä¸»æœºå">ä¿®æ”¹ä¸»æœºå:&lt;/h3>
&lt;pre>&lt;code>åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šæ‰§è¡Œ
å…¶ä¸­node1 ä¸ºä¸»æœºå
$hostnamectl set-hostname node1
&lt;/code>&lt;/pre>
&lt;h3 id="ä¿®æ”¹ip">ä¿®æ”¹IP&lt;/h3>
&lt;pre>&lt;code>$cd /etc/sysconfig/network-scripts
æ‰¾åˆ°ifcfg-eth0ä¿®æ”¹å†…å®¹
TYPE=&amp;quot;Ethernet&amp;quot;
PROXY_METHOD=&amp;quot;none&amp;quot;
BROWSER_ONLY=&amp;quot;no&amp;quot;
BOOTPROTO=&amp;quot;static&amp;quot;
DEFROUTE=&amp;quot;yes&amp;quot;
IPADDR=192.168.66.3 #é™æ€IP
GATEWAY=192.168.66.2 #é»˜è®¤ç½‘å…³
NETMASK=255.255.255.0 #å­ç½‘æŽ©ç 
DNS1=192.168.66.2
IPV4_FAILURE_FATAL=&amp;quot;no&amp;quot;
IPV6INIT=&amp;quot;yes&amp;quot;
IPV6_AUTOCONF=&amp;quot;yes&amp;quot;
IPV6_DEFROUTE=&amp;quot;yes&amp;quot;
IPV6_FAILURE_FATAL=&amp;quot;no&amp;quot;
IPV6_ADDR_GEN_MODE=&amp;quot;stable-privacy&amp;quot;
NAME=&amp;quot;ens33&amp;quot;
UUID=&amp;quot;1a7840e2-4b8c-4770-9537-c1aa9ddf42e2&amp;quot;
DEVICE=&amp;quot;ens33&amp;quot;
ONBOOT=&amp;quot;yes&amp;quot;
&lt;/code>&lt;/pre>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">service network restart
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="ä¿®æ”¹hosts">ä¿®æ”¹Hosts&lt;/h3>
&lt;pre>&lt;code>$vi /etc/hosts
127.0.0.1 localhost localhost.localdomain localhost4 localhost4.localdomain4
::1 localhost localhost.localdomain localhost6 localhost6.localdomain6
192.168.66.3 node1
192.168.66.4 node2
192.168.66.5 node3
192.168.66.6 node4
192.168.66.7 node5
192.168.66.8 node6
192.168.66.9 node7
&lt;/code>&lt;/pre>
&lt;h3 id="å…³é—­é˜²ç«å¢™">å…³é—­é˜²ç«å¢™&lt;/h3>
&lt;pre>&lt;code>systemctl stop firewalld.service #åœæ­¢firewall
systemctl disable firewalld.service #ç¦æ­¢firewallå¼€æœºå¯åŠ¨
&lt;/code>&lt;/pre>
&lt;h3 id="sshå…å¯†ç™»é™†">sshå…å¯†ç™»é™†&lt;/h3>
&lt;ol>
&lt;li>é¦–å…ˆè¦é…ç½®node1åˆ°node2ã€node3ã€node4ã€node5ã€node6ã€node7çš„å…å¯†ç ç™»é™†
åœ¨node1ä¸Šç”Ÿäº§ä¸€å¯¹é’¥åŒ™&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">ssh-keygen -t rsa
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="2">
&lt;li>å°†å…¬é’¥æ‹·è´åˆ°å…¶ä»–èŠ‚ç‚¹ï¼ŒåŒ…æ‹¬è‡ªå·±&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">ssh-copy-id node1
ssh-copy-id node2
ssh-copy-id node3
ssh-copy-id node4
ssh-copy-id node5
ssh-copy-id node6
ssh-copy-id node7
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="3">
&lt;li>é…ç½®node3åˆ°node4ã€node5ã€node6ã€node7çš„å…å¯†ç ç™»é™†
åœ¨node3ä¸Šç”Ÿäº§ä¸€å¯¹é’¥åŒ™&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">ssh-keygen -t rsa
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å°†å…¬é’¥æ‹·è´åˆ°å…¶ä»–èŠ‚ç‚¹&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">ssh-copy-id node4
ssh-copy-id node5
ssh-copy-id node6
ssh-copy-id node7
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>**æ³¨æ„ï¼š**ä¸¤ä¸ªnamenodeä¹‹é—´è¦é…ç½®sshå…å¯†ç ç™»é™†ï¼Œåˆ«å¿˜äº†é…ç½®node2åˆ°node1çš„å…ç™»é™†
åœ¨node2ä¸Šç”Ÿäº§ä¸€å¯¹é’¥åŒ™&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">ssh-keygen -t rsa
ssh-copy-id -i node1
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="jdkå®‰è£…çŽ¯å¢ƒå˜é‡é…ç½®">jdkå®‰è£…&amp;amp;çŽ¯å¢ƒå˜é‡é…ç½®&lt;/h3>
&lt;blockquote>
&lt;p>Linux x64 180.99 MB jdk-8u152-linux-x64.tar.gz&lt;/p>
&lt;/blockquote>
&lt;pre>&lt;code>$vi /etc/profile
&lt;/code>&lt;/pre>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">JAVA_HOME=/home/ning/app/jdk1.8.0_152
JRE_HOME=$JAVA_HOME/jre
PATH=$PATH:$JAVA_HOME/bin:$HADOOP_HOME/bin
CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar
HADOOP_HOME=/home/ning/app/hadoop-2.8.1
export JAVA_HOME
export JRE_HOME
export PATH
export CLASSPATH
export HADOOP_HOME
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="é…ç½®zookeeper">é…ç½®Zookeeper&lt;/h2>
&lt;p>å®‰è£…é…ç½®zooekeeperé›†ç¾¤ï¼ˆåœ¨node5ä¸Šï¼‰&lt;/p>
&lt;ol>
&lt;li>è§£åŽ‹&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">tar -zxvf zookeeper-3.4.10.tar.gz -C /home/hadoop/app/
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="2">
&lt;li>ä¿®æ”¹é…ç½®&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">cd /home/hadoop/app/zookeeper-3.4.5/conf/
cp zoo_sample.cfg zoo.cfg
vi zoo.cfg
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¿®æ”¹ï¼š&lt;code>dataDir=/home/hadoop/app/zookeeper-3.4.5/tmp&lt;/code>
åœ¨æœ€åŽæ·»åŠ ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">server.1=node5:2888:3888
server.2=node6:2888:3888
server.3=node7:2888:3888
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="3">
&lt;li>ä¿å­˜é€€å‡º&lt;/li>
&lt;li>ç„¶åŽåˆ›å»ºä¸€ä¸ªtmpæ–‡ä»¶å¤¹
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">mkdir /home/hadoop/app/zookeeper-3.4.10/tmp
echo 1 &amp;gt; /home/hadoop/app/zookeeper-3.4.10/tmp/myid
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>å°†é…ç½®å¥½çš„zookeeperæ‹·è´åˆ°å…¶ä»–èŠ‚ç‚¹(é¦–å…ˆåˆ†åˆ«åœ¨hadoop06ã€hadoop07æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªhadoopç›®å½•ï¼šmkdir /hadoop)&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">scp -r /home/hadoop/app/zookeeper-3.4.5/ hadoop06:/home/hadoop/app/
scp -r /home/hadoop/app/zookeeper-3.4.5/ hadoop07:/home/hadoop/app/
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ³¨æ„ï¼šä¿®æ”¹hadoop06ã€hadoop07å¯¹åº”/hadoop/zookeeper-3.4.5/tmp/myidå†…å®¹
hadoop06ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">echo 2 &amp;gt; /home/hadoop/app/zookeeper-3.4.5/tmp/myid
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>hadoop07ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">echo 3 &amp;gt; /home/hadoop/app/zookeeper-3.4.5/tmp/myid
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="å®‰è£…é…ç½®hadoopé›†ç¾¤åœ¨node1ä¸Šæ“ä½œ">å®‰è£…é…ç½®hadoopé›†ç¾¤ï¼ˆåœ¨node1ä¸Šæ“ä½œï¼‰&lt;/h2>
&lt;ol>
&lt;li>è§£åŽ‹&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">tar -zxvf hadoop-2.6.4.tar.gz -C /home/hadoop/app/
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="2">
&lt;li>é…ç½®HDFS
ï¼ˆhadoop2.0æ‰€æœ‰çš„é…ç½®æ–‡ä»¶éƒ½åœ¨$HADOOP_HOME/etc/hadoopç›®å½•ä¸‹ï¼‰
å°†hadoopæ·»åŠ åˆ°çŽ¯å¢ƒå˜é‡ä¸­&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback"> vi /etc/profile
export JAVA_HOME=/usr/java/jdk1.7.0_55
export HADOOP_HOME=/hadoop/hadoop-2.6.4
export PATH=$PATH:$JAVA_HOME/bin:$HADOOP_HOME/bin
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="3">
&lt;li>ä¿®æ”¹hadoo-env.sh
&lt;code>export JAVA_HOME=/home/hadoop/app/jdk1.7.0_55&lt;/code>&lt;/li>
&lt;/ol>
&lt;h3 id="core-sitexml">core-site.xml&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">&amp;lt;configuration&amp;gt;
&amp;lt;!-- æŒ‡å®šhdfsçš„nameserviceä¸ºns1 --&amp;gt;
&amp;lt;property&amp;gt;
&amp;lt;name&amp;gt;fs.defaultFS&amp;lt;/name&amp;gt;
&amp;lt;value&amp;gt;hdfs://ns1/&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;
&amp;lt;!-- æŒ‡å®šhadoopä¸´æ—¶ç›®å½• --&amp;gt;
&amp;lt;property&amp;gt;
&amp;lt;name&amp;gt;hadoop.tmp.dir&amp;lt;/name&amp;gt;
&amp;lt;value&amp;gt;/home/ning/app/allAppFiles/hadoop/tmpDir/&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;
&amp;lt;!-- æŒ‡å®šzookeeperåœ°å€ --&amp;gt;
&amp;lt;property&amp;gt;
&amp;lt;name&amp;gt;ha.zookeeper.quorum&amp;lt;/name&amp;gt;
&amp;lt;value&amp;gt;node5:2181,node6:2181,node7:2181&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;
&amp;lt;/configuration&amp;gt;
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="hdfs-sitexml">hdfs-site.xml&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;span class="lnt">74
&lt;/span>&lt;span class="lnt">75
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">&amp;lt;configuration&amp;gt;
&amp;lt;!--æŒ‡å®šhdfsçš„nameserviceä¸ºbiï¼Œéœ€è¦å’Œcore-site.xmlä¸­çš„ä¿æŒä¸€è‡´ --&amp;gt;
&amp;lt;property&amp;gt;
&amp;lt;name&amp;gt;dfs.nameservices&amp;lt;/name&amp;gt;
&amp;lt;value&amp;gt;ns1&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;
&amp;lt;!-- ns1ä¸‹é¢æœ‰ä¸¤ä¸ªNameNodeï¼Œåˆ†åˆ«æ˜¯nn1ï¼Œnn2 --&amp;gt;
&amp;lt;property&amp;gt;
&amp;lt;name&amp;gt;dfs.ha.namenodes.ns1&amp;lt;/name&amp;gt;
&amp;lt;value&amp;gt;nn1,nn2&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;
&amp;lt;!-- nn1çš„RPCé€šä¿¡åœ°å€ --&amp;gt;
&amp;lt;property&amp;gt;
&amp;lt;name&amp;gt;dfs.namenode.rpc-address.ns1.nn1&amp;lt;/name&amp;gt;
&amp;lt;value&amp;gt;node1:9000&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;
&amp;lt;!-- nn1çš„httpé€šä¿¡åœ°å€ --&amp;gt;
&amp;lt;property&amp;gt;
&amp;lt;name&amp;gt;dfs.namenode.http-address.ns1.nn1&amp;lt;/name&amp;gt;
&amp;lt;value&amp;gt;node1:50070&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;
&amp;lt;!-- nn2çš„RPCé€šä¿¡åœ°å€ --&amp;gt;
&amp;lt;property&amp;gt;
&amp;lt;name&amp;gt;dfs.namenode.rpc-address.ns1.nn2&amp;lt;/name&amp;gt;
&amp;lt;value&amp;gt;node2:9000&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;
&amp;lt;!-- nn2çš„httpé€šä¿¡åœ°å€ --&amp;gt;
&amp;lt;property&amp;gt;
&amp;lt;name&amp;gt;dfs.namenode.http-address.ns1.nn2&amp;lt;/name&amp;gt;
&amp;lt;value&amp;gt;node2:50070&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;
&amp;lt;!-- æŒ‡å®šNameNodeçš„editså…ƒæ•°æ®åœ¨JournalNodeä¸Šçš„å­˜æ”¾ä½ç½® --&amp;gt;
&amp;lt;property&amp;gt;
&amp;lt;name&amp;gt;dfs.namenode.shared.edits.dir&amp;lt;/name&amp;gt;
&amp;lt;value&amp;gt;qjournal://node5:8485;node6:8485;node7:8485/ns1&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;
&amp;lt;!-- æŒ‡å®šJournalNodeåœ¨æœ¬åœ°ç£ç›˜å­˜æ”¾æ•°æ®çš„ä½ç½® --&amp;gt;
&amp;lt;property&amp;gt;
&amp;lt;name&amp;gt;dfs.journalnode.edits.dir&amp;lt;/name&amp;gt;
&amp;lt;value&amp;gt;/home/ning/app/allAppFiles/journalData&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;
&amp;lt;!-- å¼€å¯NameNodeå¤±è´¥è‡ªåŠ¨åˆ‡æ¢ --&amp;gt;
&amp;lt;property&amp;gt;
&amp;lt;name&amp;gt;dfs.ha.automatic-failover.enabled&amp;lt;/name&amp;gt;
&amp;lt;value&amp;gt;true&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;
&amp;lt;!-- é…ç½®å¤±è´¥è‡ªåŠ¨åˆ‡æ¢å®žçŽ°æ–¹å¼ --&amp;gt;
&amp;lt;property&amp;gt;
&amp;lt;name&amp;gt;dfs.client.failover.proxy.provider.ns1&amp;lt;/name&amp;gt;
&amp;lt;value&amp;gt;org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;
&amp;lt;!-- é…ç½®éš”ç¦»æœºåˆ¶æ–¹æ³•ï¼Œå¤šä¸ªæœºåˆ¶ç”¨æ¢è¡Œåˆ†å‰²ï¼Œå³æ¯ä¸ªæœºåˆ¶æš‚ç”¨ä¸€è¡Œ--&amp;gt;
&amp;lt;property&amp;gt;
&amp;lt;name&amp;gt;dfs.ha.fencing.methods&amp;lt;/name&amp;gt;
&amp;lt;value&amp;gt;
sshfence
shell(/bin/true)
&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;
&amp;lt;!-- ä½¿ç”¨sshfenceéš”ç¦»æœºåˆ¶æ—¶éœ€è¦sshå…ç™»é™† --&amp;gt;
&amp;lt;property&amp;gt;
&amp;lt;name&amp;gt;dfs.ha.fencing.ssh.private-key-files&amp;lt;/name&amp;gt;
&amp;lt;value&amp;gt;/home/ning/.ssh/id_rsa&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;
&amp;lt;!-- é…ç½®sshfenceéš”ç¦»æœºåˆ¶è¶…æ—¶æ—¶é—´30s --&amp;gt;
&amp;lt;property&amp;gt;
&amp;lt;name&amp;gt;dfs.ha.fencing.ssh.connect-timeout&amp;lt;/name&amp;gt;
&amp;lt;value&amp;gt;30000&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;
&amp;lt;/configuration&amp;gt;
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="mapred-sitexml">mapred-site.xml&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">&amp;lt;configuration&amp;gt;
&amp;lt;!-- æŒ‡å®šmræ¡†æž¶ä¸ºyarnæ–¹å¼ --&amp;gt;
&amp;lt;property&amp;gt;
&amp;lt;name&amp;gt;mapreduce.framework.name&amp;lt;/name&amp;gt;
&amp;lt;value&amp;gt;yarn&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;
&amp;lt;/configuration&amp;gt;
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="yarn-sitexml">yarn-site.xml&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">&amp;lt;configuration&amp;gt;
&amp;lt;!-- Site specific YARN configuration properties --&amp;gt;
&amp;lt;!-- å¼€å¯RMé«˜å¯ç”¨ --&amp;gt;
&amp;lt;property&amp;gt;
&amp;lt;name&amp;gt;yarn.resourcemanager.ha.enabled&amp;lt;/name&amp;gt;
&amp;lt;value&amp;gt;true&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;
&amp;lt;!-- æŒ‡å®šRMçš„cluster id --&amp;gt;
&amp;lt;property&amp;gt;
&amp;lt;name&amp;gt;yarn.resourcemanager.cluster-id&amp;lt;/name&amp;gt;
&amp;lt;value&amp;gt;yrc&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;
&amp;lt;!-- æŒ‡å®šRMçš„åå­— --&amp;gt;
&amp;lt;property&amp;gt;
&amp;lt;name&amp;gt;yarn.resourcemanager.ha.rm-ids&amp;lt;/name&amp;gt;
&amp;lt;value&amp;gt;rm1,rm2&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;
&amp;lt;!-- åˆ†åˆ«æŒ‡å®šRMçš„åœ°å€ --&amp;gt;
&amp;lt;property&amp;gt;
&amp;lt;name&amp;gt;yarn.resourcemanager.hostname.rm1&amp;lt;/name&amp;gt;
&amp;lt;value&amp;gt;node3&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;
&amp;lt;property&amp;gt;
&amp;lt;name&amp;gt;yarn.resourcemanager.hostname.rm2&amp;lt;/name&amp;gt;
&amp;lt;value&amp;gt;node4&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;
&amp;lt;!-- æŒ‡å®šzké›†ç¾¤åœ°å€ --&amp;gt;
&amp;lt;property&amp;gt;
&amp;lt;name&amp;gt;yarn.resourcemanager.zk-address&amp;lt;/name&amp;gt;
&amp;lt;value&amp;gt;node5:2181,node6:2181,node7:2181&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;
&amp;lt;property&amp;gt;
&amp;lt;name&amp;gt;yarn.nodemanager.aux-services&amp;lt;/name&amp;gt;
&amp;lt;value&amp;gt;mapreduce_shuffle&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;
&amp;lt;/configuration&amp;gt;
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="ä¿®æ”¹slaves">ä¿®æ”¹slaves&lt;/h3>
&lt;p>å› ä¸ºè¦åœ¨node1ä¸Šå¯åŠ¨HDFSã€åœ¨node3å¯åŠ¨yarnï¼Œæ‰€ä»¥
node1ä¸Šçš„slavesæ–‡ä»¶æŒ‡å®šçš„æ˜¯datanodeçš„ä½ç½®ï¼Œ
node3ä¸Šçš„slavesæ–‡ä»¶æŒ‡å®šçš„æ˜¯nodemanagerçš„ä½ç½®)&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">node5
node6
node7
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="å¯åŠ¨">å¯åŠ¨&lt;/h2>
&lt;ol>
&lt;li>å¯åŠ¨zookeeperé›†ç¾¤ï¼ˆåˆ†åˆ«åœ¨node5ã€node6ã€node7ä¸Šå¯åŠ¨zkï¼‰&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">cd /hadoop/zookeeper-3.4.10/bin/
./zkServer.sh start
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>æŸ¥çœ‹çŠ¶æ€ï¼šä¸€ä¸ªleaderï¼Œä¸¤ä¸ªfollower&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">./zkServer.sh status
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="2">
&lt;li>å¯åŠ¨journalnodeï¼ˆåˆ†åˆ«åœ¨åœ¨mini5ã€mini6ã€mini7ä¸Šæ‰§è¡Œï¼‰&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">cd /hadoop/hadoop-2.6.4
sbin/hadoop-daemon.sh start journalnode
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;em>è¿è¡Œjpså‘½ä»¤æ£€éªŒï¼Œnode5ã€node6ã€node7ä¸Šå¤šäº†JournalNodeè¿›ç¨‹&lt;/em>&lt;/p>
&lt;ol start="3">
&lt;li>
&lt;p>æ ¼å¼åŒ–HDFS
åœ¨node1ä¸Šæ‰§è¡Œå‘½ä»¤:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">hdfs namenode -format
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ ¼å¼åŒ–åŽä¼šåœ¨æ ¹æ®core-site.xmlä¸­çš„hadoop.tmp.diré…ç½®ç”Ÿæˆä¸ªæ–‡ä»¶ï¼Œ
è¿™é‡Œæˆ‘é…ç½®çš„æ˜¯/hadoop/hadoop-2.6.4/tmpï¼Œ
ç„¶åŽå°†/hadoop/hadoop-2.6.4/tmpæ‹·è´åˆ°hadoop02çš„/hadoop/hadoop-2.6.10/ä¸‹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">scp -r tmp/ hadoop02:/home/hadoop/app/hadoop-2.6.4/
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¹Ÿå¯ä»¥è¿™æ ·ï¼Œå»ºè®®hdfs namenode -bootstrapStandby&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ ¼å¼åŒ–ZKFC(åœ¨mini1ä¸Šæ‰§è¡Œä¸€æ¬¡å³å¯)&lt;/p>
&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">hdfs zkfc -formatZK
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="5">
&lt;li>å¯åŠ¨HDFS(åœ¨mini1ä¸Šæ‰§è¡Œ)&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">sbin/start-dfs.sh
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="6">
&lt;li>å¯åŠ¨YARN
(#####æ³¨æ„#####ï¼šæ˜¯åœ¨hadoop02ä¸Šæ‰§è¡Œstart-yarn.shï¼Œ
æŠŠnamenodeå’Œresourcemanageråˆ†å¼€æ˜¯å› ä¸ºæ€§èƒ½é—®é¢˜ï¼Œå› ä¸ºä»–ä»¬éƒ½è¦å ç”¨å¤§é‡èµ„æºï¼Œæ‰€ä»¥æŠŠä»–ä»¬åˆ†å¼€äº†ï¼Œä»–ä»¬åˆ†å¼€äº†å°±è¦åˆ†åˆ«åœ¨ä¸åŒçš„æœºå™¨ä¸Šå¯åŠ¨)&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">sbin/start-yarn.sh
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>node4ä¸Š&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">yarn-daemon.sh start resourcemanager
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="éªŒè¯">éªŒè¯&lt;/h2>
&lt;p>æµè§ˆå™¨è®¿é—®:
http://node1:50070
NameNode &amp;lsquo;node1:9000&amp;rsquo; (active)
http://node2:50070
NameNode &amp;lsquo;node2:9000&amp;rsquo; (standby)
http://node4:8088&lt;/p></description></item><item><title>NameNodeç®¡ç†å…ƒæ•°æ®çš„æœºåˆ¶</title><link>https://blog.itning.top/post/2018/05/23/namenode%E7%AE%A1%E7%90%86%E5%85%83%E6%95%B0%E6%8D%AE%E7%9A%84%E6%9C%BA%E5%88%B6/</link><pubDate>Wed, 23 May 2018 10:21:39 +0800</pubDate><guid>https://blog.itning.top/post/2018/05/23/namenode%E7%AE%A1%E7%90%86%E5%85%83%E6%95%B0%E6%8D%AE%E7%9A%84%E6%9C%BA%E5%88%B6/</guid><description>&lt;p>å½“NameNodeæ”¶åˆ°æ›´æ–°å…ƒæ•°æ®è¯·æ±‚&lt;/p>
&lt;p>é¦–å…ˆæ›´æ–°å†…å­˜ä¸­å…ƒæ•°æ®ä¿¡æ¯&lt;/p>
&lt;p>è®°å½•æ“ä½œæ—¥å¿— edits&lt;/p>
&lt;p>å®šæœŸåˆå¹¶(checkpoint) edits åˆ° fileimage&lt;/p>
&lt;p>checkpoint è§¦å‘æ¡ä»¶: å®šæ—¶ ; æŒ‰ç…§editsä¸­è®°å½•æ•°é‡ ;&lt;/p>
&lt;p>è§¦å‘æ¡ä»¶è¾¾æˆ NameNode è¯·æ±‚ secondary namenode&lt;/p>
&lt;p>NameNode å°†editsæ­£åœ¨å†™å…¥çš„åˆ‡æ–­å¹¶æ»šåŠ¨ç”Ÿæˆ&lt;/p>
&lt;p>secondary namenode å°†fsimageå’Œeditsä¸‹è½½åˆ°æœ¬åœ°,å¹¶åœ¨å†…å­˜ä¸­åˆå¹¶,ç„¶åŽå­˜æ”¾åˆ°æœ¬åœ°,å†è¯·æ±‚NameNodeä¸Šä¼ &lt;/p>
&lt;p>ä¸‹æ¬¡åˆå¹¶åªéœ€ä¸‹è½½editså³å¯&lt;/p>
&lt;p>æ¯ä¸€ä¸ªblockå¤§çº¦å ç”¨å…ƒæ•°æ®150byte&lt;/p>
&lt;p>NameNodeç¡¬ç›˜åæŽ‰åŽ å¯ä»¥å°†Secoundary NameNode çš„å·¥ä½œç›®å½•æ‹·è´åˆ°NameNodeå·¥ä½œç›®å½•ä¸­&lt;/p>
&lt;p>å¯ä»¥é…ç½®å¤šä¸ªNameNodeå·¥ä½œç›®å½• hdfs-site.xml&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-xml" data-lang="xml">
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>å®¢æˆ·ç«¯å‘HDFSå†™æ•°æ®çš„æµç¨‹</title><link>https://blog.itning.top/post/2018/05/23/%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%90%91hdfs%E5%86%99%E6%95%B0%E6%8D%AE%E7%9A%84%E6%B5%81%E7%A8%8B/</link><pubDate>Wed, 23 May 2018 10:03:28 +0800</pubDate><guid>https://blog.itning.top/post/2018/05/23/%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%90%91hdfs%E5%86%99%E6%95%B0%E6%8D%AE%E7%9A%84%E6%B5%81%E7%A8%8B/</guid><description>&lt;h2 id="hdfsé›†ç¾¤åˆ†ä¸ºä¸¤å¤§è§’è‰²">HDFSé›†ç¾¤åˆ†ä¸ºä¸¤å¤§è§’è‰²:&lt;/h2>
&lt;p>NameNode DataNode (Secondary NameNode)&lt;/p>
&lt;p>NameNodeè´Ÿè´£ç®¡ç†é›†ç¾¤çš„å…ƒæ•°æ®&lt;/p>
&lt;p>DataNodeè´Ÿè´£ç®¡ç†ç”¨æˆ·çš„æ–‡ä»¶æ•°æ®å—&lt;/p>
&lt;p>æ–‡ä»¶ä¼šæŒ‰ç…§å›ºå®šçš„å¤§å°ï¼ˆblocksizeï¼‰åˆ‡æˆè‹¥å¹²å—åŽåˆ†å¸ƒå¼å­˜å‚¨åœ¨è‹¥å¹²å°datanodeä¸Š&lt;/p>
&lt;p>æ¯ä¸€ä¸ªæ–‡ä»¶å—å¯ä»¥æœ‰å¤šä¸ªå‰¯æœ¬ï¼Œå¹¶å­˜æ”¾åœ¨ä¸åŒçš„datanodeä¸Š&lt;/p>
&lt;h2 id="hdfså†™æ•°æ®æµç¨‹">HDFSå†™æ•°æ®æµç¨‹&lt;/h2>
&lt;ol>
&lt;li>
&lt;p>å®¢æˆ·ç«¯å‘NameNodeé€šä¿¡ å‘é€ä¸Šä¼ æ–‡ä»¶ç”³è¯·,NameNodeæŸ¥çœ‹æ–‡ä»¶æ˜¯å¦å·²ç»å­˜åœ¨&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ–‡ä»¶ä¸å­˜åœ¨,è¿”å›žç»™å®¢æˆ·ç«¯å“åº”,å¯ä»¥ä¸Šä¼ æ–‡ä»¶&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å®¢æˆ·ç«¯å‘NameNodeè¯·æ±‚ç¬¬ä¸€ä¸ªblockä¸Šä¼ åœ¨å“ªä¸ªDataNodeä¸Š&lt;/p>
&lt;/li>
&lt;li>
&lt;p>NameNodeå“åº”å¯ä»¥ä¸Šä¼ åœ¨å“ªäº›DataNodeä¸Š(å°±è¿‘,æœ€è¿œ,æœ¬æœºæž¶) -é…ç½®æœºæž¶æ„ŸçŸ¥&lt;/p>
&lt;p>å‰¯æœ¬æ•°é‡ç”±å®¢æˆ·ç«¯é…ç½®&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å®¢æˆ·ç«¯å‘ä¸€ä¸ªDataNodeå»ºç«‹è¿žæŽ¥,å¹¶å‘Šè¯‰è¿˜è¦ä¼ åˆ°å“ªä¸ªDataNodeä¸­,ç¬¬ä¸€ä¸ªDataNodeæ”¶åˆ°åŽè´Ÿè´£å‘ç¬¬äºŒä¸ªDataNodeå»ºç«‹è¿žæŽ¥,å…¨éƒ¨å»ºç«‹åŽ å“åº”å»ºç«‹å®Œæˆæ¶ˆæ¯&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å®¢æˆ·ç«¯å°†ç¬¬ä¸€ä¸ªblockä¼ ç»™ç¬¬ä¸€ä¸ªDataNode,ä»¥packetä¸ºå•ä½ä¼ ç»™ä¸‹ä¸€ä¸ªDataNode&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å½“ç¬¬ä¸€ä¸ªblockä¼ é€å®Œæˆ,å®¢æˆ·ç«¯è¯·æ±‚NameNodeç¬¬äºŒä¸ªblockä½ç½®&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>&lt;strong>åªè¦ä¸€ä¸ªDataNodeä¸Šä¼ æˆåŠŸå³å¯&lt;/strong>&lt;/p></description></item><item><title>HDFSè¯»æ•°æ®æµç¨‹</title><link>https://blog.itning.top/post/2018/05/23/hdfs%E8%AF%BB%E6%95%B0%E6%8D%AE%E6%B5%81%E7%A8%8B/</link><pubDate>Wed, 23 May 2018 00:09:08 +0800</pubDate><guid>https://blog.itning.top/post/2018/05/23/hdfs%E8%AF%BB%E6%95%B0%E6%8D%AE%E6%B5%81%E7%A8%8B/</guid><description>&lt;ol>
&lt;li>å®¢æˆ·ç«¯å‘NameNodeè¯·æ±‚ä¸‹è½½æ–‡ä»¶A&lt;/li>
&lt;li>NameNodeä»Žå…ƒæ•°æ®ä¸­è¯»å–Aæ–‡ä»¶æ‰€åœ¨ä½ç½®,å‰¯æœ¬æ•°é‡ è¿”å›žç»™å®¢æˆ·ç«¯&lt;/li>
&lt;li>å®¢æˆ·ç«¯å‘æœ€è¿‘DataNodeè¯·æ±‚ä¸‹è½½block1 å»ºç«‹ä¸‹è½½é€šé“&lt;/li>
&lt;li>å¼€å§‹ä¼ è¾“æ•°æ®&lt;/li>
&lt;li>ä¼ è¾“å®ŒæˆåŽå®¢æˆ·ç«¯æ‰¾ç¬¬äºŒä¸ªblockæ•°æ®æ‰€åœ¨DataNodeä¸­çš„ä½ç½®&lt;/li>
&lt;li>æœ€åŽæ‰€æœ‰å—åœ¨å®¢æˆ·ç«¯åˆå¹¶&lt;/li>
&lt;/ol></description></item><item><title>OOADä¸ŽUML</title><link>https://blog.itning.top/post/2018/05/16/ooad%E4%B8%8Euml/</link><pubDate>Wed, 16 May 2018 08:25:33 +0800</pubDate><guid>https://blog.itning.top/post/2018/05/16/ooad%E4%B8%8Euml/</guid><description>&lt;h2 id="ooadobject-oriented-analysis-and-design-é¢å‘å¯¹è±¡çš„åˆ†æžä¸Žè®¾è®¡">OOAD(Object Oriented Analysis and Design) é¢å‘å¯¹è±¡çš„åˆ†æžä¸Žè®¾è®¡&lt;/h2>
&lt;h3 id="ooa-åˆ†æžé˜¶æ®µ">OOA åˆ†æžé˜¶æ®µ&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>å»ºç«‹é’ˆå¯¹ä¸šåŠ¡é—®é¢˜åŸŸçš„æ¸…æ™°è§†å›¾&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åˆ—å‡ºç³»ç»Ÿå¿…é¡»è¦å®Œæˆçš„æ ¸å¿ƒäººç‰©&lt;/p>
&lt;/li>
&lt;li>
&lt;p>é’ˆå¯¹é—®é¢˜åŸŸå»ºç«‹å…¬å…±è¯æ±‡è¡¨&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åˆ—å‡ºé’ˆå¯¹æ­¤é—®é¢˜åŸŸçš„æœ€ä½³è§£å†³æ–¹æ¡ˆ&lt;/p>
&lt;p>æ ¸å¿ƒé—®é¢˜:What to do ? è¦åšä»€ä¹ˆ?&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="ood-è®¾è®¡é˜¶æ®µ">OOD è®¾è®¡é˜¶æ®µ&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>å¦‚ä½•è§£å†³å…·ä½“çš„ä¸šåŠ¡é—®é¢˜&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¼•å…¥ç³»ç»Ÿå·¥ä½œæ‰€éœ€çš„æ”¯æŒå…ƒç´ &lt;/p>
&lt;/li>
&lt;li>
&lt;p>å®šä¹‰ç³»ç»Ÿçš„å®žçŽ°ç­–ç•¥&lt;/p>
&lt;p>æ ¸å¿ƒé—®é¢˜:How to do ? å¦‚ä½•åš?&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="å…³ç³»">å…³ç³»&lt;/h3>
&lt;h4 id="å…³è”å…³ç³»-association">å…³è”å…³ç³» (Association)&lt;/h4>
&lt;p>ç”¨æˆ·å’Œè®¢å•ä¹‹é—´æ˜¯å…³è”å…³ç³»&lt;/p>
&lt;p>ä¸€ä¸ªç”¨æˆ·å¯¹åº”å¤šä¸ªè®¢å•(ä¸€å¯¹å¤š)&lt;/p>
&lt;p>è®¢å•å’Œç”¨æˆ·ä¹‹é—´æ˜¯å¤šå¯¹ä¸€&lt;/p>
&lt;p>ç”¨æˆ·å’Œè®¢å•æ˜¯ä¸€å¯¹å¤šåŒå‘å…³è”&lt;/p>
&lt;h4 id="ä¾èµ–å…³ç³»-dependency">ä¾èµ–å…³ç³» (Dependency)&lt;/h4>
&lt;p>æŸä¸ªç±»ä¾èµ–æŸä¸ªç±»çš„æŸä¸ªæ–¹æ³•&lt;/p>
&lt;p>Aç±»new Bç±»å®žä¾‹&lt;/p>
&lt;h4 id="èšé›†å…³ç³»-aggregation">èšé›†å…³ç³» (Aggregation)&lt;/h4>
&lt;p>æ•´ä½“ä¸Žéƒ¨åˆ†ä¹‹é—´çš„å…³ç³»&lt;/p>
&lt;p>äººå’Œæ‰‹ä¹‹é—´&lt;/p>
&lt;h4 id="ä¸€èˆ¬åŒ–å…³ç³»-generalization">ä¸€èˆ¬åŒ–å…³ç³» (Generalization)&lt;/h4>
&lt;p>æŒ‡çš„æ˜¯ç±»ä¹‹é—´ç»§æ‰¿å…³ç³»&lt;/p>
&lt;h3 id="å†…èšå’Œè€¦åˆ">å†…èšå’Œè€¦åˆ&lt;/h3>
&lt;p>&lt;strong>è®¾è®¡åŽŸåˆ™:å¢žåŠ å†…èš,å‡å°‘è€¦åˆ&lt;/strong>&lt;/p>
&lt;h4 id="å†…èš">å†…èš&lt;/h4>
&lt;p>åº¦é‡ä¸€ä¸ªç±»ç‹¬ç«‹å®ŒæˆæŸé¡¹å·¥ä½œçš„èƒ½åŠ›&lt;/p>
&lt;h4 id="è€¦åˆ">è€¦åˆ&lt;/h4>
&lt;p>åº¦é‡ç³»ç»Ÿå†…æˆ–ç³»ç»Ÿä¹‹é—´ä¾èµ–å…³ç³»çš„å¤æ‚åº¦&lt;/p>
&lt;h3 id="è½¯ä»¶å¼€å‘é‡‡å–è¿­ä»£é€’å¢žç”Ÿå‘½å‘¨æœŸ">è½¯ä»¶å¼€å‘é‡‡å–è¿­ä»£,é€’å¢žç”Ÿå‘½å‘¨æœŸ&lt;/h3>
&lt;p>æ¯ä¸€ä¸ªå‘¨æœŸåŒ…å«ä¸€æ¬¡æˆ–å¤šæ¬¡è¿­ä»£&lt;/p>
&lt;p>ä¸€ä¸ªé˜¶æ®µçš„ç»“æŸç§°ä¹‹ä¸º**&amp;ldquo;é‡Œç¨‹ç¢‘&amp;rdquo;**(milestone) :M1 M2 M3 ç‰ˆæœ¬&lt;/p>
&lt;h2 id="umlunified-modeling-language-ç»Ÿä¸€å»ºæ¨¡è¯­è¨€">UML(Unified Modeling Language) ç»Ÿä¸€å»ºæ¨¡è¯­è¨€&lt;/h2>
&lt;p>å›¾å½¢åŒ–çš„è¯­è¨€è¡¨ç¤º&lt;/p>
&lt;h3 id="é™æ€æ¨¡åž‹static-model">é™æ€æ¨¡åž‹(static model)&lt;/h3>
&lt;p>åˆ›å»ºå¹¶è®°å½•ä¸€ä¸ªç³»ç»Ÿçš„é™æ€ç‰¹å¾&lt;/p>
&lt;p>åæ˜ ä¸€ä¸ªè½¯ä»¶ç³»ç»ŸåŸºç¡€,å›ºå®šçš„æ¡†æž¶ç»“æž„&lt;/p>
&lt;p>åˆ›å»ºç›¸å…³é—®é¢˜åŸŸä¸»è¦å…ƒç´ çš„è§†å›¾&lt;/p>
&lt;p>è¯¥æ¨¡åž‹åŒ…å«:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>ç”¨ä¾‹å›¾ (use case diagrams)&lt;/strong>&lt;/li>
&lt;li>&lt;strong>ç±»å›¾ (class diagrams)&lt;/strong>&lt;/li>
&lt;li>å¯¹è±¡å›¾ (object diagrams)&lt;/li>
&lt;li>ç»„ä»¶å›¾ (component diagrams)&lt;/li>
&lt;li>éƒ¨ç½²å›¾ (deployment diagrams)&lt;/li>
&lt;/ul>
&lt;h4 id="ç”¨ä¾‹å›¾-use-case-diagrams">ç”¨ä¾‹å›¾ (use case diagrams)&lt;/h4>
&lt;p>å±•ç¤ºç³»ç»Ÿçš„æ ¸å¿ƒåŠŸèƒ½åŠä¸Žå…¶äº¤äº’çš„ç”¨æˆ·&lt;/p>
&lt;p>ç”¨æˆ·è¢«ç§°ä¹‹ä¸º&amp;quot;æ´»åŠ¨è€…&amp;rdquo; (Actor)&lt;/p>
&lt;p>ç”¨ä¾‹ä½¿ç”¨æ¤­åœ†è¡¨ç¤º&lt;/p>
&lt;p>ä¸ºç®€åŒ–å»ºæ¨¡è¿‡ç¨‹,ç”¨ä¾‹å›¾å¯æ ‡æ³¨ä¼˜å…ˆçº§&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2018-05-16-OOAD%E4%B8%8EUML/user_case.PNG" alt="user_case">&lt;/p>
&lt;h4 id="ç±»å›¾-class-diagrams">ç±»å›¾ (class diagrams)&lt;/h4>
&lt;p>è¡¨çŽ°ç±»çš„ç‰¹å¾&lt;/p>
&lt;p>ç±»å›¾æè¿°äº†å¤šå„ç±»,æŽ¥å£çš„ç‰¹å¾,ä»¥åŠå¯¹è±¡ä¹‹é—´çš„åä½œä¸Žäº¤äº’&lt;/p>
&lt;p>ç”±ä¸€ä¸ªæˆ–å¤šä¸ªçŸ©å½¢åŒºåŸŸæž„æˆ,å†…å®¹åŒ…æ‹¬:&lt;/p>
&lt;ul>
&lt;li>ç±»åž‹(ç±»å)&lt;/li>
&lt;li>å±žæ€§(å¯é€‰)&lt;/li>
&lt;li>æ“ä½œ(å¯é€‰)&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://blog.itning.top/images/2018-05-16-OOAD%E4%B8%8EUML/class.PNG" alt="class">&lt;/p>
&lt;h4 id="å¯¹è±¡å›¾-object-diagrams">å¯¹è±¡å›¾ (object diagrams)&lt;/h4>
&lt;p>è¡¨çŽ°å¯¹è±¡çš„ç‰¹å¾&lt;/p>
&lt;p>å¯¹è±¡å›¾å±•ç¤ºäº†å¤šä¸ªå¯¹è±¡çš„ç‰¹å¾åŠå¯¹è±¡ä¹‹é—´çš„äº¤äº’&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2018-05-16-OOAD%E4%B8%8EUML/object.PNG" alt="object">&lt;/p>
&lt;h4 id="ç»„ä»¶å›¾-component-diagrams">ç»„ä»¶å›¾ (component diagrams)&lt;/h4>
&lt;p>è¡¨çŽ°è½¯ä»¶ç»„ä»¶ä¹‹é—´çš„å…³ç³»&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2018-05-16-OOAD%E4%B8%8EUML/component.PNG" alt="component">&lt;/p>
&lt;h4 id="éƒ¨ç½²å›¾-deployment-diagrams">éƒ¨ç½²å›¾ (deployment diagrams)&lt;/h4>
&lt;p>ç”¨äºŽéƒ¨ç½²è½¯ä»¶åº”ç”¨çš„ç‰©ç†è®¾å¤‡ä¿¡æ¯&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2018-05-16-OOAD%E4%B8%8EUML/deployment.PNG" alt="deployment">&lt;/p>
&lt;h3 id="åŠ¨æ€æ¨¡åž‹dynamic-model">åŠ¨æ€æ¨¡åž‹(dynamic model)&lt;/h3>
&lt;p>ç”¨ä»¥å±•ç¤ºç³»ç»Ÿçš„è¡Œä¸º&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;strong>æ—¶åºå›¾ (sequence diagrams)&lt;/strong>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åä½œå›¾ (collaboration diagrams)&lt;/p>
&lt;/li>
&lt;li>
&lt;p>çŠ¶æ€å›¾ (state chart diagrams)&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ´»åŠ¨å›¾ (activity diagrams)&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h4 id="æ—¶åºå›¾-sequence-diagrams">æ—¶åºå›¾ (sequence diagrams)&lt;/h4>
&lt;p>æ•æ‰ä¸€æ®µæ—¶é—´èŒƒå›´å†…å¤šä¸ªå¯¹è±¡ä¹‹é—´çš„äº¤äº’ä¿¡æ¯&lt;/p>
&lt;p>å¼ºè°ƒæ¶ˆæ¯äº¤äº’çš„æ—¶é—´é¡ºåº&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2018-05-16-OOAD%E4%B8%8EUML/sequence.PNG" alt="sequence">&lt;/p>
&lt;h4 id="åä½œå›¾-collaboration-diagrams">åä½œå›¾ (collaboration diagrams)&lt;/h4>
&lt;p>è¡¨çŽ°ä¸€å®šèŒƒå›´å†…å¯¹è±¡ä¹‹é—´åä½œçš„ä¿¡æ¯&lt;/p>
&lt;p>å¼ºè°ƒå‚ä¸Žä¿¡æ¯äº¤æµçš„å¯¹è±¡ä¹‹é—´çš„ç»„ç»‡ç»“æž„&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2018-05-16-OOAD%E4%B8%8EUML/collaboration.PNG" alt="collaboration">&lt;/p>
&lt;h4 id="çŠ¶æ€å›¾-state-chart-diagrams">çŠ¶æ€å›¾ (state chart diagrams)&lt;/h4>
&lt;p>å¼ºè°ƒä¸€ä¸ªå¯¹è±¡åœ¨ä¸åŒäº‹ä»¶è§¦å‘æ—¶,å…¶å†…éƒ¨çŠ¶æ€çš„è½¬å˜è¿‡ç¨‹&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2018-05-16-OOAD%E4%B8%8EUML/state_chart.PNG" alt="state_chart">&lt;/p>
&lt;h4 id="æ´»åŠ¨å›¾-activity-diagrams">æ´»åŠ¨å›¾ (activity diagrams)&lt;/h4>
&lt;p>æè¿°æ´»åŠ¨çš„æµç¨‹&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2018-05-16-OOAD%E4%B8%8EUML/activity.PNG" alt="activity">&lt;/p></description></item><item><title>äººç”Ÿè‹¦çŸ­,ä½•å¦¨ä¸€è¯•</title><link>https://blog.itning.top/post/2018/05/13/%E4%BA%BA%E7%94%9F%E8%8B%A6%E7%9F%AD%E4%BD%95%E5%A6%A8%E4%B8%80%E8%AF%95/</link><pubDate>Sun, 13 May 2018 19:34:43 +0800</pubDate><guid>https://blog.itning.top/post/2018/05/13/%E4%BA%BA%E7%94%9F%E8%8B%A6%E7%9F%AD%E4%BD%95%E5%A6%A8%E4%B8%80%E8%AF%95/</guid><description>&lt;p>å½“ä½ è®¤çœŸè°ˆè¿‡ä¸€æ¬¡æ„Ÿæƒ… æœ€åŽåˆ†æ‰‹äº† åŽæ¥ä½ å´å¾ˆéš¾å†å–œæ¬¢ä¸Šåˆ«äºº ä½ ä¸æƒ³å†èŠ±å¿ƒæ€åŽ»äº†è§£åŽ»ç”¨å¿ƒ å°±å¥½æ¯”ä½ åœ¨å–ä¸€æ¯æ°´è¿˜å‰©ä¸‰åˆ†ä¹‹ä¸€çš„æ—¶å€™æœ‰åªå°èš‚èšä¸å°å¿ƒçˆ¬è¿›äº†æ¯å­é‡ŒæŠŠæ°´å¼„è„äº† è®©ä½ ä»Žæ–°å€’ä¸€æ¯å†å– ä½†ä½ å´å› ä¸ºè‚šå­æ’‘å–ä¸ä¸‹åŽ»äº† å°±åƒçˆ±æƒ…è¿˜å·®è¦ä¸€ä¸ªç»“å°¾ä½†å´è®©ä½ ä»Žæ–°æ¥è¿‡ é‚£æ—¶çš„ä½ å·²ç»æ²¡æœ‰ç²¾åŠ›äº†&lt;/p>
&lt;p>ä½ å¯ä»¥ä¸€å¤©ä¸Šä¹èŠ‚è¯¾ä¸¤èŠ‚æ™šè‡ªä¹ ,ä½ å¯ä»¥ä¸€å¤©å†™å®Œä¸¤æ”¯ç¬”èŠ¯åšè‡³å°‘ä¸‰å¥—å·å­,ä½ å¯ä»¥æ—©èµ·ååˆ†é’Ÿæ™šç¡ååˆ†é’Ÿè®°å‡ ä¸ªå•è¯å’Œæˆè¯­,ä½ å¯ä»¥ç”¨çŽ©æ‰‹æœºçš„æ—¶é—´å¼„æ‡‚ä¸€é“æ•°å­¦é¢˜,ç”¨çœ‹æ‚å¿—çš„æ—¶é—´å†™å®Œä¸€ç¯‡è‹±è¯­é˜…è¯»,ä½ å¯ä»¥æŠŠKæ­Œçœ‹ç”µå½±èšä¼šæ‰“æ¸¸æˆçš„æ—¶é—´éƒ½ç”¨åœ¨å­¦ä¹ ä¸Š,æ€»æœ‰äººæ¯”ä½ åŠªåŠ›,å¯æ€•çš„æ˜¯æ¯”ä½ ç‰›çš„äººæ¯”ä½ è¿˜åŠªåŠ›. ã€€ã€€&lt;/p>
&lt;p>é«˜è€ƒæŠ¥è€ƒäººæ•°915ä¸‡äººï¼Œå…¶ä¸­907.7ä¸‡äººä¸ä¸Žä½ åœ¨åŒçœã€‚åŒçœä¸­å…¶ä¸­1ä¸‡äººå·²è¢«ä¿é€ï¼Œ2åƒäººå¯¹å¤§å­¦åŽå°±ä¸šæ²¡ä¿¡å¿ƒä¸å‚åŠ é«˜è€ƒï¼Œ8åƒäººæ˜¯è£¸è€ƒï¼Œ9åƒäººä¸èƒ½æ­£å¸¸å‘æŒ¥ï¼Œ1åƒäººä¼šè¿Ÿåˆ°ï¼Œ4.2ä¸‡äººä¸å’Œä½ è€ƒä¸€ä¸ªå­¦æ ¡ï¼Œå‰©ä¸‹1000äººï¼Œ630æ°´å¹³ä¸å¦‚ä½ ï¼Œ369ä¸ªä¼šäº§ç”Ÿå¿ƒç†é—®é¢˜ã€‚ä½ çš„å¯¹æ‰‹åªå‰©è‡ªå·±ï¼ã€€ã€€&lt;/p>
&lt;p>ä¸ç®¡ä½ æœ‰å†å¤šçš„å…´è¶£çˆ±å¥½ å†å¤šçš„ç¤¾ä¼šå…³ç³» å†æ·±çš„å¯¹åŠªåŠ›å­¦ä¹ çš„åŽŒæ¶ä¹‹æ„Ÿ åœ¨ä½ é’æ˜¥æœŸçš„æŸä¸€ä¸ªæ—¶é—´ç‚¹ ä½ éƒ½ä¼šæ˜Žç™½ å­¦ä¹ çš„é‡è¦æ€§é«˜è¿‡æ‰€æœ‰ ä½ è¦æ— æ¬²åˆ™åˆš ä½ è¦å­¦ä¼šå­¤ç‹¬ä½ è¦æŠŠè‡ªå·±é€¼å‡ºæœ€å¤§çš„æ½œèƒ½ æ²¡æœ‰äººä¼šä¸ºäº†ä½ çš„æœªæ¥ä¹°å• ä½ è¦ä¹ˆåŠªåŠ›å‘ä¸Šçˆ¬ è¦ä¹ˆçƒ‚åœ¨ç¤¾ä¼šæœ€åº•å±‚çš„æ³¥æ·–é‡Œ è¿™å°±æ˜¯ç”Ÿæ´».ã€€ã€€&lt;/p>
&lt;p>å…­ç‚¹èµ·åºŠå¾ˆå›°éš¾ï¼ŒèƒŒå•è¯å¾ˆå›°éš¾ï¼Œé™ä¸‹å¿ƒå¾ˆå›°éš¾â€¦â€¦ä½†æ˜¯æ€»æœ‰ä¸€äº›äººï¼Œäº”ç‚¹å¯ä»¥èµ·åºŠï¼Œä¸€å¤©èƒŒå…­è¯¾å•è¯ï¼Œè€å¿ƒè¯»å®Œä¸€æœ¬ä¹¦ã€‚è°ä¹Ÿæ²¡æœ‰è¶…èƒ½åŠ›ï¼Œä½†æ˜¯è‡ªå·±å¯ä»¥å†³å®šä¸€å¤©åŽ»åšä»€ä¹ˆäº‹æƒ…ã€‚ä½ ä»¥ä¸ºæ²¡æœ‰äº†è·¯ï¼Œäº‹å®žä¸Šè·¯å¯èƒ½å°±åœ¨å‰æ–¹ä¸€ç‚¹ç‚¹ã€‚é‚£äº›æ¯”è‡ªå·±å¼ºå¤§çš„äººéƒ½åœ¨æ‹¼å‘½ï¼Œæˆ‘ä»¬è¿˜æœ‰ä»€ä¹ˆç†ç”±åœä¸‹è„šæ­¥ï¼Ÿã€€ã€€&lt;/p>
&lt;p>å¦‚æžœä½ æƒ³åœ¨é«˜è€ƒåŽæ¢ä¸€éƒ¨æ–°çš„æ‰‹æœºã€‚ä¹°ä¸€å°ç”µè„‘ã€‚åŽ»çœ‹ä¸€æ¬¡æ¼”å”±ä¼šã€‚äº«å—ä¸€æ¬¡å•äººæ—…è¡Œã€‚æ¯å¤©æ—©ä¸Šèƒ½ç¡åˆ°è‡ªç„¶é†’ã€‚ä¸ç”¨ä¸ºå†™ä¸å®Œçš„ä½œä¸šå‘æ„ã€‚ä¸å¿…å†å¬çˆ¶æ¯çš„å” å¨ã€‚è‡ªä¿¡åœ°è¯´æˆ‘å‡ºåŽ»çŽ©äº†ã€‚æ‹‰ç€æ‹äººçš„æ‰‹åœ¨è¡—ä¸Šç–¯ç™«ã€‚ç¢°åˆ°ç­ä¸»ä»»åè€Œæ‹‰å¾—æ›´ç´§ã€‚é‚£ä¹ˆï¼ŒåŽ»åŠªåŠ›å§ã€‚è‡³å°‘18å²çš„æš‘å‡éœ€è¦ä½ ã€‚ ã€€ã€€&lt;/p>
&lt;p>ä½ æƒ³è€ƒå“ªæ‰€å¤§å­¦? ã€€ã€€&lt;/p>
&lt;p>åˆ«è¯´ä»€ä¹ˆåªæ˜¯åšæ¢¦çš„è¯ é«˜è€ƒå§æœ€åŽä¸€å¹´å‘äº†ç‹ ä¸€ä¸‹è€ƒäº†ä¸€æœ¬çš„æ•°ä¸èƒœæ•° ä½ ä¸è¯•è¯• æ€Žä¹ˆçŸ¥é“æœªæ¥åˆ°åº•æ˜¯æ€Žæ ·?ã€€ã€€ä½ æƒ³ä¸æƒ³åœ¨åå¹´åŽ ã€€ã€€ç”šè‡³æ›´ä¹…åŽ åœ¨è¡—ä¸Šæˆ–è€…ä»»ä½•åœ°æ–¹é‡åˆ°è‡ªå·±æ›¾ç»æš—æ‹è¿‡çš„æŸæŸ æ›¾ç»å˜²ç¬‘è¿‡ä½ çœ‹ä¸èµ·çš„åŒå­¦ æ›¾ç»è·Ÿä½ è¯´ä½ æ°¸è¿œä¸å¯èƒ½æœ‰å‡ºæ¯çš„è€å¸ˆ æ›¾ç»ç‹ ç‹ æ‹’ç»ä½ å› ä¸ºä½ ä¸å¤Ÿæ¼‚äº®ä¸å¤Ÿä¼˜ç§€çš„ç”·ç”Ÿ ã€€ã€€æ›¾ç»è¿žæ­£çœ¼éƒ½æ²¡çœ‹è¿‡ä½ ä¸€çœ¼çš„é‚£äº›æ‰€è°“ä¼˜ç­‰ç”Ÿ éƒ½å¯ä»¥éª„å‚²çš„æ‰¬èµ·å¤´ç¬‘ç€è¯´çœ‹è€å­çŽ°åœ¨å°±æ˜¯è¿‡å¾—æ¯”ä½ å¥½ ä½ è¿˜åœ¨å¥”æ³¢è¿˜åœ¨ä¸ºç”Ÿæ´»æ‹…å¿§ä½†æ˜¯æˆ‘æ—©å°±è¿‡ä¸Šäº†è‡ªå·±æƒ³è¦çš„ç”Ÿæ´» ã€€ã€€å¦‚æžœä½ å¸Œæœ›æœ‰é‚£ä¹ˆä¸€åˆ» é‚£ä¹ˆä¸€å¤© é‚£å°±æ‹¿èµ·ä½ çš„ä¹¦æœ¬å§ ä»»ä½•ä¼Ÿå¤§çš„æ¢¦æƒ³ä¸å¯èƒ½ä»Žå¹»æƒ³é‡Œå‡ºæ¥ è€Œä»»ä½•å…‰è¾‰çš„æ—¶åˆ»å¿…å®šä»Žä¸€åˆ†ä¸€ç§’çš„åŠªåŠ›é‡Œå¾—æ¥&lt;/p>
&lt;p>äººè„‘æœ‰æ— é™çš„æ½œåŠ›ï¼Œä¸€ä¸ªäººçš„å¤§è„‘å¦‚æžœå®Œå…¨è¢«å¼€å‘çš„è¯æ®è¯´å¯ä»¥è®°ä½26å›½è¯­è¨€,4000å¤šæœ¬å›¾ä¹¦çš„å…¨éƒ¨å†…å®¹ å…¨ä¸–ç•Œæœ€èªæ˜Žçš„äººçˆ±å› æ–¯å¦ä¹Ÿä»…ä»…åªå¼€å‘äº†12ï¼…è€Œå·² æ‰€ä»¥åˆ«ä»¥è‡ªå·±è ¢ä¸ºå€Ÿå£ ä½ è¦æ˜¯çœŸçš„å‘ç‹ äº† ä½ æ˜¯ä¸æ˜¯ä¸‹ä¸€ä¸ªçˆ±å› æ–¯å¦è°åˆä¼šçŸ¥é“ã€€&lt;/p>
&lt;p>åšä¿¡ä¸€å¥è¯ æ²¡æœ‰äººä¼šè®©ä½ è¾“ é™¤éžä½ ä¸æƒ³èµ¢ ã€€ã€€&lt;/p>
&lt;p>å¯¹ æˆ‘å˜´ä¸Šè¯´æˆ‘å¾ˆè®¨åŽŒå­¦ä¹  è¯´çœŸçš„ æˆ‘ä¹Ÿæžä¸æ‡‚é‚£äº›äºŒæ¬¡ä¸‰è§’å‡½æ•°å­¦äº†åˆ°åº•æœ‰ä»€ä¹ˆå±ç”¨ æˆ‘åŒæ„æŸ¯æ™¯è…¾è¯´çš„ åå¹´åŽæˆ‘çš„ç”Ÿæ´»ä¸­ä¸€å®šæ²¡æœ‰æ•°å­¦LOGO ä½†æ˜¯æˆ‘ä»ç„¶å¯ä»¥æ´»å¾—å¾ˆå¥½ ä½†è¿™å¹¶ä¸æ˜¯ä½ ä¸å­¦ä¹ çš„ç†ç”± è¯´å¥ä¿—çš„å•Š ä½ ç”Ÿåœ¨ä¸­å›½ åœ¨ä¸­å›½è¿™ä¸ªåº”è¯•æ•™è‚²ä¸­æˆç»©æ‰æ˜¯çŽ‹é“ æ²¡æœ‰æˆç»©ä½ æŠŠå¤´æ˜‚èµ·æ¥æ—¶éƒ½ä¼šæ²¡æœ‰åº•æ°” ä½ è ¢å—?ä¸ é‚£ä¸ºä»€ä¹ˆä¸å¥½å¥½å­¦? ã€€ã€€ä½ æƒ³è±¡ä¸€ä¸‹ å½“ä½ æˆç»©å¾ˆå¥½å¾ˆå¥½é‚£äº›è€å¸ˆéƒ½æ¥è®¨å¥½ä½ æ—¶ ä½ å¯ä»¥éª„å‚²çš„å¯¹ä»–ä»¬ä¸å±‘ä¸€é¡¾ç”šè‡³æ¯”ä¸­æŒ‡ è¿˜å¯ä»¥æš—å« å«ä½ ä»¬çœ‹ä¸èµ·è€å­ æ˜¯ä¸€ä»¶å¤šä¹ˆçˆ½çš„äº‹æƒ…&lt;/p>
&lt;p>å¦‚æžœåœ¨å‡ åå¹´åŽæˆ‘èƒ½å†æ¬¡é‡åˆ°ä½  ä¸ç®¡æ˜¯åœ¨å¯Œè±ªä¼šæ‰€è¿˜æ˜¯é˜´æš—çš„åœ°ä¸‹å®¤ æˆ–è€…æ˜¯å…¬å…±åŽ•æ‰€ æˆ‘éƒ½å¸Œæœ›èƒ½å¤Ÿè®¤å‡ºä½  ä¸è®ºä½ è„¸ä¸Šçš„å®¹é¢œæ”¹å˜äº†å¤šå°‘æˆ‘éƒ½æ„¿ä½ èƒ½å¤Ÿç•™ä½å¿ƒé‡Œå–„è‰¯çš„æ¨¡æ · ã€€ä¸è¦è¢«è¿™ä¸ªä¸–ç•ŒåŒåŒ–å¾—ä¸å‰©ä¸€ç‚¹é—ªå…‰&lt;/p>
&lt;p>äº²çˆ±çš„ åˆ†æ•°ä¸å¤Ÿæ‰“å‡»ä½ å— æœŸæœ«è€ƒåœºåçš„èˆ’æœå— è¡¥ä½œä¸šä¸ç´¯å— æ¯æ¬¡å†³å¿ƒè®¤çœŸæ‹¼ä¸‰åˆ†é’Ÿçƒ­åº¦ä¸å‡å— éª‚å¹´çº§å‰äº”è„‘æ®‹å¿ƒé‡Œä¸èˆ’æœä¹ æƒ¯äº†å— æ‰‹æœºä¸ç¦»æ‰‹ ã€€ã€€å¾®ä¿¡å¾®åšäººäººæ›´æ–°ä½ å˜ç¾Žå˜å¸…è‚šå­é¥±äº†å— ç­‰ç€å¿ƒçˆ±çš„äººæ²¡å¿ƒæ€å­¦ä¹ æ‰‹æœºèŠå¤©ä½ ä»¬ä¼šç»“å©šå— æ¸…é†’ç‚¹äº²çˆ±çš„ åˆ«å¿˜äº†ç­”åº”è‡ªå·±çš„æ¢¦æƒ³ åˆ«å‚»äº† ã€€ã€€é‚£ä¸æ˜¯ä½ è¦èµ°çš„è·¯ ã€€ã€€åªè¦ä½ æˆç»©å¥½äº†ï¼Œä½ çˆ¸å¦ˆå°±çœ‹ä½ é¡ºçœ¼ï¼Œä½ å¹²ä»€ä¹ˆéƒ½æ”¯æŒéƒ½ä¸ç®¡ï¼›ä¸€æ—¦æˆç»©ä¸ç†æƒ³äº†ï¼Œçˆ¸å¦ˆçœ‹ä½ å¹²ä»€ä¹ˆéƒ½ä¸çˆ½ï¼Œå¤„å¤„æ‰¾ä½ äº‹ä¸ºéš¾ä½ ï¼Œç„¶åŽæ‰¯å‡ºå¾ˆå¤šæ²¡è”ç³»çš„é™ˆå¹´å¾€äº‹ã€‚æ‰€ä»¥ä½ çœ‹æˆç»©è¿˜å¯ä»¥é¿å…å¥½å¤šå®¶åº­çŸ›ç›¾ å¤šå¥½å•Š!ã€€&lt;/p>
&lt;p>å­¦ä¹ å…¶å®žå¹¶ä¸æ˜¯é‚£ä¹ˆè®¨åŽŒçš„äº‹æƒ…å•Š&lt;/p>
&lt;p>å½“ä½ èƒŒå®Œäº†æ•´æ•´å‡ é¡µçš„æ”¿æ²»åŽ†å²è¯­æ–‡ åˆ«äººé—®ä½ ä½ å¯ä»¥è‡ªä¿¡çš„å€’èƒŒå¦‚æµæ”¶èŽ·äº†åˆ«äººå´‡æ‹œçš„çœ¼ç¥žæ—¶ å½“ä½ ä¸ºäº†ä¸€é“æ•°å­¦ç‰©ç†åŒ–å­¦é¢˜ç›®çº ç»“äº†æ•´æ•´åŠå¤©ä½†æ˜¯æœ€åŽè§£å‡ºæ¥ è¢«åŒå­¦è€å¸ˆè¡¨æ‰¬æ—¶ å½“ä½ ä¸­è€ƒé«˜è€ƒå®Œå¯ä»¥å®‰å¿ƒçš„åœ¨å®¶ç­‰é€šçŸ¥ä¹¦ä¸ç”¨å‘åˆ«äººä¸€æ ·æ‹…å¿ƒå—æ€• è¢«å®¶é•¿äº²æˆšé¼“åŠ±æ—¶ å½“ä½ å¯ä»¥è‡ªç”±æ”¯é…è‡ªå·±æ—¶é—´è°ˆæ‹çˆ±éƒ½ä¸æ€•çˆ¸çˆ¸å¦ˆå¦ˆéª‚ å¯ä»¥ç†ç›´æ°”å£®çš„æŠŠæˆç»©å•ä¸€ç”©è¿‡åŽ»æ—¶ é‚£ç§æˆå°±æ„Ÿæ˜¯æ— ä¸Žä¼¦æ¯”çš„ è°éƒ½æƒ³å½“ä¸ªä¼˜ç§€çš„äºº ä»–ä»¬è¡Œ æˆ‘ä¹Ÿè¡Œ ã€€ã€€&lt;/p>
&lt;p>æ—¢ç„¶å­¦ä¸æ­»ï¼Œå°±å¾€æ­»äº†å­¦ã€‚&lt;/p>
&lt;p>ä½ ä»¥ä¸ºä½ èŠ±ä¸€ä¸ªå°æ—¶è¢«ä¸€è¯¾å•è¯ä¼šæ­»å— ä½ ä»¥ä¸ºä½ èŠ±ä¸¤ä¸ªå°æ—¶åªåšä¸€é“æ•°å­¦é¢˜ä¼šæ­»å— ä½ ä»¥ä¸ºæŠŠä½ æžå¾—å¤´å¤§çš„æ–‡è¨€æ–‡ä¼šæ€æ­»ä½ å— ä½ ä»¥ä¸ºä¸‰ä¸ªå°æ—¶èƒŒä¸ä¸‹æ¥è¿‘ä»£å²çš„å¤§çº²å— ä½ ä»¥ä¸ºè¿™äº›ä¼šè®©ä½ æ­»å— æ—¢ç„¶å­¦ä¸æ­»ä½  é‚£æœ‰ä»€ä¹ˆå¥½æ€•çš„&lt;/p>
&lt;p>15å²è§‰å¾—æ¸¸æ³³éš¾ï¼Œæ”¾å¼ƒæ¸¸æ³³ï¼Œåˆ°18å²é‡åˆ°ä¸€ä¸ªä½ å–œæ¬¢çš„äººçº¦ä½ åŽ»æ¸¸æ³³ï¼Œä½ åªå¥½è¯´â€œæˆ‘ä¸ä¼šè€¶â€.18å²è§‰å¾—è‹±æ–‡éš¾ï¼Œæ”¾å¼ƒè‹±æ–‡ï¼Œ28å²å‡ºçŽ°ä¸€ä¸ªå¾ˆæ£’ä½†è¦ä¼šè‹±æ–‡çš„å·¥ä½œï¼Œä½ åªå¥½è¯´â€œæˆ‘ä¸ä¼šè€¶â€.äººç”Ÿå‰æœŸè¶Šå«Œéº»çƒ¦ï¼Œè¶Šæ‡’å¾—å­¦ï¼ŒåŽæ¥å°±è¶Šå¯èƒ½é”™è¿‡è®©ä½ åŠ¨å¿ƒçš„äººå’Œäº‹ï¼Œé”™è¿‡æ–°é£Žæ™¯ ã€€ã€€&lt;/p>
&lt;p>è¯»ä¹¦å§åšé¢˜å§ åšçƒ¦äº†åšç–¯äº†å°±æŠŠä¹¦æ‰”äº† å†·é™ä¸€ä¸¤ç§’å†æ¡å›žæ¥ç»§ç»­çœ‹ã€‚å‘¨è€Œå¤å§‹è¿™å°±æ˜¯ç®€å•æž¯ç‡¥çš„å­¦ä¹ ï¼Œä¸ºäº†èƒ½å°ä½é‚£äº›ä¸‰å§‘å…­å©†çš„å˜´ ä¸ºäº†è‡ªå·±åå¹´åŽä¸åŽæ‚” ä¸ºäº†è€å¦ˆé¬“ä¸Šå‡ºçŽ°çš„ç™½å‘ ã€€ã€€ä¸ºäº†è€çˆ¸åº”é…¬æ—¶è¢«é…’çŒåçš„èƒƒ ä¸ºäº†æœªæ¥èƒ½å¤Ÿæ¯«æ— é¡¾å¿Œçš„è¯´ï¼šæˆ‘çš„é«˜ä¸­ï¼Œå¯æ˜¯è¡€æ³ªå²!å¯ä¸€ç§’éƒ½æ²¡æœ‰è™šåº¦ æˆ‘çŸ¥é“ æˆ‘çŸ¥é“ å­¦ä¹ å¾ˆå¥½å¾ˆå¥½ä¹Ÿè®¸çœŸçš„ä¸ä¼šå¾ˆæœ‰é’± å¾ˆæœ‰åŠ¿ ä½†æ˜¯ä½ è§‰å¾—å¤§å­—ä¸è¯†å‡ ä¸ª ã€€ã€€è‹±æ–‡åªä¼šè¯´Hi è¡¨é¢ä¸Šè¿‡ç€çœ‹å¾—è¿‡åŽ»çš„ç”Ÿæ´» å®žé™…ä¸€æ— æ‰€æœ‰çœŸçš„å¾ˆå¥½ä¹ˆ ã€€ã€€è¯´çœŸçš„ ã€€ã€€æ²¡æ–‡åŒ–çœŸå¯æ€• æˆ‘ä¹ŸçŸ¥é“çœŸçš„å¾ˆéš¾åšæŒ ã€€ã€€&lt;/p>
&lt;p>è¯•ä¸€è¯•&lt;/p>
&lt;p>è¿˜è®°å¾—é«˜ä¸­ç”Ÿç‰©ä¹¦ä¸Šé‚£ä¸ª21ä¸‰ä½“ç»¼åˆç—‡çš„å­©å­å˜›ï¼Ÿ ä»–å«é™ˆå³° 20å¹´åŽ ä»–å·²ç»æ˜¯ä¸­å›½æ°‘èˆªå¤§å­¦ æœºåœºå­¦é™¢äºŒå¹´çº§çš„ç ”ç©¶ç”Ÿ ä»€ä¹ˆéƒ½æ— æ³•é˜»æŒ¡ä»–æˆåŠŸçš„è„šæ­¥ æ‰€ä»¥è¯´å¤šä¸€æ¡æŸ“è‰²ä½“ç®—ä»€ä¹ˆ å¥‹æ–—å§å°‘å¹´ã€€ã€€&lt;/p>
&lt;p>ä¿„ç½—æ–¯æ–¹å—å‘Šè¯‰æˆ‘ä»¬ï¼šçŠ¯ä¸‹çš„é”™è¯¯ä¼šç§¯ç´¯ï¼ŒèŽ·å¾—çš„æˆåŠŸä¼šæ¶ˆå¤±ï¼›æ¤ç‰©å¤§æˆ˜åƒµå°¸å‘Šè¯‰æˆ‘ä»¬ï¼šé¡»å¸¸è°ƒæ•´çŠ¶æ€ï¼Œæ–¹èƒ½åº”ä»˜ä¸åŒæŒ‘æˆ˜ï¼›æ„¤æ€’çš„å°é¸Ÿå‘Šè¯‰æˆ‘ä»¬ï¼šæœ‰æ—¶æ²‰ä¸‹èº«å¿ƒï¼Œæ˜¯ä¸ºäº†é£žçš„æ›´é«˜ï¼›è·‘è·‘å¡ä¸è½¦å‘Šè¯‰æˆ‘ä»¬ï¼šæ°¸è¿œåˆ«è§‰å¾—æ—¶é—´è¿˜å¤šï¼Œå¯æµªè´¹ï¼›æ°´æžœå¿è€…å‘Šè¯‰æˆ‘ä»¬ï¼šæ°´æžœä¸Žç‚¸å¼¹åŒåœ¨ï¼Œæœºé‡ä¸ŽæŒ‘æˆ˜å¹¶å­˜ã€€ã€€è®°å¾—èšç¾Žä¼˜å“çš„å¹¿å‘Šå—ï¼Œæˆ‘è§‰å¾—å¾ˆåŠ±å¿—ã€€ã€€ä½ åªé—»åˆ°æˆ‘çš„é¦™æ°´ï¼Œå´æ²¡çœ‹åˆ°æˆ‘çš„æ±—æ°´ã€‚ä½ æœ‰ä½ çš„è§„åˆ™ï¼Œæˆ‘æœ‰æˆ‘çš„é€‰æ‹©ã€‚ä½ å¦å®šæˆ‘çš„çŽ°åœ¨ï¼Œæˆ‘å†³å®šæˆ‘çš„æœªæ¥ã€‚ä½ å˜²ç¬‘æˆ‘ä¸€æ— æ‰€æœ‰ï¼Œä¸é…åŽ»çˆ±ï¼Œæˆ‘å¯æ€œä½ æ€»æ˜¯ç­‰å¾…ã€‚ä½ å¯ä»¥è½»è§†æˆ‘ä»¬çš„å¹´è½»ï¼Œæˆ‘ä»¬ä¼šè¯æ˜Žè¿™æ˜¯è°çš„æ—¶ä»£ã€‚&lt;/p>
&lt;p>æ¢¦æƒ³æ˜¯æ³¨å®šå­¤ç‹¬çš„æ—…è¡Œï¼Œè·¯ä¸Šå°‘ä¸äº†ç½®ç–‘å’Œå˜²ç¬‘ï¼Œä½†é‚£åˆæ€Žæ ·ï¼Œå“ªæ€•éä½“é³žä¼¤ï¼Œä¹Ÿè¦æ´»çš„æ¼‚äº®.ã€€ã€€&lt;/p>
&lt;p>ä½ çŽ°åœ¨ä¸€æ— æ‰€æœ‰ ä½†æ„å‘³ç€ ä½ æœ‰æ— é™å¯èƒ½ã€€ã€€å¥‡è¿¹æ˜¯åŠªåŠ›çš„å¦ä¸€ä¸ªåå­—ã€€ã€€ä½ çš„çˆ¸çˆ¸å¦ˆå¦ˆæ­£åœ¨ä¸ºä½ ä»¬å¥‹æ–— è¿™å°±æ˜¯ä½ è¦åŠªåŠ›çš„ç†ç”±ã€€ã€€è¦åªå› ä¸€æ¬¡æŒ«è´¥ï¼Œå°±å¿˜è®°ä½ åŽŸå…ˆå†³å®šæƒ³è¾¾åˆ°çš„è¿œæ–¹ã€€ã€€&lt;/p>
&lt;p>å¦‚æžœä½ è§‰å¾—çŽ°åœ¨èµ°çš„è¾›è‹¦ï¼Œé‚£å°±è¯æ˜Žä½ åœ¨èµ°â€”â€”ä¸Š ï¼å¡ ï¼è·¯ ï¼ã€€ã€€&lt;/p>
&lt;p>å½“ä½ åœ¨å‰è¿›çš„é“è·¯ä¸Š,æ°¸è¿œæœ‰ä¸€ç¾¤ç…žç¬”è·Ÿç€ä½ ,ç›¼ç€ä½ è·Œå€’,ç­‰ç€ä½ å¤±è´¥,çœ‹ä½ çš„ç¬‘è¯.æ‰€ä»¥ä½ å¿…é¡»æ‹¼å‘½å¥”è·‘,æ°¸ä¸è¨€è´¥ã€€ã€€&lt;/p>
&lt;p>ä¸€ä¸ªäººè‡³å°‘æ‹¥æœ‰ä¸€ä¸ªæ¢¦æƒ³ï¼Œæœ‰ä¸€ä¸ªç†ç”±åŽ»åšå¼ºã€‚ã€€ã€€&lt;/p>
&lt;p>æ— è®ºå¤±è´¥å¤šå°‘æ¬¡ï¼Œåªè¦è¿˜æ´»ç€ï¼Œå°±ä¸èƒ½æ”¾å¼ƒ åŠ›æœªå°½ï¼Œæ°”æœªç»ï¼Œå¿ƒæœªæ­»ï¼Œä¸å¼ƒä¸é¦ï¼ŒæŒä¹‹ä»¥æ’ ã€€ã€€æˆç»©ä¸æ˜¯å…¨éƒ¨å­¦åŽ†ä¸æ˜¯å…¨éƒ¨ã€‚æˆåŠŸæ²¡æœ‰æ¨¡å¼ï¼Œåªæ˜¯è‡ªå·±èƒ½å¤Ÿç”˜å¿ƒï¼Œèƒ½å¤Ÿä¸å¤ªå¯¹ä¸èµ·ä»–äººã€‚ã€€ã€€&lt;/p>
&lt;p>ä¸çŸ¥é“è‡ªå·±èƒ½æ´»å¤šä¹…ï¼Œå°±åƒä½ æ°¸è¿œæ— æ³•é¢„æµ‹ä»€ä¹ˆæ—¶å€™ç‰™ä¼šç–¼ï¼Œä»€ä¹ˆæ—¶å€™ä½ ä¼šæˆåŠŸï¼Œä½ ä¸èƒ½æ€¥ï¼Œä½ å¿…é¡»åšä¿¡ï¼Œä½ æ˜¯æœ€æ£’çš„ï¼Œç‹¬ä¸€æ— äºŒçš„ã€‚ã€€ã€€&lt;/p>
&lt;p>æ€»ä¼šæœ‰ä¸€äº›äº‹é˜»æ­¢ä½ èµ°å‘æ¢¦æƒ³ï¼Œåˆ«åœ¨æ„ï¼Œä½ ä¼šæˆåŠŸçš„ï¼Œç›¸ä¿¡è‡ªå·±ã€€ã€€é‚£äº›æ€ä¸æ­»æˆ‘ä»¬çš„ï¼Œç»ˆå°†ä½¿æˆ‘ä»¬æ›´åŠ åšå¼ºã€€ã€€&lt;/p>
&lt;p>å¦‚æžœä¸å¥‹æ–—ï¼Œæˆ‘ä»¬è¿žç¾¡æ…•åˆ«äººçš„èµ„æ ¼éƒ½æ²¡æœ‰ ä½ è¿˜æ²¡æœ‰æ„Ÿè§‰åˆ°é»‘æš— ï¼Œä½ è¿˜æ²¡æœ‰æ„Ÿè§‰åˆ°ç—›è‹¦ ï¼Œä½ è¿˜æœ‰æ—¶é—´åŽ»æ‹…å¿ƒæ¯å¤©è¿‡çš„å¤ªå¿« ï¼Œé‚£åªèƒ½è¯´æ˜Žä½ è¿˜æ²¡æœ‰æ‹¼å‘½ ï¼Œä½ è¿˜æœ‰å¿ƒæ€åŽ»æ‹…å¿ƒåˆ«çš„äº‹ ã€€&lt;/p>
&lt;p>å°†æ¥çš„ä½ ä¸€å®šä¼šæ„Ÿè°¢çŽ°åœ¨å¦‚æ­¤åŠªåŠ›çš„ä½ ï¼Œæ‰€ä»¥è¯·ä½ æ— è®ºå¦‚ä½•ä¹Ÿåˆ«æ”¾å¼ƒï¼ã€€ã€€&lt;/p>
&lt;p>äººæœ‰ä¸¤æ¡è·¯è¦èµ°ï¼Œä¸€æ¡æ˜¯å¿…é¡»èµ°çš„ï¼Œä¸€æ¡æ˜¯æƒ³èµ°çš„ï¼Œä½ å¿…é¡»æŠŠå¿…é¡»èµ°çš„è·¯èµ°æ¼‚äº®æ‰å¯ä»¥èµ°æƒ³èµ°çš„è·¯ï¼Œæœ‰äº›è·¯ï¼Œä½ ä¸èµ°ä¸‹åŽ»ï¼Œå°±ä¸ä¼šçŸ¥é“é‚£è¾¹çš„é£Žæ™¯æœ‰å¤šç¾Žã€€ã€€&lt;/p>
&lt;p>å½“ä½ æ‰“ç®—æ”¾å¼ƒæ¢¦æƒ³æ—¶ï¼Œå‘Šè¯‰è‡ªå·±å†å¤šæ’‘ä¸€å¤©ï¼Œä¸€ä¸ªæ˜ŸæœŸï¼Œä¸€ä¸ªæœˆï¼Œå†å¤šæ’‘ä¸€å¹´å§ï¼Œä½ ä¼šå‘çŽ°ï¼Œæ‹’ç»é€€åœºçš„ç»“æžœä»¤äººæƒŠè®¶&amp;ndash;åŠ›å…‹Â·èƒ¡å“²ã€Šäººç”Ÿä¸è®¾é™ã€‹ ã€€ã€€&lt;/p>
&lt;p>æ¯ä¸€ä¸ªä¼˜ç§€çš„äººï¼Œéƒ½æœ‰ä¸€æ®µæ²‰é»˜çš„æ—¶å…‰ã€‚é‚£ä¸€æ®µæ—¶å…‰ï¼Œæ˜¯ä»˜å‡ºäº†å¾ˆå¤šåŠªåŠ›ï¼Œå¿å—å­¤ç‹¬å’Œå¯‚å¯žï¼Œä¸æŠ±æ€¨ä¸è¯‰è‹¦ï¼Œæ—¥åŽè¯´èµ·æ—¶ï¼Œè¿žè‡ªå·±éƒ½èƒ½è¢«æ„ŸåŠ¨æ—¥å­ã€‚ã€€ã€€&lt;/p>
&lt;p>è¯·ä½ ï¼Œæ‹…è´Ÿèµ·å¯¹è‡ªå·±çš„è´£ä»»æ¥ï¼Œä¸ä½†æ˜¯æ´»ç€å°±ç®—äº†ï¼Œæ›´è¦æ´»å¾—çƒ­çƒˆè€Œèµ·åŠ²ï¼Œä¸è¦æ‡¦å¼±ï¼Œæ›´ä¸è¦åˆ«äººå¤ªå¤šçš„æŒ‡å¼•ã€‚æ¯ä¸€å¤©ï¼Œæ´»å¾—è¸å®žï¼Œå°†ä»½å†…çš„å·¥ä½œï¼Œåšå¾—å°½è‡ªå·±èƒ½åŠ›ä¹‹å†…çš„å®Œç¾Žï¼Œå°±æ— æ„§äºŽå¤©åœ°ã€‚â€”â€”ä¸‰æ¯› ã€€ã€€&lt;/p>
&lt;p>åšæŒä¸ä¸‹æ¥çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¦ç»™è‡ªå·±ä¸€ä¸ªæœ€å¤§çš„æ‹¥æŠ±ã€‚ã€€ã€€å› ä¸ºäº²çˆ±çš„è‡ªå·±ï¼Œæˆ‘ä»¬ä¸èƒ½è¾œè´Ÿè‡ªå·±ï¼Œè¾œè´Ÿæˆ‘ä»¬çš„æ¢¦ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬å¿…é¡»å‘Šè¯‰è‡ªå·±ï¼Œå¿ƒä¸Šçš„ä¼¤å£ï¼Œä¸èƒ½ç”¨æ‡¦å¼±çš„æ³ªæ°´æµ‡çŒï¼Œè¦ç”¨å¥‹æ–—çš„çƒ­è¡€æ²»æ„ˆã€‚ã€€ã€€&lt;/p>
&lt;p>æˆ‘ä»¬å¯ä»¥æ‚²ä¼¤ï¼Œä½†æˆ‘ä»¬æ‚²ä¼¤è¿‡åŽï¼Œè¦è°ƒæ•´è‡ªå·±ï¼Œä»Žæ‚²ä¼¤ä¸­èµ°å‡ºæ¥ã€€ä¸è¦æ²®ä¸§ï¼Œæ¯å¤©å¯¹è‡ªå·±ç¬‘ç¬‘ï¼Œç«–ä¸ªå¤§æ‹‡æŒ‡ï¼Œå‘Šè¯‰è‡ªå·±ï¼Œæˆ‘å¾ˆç‰›é€¼ï¼Œæˆ‘æ˜¯å¤©æ‰ã€‚çœ‹èµ·æ¥å¾ˆ2Bï¼Œä½†æ˜¯ï¼Œåˆ«äººåˆçœ‹ä¸åˆ°ï¼Œè‡ªå·±é¼“åŠ±é¼“åŠ±è‡ªå·±ï¼Œæ²¡ä»€ä¹ˆä¸å¥½çš„~ã€€ã€€&lt;/p>
&lt;p>ä¸ç®¡ä½ ä¹‹å‰æ˜¯æ€Žä¹ˆæƒ³çš„ï¼Œå¦‚æžœä½ æƒ³åŠªåŠ›ï¼Œé‚£ä¹ˆç¬¬ä¸€ï¼Œä½ çš„å¿ƒæ€è¦å¥½è¦ç§¯æžï¼Œç¬¬äºŒï¼Œå¯¹è‡ªå·±è¦æœ‰ä¿¡å¿ƒï¼Œé‚£ä¹ˆæŽ¥ä¸‹æ¥å°±æ˜¯ä½ è¦ä»˜å‡ºè¡ŒåŠ¨äº†ã€€ã€€åŠªåŠ›ä¸ä¸€å®šä¼šæˆåŠŸï¼Œä½†ä¸åŠªåŠ›å°±ä¸€å®šä¸ä¼šæˆåŠŸã€€ã€€ä¸ä¸€å®šè¦è€ƒä»€ä¹ˆæ¸…åŽåŒ—å¤§.æˆ–è®¸æˆ‘ä¸ä¼šç«™åœ¨å¹´çº§å‰åçš„é¢å¥–å°ä¸Š,æˆ‘åªå¸Œæœ›æˆ‘çš„é«˜ä¸­ç”Ÿæ´»,æœ‰æˆ‘å–œæ¬¢çš„äº‹,æœ‰å–œæ¬¢çš„äºº,æœ‰è®©æˆ‘æ— æ‚”çš„æ¯ä¸€å¤©.æœ€åŽå‡­æˆ‘æ­£å¸¸çš„åŠªåŠ›æ­£å¸¸çš„å­¦ä¹ ,æ­£å¸¸çš„æˆ‘åŽ»å®Œæˆä¸€ä¸ªé€‚åˆæˆ‘çš„å¤§å­¦.æˆ‘è®¤ä¸º,é’æ˜¥æ˜¯è¯¥ä»˜å‡ºåœ¨é‚£ä¸€çº¸è¯•å·ä¸Š,ä½†é’æ˜¥ä¸å…¨æ˜¯é‚£ä¸€å¼ è¯•å·.æœ‰ç›®æ ‡,æœ‰ç†æƒ³,æœ‰æ˜Žå¤©,æœ‰ä½ ,è¶³å¤Ÿ.ã€€ã€€&lt;/p>
&lt;p>è¯­æ–‡è€å¸ˆè¯´ï¼›å¦‚æžœä½ çˆ±ä¸€ä¸ªäºº.ä¸æ˜¯ä¸‹è¯¾ç»™äººå®¶ä¹°ä¹°æ°´.ä¸æ˜¯çŸ­ä¿¡å‘æ¥å‘åŽ»,ä¹Ÿä¸æ˜¯å‘¨æœ«ä¸€èµ·å‡ºæ¥å”±å”±æ­ŒèŠèŠå¤©åƒåƒé¥­ã€‚ã€€ã€€è€Œæ˜¯åšä¸€ä¸ªå‡ºè‰²çš„äºº.ä»¥åŽçš„ä»¥åŽ,å¯èƒ½è¿˜æœ‰åˆ«çš„äººçˆ±å¥¹.ã€€ã€€&lt;/p>
&lt;p>ä½ è¦åšçš„,æ˜¯æŠŠåˆ«äººéƒ½æ¯”ä¸‹åŽ».ä½ è¦å˜å¾—ä¼˜ç§€,è¦æ¯”å…¶ä»–äººéƒ½ä¼˜ç§€.ã€€ã€€&lt;/p>
&lt;p>ç›¸ä¿¡.æœªæ¥ä¸æ­¢æ˜¯æœªçŸ¥.çˆ±æƒ…èƒ½æ”¹å˜çŽ°å®ž&lt;/p>
&lt;p>æ®ç»Ÿè®¡.å¤§é›„åœ¨ã€Šå“†å•¦Aæ¢¦ã€‹å…¨é›†ä¸­ä¸€å…±è¢«èƒ–è™Žæ173æ¬¡.è¢«è€å¸ˆéª‚60æ¬¡.è¢«å¦ˆå¦ˆéª‚äº†327æ¬¡.è¢«ç‹—å’¬23æ¬¡.æŽ‰è¿›æ°´æ²Ÿ14æ¬¡.å¯è§æˆ‘ä»¬å¤§é›„æ˜¯å¤šä¹ˆä¹è§‚çš„æ´»ç€.æˆç»©çš„å›°éš¾ç®—ä»€ä¹ˆ.å†è‰°éš¾æˆ‘ä¹Ÿä¸€å®šä¼šåšæŒä¸‹åŽ»çš„.ã€€ã€€&lt;/p>
&lt;p>ä½ å‡­ä»€ä¹ˆå·®åˆ«äººä¸€ç­‰ã€€ã€€&lt;/p>
&lt;p>çˆ¸çˆ¸å¦ˆå¦ˆç»™ä½ çš„æ¯”åˆ«äººå°‘å—.ã€€ã€€ä½ æ¯”åˆ«äººç¬¨å—.ã€€ã€€å‡­ä»€ä¹ˆæ‹¿ç€çˆ¸çˆ¸å¦ˆå¦ˆçš„è¡€æ±—é’±ä¸åŽ»åŠªåŠ›.ã€€ã€€&lt;/p>
&lt;p>å½“ä½ å¾ˆç´¯å¾ˆç´¯å¾ˆç´¯å¾ˆç´¯çš„æ—¶å€™.ä½ åº”è¯¥é—­ä¸Šçœ¼ç›åšæ·±å‘¼å¸ï¼Œå‘Šè¯‰è‡ªå·±ä½ åº”è¯¥åšæŒçš„ä½.ã€€ã€€&lt;/p>
&lt;p>ç»™è‡ªå·±ä¸€ä¸ªæ¢¦.æ¢¦ä¸­çš„è‡ªå·±è¿‡ä¸Šäº†è‡ªå·±æƒ³è¦çš„ç”Ÿæ´».å‘Šè¯‰è‡ªå·±.é™¤äº†å­¦ä¹ è¿™æ¡è·¯å¯ä»¥è®©æ¢¦æƒ³æˆçœŸ.åˆ«æ— é€‰æ‹©.é€‚å½“çš„é€¼é€¼è‡ªå·±.ã€€ã€€&lt;/p>
&lt;p>æˆ‘çŸ¥é“å­¦ä¹ ä¸æ˜¯å”¯ä¸€çš„å‡ºè·¯.å¯æ˜¯ä½ å¿å¿ƒè®©ä½ çš„çˆ¹å¦ˆä¸ºä½ çš„ä»¥åŽå¥”æ³¢å—ï¼Ÿä¸ºä½ çš„å°†æ¥æ‹…å¿ƒå—ï¼Ÿä½ ä¸è§‰å¾—ä¸å®‰å—?çŽ°åœ¨ä»–ä»¬ç»™çš„ä»¥åŽä¸è¯¥è¿˜ç»™ä»–ä»¬å—? ã€€ã€€&lt;/p>
&lt;p>å¦‚æžœä»Šå¤©æˆ‘å¾ˆåŠªåŠ›.ã€€ã€€æˆç»©ä¾æ—§ä¸å¥½.ã€€è‡³å°‘é•¿å¤§åŽæˆ‘å¯ä»¥è¯´.ã€€ã€€é‚£æ—¶å€™çš„æˆ‘çœŸçš„åŠªåŠ›è¿‡.ã€€ã€€ç„¶åŽæƒ³èµ·æ¥ä¹Ÿä¼šæ²¡æœ‰é—æ†¾.ã€€ã€€æ‰åšæŒå‡ å¤©å°±è¦æ”¾å¼ƒäº†å—ï¼Ÿçœ‹åˆ«äººçš„æˆç»©çœ¼çº¢äº†å—ï¼Ÿåœ¨è¿™æ ·ä¸‹åŽ»ä½ å°±çœŸçš„æ— è¯å¯æ•‘äº†.ä¸€å¤©åˆè¿‡äº†å§.ä½ ä»Šå¤©å®Œæˆäº†ä»€ä¹ˆ.ï¼Ÿ æ’‘ä¸ä½çš„æ—¶å€™.å¯ä»¥å¯¹è‡ªå·±è¯´å£°â€œæˆ‘å¥½ç´¯â€ä½†ä¸è¦å¯¹è‡ªå·±è¯´â€œæˆ‘ä¸è¡Œâ€ä¹Ÿå¯ä»¥è¯´â€œå†åšæŒ3åˆ†é’Ÿâ€ã€€ã€€ã€€&lt;/p>
&lt;p>æˆ‘ä¸æƒ³å†æµ‘æµ‘å™©å™©åœ°åº¦è¿‡æ¯ä¸€å¤©äº†.ã€€ã€€&lt;/p>
&lt;p>æˆ‘çš„æ¢¦æƒ³æ¢äº†ä¸€ç®©ç­å´ä»Žæœªä»˜è¯¸è¿‡åŠªåŠ›.ã€€ã€€&lt;/p>
&lt;p>åœ¨ç©ºæƒ³ä¸­æŒ¥éœç€ç”Ÿæ´».ã€€ã€€æ•´å¤©æ— æ‰€äº‹äº‹ä¸€äº‹æ— æˆ.ã€€ä»Šå¤©çš„äº‹æƒ…æŽ¨åˆ°æ˜Žå¤©.æ˜Žå¤©æŽ¨åˆ°å¤§åŽå¤©.ã€€ã€€æˆ‘ä¸èƒ½å†è¿™æ ·ä¸‹åŽ»äº†.ã€€ã€€æˆ‘ä¸æƒ³ä»¥åŽæ‹¿ç‚¹æ­»å·¥èµ„æŠ±æ€¨ç”Ÿæ´»åŽæ‚”æ›¾ç».ã€€ã€€&lt;/p>
&lt;p>æˆ‘è¦åŽ»æ¢¦åŽ»æƒ³åŽ»åŠªåŠ›åŽ»å¥‹æ–—.ã€€ã€€è€ƒä¸Šå¥½å­¦æ ¡ã€€ã€€ä¸è®©çˆ¸å¦ˆæ‹…å¿ƒã€€ã€€ä¸è®©æœªæ¥çš„è‡ªå·±åŽæ‚”ã€€ã€€ä¸ºè‡ªå·±çš„æ˜Žå¤©æ‹¼æ&lt;/p>
&lt;p>å¦‚æžœä½ æœ‰æ¢¦æƒ³çš„è¯.å°±åŽ»æå«å®ƒä¸ºå®ƒè€ŒåŠªåŠ›å¥‹æ–—.ã€€ã€€ä½ çˆ¸ä¸æ˜¯æŽåˆš.ã€€ã€€ä¸å¯¹æ¢¦æƒ³ä»˜è¯¸äºŽæ±—æ°´.ã€€ã€€ä»¥ä¸ºå¹²åç€ã€€ã€€æ¢¦æƒ³å°±ä¼šå¼€èŠ±ç»“æžœå®žçŽ°.ã€€ã€€é‚£å°±åˆ«å‚»äº†.æ¢¦æƒ³æ—©å·²å‘éœ‰å‘è‡­.ã€€ã€€åªæœ‰é€šè¿‡è‡ªå·±çš„ä¸æ‡ˆåŠªåŠ›.åšå®šä¿¡å¿µ.ã€€ã€€&lt;/p>
&lt;p>è€å¤©æ˜¯æœ‰çœ¼çš„.ã€€ã€€ä»–ä¸ä¼šè®©ä½ çš„åŠªåŠ›ç™½ç™½æµªè´¹.ã€€ã€€&lt;/p>
&lt;p>ç©ºæƒ³åªä¼šè®©ä½ æ­»åœ¨æ¢¦ä¸­ã€€ã€€æ´»ç€å¹³åº¸.ã€€ã€€&lt;/p>
&lt;p>åŠ æ²¹.è¯·ä½ å‘æ¢¦æƒ³ä¸€æ­¥æ­¥å‰è¿›.ã€€ã€€å®ƒåœ¨å‘ä½ æ‹›æ‰‹ã€€ã€€&lt;/p>
&lt;p>hello.ã€€ã€€ä½ è¦åŠªåŠ›.ã€€ã€€é€æ¸å……å®žè‡ªå·±.ã€€ã€€è®©è‡ªå·±ä¸å†æ— æ„ä¹‰.ã€€ã€€&lt;/p>
&lt;p>è°éƒ½ä¸ä¼šæ˜¯ä½ çš„è°.åªæœ‰è‡ªå·±æ‰æ˜¯æœ€çœŸå®žçš„.ã€€ã€€&lt;/p>
&lt;p>æ²¡æœ‰è°å¿…é¡»è¦å¸®åŠ©ä½ .ä»»ä½•äº‹æƒ…éƒ½å¾—é è‡ªå·±.ã€€ã€€ä¸åŠªåŠ›åŽ»å“ªæ‰¾ä¸€ä¸ªå¿ƒç”˜æƒ…æ„¿ç»™ä½ ä¾é çš„äºº.ã€€ã€€&lt;/p>
&lt;p>æ—¶é—´é•¿äº†ä½ ä¼šçŸ¥é“.ä½ ä¸ä¼˜ç§€å°±ä¼šè¢«ç¤¾ä¼šæ·˜æ±°.ã€€åˆ«æŠŠçŽ°å®žå½“å¶åƒå‰§.æ²¡æœ‰å¤©ä¸ŠæŽ‰ä¸‹é«˜å¯Œå¸…çš„äº‹.ã€€ã€€&lt;/p>
&lt;p>åœ¨ä¸ä¹…çš„å°†æ¥ä½ ä¼šå˜æˆæ›´å¥½çš„è‡ªå·±ã€‚ã€€ã€€&lt;/p>
&lt;p>ä¸€åˆ‡ä¼šå˜å¾—æ›´å¥½.&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2018-05-13-%E4%BA%BA%E7%94%9F%E8%8B%A6%E7%9F%AD-%E4%BD%95%E5%A6%A8%E4%B8%80%E8%AF%95/a.jpg" alt="hello-su">&lt;/p></description></item><item><title>è®¾å†…å­˜æŒ‰å­—èŠ‚ç¼–å€ï¼Œè‹¥8KÃ—8bitå­˜å‚¨ç©ºé—´çš„èµ·å§‹åœ°å€ä¸º7000Hï¼Œåˆ™è¯¥å­˜å‚¨ç©ºé—´çš„æœ€å¤§åœ°å€ç¼–å·ä¸º</title><link>https://blog.itning.top/post/2018/05/13/%E8%AE%BE%E5%86%85%E5%AD%98%E6%8C%89%E5%AD%97%E8%8A%82%E7%BC%96%E5%9D%80%E8%8B%A58k8bit%E5%AD%98%E5%82%A8%E7%A9%BA%E9%97%B4%E7%9A%84%E8%B5%B7%E5%A7%8B%E5%9C%B0%E5%9D%80%E4%B8%BA7000h%E5%88%99%E8%AF%A5%E5%AD%98%E5%82%A8%E7%A9%BA%E9%97%B4%E7%9A%84%E6%9C%80%E5%A4%A7%E5%9C%B0%E5%9D%80%E7%BC%96%E5%8F%B7%E4%B8%BA/</link><pubDate>Sun, 13 May 2018 11:33:41 +0800</pubDate><guid>https://blog.itning.top/post/2018/05/13/%E8%AE%BE%E5%86%85%E5%AD%98%E6%8C%89%E5%AD%97%E8%8A%82%E7%BC%96%E5%9D%80%E8%8B%A58k8bit%E5%AD%98%E5%82%A8%E7%A9%BA%E9%97%B4%E7%9A%84%E8%B5%B7%E5%A7%8B%E5%9C%B0%E5%9D%80%E4%B8%BA7000h%E5%88%99%E8%AF%A5%E5%AD%98%E5%82%A8%E7%A9%BA%E9%97%B4%E7%9A%84%E6%9C%80%E5%A4%A7%E5%9C%B0%E5%9D%80%E7%BC%96%E5%8F%B7%E4%B8%BA/</guid><description>&lt;blockquote>
&lt;p>è®¾å†…å­˜æŒ‰å­—èŠ‚ç¼–å€ï¼Œè‹¥8KÃ—8bitå­˜å‚¨ç©ºé—´çš„èµ·å§‹åœ°å€ä¸º7000Hï¼Œåˆ™è¯¥å­˜å‚¨ç©ºé—´çš„æœ€å¤§åœ°å€ç¼–å·ä¸ºï¼ˆ7ï¼‰ã€‚&lt;/p>
&lt;p>(7)A.7FFF B.8FFF C.9FFF D.AFFF&lt;/p>
&lt;/blockquote>
&lt;p>K=2âˆ§10&lt;/p>
&lt;p>8K=8Ã—2âˆ§10=2âˆ§13&lt;/p>
&lt;p>2âˆ§13(D)=2000(H)&lt;/p>
&lt;p>2000(H)-1(H)=1FFF(H)&lt;/p>
&lt;p>7000(H)+1FFF(H)=8FFF(H)&lt;/p></description></item><item><title>å‘å€¼æ ˆä¿å­˜æ•°æ®&amp;åœ¨JSPä¸­èŽ·å–å€¼æ ˆçš„æ•°æ®</title><link>https://blog.itning.top/post/2018/05/09/%E5%90%91%E5%80%BC%E6%A0%88%E4%BF%9D%E5%AD%98%E6%95%B0%E6%8D%AE%E5%9C%A8jsp%E4%B8%AD%E8%8E%B7%E5%8F%96%E5%80%BC%E6%A0%88%E7%9A%84%E6%95%B0%E6%8D%AE/</link><pubDate>Wed, 09 May 2018 07:53:15 +0800</pubDate><guid>https://blog.itning.top/post/2018/05/09/%E5%90%91%E5%80%BC%E6%A0%88%E4%BF%9D%E5%AD%98%E6%95%B0%E6%8D%AE%E5%9C%A8jsp%E4%B8%AD%E8%8E%B7%E5%8F%96%E5%80%BC%E6%A0%88%E7%9A%84%E6%95%B0%E6%8D%AE/</guid><description>&lt;h4 id="å‘å€¼æ ˆä¿å­˜æ•°æ®root">å‘å€¼æ ˆä¿å­˜æ•°æ®(root)&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">ValueStack vs=ActionContext.getContext().getValueStack();
push(Object obj)//åº•å±‚å°±æ˜¯ root.add(0,obj) å°†æ•°æ®å­˜å‚¨åˆ°æ ˆé¡¶ã€‚
set(String name,Object obj);
/*åº•å±‚æ˜¯å°†æ•°æ®å°è£…åˆ°HashMapä¸­ï¼Œåœ¨å°†è¿™ä¸ªHashMapé€šè¿‡pushå­˜å‚¨ã€‚*/
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="åœ¨jspä¸­èŽ·å–å€¼æ ˆçš„æ•°æ®">åœ¨JSPä¸­èŽ·å–å€¼æ ˆçš„æ•°æ®&lt;/h4>
&lt;p>&lt;strong>Actionå¦‚æžœæƒ³ä¼ é€’æ•°æ®ç»™ JSPï¼Œåªæœ‰å°†æ•°æ®ä¿å­˜åˆ°æˆå‘˜å˜é‡ï¼Œå¹¶ä¸”æä¾›getæ–¹æ³•å°±å¯ä»¥äº†&lt;/strong>
&lt;strong>root&lt;/strong>&lt;/p>
&lt;pre>&lt;code>1.fieldError æ ¡éªŒæ•°æ®é”™è¯¯ä¿¡æ¯æç¤º
2.actionError å…³äºŽé€»è¾‘æ“ä½œæ—¶é”™è¯¯ä¿¡æ¯(ä¾‹å¦‚ç™»å½•å¤±è´¥)
3.message å°±æ˜¯ä¸€ä¸ªä¿¡æ¯.
this.addFieldError(&amp;quot;msg&amp;quot;, &amp;quot;å­—æ®µé”™è¯¯ä¿¡æ¯&amp;quot;);
this.addActionError(&amp;quot;Actionå…¨å±€é”™è¯¯ä¿¡æ¯&amp;quot;);
this.addActionMessage(&amp;quot;Actionçš„æ¶ˆæ¯ä¿¡æ¯&amp;quot;);
fieldError é’ˆå¯¹æŸä¸€ä¸ªå­—æ®µé”™è¯¯ä¿¡æ¯ ï¼ˆå¸¸ç”¨äºŽè¡¨å•æ ¡éªŒï¼‰ã€
actionError (æ™®é€šé”™è¯¯ä¿¡æ¯ï¼Œä¸é’ˆå¯¹æŸä¸€ä¸ªå­—æ®µ ç™»é™†å¤±è´¥)ã€
actionMessage é€šç”¨æ¶ˆæ¯
åœ¨jspä¸­ä½¿ç”¨ struts2æä¾›æ ‡ç­¾ æ˜¾ç¤ºæ¶ˆæ¯ä¿¡æ¯
&amp;lt;s:fielderror fieldName=&amp;quot;msg&amp;quot;/&amp;gt;
&amp;lt;s:actionerror/&amp;gt;
&amp;lt;s:actionmessage/&amp;gt;
&lt;/code>&lt;/pre>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">1.å¦‚æžœæ ˆé¡¶æ˜¯ä¸€ä¸ªMapé›†åˆï¼ŒèŽ·å–æ—¶ï¼Œå¯ä»¥ç›´æŽ¥é€šè¿‡Mapé›†åˆçš„keyæ¥èŽ·å–value.
&amp;lt;s:property value=&amp;#34;username&amp;#34;/&amp;gt;
2.å¦‚æžœæ ˆé¡¶æ•°æ®ä¸æ˜¯ä¸€ä¸ªMapï¼Œæ²¡æœ‰keyå€¼ï¼Œå¯ä»¥ä½¿ç”¨åºå·æ¥èŽ·å–ã€‚
&amp;lt;s:property value=&amp;#34;[0]&amp;#34;&amp;gt; ä»Ž0çš„ä½ç½®å‘ä¸‹æŸ¥æ‰¾æ‰€æœ‰ã€‚
&amp;lt;s:property value=&amp;#34;[0].top&amp;#34;&amp;gt; åªæŸ¥æ‰¾0ä½ç½®ä¸Šæ•°æ®ã€‚
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>OgnlContext&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">1.requestæ•°æ® å­˜ï¼šrequest.setAttribute()
2.sessionæ•°æ® å­˜ï¼šsession.setAttribute()
3.applicationæ•°æ® å­˜ï¼šapplication.setAttribute()
4.attr ä¾æ¬¡ä»Žrequest,session.applicationä¸­æŸ¥æ‰¾
5.parameters èŽ·å–è¯·æ±‚å‚æ•°
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>é¡¹ç›®ä¸­sessionçš„ç®¡ç†æ–¹å¼</title><link>https://blog.itning.top/post/2018/05/06/%E9%A1%B9%E7%9B%AE%E4%B8%ADsession%E7%9A%84%E7%AE%A1%E7%90%86%E6%96%B9%E5%BC%8F/</link><pubDate>Sun, 06 May 2018 20:55:35 +0800</pubDate><guid>https://blog.itning.top/post/2018/05/06/%E9%A1%B9%E7%9B%AE%E4%B8%ADsession%E7%9A%84%E7%AE%A1%E7%90%86%E6%96%B9%E5%BC%8F/</guid><description>&lt;p>é¡¹ç›®ä¸­sessionçš„ç®¡ç†æ–¹å¼&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="o">/&lt;/span>&lt;span class="n">getCurrentSession&lt;/span> &lt;span class="n">åˆ›å»ºæˆ–è€…èŽ·å–session&lt;/span>
&lt;span class="c1">// çº¿ç¨‹çš„æ–¹å¼åˆ›å»ºsession
&lt;/span>&lt;span class="c1">// ä¸€å®šè¦é…ç½®ï¼š&amp;lt;property name=&amp;#34;hibernate.current_session_context_class&amp;#34;&amp;gt;thread&amp;lt;/property&amp;gt;
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="n">Session&lt;/span> &lt;span class="n">session3&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">sf&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getCurrentSession&lt;/span>&lt;span class="o">();&lt;/span>&lt;span class="c1">// åˆ›å»ºsessionï¼Œç»‘å®šåˆ°çº¿ç¨‹
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="n">Session&lt;/span> &lt;span class="n">session4&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">sf&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getCurrentSession&lt;/span>&lt;span class="o">();&lt;/span>&lt;span class="c1">// ä»Žå½“å‰è®¿é—®çº¿ç¨‹èŽ·å–session
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="n">System&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">out&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">println&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">session3&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="n">session4&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;a href="http://blog.csdn.net/liyunyun6/article/details/8946501">openSessionå’ŒgetCurrentSessionçš„åŒºåˆ«&lt;/a>&lt;/p>
&lt;blockquote>
&lt;p>åœ¨æ¯”è¾ƒopenSessionå’ŒgetCurrentSessionè¿™ä¸¤ä¸ªæ–¹æ³•ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆè®¤è¯†ä¸€ä¸‹è¿™ä¸¤ä¸ªæ–¹æ³•ã€‚&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>åœ¨è¿›è¡Œé…ç½®ä¿¡æ¯ç®¡ç†æ—¶ï¼Œæˆ‘ä»¬ä¸€èˆ¬è¿›è¡Œä¸€ä¸‹ç®€å•æ­¥éª¤ï¼š&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>Configuration cfg = new Configuration(); // èŽ·å¾—é…ç½®ä¿¡æ¯å¯¹è±¡
SessionFactory sf = cfg.configure().buildSessionFactory(); //è§£æžå¹¶å»ºç«‹Sessionå·¥åŽ‚&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;ol>
&lt;li>Session session = sf.getCurrentSession(); // èŽ·å¾—Session&lt;/li>
&lt;/ol>
&lt;/blockquote>
&lt;blockquote>
&lt;ol start="2">
&lt;li>Session session = sf.openSession(); // æ‰“å¼€Session&lt;/li>
&lt;/ol>
&lt;/blockquote>
&lt;blockquote>
&lt;p>å¯¹äºŽä¸Šè¿°çš„ä¸¤ä¸ªæ–¹æ³•ï¼Œæœ‰ä»¥ä¸‹åŒºåˆ«ï¼š&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;ol>
&lt;li>openSession ä»Žå­—é¢ä¸Šå¯ä»¥çœ‹å¾—å‡ºæ¥ï¼Œæ˜¯æ‰“å¼€ä¸€ä¸ªæ–°çš„sessionå¯¹è±¡ï¼Œè€Œä¸”æ¯&amp;gt; æ¬¡ä½¿ç”¨éƒ½æ˜¯æ‰“å¼€ä¸€ä¸ªæ–°çš„sessionï¼Œå‡å¦‚è¿žç»­ä½¿ç”¨å¤šæ¬¡ï¼Œåˆ™èŽ·å¾—çš„sessionä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”ä½¿ç”¨å®Œéœ€è¦è°ƒç”¨closeæ–¹æ³•å…³é—­sessionã€‚&lt;/li>
&lt;/ol>
&lt;/blockquote>
&lt;blockquote>
&lt;ol start="2">
&lt;li>getCurrentSession ï¼Œä»Žå­—é¢ä¸Šå¯ä»¥çœ‹å¾—å‡ºæ¥ï¼Œæ˜¯èŽ·å–å½“å‰ä¸Šä¸‹æ–‡ä¸€ä¸ªsessionå¯¹è±¡ï¼Œå½“ç¬¬ä¸€æ¬¡ä½¿ç”¨æ­¤æ–¹æ³•æ—¶ï¼Œä¼šè‡ªåŠ¨äº§ç”Ÿä¸€ä¸ªsessionå¯¹è±¡ï¼Œå¹¶ä¸”è¿žç»­ä½¿ç”¨å¤šæ¬¡æ—¶ï¼Œå¾—åˆ°çš„sessionéƒ½æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œè¿™å°±æ˜¯ä¸ŽopenSessionçš„åŒºåˆ«ä¹‹ä¸€ï¼Œç®€å•è€Œè¨€ï¼ŒgetCurrentSession å°±æ˜¯ï¼šå¦‚æžœæœ‰å·²ç»ä½¿ç”¨çš„ï¼Œç”¨æ—§çš„ï¼Œå¦‚æžœæ²¡æœ‰ï¼Œå»ºæ–°çš„ã€‚&lt;/li>
&lt;/ol>
&lt;/blockquote>
&lt;blockquote>
&lt;p>æ³¨æ„ï¼šåœ¨å®žé™…å¼€å‘ä¸­ï¼Œå¾€å¾€ä½¿ç”¨getCurrentSessionå¤šï¼Œå› ä¸ºä¸€èˆ¬æ˜¯å¤„ç†åŒä¸€ä¸ªäº‹åŠ¡ï¼ˆå³æ˜¯ä½¿ç”¨ä¸€ä¸ªæ•°æ®åº“çš„æƒ…å†µï¼‰ï¼Œæ‰€ä»¥åœ¨ä¸€èˆ¬æƒ…å†µä¸‹æ¯”è¾ƒå°‘ä½¿ç”¨openSessionæˆ–è€…è¯´openSessionæ˜¯æ¯”è¾ƒè€æ—§çš„ä¸€å¥—æŽ¥å£äº†ï¼›&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>å¯¹äºŽgetCurrentSession æ¥è¯´ï¼Œæœ‰ä»¥ä¸‹ä¸€äº›ç‰¹ç‚¹ï¼š&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>1.ç”¨é€”ï¼Œç•Œå®šäº‹åŠ¡è¾¹ç•Œ&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>2.äº‹åŠ¡æäº¤ä¼šè‡ªåŠ¨closeï¼Œä¸éœ€è¦åƒopenSessionä¸€æ ·è‡ªå·±è°ƒç”¨closeæ–¹æ³•å…³é—­session&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>3.ä¸Šä¸‹æ–‡é…ç½®ï¼ˆå³åœ¨hibernate.cfg.xmlï¼‰ä¸­ï¼Œéœ€è¦é…ç½®ï¼š&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>&lt;!-- raw HTML omitted -->thread&lt;!-- raw HTML omitted -->&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>ï¼ˆéœ€è¦æ³¨æ„ï¼Œè¿™é‡Œçš„current_session_context_classå±žæ€§æœ‰å‡ ä¸ªå±žæ€§å€¼ï¼šjta ã€ &amp;gt; thread å¸¸ç”¨ , customã€managed å°‘ç”¨ )&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>a).threadä½¿ç”¨connection å•æ•°æ®åº“è¿žæŽ¥ç®¡ç†äº‹åŠ¡&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>b).jta ï¼ˆJava transaction apiï¼‰ Java åˆ†å¸ƒå¼äº‹åŠ¡ç®¡ç† ï¼ˆå¤šæ•°æ®åº“è®¿é—®ï¼‰ï¼Œjta ç”±ä¸­é—´ä»¶æä¾›ï¼ˆJBoss WebLogic ç­‰ï¼Œ ä½†æ˜¯tomcat ä¸æ”¯æŒï¼‰&lt;/p>
&lt;/blockquote></description></item><item><title>äºŒå‰æ ‘-å·²çŸ¥å…ˆåºæˆ–åŽç»­éåŽ†å’Œä¸­åºéåŽ†æ±‚ç”»å‡ºäºŒå‰æ ‘åŠåŽç»­æˆ–å…ˆåºéåŽ†</title><link>https://blog.itning.top/post/2018/05/04/%E4%BA%8C%E5%8F%89%E6%A0%91-%E5%B7%B2%E7%9F%A5%E5%85%88%E5%BA%8F%E6%88%96%E5%90%8E%E7%BB%AD%E9%81%8D%E5%8E%86%E5%92%8C%E4%B8%AD%E5%BA%8F%E9%81%8D%E5%8E%86%E6%B1%82%E7%94%BB%E5%87%BA%E4%BA%8C%E5%8F%89%E6%A0%91%E5%8F%8A%E5%90%8E%E7%BB%AD%E6%88%96%E5%85%88%E5%BA%8F%E9%81%8D%E5%8E%86/</link><pubDate>Fri, 04 May 2018 15:46:16 +0800</pubDate><guid>https://blog.itning.top/post/2018/05/04/%E4%BA%8C%E5%8F%89%E6%A0%91-%E5%B7%B2%E7%9F%A5%E5%85%88%E5%BA%8F%E6%88%96%E5%90%8E%E7%BB%AD%E9%81%8D%E5%8E%86%E5%92%8C%E4%B8%AD%E5%BA%8F%E9%81%8D%E5%8E%86%E6%B1%82%E7%94%BB%E5%87%BA%E4%BA%8C%E5%8F%89%E6%A0%91%E5%8F%8A%E5%90%8E%E7%BB%AD%E6%88%96%E5%85%88%E5%BA%8F%E9%81%8D%E5%8E%86/</guid><description>&lt;p>äºŒå‰æ ‘æœ‰ä¸‰ç§éåŽ†æ–¹å¼:å…ˆåºéåŽ†,ä¸­åºéåŽ†,åŽç»­éåŽ†&lt;/p>
&lt;p>&lt;strong>1.å…ˆåºéåŽ†&lt;/strong>&lt;/p>
&lt;p>(1)è®¿é—®æ ¹ç»“ç‚¹ï¼›&lt;/p>
&lt;p>(2)å…ˆåºéåŽ†å·¦å­æ ‘ï¼›&lt;/p>
&lt;p>(3)å…ˆåºéåŽ†å³å­æ ‘ã€‚&lt;/p>
&lt;p>&lt;strong>2.ä¸­åºéåŽ†&lt;/strong>&lt;/p>
&lt;p>(1)ä¸­åºéåŽ†å·¦å­æ ‘ï¼›&lt;/p>
&lt;p>(2)è®¿é—®æ ¹ç»“ç‚¹ï¼›&lt;/p>
&lt;p>(3)ä¸­åºéåŽ†å³å­æ ‘ã€‚&lt;/p>
&lt;p>&lt;strong>3.åŽåºéåŽ†&lt;/strong>&lt;/p>
&lt;p>(1)åŽåºéåŽ†å·¦å­æ ‘ï¼›&lt;/p>
&lt;p>(2)åŽåºéåŽ†å³å­æ ‘ï¼›&lt;/p>
&lt;p>(3)è®¿é—®æ ¹ç»“ç‚¹ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬åªè¦çŸ¥é“ å…ˆåºä¸­åºæˆ– åŽåºä¸­åº å°±èƒ½ç¡®å®šä¸€æ£µäºŒå‰æ ‘ å¦‚æžœæˆ‘ä»¬åªçŸ¥é“ å…ˆåº åŽç»­ æ˜¯æ— æ³•ç¡®å®šä¸€æ£µäºŒå‰æ ‘çš„&lt;/p>
&lt;p>ä»¥ 2009å¹´ä¸ŠåŠå¹´ç¨‹åºå‘˜ä¸Šåˆè¯•é¢˜38é¢˜ä¸ºä¾‹&lt;/p>
&lt;blockquote>
&lt;p>æŸäºŒå‰æ ‘çš„å…ˆåºéåŽ†åºåˆ—ä¸ºABFCDEã€ä¸­åºéåŽ†åºåˆ—ä¸ºBFADCEï¼Œåˆ™è¯¥äºŒå‰æ ‘æ ¹çš„å·¦å­©å­å’Œå³å­©å­ç»“ç‚¹åˆ†åˆ«æ˜¯ï¼ˆ38ï¼‰ã€‚&lt;/p>
&lt;p>(38)A.B å’Œ F B.F å’Œ B C.B å’Œ C D.C å’Œ B&lt;/p>
&lt;/blockquote>
&lt;ol>
&lt;li>
&lt;p>é¦–å…ˆ é¢˜ä¸­ç»™æˆ‘ä»¬äº† è¿™æ£µäºŒå‰æ ‘ çš„å…ˆåºåºåˆ—å’Œä¸­åºåºåˆ—&lt;/p>
&lt;/li>
&lt;li>
&lt;p>é€šè¿‡å…ˆåºåºåˆ— æˆ‘ä»¬èƒ½å¤ŸçŸ¥é“ç¬¬ä¸€ä¸ªå­—æ¯æ˜¯æ ¹èŠ‚ç‚¹ ä¹Ÿå°±æ˜¯ èŠ‚ç‚¹A ä¸º æ•´ä¸ªäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹(å› ä¸ºå…ˆåºåºåˆ—é¦–å…ˆè®¿é—®çš„å°±æ˜¯æ ¹èŠ‚ç‚¹)&lt;/p>
&lt;/li>
&lt;li>
&lt;p>é€šè¿‡ä¸­åºåºåˆ— æˆ‘ä»¬èƒ½å¤Ÿé€šè¿‡æ ¹èŠ‚ç‚¹A åˆ¤æ–­äºŒå‰æ ‘çš„å·¦å­èŠ‚ç‚¹æœ‰BF å³å­èŠ‚ç‚¹æœ‰DCE (å› ä¸ºæ ¹èŠ‚ç‚¹å°†æ•´æ£µäºŒå‰æ ‘åˆ†ä¸ºå·¦å³ä¸¤è¾¹,å¯ä»¥é€šè¿‡ä¸­åºåºåˆ—æ¥ç¡®å®šå·¦å³å­æ ‘éƒ½æœ‰å“ªäº›èŠ‚ç‚¹)&lt;/p>
&lt;/li>
&lt;li>
&lt;p>è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥å…ˆç”»å‡ºæ ¹èŠ‚ç‚¹åŠå·¦å³å­æ ‘éƒ½æœ‰å“ªäº›èŠ‚ç‚¹&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2018-05-04-%E4%BA%8C%E5%8F%89%E6%A0%91-%E5%B7%B2%E7%9F%A5%E5%85%88%E5%BA%8F%E6%88%96%E5%90%8E%E7%BB%AD%E9%81%8D%E5%8E%86%E5%92%8C%E4%B8%AD%E5%BA%8F%E9%81%8D%E5%8E%86%E6%B1%82%E7%94%BB%E5%87%BA%E4%BA%8C%E5%8F%89%E6%A0%91%E5%8F%8A%E5%90%8E%E7%BB%AD%E6%88%96%E5%85%88%E5%BA%8F%E9%81%8D%E5%8E%86/a.png" alt="a">&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æŽ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ å…ˆåºåºåˆ— ABFCDE æŠŠæ ¹èŠ‚ç‚¹åŽ»é™¤ BFCDE è¿™ä¸ªæ—¶å€™å…ˆåºéåŽ†æ˜¯å…ˆè®¿é—®æ ¹èŠ‚ç‚¹ç„¶åŽå†è®¿é—®å·¦å­æ ‘æœ€åŽå³å­æ ‘.é‚£ä¹ˆBFCDE è¿™ä¸ªåºåˆ—ä¸­çš„B ä¸º å·¦å­æ ‘çš„æ ¹èŠ‚ç‚¹.åºåˆ—ä¸­åŽ»æŽ‰å·¦å­æ ‘çš„èŠ‚ç‚¹å’Œæ ¹èŠ‚ç‚¹ è¿˜å‰© CDE è¿™ä¸‰ä¸ªèŠ‚ç‚¹ é‚£ä¹ˆCèŠ‚ç‚¹åˆ™ä¸ºå³å­æ ‘çš„æ ¹èŠ‚ç‚¹(å› ä¸ºå…ˆåºéåŽ†æ˜¯å…ˆè®¿é—®æ ¹èŠ‚ç‚¹çš„,è€ŒCåœ¨åºåˆ—çš„å¼€å¤´åˆ™Cä¸ºå³å­æ ‘æ ¹èŠ‚ç‚¹)&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2018-05-04-%E4%BA%8C%E5%8F%89%E6%A0%91-%E5%B7%B2%E7%9F%A5%E5%85%88%E5%BA%8F%E6%88%96%E5%90%8E%E7%BB%AD%E9%81%8D%E5%8E%86%E5%92%8C%E4%B8%AD%E5%BA%8F%E9%81%8D%E5%8E%86%E6%B1%82%E7%94%BB%E5%87%BA%E4%BA%8C%E5%8F%89%E6%A0%91%E5%8F%8A%E5%90%8E%E7%BB%AD%E6%88%96%E5%85%88%E5%BA%8F%E9%81%8D%E5%8E%86/b.png" alt="b">&lt;/p>
&lt;/li>
&lt;li>
&lt;p>çŽ°åœ¨æˆ‘ä»¬çŸ¥é“äº†è¿™æ£µäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹å’Œå·¦å­æ ‘,å³å­æ ‘çš„æ ¹èŠ‚ç‚¹,æŽ¥ä¸‹æ¥å°±è¦ç¡®å®šå·¦å­æ ‘å‰©ä¸‹çš„FèŠ‚ç‚¹æ˜¯åœ¨å·¦å­æ ‘çš„å·¦è¾¹è¿˜æ˜¯å³è¾¹&lt;/p>
&lt;/li>
&lt;li>
&lt;p>é¦–å…ˆæˆ‘ä»¬å‡è®¾FèŠ‚ç‚¹åœ¨BèŠ‚ç‚¹çš„å·¦ä¾§&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2018-05-04-%E4%BA%8C%E5%8F%89%E6%A0%91-%E5%B7%B2%E7%9F%A5%E5%85%88%E5%BA%8F%E6%88%96%E5%90%8E%E7%BB%AD%E9%81%8D%E5%8E%86%E5%92%8C%E4%B8%AD%E5%BA%8F%E9%81%8D%E5%8E%86%E6%B1%82%E7%94%BB%E5%87%BA%E4%BA%8C%E5%8F%89%E6%A0%91%E5%8F%8A%E5%90%8E%E7%BB%AD%E6%88%96%E5%85%88%E5%BA%8F%E9%81%8D%E5%8E%86/c.png" alt="c">&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ç”¨å…ˆåºåºåˆ—ABFCDEéªŒè¯:å…ˆè®¿é—®æ ¹èŠ‚ç‚¹(A),å…ˆåºéåŽ†å·¦å­æ ‘(BF),å·¦å­æ ‘å…ˆè®¿é—®æ ¹èŠ‚ç‚¹(B),å†éåŽ†å·¦å­æ ‘å·¦èŠ‚ç‚¹(F).å…ˆåºéåŽ†çœ‹èµ·æ¥æ²¡é—®é¢˜,é‚£ä¹ˆæˆ‘ä»¬ç”¨ä¸­åºåºåˆ—BFADCEåŽ»éªŒè¯ä¸‹:é¦–å…ˆè®¿é—®å·¦å­æ ‘(BF),å·¦å­æ ‘ä¸­å…ˆè®¿é—®å·¦èŠ‚ç‚¹(F),å†è®¿é—®å·¦å­æ ‘æ ¹èŠ‚ç‚¹(B) è²Œä¼¼ä¸å¯¹ å› ä¸ºè¿™æ · ä¸­åºéåŽ†åº”è¯¥æ˜¯ä»¥ FBå¼€å¤´ è€Œä¸æ˜¯ BFå¼€å¤´,é‚£ä¹ˆå°†FèŠ‚ç‚¹æ”¾åˆ°BèŠ‚ç‚¹å³ä¾§&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2018-05-04-%E4%BA%8C%E5%8F%89%E6%A0%91-%E5%B7%B2%E7%9F%A5%E5%85%88%E5%BA%8F%E6%88%96%E5%90%8E%E7%BB%AD%E9%81%8D%E5%8E%86%E5%92%8C%E4%B8%AD%E5%BA%8F%E9%81%8D%E5%8E%86%E6%B1%82%E7%94%BB%E5%87%BA%E4%BA%8C%E5%8F%89%E6%A0%91%E5%8F%8A%E5%90%8E%E7%BB%AD%E6%88%96%E5%85%88%E5%BA%8F%E9%81%8D%E5%8E%86/d.png" alt="d">&lt;/p>
&lt;/li>
&lt;li>
&lt;p>è¿™å›žå·¦å­æ ‘å°±å¯¹äº† å…ˆåºéåŽ†:å…ˆè®¿é—®æ ¹èŠ‚ç‚¹A,å†è®¿é—®å·¦å­æ ‘,å·¦å­æ ‘å…ˆè®¿é—®æ ¹èŠ‚ç‚¹B,ç„¶åŽè¦è®¿é—®å·¦èŠ‚ç‚¹,ä½†æ˜¯å·¦èŠ‚ç‚¹æ²¡æœ‰,æ‰€ä»¥ç»§ç»­è®¿é—®,è®¿é—®å³èŠ‚ç‚¹F. ä¸­åºéåŽ†:å…ˆè®¿é—®å·¦å­æ ‘,ç„¶åŽæ˜¯å·¦å­æ ‘çš„å·¦èŠ‚ç‚¹,ä¾ç„¶ä¸ºç©º,åˆ™ç»§ç»­è®¿é—®å·¦å­æ ‘æ ¹èŠ‚ç‚¹B,ç„¶åŽè®¿é—®å·¦å­æ ‘å³èŠ‚ç‚¹F&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ç”¨åŒæ ·çš„æ–¹æ³•å¯ä»¥ç¡®å®šå³å­æ ‘,å³å­æ ‘çš„æ ¹èŠ‚ç‚¹ä¸ºC ä¸­åºéåŽ†å³å­æ ‘ä¸ºDCE åˆ™ å…ˆè®¿é—®å³å­æ ‘å·¦èŠ‚ç‚¹D ç„¶åŽè®¿é—®å³å­æ ‘æ ¹èŠ‚ç‚¹C æœ€åŽè®¿é—®å³å­æ ‘å³èŠ‚ç‚¹E. æ•´ä¸ªäºŒå‰æ ‘å¦‚å›¾:&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://blog.itning.top/images/2018-05-04-%E4%BA%8C%E5%8F%89%E6%A0%91-%E5%B7%B2%E7%9F%A5%E5%85%88%E5%BA%8F%E6%88%96%E5%90%8E%E7%BB%AD%E9%81%8D%E5%8E%86%E5%92%8C%E4%B8%AD%E5%BA%8F%E9%81%8D%E5%8E%86%E6%B1%82%E7%94%BB%E5%87%BA%E4%BA%8C%E5%8F%89%E6%A0%91%E5%8F%8A%E5%90%8E%E7%BB%AD%E6%88%96%E5%85%88%E5%BA%8F%E9%81%8D%E5%8E%86/e.png" alt="e">&lt;/p>
&lt;p>è¿™é“é¢˜æ­£ç¡®ç­”æ¡ˆä¸º C&lt;/p></description></item><item><title>K2è·¯ç”±å™¨V22.6.507.43åŠV22.6.506.28ä»¥å‰ç‰ˆæœ¬åˆ·breed,æ½˜å¤šæ‹‰ä¸æ­»é¸Ÿè€æ¯›æ¡ƒæ•™ç¨‹</title><link>https://blog.itning.top/post/2018/05/04/k2%E8%B7%AF%E7%94%B1%E5%99%A8v22.6.507.43%E5%8F%8Av22.6.506.28%E4%BB%A5%E5%89%8D%E7%89%88%E6%9C%AC%E5%88%B7breed%E6%BD%98%E5%A4%9A%E6%8B%89%E4%B8%8D%E6%AD%BB%E9%B8%9F%E8%80%81%E6%AF%9B%E6%A1%83%E6%95%99%E7%A8%8B/</link><pubDate>Fri, 04 May 2018 10:42:32 +0800</pubDate><guid>https://blog.itning.top/post/2018/05/04/k2%E8%B7%AF%E7%94%B1%E5%99%A8v22.6.507.43%E5%8F%8Av22.6.506.28%E4%BB%A5%E5%89%8D%E7%89%88%E6%9C%AC%E5%88%B7breed%E6%BD%98%E5%A4%9A%E6%8B%89%E4%B8%8D%E6%AD%BB%E9%B8%9F%E8%80%81%E6%AF%9B%E6%A1%83%E6%95%99%E7%A8%8B/</guid><description>&lt;p>åŽŸå¸–åœ°å€:&lt;a href="http://bbs.zol.com.cn/techbbs/d16_74689.html">æ–è®¯k2_V22.6.507.43é™çº§åˆ·å…¥Breed Web&lt;/a> &lt;a href="http://www.right.com.cn/forum/thread-255017-1-1.html">è·¯ç”±å™¨åˆ·breed WebæŽ§åˆ¶å°åŠ©æ‰‹v4.8ç‰ˆæœ¬ &lt;/a>&lt;/p>
&lt;p>åœ¨æ­¤æ„Ÿè°¢ &lt;a href="http://www.right.com.cn/forum/forum.php">æ©å±±æ— çº¿è®ºå›&lt;/a>å°ä¼™ä¼´ä»¬&lt;/p>
&lt;p>é™„ä»¶åœ°å€ : &lt;a href="https://guanghou-my.sharepoint.com/:f:/g/personal/wangning_get365_pw/EmX6aycUdRJBmZkdVMVTEMYBo587Xs02LNL8PrRYDGxUWA?e=V67HTT">K2æœ€æ–°å›ºä»¶V22.6.507.43é™çº§åˆ·å…¥breedçš„æ–¹æ³•&lt;/a> &lt;a href="https://guanghou-my.sharepoint.com/:f:/g/personal/wangning_get365_pw/Es3gpId4ZB1ClvQU32gQCIYBenrklWlDSfXn-tSbPt0D_A?e=rHSNNc">è·¯ç”±å™¨åˆ·breed WebæŽ§åˆ¶å°åŠ©æ‰‹v4.8ç‰ˆæœ¬&lt;/a>&lt;/p>
&lt;hr>
&lt;h2 id="ç‰ˆæœ¬ç»Ÿä¸€åˆ°22650628">ç‰ˆæœ¬ç»Ÿä¸€åˆ°22.6.506.28&lt;/h2>
&lt;ol>
&lt;li>
&lt;p>é¦–å…ˆä¸‹è½½ K2_V22.6.506.28.bin åˆ°ç”µè„‘ä¸­&lt;/p>
&lt;/li>
&lt;li>
&lt;p>è¿›å…¥è·¯ç”±å™¨åŽå° é»˜è®¤:192.168.2.1&lt;/p>
&lt;/li>
&lt;li>
&lt;p>é€‰æ‹© é«˜çº§è®¾ç½®&amp;ndash;&amp;gt;ç³»ç»Ÿè®¾ç½®&amp;ndash;&amp;gt;æ‰‹åŠ¨å‡çº§&amp;ndash;&amp;gt;æµè§ˆ æŠŠä¸‹è½½çš„ K2_V22.6.506.28.binæ–‡ä»¶é€‰ä¸­&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ç‚¹å‡» å‡çº§æŒ‰é’®&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å‡çº§æˆåŠŸåŽé‡æ–°ç™»é™†è·¯ç”±å™¨ æ£€æŸ¥ç‰ˆæœ¬å·æ˜¯å¦æ˜¯ V22.6.506.28&lt;/p>
&lt;p>&lt;strong>å¦‚æžœé‡åˆ°å›ºä»¶éžæ³•ç­‰é—®é¢˜ è¯·å…ˆæ¢å¤å‡ºåŽ‚è®¾ç½®!!!&lt;/strong>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="æ‰“å¼€telnet">æ‰“å¼€Telnet&lt;/h2>
&lt;ol>
&lt;li>
&lt;p>ç”¨ç½‘çº¿å°†ç”µè„‘å’Œè·¯ç”±å™¨è¿žæŽ¥èµ·æ¥,è¿žæŽ¥è·¯ç”±å™¨ä¸€ç«¯æ’åˆ°è·¯ç”±å™¨LANå£ä¸­(æ³¨æ„ä¸è¦æ’åˆ°WANå£)&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ‰“å¼€ç”µè„‘ è¾“å…¥ 192.168.2.1 çœ‹çœ‹èƒ½ä¸èƒ½æ‰“å¼€ å¦‚æžœèƒ½æ‰“å¼€å°±è¯´æ˜Žç½‘ç»œè¿žæŽ¥æ­£å¸¸(æ‰“ä¸å¼€åº”è¯¥ç­‰å¾…5åˆ†é’ŸåŽå†è¯•)&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ç”µè„‘æ‰“å¼€ RoutAckProV1B2.exe è¿™ä¸ªåº”ç”¨ç¨‹åº
&lt;img src="https://blog.itning.top/images/2018-05-04-K2%E8%B7%AF%E7%94%B1%E5%99%A8V22-6-507-43%E5%8F%8AV22-6-506-28%E4%BB%A5%E5%89%8D%E7%89%88%E6%9C%AC%E5%88%B7breed-%E6%BD%98%E5%A4%9A%E6%8B%89%E4%B8%8D%E6%AD%BB%E9%B8%9F%E8%80%81%E6%AF%9B%E6%A1%83%E6%95%99%E7%A8%8B/a.jpg" alt="a">&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>ç‚¹å‡» æ‰“å¼€Telnet è¿™ä¸ªæ—¶å€™ ç™½æ¡†å†…æ˜¾ç¤º æˆåŠŸ åˆ™ æ‰“å¼€ Telnet æˆåŠŸ&lt;/p>
&lt;h2 id="æ‰“å¼€æŽ§åˆ¶å°åŠ©æ‰‹-å¼€å§‹åˆ·breed">æ‰“å¼€æŽ§åˆ¶å°åŠ©æ‰‹ å¼€å§‹åˆ·breed&lt;/h2>
&lt;ol>
&lt;li>
&lt;p>ç”µè„‘ &lt;strong>ç”¨é¼ æ ‡å³é”®&lt;/strong> ç‚¹å‡» è·¯ç”±å™¨åˆ·breed WebæŽ§åˆ¶å°åŠ©æ‰‹v4.8ç‰ˆæœ¬.exe è¿™ä¸ªåº”ç”¨ç¨‹åº å‡ºçŽ°çš„èœå• é€‰æ‹© &lt;strong>ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ&lt;/strong> è¿è¡Œç¨‹åºå¦‚å›¾:&lt;/p>
&lt;p>&lt;img src="https://blog.itning.top/images/2018-05-04-K2%E8%B7%AF%E7%94%B1%E5%99%A8V22-6-507-43%E5%8F%8AV22-6-506-28%E4%BB%A5%E5%89%8D%E7%89%88%E6%9C%AC%E5%88%B7breed-%E6%BD%98%E5%A4%9A%E6%8B%89%E4%B8%8D%E6%AD%BB%E9%B8%9F%E8%80%81%E6%AF%9B%E6%A1%83%E6%95%99%E7%A8%8B/b.jpg" alt="b">&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ç‚¹å‡» å¼€å§‹åˆ·æœº æŒ‰é’® è¿›è¡Œåˆ·æœº&lt;/p>
&lt;p>&lt;strong>æ³¨æ„:è¿™ä¸ªæ—¶å€™ç”µè„‘åº”è¯¥å°†æ€æ¯’,é˜²ç«å¢™,å®‰å…¨å«å£«å…¨éƒ¨å…³é—­,å¦åˆ™å¯èƒ½å¤±è´¥,å¤±è´¥å¤šè¯•å‡ æ¬¡&lt;/strong>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åˆ· æˆåŠŸåŽ è·¯ç”±å™¨æ–­ç”µ æ‰‹åŠ¨æŒ‰ä½ è·¯ç”±å™¨å±è‚¡åŽè¾¹æŒ‰é’® æ’ç”µ ç”µè„‘æµè§ˆå™¨è¾“å…¥ 192.168.1.1 å¦‚æžœè¿›å…¥åˆ° breedæŽ§åˆ¶å° åˆ™æˆåŠŸ&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="åˆ·å…¥å›ºä»¶">åˆ·å…¥å›ºä»¶&lt;/h2>
&lt;p>&lt;img src="https://blog.itning.top/images/2018-05-04-K2%E8%B7%AF%E7%94%B1%E5%99%A8V22-6-507-43%E5%8F%8AV22-6-506-28%E4%BB%A5%E5%89%8D%E7%89%88%E6%9C%AC%E5%88%B7breed-%E6%BD%98%E5%A4%9A%E6%8B%89%E4%B8%8D%E6%AD%BB%E9%B8%9F%E8%80%81%E6%AF%9B%E6%A1%83%E6%95%99%E7%A8%8B/c.jpg" alt="c">&lt;/p></description></item><item><title>JAVA JMS Javaæ¶ˆæ¯æœåŠ¡ï¼ˆJava Message Serviceï¼‰ çš„å®žçŽ°ActiveMQ</title><link>https://blog.itning.top/post/2018/05/03/java-jms-java%E6%B6%88%E6%81%AF%E6%9C%8D%E5%8A%A1java-message-service-%E7%9A%84%E5%AE%9E%E7%8E%B0activemq/</link><pubDate>Thu, 03 May 2018 12:06:31 +0800</pubDate><guid>https://blog.itning.top/post/2018/05/03/java-jms-java%E6%B6%88%E6%81%AF%E6%9C%8D%E5%8A%A1java-message-service-%E7%9A%84%E5%AE%9E%E7%8E%B0activemq/</guid><description>&lt;blockquote>
&lt;p>JMSå³Javaæ¶ˆæ¯æœåŠ¡ï¼ˆJava Message Serviceï¼‰åº”ç”¨ç¨‹åºæŽ¥å£æ˜¯ä¸€ä¸ªJavaå¹³å°ä¸­å…³äºŽé¢å‘æ¶ˆæ¯ä¸­é—´ä»¶ï¼ˆMOMï¼‰çš„APIï¼Œç”¨äºŽåœ¨ä¸¤ä¸ªåº”ç”¨ç¨‹åºä¹‹é—´ï¼Œæˆ–åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å‘é€æ¶ˆæ¯ï¼Œè¿›è¡Œå¼‚æ­¥é€šä¿¡ã€‚Javaæ¶ˆæ¯æœåŠ¡æ˜¯ä¸€ä¸ªä¸Žå…·ä½“å¹³å°æ— å…³çš„APIï¼Œç»å¤§å¤šæ•°MOMæä¾›å•†éƒ½å¯¹JMSæä¾›æ”¯æŒã€‚
JMSæ˜¯ä¸€ç§ä¸ŽåŽ‚å•†æ— å…³çš„ APIï¼Œç”¨æ¥è®¿é—®æ¶ˆæ¯æ”¶å‘ç³»ç»Ÿæ¶ˆæ¯ã€‚å®ƒç±»ä¼¼äºŽJDBC(Java Database Connectivity)ï¼šè¿™é‡Œï¼ŒJDBC æ˜¯å¯ä»¥ç”¨æ¥è®¿é—®è®¸å¤šä¸åŒå…³ç³»æ•°æ®åº“çš„ APIï¼Œè€Œ JMS åˆ™æä¾›åŒæ ·ä¸ŽåŽ‚å•†æ— å…³çš„è®¿é—®æ–¹æ³•ï¼Œä»¥è®¿é—®æ¶ˆæ¯æ”¶å‘æœåŠ¡ã€‚è®¸å¤šåŽ‚å•†éƒ½æ”¯æŒ JMSï¼ŒåŒ…æ‹¬ IBM çš„ MQSeriesã€BEAçš„ Weblogic JMS serviceå’Œ Progress çš„ SonicMQï¼Œè¿™åªæ˜¯å‡ ä¸ªä¾‹å­ã€‚ JMS ä½¿æ‚¨èƒ½å¤Ÿé€šè¿‡æ¶ˆæ¯æ”¶å‘æœåŠ¡ï¼ˆæœ‰æ—¶ç§°ä¸ºæ¶ˆæ¯ä¸­ä»‹ç¨‹åºæˆ–è·¯ç”±å™¨ï¼‰ä»Žä¸€ä¸ª JMS å®¢æˆ·æœºå‘å¦ä¸€ä¸ª JMSå®¢æˆ·æœºå‘é€æ¶ˆæ¯ã€‚æ¶ˆæ¯æ˜¯ JMS ä¸­çš„ä¸€ç§ç±»åž‹å¯¹è±¡ï¼Œç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šæŠ¥å¤´å’Œæ¶ˆæ¯ä¸»ä½“ã€‚æŠ¥å¤´ç”±è·¯ç”±ä¿¡æ¯ä»¥åŠæœ‰å…³è¯¥æ¶ˆæ¯çš„å…ƒæ•°æ®ç»„æˆã€‚æ¶ˆæ¯ä¸»ä½“åˆ™æºå¸¦ç€åº”ç”¨ç¨‹åºçš„æ•°æ®æˆ–æœ‰æ•ˆè´Ÿè½½ã€‚æ ¹æ®æœ‰æ•ˆè´Ÿè½½çš„ç±»åž‹æ¥åˆ’åˆ†ï¼Œå¯ä»¥å°†æ¶ˆæ¯åˆ†ä¸ºå‡ ç§ç±»åž‹ï¼Œå®ƒä»¬åˆ†åˆ«æºå¸¦ï¼šç®€å•æ–‡æœ¬(TextMessage)ã€å¯åºåˆ—åŒ–çš„å¯¹è±¡ (ObjectMessage)ã€å±žæ€§é›†åˆ (MapMessage)ã€å­—èŠ‚æµ (BytesMessage)ã€åŽŸå§‹å€¼æµ (StreamMessage)ï¼Œè¿˜æœ‰æ— æœ‰æ•ˆè´Ÿè½½çš„æ¶ˆæ¯ (Message)ã€‚&lt;/p>
&lt;/blockquote>
&lt;h2 id="javaæ¶ˆæ¯æœåŠ¡åº”ç”¨ç¨‹åºç»“æž„æ”¯æŒä¸¤ç§æ¨¡åž‹">Javaæ¶ˆæ¯æœåŠ¡åº”ç”¨ç¨‹åºç»“æž„æ”¯æŒä¸¤ç§æ¨¡åž‹&lt;/h2>
&lt;h3 id="ç‚¹å¯¹ç‚¹æˆ–é˜Ÿåˆ—æ¨¡åž‹">ç‚¹å¯¹ç‚¹æˆ–é˜Ÿåˆ—æ¨¡åž‹&lt;/h3>
&lt;p>åœ¨ç‚¹å¯¹ç‚¹æˆ–é˜Ÿåˆ—æ¨¡åž‹ä¸‹ï¼Œä¸€ä¸ªç”Ÿäº§è€…å‘ä¸€ä¸ªç‰¹å®šçš„é˜Ÿåˆ—å‘å¸ƒæ¶ˆæ¯ï¼Œä¸€ä¸ªæ¶ˆè´¹è€…ä»Žè¯¥é˜Ÿåˆ—ä¸­è¯»å–æ¶ˆæ¯ã€‚è¿™é‡Œï¼Œç”Ÿäº§è€…çŸ¥é“æ¶ˆè´¹è€…çš„é˜Ÿåˆ—ï¼Œå¹¶ç›´æŽ¥å°†æ¶ˆæ¯å‘é€åˆ°æ¶ˆè´¹è€…çš„é˜Ÿåˆ—ã€‚
&lt;img src="https://blog.itning.top/images/2018-05-03-JAVA-JMS-Java%E6%B6%88%E6%81%AF%E6%9C%8D%E5%8A%A1%EF%BC%88Java-Message-Service%EF%BC%89-%E7%9A%84%E5%AE%9E%E7%8E%B0ActiveMQ/a.png" alt="ç‚¹å¯¹ç‚¹æˆ–é˜Ÿåˆ—æ¨¡åž‹">
è¿™ç§æ¨¡å¼è¢«æ¦‚æ‹¬ä¸ºï¼š
åªæœ‰ä¸€ä¸ªæ¶ˆè´¹è€…å°†èŽ·å¾—æ¶ˆæ¯
ç”Ÿäº§è€…ä¸éœ€è¦åœ¨æŽ¥æ”¶è€…æ¶ˆè´¹è¯¥æ¶ˆæ¯æœŸé—´å¤„äºŽè¿è¡ŒçŠ¶æ€ï¼ŒæŽ¥æ”¶è€…ä¹ŸåŒæ ·ä¸éœ€è¦åœ¨æ¶ˆæ¯å‘é€æ—¶å¤„äºŽè¿è¡ŒçŠ¶æ€ã€‚
æ¯ä¸€ä¸ªæˆåŠŸå¤„ç†çš„æ¶ˆæ¯éƒ½ç”±æŽ¥æ”¶è€…ç­¾æ”¶
###å‘å¸ƒè€…/è®¢é˜…è€…æ¨¡åž‹
å‘å¸ƒè€…/è®¢é˜…è€…æ¨¡åž‹æ”¯æŒå‘ä¸€ä¸ªç‰¹å®šçš„æ¶ˆæ¯ä¸»é¢˜å‘å¸ƒæ¶ˆæ¯ã€‚0æˆ–å¤šä¸ªè®¢é˜…è€…å¯èƒ½å¯¹æŽ¥æ”¶æ¥è‡ªç‰¹å®šæ¶ˆæ¯ä¸»é¢˜çš„æ¶ˆæ¯æ„Ÿå…´è¶£ã€‚åœ¨è¿™ç§æ¨¡åž‹ä¸‹ï¼Œå‘å¸ƒè€…å’Œè®¢é˜…è€…å½¼æ­¤ä¸çŸ¥é“å¯¹æ–¹ã€‚è¿™ç§æ¨¡å¼å¥½æ¯”æ˜¯åŒ¿åå…¬å‘Šæ¿ã€‚
&lt;img src="https://blog.itning.top/images/2018-05-03-JAVA-JMS-Java%E6%B6%88%E6%81%AF%E6%9C%8D%E5%8A%A1%EF%BC%88Java-Message-Service%EF%BC%89-%E7%9A%84%E5%AE%9E%E7%8E%B0ActiveMQ/b.png" alt="å‘å¸ƒè€…/è®¢é˜…è€…æ¨¡åž‹">
è¿™ç§æ¨¡å¼è¢«æ¦‚æ‹¬ä¸ºï¼š
å¤šä¸ªæ¶ˆè´¹è€…å¯ä»¥èŽ·å¾—æ¶ˆæ¯
åœ¨å‘å¸ƒè€…å’Œè®¢é˜…è€…ä¹‹é—´å­˜åœ¨æ—¶é—´ä¾èµ–æ€§ã€‚å‘å¸ƒè€…éœ€è¦å»ºç«‹ä¸€ä¸ªè®¢é˜…ï¼ˆsubscriptionï¼‰ï¼Œä»¥ä¾¿å®¢æˆ·èƒ½å¤Ÿè®¢é˜…ã€‚è®¢é˜…è€…å¿…é¡»ä¿æŒæŒç»­çš„æ´»åŠ¨çŠ¶æ€ä»¥æŽ¥æ”¶æ¶ˆæ¯ï¼Œé™¤éžè®¢é˜…è€…å»ºç«‹äº†æŒä¹…çš„è®¢é˜…ã€‚åœ¨é‚£ç§æƒ…å†µä¸‹ï¼Œåœ¨è®¢é˜…è€…æœªè¿žæŽ¥æ—¶å‘å¸ƒçš„æ¶ˆæ¯å°†åœ¨è®¢é˜…è€…é‡æ–°è¿žæŽ¥æ—¶é‡æ–°å‘å¸ƒã€‚&lt;/p>
&lt;h2 id="activemq">ActiveMQ&lt;/h2>
&lt;h3 id="å®‰è£…é…ç½®å¯åŠ¨">å®‰è£…,é…ç½®,å¯åŠ¨&lt;/h3>
&lt;blockquote>
&lt;p>å®˜æ–¹ä¸‹è½½é¡µé¢: &lt;a href="http://activemq.apache.org/download.html">http://activemq.apache.org/download.html&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;p>è§£åŽ‹åŽ åœ¨confç›®å½•ä¸­ activemq.xml è¿™ä¸ªXML æ–‡ä»¶
å°† 0.0.0.0 æ”¹æˆ localhost&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">&amp;lt;transportConnectors&amp;gt;
&amp;lt;!-- DOS protection, limit concurrent connections to 1000 and frame size to 100MB --&amp;gt;
&amp;lt;transportConnector name=&amp;#34;openwire&amp;#34; uri=&amp;#34;tcp://localhost:61616?maximumConnections=1000&amp;amp;amp;wireFormat.maxFrameSize=104857600&amp;#34;/&amp;gt;
&amp;lt;transportConnector name=&amp;#34;amqp&amp;#34; uri=&amp;#34;amqp://localhost:5672?maximumConnections=1000&amp;amp;amp;wireFormat.maxFrameSize=104857600&amp;#34;/&amp;gt;
&amp;lt;transportConnector name=&amp;#34;stomp&amp;#34; uri=&amp;#34;stomp://localhost:61613?maximumConnections=1000&amp;amp;amp;wireFormat.maxFrameSize=104857600&amp;#34;/&amp;gt;
&amp;lt;transportConnector name=&amp;#34;mqtt&amp;#34; uri=&amp;#34;mqtt://localhost:1883?maximumConnections=1000&amp;amp;amp;wireFormat.maxFrameSize=104857600&amp;#34;/&amp;gt;
&amp;lt;transportConnector name=&amp;#34;ws&amp;#34; uri=&amp;#34;ws://localhost:61614?maximumConnections=1000&amp;amp;amp;wireFormat.maxFrameSize=104857600&amp;#34;/&amp;gt;
&amp;lt;/transportConnectors&amp;gt;
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>windows çŽ¯å¢ƒ åœ¨ bin ç›®å½•ä¸­ å¯åŠ¨ activemq.bat è¿™ä¸ªè„šæœ¬
5.10 ç‰ˆæœ¬åŽ&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback"> .\activemq start
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>5.9 ä¹‹å‰&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback"> .\activemq
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>JAVA API : &lt;a href="https://github.com/itning/BigData/tree/master/src/main/java/top/itning/activemq">https://github.com/itning/BigData/tree/master/src/main/java/top/itning/activemq&lt;/a>&lt;/p></description></item><item><title>å•ä¾‹è®¾è®¡æ¨¡å¼</title><link>https://blog.itning.top/post/2018/05/02/%E5%8D%95%E4%BE%8B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/</link><pubDate>Wed, 02 May 2018 19:15:18 +0800</pubDate><guid>https://blog.itning.top/post/2018/05/02/%E5%8D%95%E4%BE%8B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/</guid><description>&lt;p>è§£å†³ä¸€ä¸ªç±»åœ¨å†…å­˜ä¸­åªå­˜åœ¨ä¸€ä¸ªå¯¹è±¡ï¼Œæƒ³è¦ä¿è¯å¯¹è±¡çš„å”¯ä¸€ã€‚&lt;/p>
&lt;ol>
&lt;li>ä¸ºäº†é¿å…å…¶ä»–ç¨‹åºè¿‡å¤šçš„å»ºç«‹è¯¥ç±»å¯¹è±¡ã€‚ç¦æ­¢å…¶ä»–ç¨‹åºå»ºç«‹è¯¥ç±»å¯¹è±¡ã€‚&lt;/li>
&lt;li>ä¸ºäº†å…¶ä»–ç¨‹åºå¯ä»¥è®¿é—®è¯¥ç±»å¯¹è±¡ï¼Œåœ¨æœ¬ç±»ä¸­è‡ªå®šä¹‰ä¸€ä¸ªå¯¹è±¡ã€‚&lt;/li>
&lt;li>æ–¹ä¾¿å…¶ä»–ç¨‹åºå¯¹è‡ªå®šä¹‰ç±»çš„å¯¹è±¡çš„è®¿é—®ï¼Œå¯¹å¤–æä¾›ä¸€äº›è®¿é—®æ–¹å¼ã€‚&lt;/li>
&lt;/ol>
&lt;hr>
&lt;p>&lt;strong>é¥¿æ±‰å•ä¾‹è®¾è®¡æ¨¡å¼&lt;/strong>
1. ç§æœ‰åŒ–æž„é€ å‡½æ•°ã€‚
2. å£°æ˜Žæœ¬ç±»çš„å¼•ç”¨ç±»åž‹å˜é‡ï¼Œå¹¶ä¸”ä½¿ç”¨è¯¥å˜é‡æŒ‡å‘æœ¬ç±»å¯¹è±¡ã€‚
3. æä¾›ä¸€ä¸ªå…¬å…±é™æ€çš„æ–¹æ³•èŽ·å–æœ¬ç±»çš„å¯¹è±¡ã€‚&lt;/p>
&lt;p>&lt;strong>æ‡’æ±‰å•ä¾‹è®¾è®¡æ¨¡å¼ï¼š&lt;/strong>
1. ç§æœ‰åŒ–æž„é€ å‡½æ•°ã€‚
2. å£°æ˜Žæœ¬ç±»çš„å¼•ç”¨ç±»åž‹å˜é‡ï¼Œä½†æ˜¯ä¸è¦åˆ›å»ºå¯¹è±¡ï¼Œ
3. æä¾›å…¬å…±é™æ€ çš„æ–¹æ³•èŽ·å–æœ¬ç±» çš„å¯¹è±¡ï¼ŒèŽ·å–ä¹‹å‰å…ˆåˆ¤æ–­æ˜¯å¦å·²ç»åˆ›å»ºäº†æœ¬ç±» å¯¹è±¡
ï¼Œå¦‚æžœå·²ç»åˆ›å»ºäº†ï¼Œé‚£ä¹ˆç›´æŽ¥è¿”å›žå¯¹è±¡å³å¯ï¼Œå¦‚æžœè¿˜æ²¡æœ‰åˆ›å»ºï¼Œé‚£ä¹ˆå…ˆåˆ›å»ºæœ¬ç±»çš„å¯¹è±¡ï¼Œ
ç„¶åŽå†è¿”å›žã€‚&lt;/p>
&lt;p>æŽ¨èä½¿ç”¨ï¼š &lt;strong>é¥¿æ±‰å•ä¾‹è®¾è®¡æ¨¡å¼&lt;/strong>ã€‚ å› ä¸ºæ‡’æ±‰å•ä¾‹è®¾è®¡æ¨¡å¼ä¼šå­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œç›®å‰è¿˜ä¸èƒ½ä¿è¯ä¸€ç±»åœ¨å†…å­˜ä¸­åªæœ‰ä¸€ä¸ªå¯¹è±¡ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="kd">class&lt;/span> &lt;span class="nc">Single&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="kd">static&lt;/span> &lt;span class="n">Single&lt;/span> &lt;span class="n">s&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">Single&lt;/span>&lt;span class="o">();&lt;/span> &lt;span class="c1">// æ¶æ±‰å¼
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="nf">Single&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kd">static&lt;/span> &lt;span class="n">Single&lt;/span> &lt;span class="nf">getInstance&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="kd">class&lt;/span> &lt;span class="nc">Single2&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="kd">static&lt;/span> &lt;span class="n">Single2&lt;/span> &lt;span class="n">s&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="o">;&lt;/span> &lt;span class="c1">// æ‡’æ±‰
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="nf">Single2&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kd">static&lt;/span> &lt;span class="n">Single2&lt;/span> &lt;span class="nf">getInstance&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">s&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">Single2&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>æ‡’æ±‰å•ä¾‹è®¾è®¡æ¨¡å¼çº¿ç¨‹å®‰å…¨æ¨¡å¼è§£å†³æ–¹æ¡ˆ&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-JAVA" data-lang="JAVA">
&lt;span class="c1">//æ‡’æ±‰å•ä¾‹è®¾è®¡æ¨¡å¼
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="kd">class&lt;/span> &lt;span class="nc">Single&lt;/span>&lt;span class="o">{&lt;/span>
&lt;span class="c1">// å£°æ˜Žæœ¬ç±»å¼•ç”¨ç±»åž‹å˜é‡ï¼Œä½†æ˜¯ä¸è¦åˆ›å»ºå¯¹è±¡ã€‚
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="kd">private&lt;/span> &lt;span class="kd">static&lt;/span> &lt;span class="n">Single&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="c1">//ç§æœ‰åŒ–æž„é€ å‡½æ•°
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="kd">private&lt;/span> &lt;span class="nf">Single&lt;/span>&lt;span class="o">(){}&lt;/span>
&lt;span class="c1">// å£°æ˜Žä¸€ä¸ªå…¬å…±é™æ€çš„æ–¹æ³•èŽ·å–æœ¬ç±»çš„å¯¹è±¡
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="kd">public&lt;/span> &lt;span class="kd">static&lt;/span> &lt;span class="n">Single&lt;/span> &lt;span class="nf">getInstance&lt;/span>&lt;span class="o">(){&lt;/span>
&lt;span class="k">if&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="o">==&lt;/span>&lt;span class="kc">null&lt;/span>&lt;span class="o">){&lt;/span>
&lt;span class="kd">synchronized&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;é”&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="k">if&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="o">==&lt;/span>&lt;span class="kc">null&lt;/span>&lt;span class="o">){&lt;/span>
&lt;span class="n">s&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">Single&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>å­¦ä¹ ç¬”è®°ï¼ˆ3ï¼‰-æŒ‡ä»¤ï¼ˆDirective)</title><link>https://blog.itning.top/post/2018/05/02/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03-%E6%8C%87%E4%BB%A4directive/</link><pubDate>Wed, 02 May 2018 18:09:14 +0800</pubDate><guid>https://blog.itning.top/post/2018/05/02/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03-%E6%8C%87%E4%BB%A4directive/</guid><description>&lt;h2 id="æŒ‡ä»¤directive">æŒ‡ä»¤ï¼ˆDirectiveï¼‰&lt;/h2>
&lt;blockquote>
&lt;p>AngularJS æœ‰ä¸€å¥—å®Œæ•´çš„ã€å¯æ‰©å±•çš„ã€ç”¨æ¥å¸®åŠ© Web åº”ç”¨å¼€å‘çš„æŒ‡ä»¤é›†
åœ¨ DOM ç¼–è¯‘æœŸé—´ï¼Œå’Œ HTML å…³è”ç€çš„æŒ‡ä»¤ä¼šè¢«æ£€æµ‹åˆ°ï¼Œå¹¶ä¸”è¢«æ‰§è¡Œ
åœ¨ AngularJS ä¸­å°†å‰ç¼€ä¸º ng- è¿™ç§å±žæ€§ç§°ä¹‹ä¸ºæŒ‡ä»¤ï¼Œå…¶ä½œç”¨å°±æ˜¯ä¸º DOM å…ƒç´ è°ƒç”¨æ–¹æ³•ã€å®šä¹‰è¡Œä¸ºç»‘å®šæ•°æ®ç­‰
ç®€å•è¯´ï¼šå½“ä¸€ä¸ª Angular åº”ç”¨å¯åŠ¨ï¼ŒAngular å°±ä¼šéåŽ† DOM æ ‘æ¥è§£æž HTMLï¼Œæ ¹æ®æŒ‡ä»¤ä¸åŒï¼Œå®Œæˆä¸åŒæ“ä½œ
HTML5 å…è®¸æ‰©å±•çš„ï¼ˆè‡ªåˆ¶çš„ï¼‰å±žæ€§ï¼Œä»¥ data- å¼€å¤´ã€‚
AngularJS å±žæ€§ä»¥ ng- å¼€å¤´ï¼Œä½†æ˜¯å¯ä»¥ä½¿ç”¨ data-ng- æ¥è®©ç½‘é¡µå¯¹ HTML5 æœ‰æ•ˆã€‚&lt;/p>
&lt;/blockquote>
&lt;p>&lt;a href="http://www.angularjs.net.cn/api/ng/directive/">æŒ‡ä»¤APIæ–‡æ¡£&amp;raquo;&amp;gt;&lt;/a>&lt;/p>
&lt;h3 id="ng-app">ng-app&lt;/h3>
&lt;ol>
&lt;li>ng-app æŒ‡ä»¤ç”¨äºŽ&lt;strong>å‘Šè¯‰ AngularJS åº”ç”¨å½“å‰è¿™ä¸ªå…ƒç´ æ˜¯æ ¹å…ƒç´ ã€‚&lt;/strong>&lt;/li>
&lt;li>æ‰€æœ‰ AngularJS åº”ç”¨éƒ½&lt;strong>å¿…é¡»è¦ä¸€ä¸ªæ ¹å…ƒç´ &lt;/strong>ã€‚&lt;/li>
&lt;li>HTMLæ–‡æ¡£ä¸­&lt;strong>åªå…è®¸æœ‰ä¸€ä¸ª ng-app æŒ‡ä»¤&lt;/strong>ï¼Œå¦‚æœ‰å¤šä¸ª ng-app æŒ‡ä»¤ï¼Œåˆ™&lt;strong>åªæœ‰ç¬¬ä¸€ä¸ªä¼šè¢«ä½¿ç”¨&lt;/strong>ã€‚&lt;/li>
&lt;li>å¸¸æ”¾åœ¨htmlæ ‡ç­¾ä¸Š&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">&amp;lt;!DOCTYPE html&amp;gt;
&amp;lt;html lang=&amp;#34;zh-CN&amp;#34; ng-app=&amp;#34;MyApp&amp;#34;&amp;gt; &amp;lt;!--å¸¸æ”¾äºŽæ­¤--&amp;gt;
&amp;lt;head&amp;gt;
&amp;lt;meta charset=&amp;#34;UTF-8&amp;#34;&amp;gt;
&amp;lt;title&amp;gt;ng-app æŒ‡ä»¤&amp;lt;/title&amp;gt;
&amp;lt;/head&amp;gt;
&amp;lt;body&amp;gt;
&amp;lt;script&amp;gt;
var myp = angular.module(&amp;#34;MyApp&amp;#34;, []);
myp.controller(&amp;#39;HelloController&amp;#39;, [&amp;#39;$scope&amp;#39;,function($scope) {
$scope.p = {name: &amp;#39;MyName&amp;#39;};
}
]);
&amp;lt;/script&amp;gt;
&amp;lt;/body&amp;gt;
&amp;lt;/html&amp;gt;
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="ng-repeat">ng-repeat&lt;/h3>
&lt;ol>
&lt;li>ng-repeatæŒ‡ä»¤ç”¨æ¥ç¼–è¯‘ä¸€ä¸ªæ•°ç»„é‡å¤åˆ›å»ºå½“å‰å…ƒç´ &lt;/li>
&lt;li>&lt;strong>å…ƒç´ å¦‚æžœç›¸åŒå¯ä»¥ä½¿ç”¨ &lt;em>item in items track by $index&lt;/em>&lt;/strong>&lt;/li>
&lt;li>å¾ªçŽ¯ä¸­çš„ç‰¹æ®Šå˜é‡ï¼ŒåŒ…æ‹¬ï¼š&lt;/li>
&lt;/ol>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th align="left">å˜é‡&lt;/th>
&lt;th align="center">ç±»åž‹&lt;/th>
&lt;th align="left">æè¿°&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td align="left">$index&lt;/td>
&lt;td align="center">number&lt;/td>
&lt;td align="left">å½“å‰ç´¢å¼•ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="left">$first&lt;/td>
&lt;td align="center">boolean&lt;/td>
&lt;td align="left">å½“å¾ªçŽ¯çš„å¯¹è±¡å­˜åœ¨ç¬¬ä¸€é¡¹æ—¶ä¸ºtrueã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="left">$middle&lt;/td>
&lt;td align="center">boolean&lt;/td>
&lt;td align="left">å½“å¾ªçŽ¯çš„å¯¹è±¡å­˜åœ¨ä¸­é—´é¡¹æ—¶ä¸ºtrueã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="left">$last&lt;/td>
&lt;td align="center">boolean&lt;/td>
&lt;td align="left">å½“å¾ªçŽ¯å¯¹è±¡å­˜åœ¨æœ€åŽä¸€é¡¹æ—¶ä¸ºtrueã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="left">$even&lt;/td>
&lt;td align="center">boolean&lt;/td>
&lt;td align="left">å½“å‰ç´¢å¼•æ˜¯å¶æ•°åˆ™ä¸ºtrueï¼Œå¦åˆ™ä¸ºfalse&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="left">$odd&lt;/td>
&lt;td align="center">boolean&lt;/td>
&lt;td align="left">å½“å‰ç´¢å¼•æ˜¯å¥‡æ•°åˆ™ä¸ºtrueï¼Œå¦åˆ™ä¸ºfalse&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">body&lt;/span> &lt;span class="na">ng-app&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;myApp&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">ul&lt;/span> &lt;span class="na">ng-controller&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;ListController&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="c">&amp;lt;!-- ng-repeat ä¼šéåŽ†æ•°ç»„ä¸­æ¯ä¸€ä¸ªå…ƒç´ ï¼Œåˆ†åˆ«åˆ›å»ºli --&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span> &lt;span class="na">ng-repeat&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;item in items&amp;#34;&lt;/span> &lt;span class="na">data-id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;{{item.id}}&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">p&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>{{item.name}}&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">p&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">script&lt;/span> &lt;span class="na">src&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;../angular/angular.js&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;/&lt;/span>&lt;span class="nt">script&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">script&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="nx">angular&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">module&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;myApp&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">[])&lt;/span>
&lt;span class="p">.&lt;/span>&lt;span class="nx">controller&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;ListController&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;$scope&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">$scope&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">$scope&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">items&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="p">[];&lt;/span>
&lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kd">var&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">$scope&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">items&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">$scope&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">items&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">length&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">id&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">name&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;id:&amp;#39;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="p">};&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}]);&lt;/span>
&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">script&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">body&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="ng-bind">ng-bind&lt;/h3>
&lt;p>ng-bindæŒ‡ä»¤åœ¨ç»‘å®šçš„å€¼åŒ…å«HTMLæ—¶&lt;strong>ä¼šè½¬ä¹‰&lt;/strong>ï¼Œä¸ºäº†å®‰å…¨ï¼ˆè·¨ç«™è„šæœ¬æ”»å‡»ï¼‰&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">&amp;lt;body ng-app ng-init=&amp;#34;username=&amp;#39;&amp;lt;h1&amp;gt;shit&amp;lt;/h1&amp;gt;&amp;#39;&amp;#34;&amp;gt;
&amp;lt;!-- &amp;lt;strong&amp;gt;{{username}}&amp;lt;/strong&amp;gt; --&amp;gt;
&amp;lt;strong ng-bind=&amp;#34;username&amp;#34;&amp;gt;&amp;lt;/strong&amp;gt;
&amp;lt;script src=&amp;#34;../angular/angular.js&amp;#34;&amp;gt;&amp;lt;/script&amp;gt;
&amp;lt;/body&amp;gt;
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="ng-bind-html">ng-bind-html&lt;/h3>
&lt;blockquote>
&lt;p>ng-bind-html æŒ‡ä»¤æ˜¯é€šä¸€ä¸ªå®‰å…¨çš„æ–¹å¼å°†å†…å®¹ç»‘å®šåˆ° HTML å…ƒç´ ä¸Šã€‚
å½“ä½ æƒ³è®© AngularJS åœ¨ä½ çš„åº”ç”¨ä¸­å†™å…¥ HTMLï¼Œä½ å°±éœ€è¦åŽ»æ£€æµ‹ä¸€äº›å±é™©ä»£ç ã€‚é€šè¿‡åœ¨åº”ç”¨ä¸­å¼•å…¥ &amp;ldquo;angular-santize.js&amp;rdquo; æ¨¡å—ï¼Œä½¿ç”¨ ngSanitize å‡½æ•°æ¥æ£€æµ‹ä»£ç çš„å®‰å…¨æ€§ã€‚&lt;/p>
&lt;/blockquote>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">&amp;lt;body ng-app=&amp;#34;myApp&amp;#34; ng-init=&amp;#34;username=&amp;#39;&amp;lt;h1&amp;gt;shit&amp;lt;/h1&amp;gt;&amp;#39;&amp;#34;&amp;gt;
&amp;lt;!-- &amp;lt;strong&amp;gt;{{username}}&amp;lt;/strong&amp;gt; --&amp;gt;
&amp;lt;!-- ng-bindæŒ‡ä»¤åœ¨ç»‘å®šçš„å€¼åŒ…å«HTMLæ—¶ä¼šè½¬ä¹‰ï¼Œä¸ºäº†å®‰å…¨ï¼ˆè·¨ç«™è„šæœ¬æ”»å‡»ï¼‰ --&amp;gt;
&amp;lt;strong ng-bind-html=&amp;#34;username&amp;#34;&amp;gt;&amp;lt;/strong&amp;gt;
&amp;lt;script src=&amp;#34;../angular/angular.js&amp;#34;&amp;gt;&amp;lt;/script&amp;gt;
&amp;lt;script src=&amp;#34;../angular-sanitize/angular-sanitize.js&amp;#34;&amp;gt;&amp;lt;/script&amp;gt;
&amp;lt;script&amp;gt;
// ä½¿ç”¨è‡ªå®šä¹‰çš„æ¨¡å—æ‰å¯ä»¥ä¾èµ–åˆ«çš„åŒ…é‡Œé¢å®šä¹‰æ¨¡å—ï¼Œangularå®šä¹‰çš„é»˜è®¤æ¨¡å—æ²¡æœ‰ä¾èµ–ä»»ä½•
angular.module(&amp;#39;myApp&amp;#39;, [&amp;#39;ngSanitize&amp;#39;]);
&amp;lt;/script&amp;gt;
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="ng-class">ng-class&lt;/h3>
&lt;blockquote>
&lt;p>ng-class æŒ‡ä»¤ç”¨äºŽç»™ HTML å…ƒç´ åŠ¨æ€ç»‘å®šä¸€ä¸ªæˆ–å¤šä¸ª CSS ç±»ã€‚
ng-class æŒ‡ä»¤çš„å€¼å¯ä»¥æ˜¯å­—ç¬¦ä¸²ï¼Œå¯¹è±¡ï¼Œæˆ–ä¸€ä¸ªæ•°ç»„ã€‚
å¦‚æžœæ˜¯å­—ç¬¦ä¸²ï¼Œå¤šä¸ªç±»åä½¿ç”¨ç©ºæ ¼åˆ†éš”ã€‚
å¦‚æžœæ˜¯å¯¹è±¡ï¼Œéœ€è¦ä½¿ç”¨ key-value å¯¹ï¼Œkey æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œvalue ä¸ºä½ æƒ³è¦æ·»åŠ çš„ç±»åã€‚åªæœ‰åœ¨ key ä¸º true æ—¶ç±»æ‰ä¼šè¢«æ·»åŠ ã€‚
å¦‚æžœæ˜¯æ•°ç»„ï¼Œå¯ä»¥ç”±å­—ç¬¦ä¸²æˆ–å¯¹è±¡ç»„åˆç»„æˆï¼Œæ•°ç»„çš„å…ƒç´ å¯ä»¥æ˜¯å­—ç¬¦ä¸²æˆ–å¯¹è±¡ã€‚&lt;/p>
&lt;/blockquote>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">&amp;lt;ul class=&amp;#34;messages&amp;#34;&amp;gt;
&amp;lt;li ng-repeat=&amp;#34;item in messages track by $index&amp;#34; ng-class=&amp;#34;{red:item.read}&amp;#34;&amp;gt;
{{item.content}}
&amp;lt;/li&amp;gt;
&amp;lt;/ul&amp;gt;
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="ng-showng-hide">ng-show/ng-hide&lt;/h3>
&lt;ol>
&lt;li>ng-show æŒ‡ä»¤åœ¨è¡¨è¾¾å¼ä¸º true æ—¶æ˜¾ç¤ºæŒ‡å®šçš„ HTML å…ƒç´ ï¼Œå¦åˆ™éšè—æŒ‡å®šçš„ HTML å…ƒç´ ã€‚&lt;/li>
&lt;li>ng-hide æŒ‡ä»¤åœ¨è¡¨è¾¾å¼ä¸º true æ—¶éšè— HTML å…ƒç´ ã€‚&lt;/li>
&lt;li>ng-hide æ˜¯ AngularJS çš„é¢„å®šä¹‰ç±»ï¼Œè®¾ç½®å…ƒç´ çš„ display ä¸º noneã€‚&lt;/li>
&lt;/ol>
&lt;h3 id="ng-if">ng-if&lt;/h3>
&lt;blockquote>
&lt;p>ng-if æŒ‡ä»¤ç”¨äºŽåœ¨è¡¨è¾¾å¼ä¸º false æ—¶ç§»é™¤ HTML å…ƒç´ ã€‚
å¦‚æžœ if è¯­å¥æ‰§è¡Œçš„ç»“æžœä¸º trueï¼Œä¼šæ·»åŠ ç§»é™¤å…ƒç´ ï¼Œå¹¶æ˜¾ç¤ºã€‚
ng-if æŒ‡ä»¤ä¸åŒäºŽ ng-hideï¼Œ ng-hide éšè—å…ƒç´ ï¼Œè€Œ ng-if æ˜¯ä»Ž DOM ä¸­ç§»é™¤å…ƒç´ ã€‚&lt;/p>
&lt;/blockquote>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">ä¿ç•™ HTML:
&amp;lt;input type=&amp;#34;checkbox&amp;#34; ng-model=&amp;#34;myVar&amp;#34; ng-init=&amp;#34;myVar = true&amp;#34;&amp;gt;
&amp;lt;div ng-if=&amp;#34;myVar&amp;#34;&amp;gt;
&amp;lt;h1&amp;gt;Welcome&amp;lt;/h1&amp;gt;
&amp;lt;p&amp;gt;Welcome to my home.&amp;lt;/p&amp;gt;
&amp;lt;hr&amp;gt;
&amp;lt;/div&amp;gt;
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;a href="http://www.angularjs.net.cn/demo/117" title="AngularJsåœ¨çº¿æµ‹è¯•">å°è¯•ä¸€ä¸‹&amp;raquo;&amp;gt;&lt;/a>&lt;/p>
&lt;h3 id="ng-hrefng-src">ng-href/ng-src&lt;/h3>
&lt;blockquote>
&lt;p>ng-href æŒ‡ä»¤è¦†ç›–äº†åŽŸç”Ÿçš„ &amp;lt;a&amp;gt; å…ƒç´  href å±žæ€§ã€‚
å¦‚æžœåœ¨ href çš„å€¼ä¸­æœ‰ AngularJS ä»£ç ï¼Œåˆ™éœ€è¦ä½¿ç”¨ ng-href è€Œä¸æ˜¯ hrefã€‚
ng-href æŒ‡ä»¤ç¡®ä¿äº†é“¾æŽ¥æ˜¯æ­£å¸¸çš„ï¼Œå³ä½¿åœ¨ AngularJS æ‰§è¡Œä»£ç å‰ç‚¹å‡»é“¾æŽ¥ã€‚&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>ng-src æŒ‡ä»¤è¦†ç›–äº† &amp;lt;img&amp;gt; å…ƒç´ çš„ src å±žæ€§ã€‚
å¦‚æžœä½ ä½¿ç”¨äº† AngularJS ä»£ç è®¾ç½®å›¾ç‰‡åœ°å€ï¼Œè¯·ä½¿ç”¨ ng-src æŒ‡ä»¤æ›¿ä»£ src å±žæ€§ã€‚
ng-src æŒ‡ä»¤ç¡®ä¿çš„ AngularJS ä»£ç æ‰§è¡Œå‰ä¸æ˜¾ç¤ºå›¾ç‰‡ã€‚&lt;/p>
&lt;/blockquote>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">&amp;lt;img ng-src=&amp;#34;{{imgUrl}}&amp;#34; alt=&amp;#34;&amp;#34;&amp;gt;
&amp;lt;a ng-href=&amp;#34;{{imgUrl}}&amp;#34;&amp;gt;è·³è½¬åˆ°å›¾ç‰‡&amp;lt;/a&amp;gt;
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>Docker Dockerfile åˆ›å»ºé•œåƒ</title><link>https://blog.itning.top/post/2018/03/31/docker-dockerfile-%E5%88%9B%E5%BB%BA%E9%95%9C%E5%83%8F/</link><pubDate>Sat, 31 Mar 2018 18:53:17 +0800</pubDate><guid>https://blog.itning.top/post/2018/03/31/docker-dockerfile-%E5%88%9B%E5%BB%BA%E9%95%9C%E5%83%8F/</guid><description>&lt;blockquote>
&lt;p>ä»Žåˆšæ‰çš„ docker commit çš„å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥äº†è§£åˆ°ï¼Œé•œåƒçš„å®šåˆ¶å®žé™…ä¸Šå°±æ˜¯å®šåˆ¶æ¯ä¸€å±‚æ‰€æ·»åŠ çš„é…ç½®ã€æ–‡ä»¶ã€‚å¦‚æžœæˆ‘ä»¬å¯ä»¥æŠŠæ¯ä¸€å±‚ä¿®æ”¹ã€å®‰è£…ã€æž„å»ºã€æ“ä½œçš„å‘½ä»¤éƒ½å†™å…¥ä¸€ä¸ªè„šæœ¬ï¼Œç”¨è¿™ä¸ªè„šæœ¬æ¥æž„å»ºã€å®šåˆ¶é•œåƒï¼Œé‚£ä¹ˆä¹‹å‰æåŠçš„æ— æ³•é‡å¤çš„é—®é¢˜ã€é•œåƒæž„å»ºé€æ˜Žæ€§çš„é—®é¢˜ã€ä½“ç§¯çš„é—®é¢˜å°±éƒ½ä¼šè§£å†³ã€‚è¿™ä¸ªè„šæœ¬å°±æ˜¯ Dockerfileã€‚&lt;/p>
&lt;/blockquote>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback"># ç¬¬ä¸€è¡Œå¿…é¡»æŒ‡å®šåŸºäºŽçš„åŸºç¡€é•œåƒ
FROM centos
#ç»´æŠ¤è€…ä¿¡æ¯
MAINTAINER itning itning@itning.top
#æ³¨æ„åŽ‹ç¼©æ–‡ä»¶è¦å’ŒDockerfileæ–‡ä»¶åœ¨åŒä¸€æ–‡ä»¶å¤¹ä¸‹
#ADDæŒ‡ä»¤è‡ªåŠ¨å°†åŽ‹ç¼©æ–‡ä»¶è§£åŽ‹ä¸ºç›®å½•
ADD jdk-8u152-linux-x64.tar.gz /usr/local
ADD apache-tomcat-9.0.6.tar.gz /usr/local
#è®¾ç½®çŽ¯å¢ƒå˜é‡
ENV PATH /usr/local/jdk-8u152-linux-x64/bin:$PATH
#è¿è¡ŒæŒ‡ä»¤
RUN /usr/local/apache-tomcat-9.0.6/bin/startup.sh
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blog.itning.top/images/2018-05-03-Docker-Dockerfile-%E5%88%9B%E5%BB%BA%E9%95%9C%E5%83%8F/a.jpg" alt="a">
&lt;img src="https://blog.itning.top/images/2018-05-03-Docker-Dockerfile-%E5%88%9B%E5%BB%BA%E9%95%9C%E5%83%8F/b.jpg" alt="b">
&lt;img src="https://blog.itning.top/images/2018-05-03-Docker-Dockerfile-%E5%88%9B%E5%BB%BA%E9%95%9C%E5%83%8F/c.jpg" alt="c">
&lt;img src="https://blog.itning.top/images/2018-05-03-Docker-Dockerfile-%E5%88%9B%E5%BB%BA%E9%95%9C%E5%83%8F/d.jpg" alt="d">&lt;/p></description></item><item><title>Docker ç®€ä»‹ å®‰è£… å¯åŠ¨ å¸¸ç”¨å‘½ä»¤</title><link>https://blog.itning.top/post/2018/03/30/docker-%E7%AE%80%E4%BB%8B-%E5%AE%89%E8%A3%85-%E5%90%AF%E5%8A%A8-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</link><pubDate>Fri, 30 Mar 2018 21:04:43 +0800</pubDate><guid>https://blog.itning.top/post/2018/03/30/docker-%E7%AE%80%E4%BB%8B-%E5%AE%89%E8%A3%85-%E5%90%AF%E5%8A%A8-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</guid><description>&lt;h2 id="ç®€ä»‹">ç®€ä»‹&lt;/h2>
&lt;blockquote>
&lt;p>Dockeræ˜¯ä¸€ä¸ªå¼€æ”¾æºä»£ç è½¯ä»¶é¡¹ç›®ï¼Œè®©åº”ç”¨ç¨‹åºå¸ƒç½²åœ¨è½¯ä»¶å®¹å™¨ä¸‹çš„å·¥ä½œå¯ä»¥è‡ªåŠ¨åŒ–è¿›è¡Œï¼Œå€Ÿæ­¤åœ¨Linuxæ“ä½œç³»ç»Ÿä¸Šï¼Œæä¾›ä¸€ä¸ªé¢å¤–çš„è½¯ä»¶æŠ½è±¡å±‚ï¼Œä»¥åŠæ“ä½œç³»ç»Ÿå±‚è™šæ‹ŸåŒ–çš„è‡ªåŠ¨ç®¡ç†æœºåˆ¶[1]ã€‚Dockeråˆ©ç”¨Linuxæ ¸å¿ƒä¸­çš„èµ„æºåˆ†è„±æœºåˆ¶ï¼Œä¾‹å¦‚cgroupsï¼Œä»¥åŠLinuxæ ¸å¿ƒåå­—ç©ºé—´ï¼ˆname spaceï¼‰ï¼Œæ¥åˆ›å»ºç‹¬ç«‹çš„è½¯ä»¶å®¹å™¨ï¼ˆcontainersï¼‰ã€‚è¿™å¯ä»¥åœ¨å•ä¸€Linuxå®žä½“ä¸‹è¿ä½œï¼Œé¿å…å¼•å¯¼ä¸€ä¸ªè™šæ‹Ÿæœºé€ æˆçš„é¢å¤–è´Ÿæ‹…[2]ã€‚Linuxæ ¸å¿ƒå¯¹åå­—ç©ºé—´çš„æ”¯æŒå®Œå…¨éš”ç¦»äº†å·¥ä½œçŽ¯å¢ƒä¸­åº”ç”¨ç¨‹åºçš„è§†é‡Žï¼ŒåŒ…æ‹¬è¿›ç¨‹æ ‘ã€ç½‘ç»œã€ç”¨æˆ·IDä¸ŽæŒ‚è½½æ–‡ä»¶ç³»ç»Ÿï¼Œè€Œæ ¸å¿ƒçš„cgroupæä¾›èµ„æºéš”ç¦»ï¼ŒåŒ…æ‹¬CPUã€å†…å­˜ã€block I/Oä¸Žç½‘ç»œã€‚ä»Ž0.9ç‰ˆæœ¬èµ·ï¼ŒDockersåœ¨ä½¿ç”¨æŠ½è±¡è™šæ‹Ÿæ˜¯ç»ç”±libvirtçš„LXCä¸Žsystemd - nspawnæä¾›ç•Œé¢çš„åŸºç¡€ä¸Šï¼Œå¼€å§‹åŒ…æ‹¬libcontaineråº“åšä¸ºä»¥è‡ªå·±çš„æ–¹å¼å¼€å§‹ç›´æŽ¥ä½¿ç”¨ç”±Linuxæ ¸å¿ƒæä¾›çš„è™šæ‹ŸåŒ–çš„è®¾æ–½ï¼Œä¾æ®è¡Œä¸šåˆ†æžå…¬å¸â€œ451ç ”ç©¶â€ï¼šâ€œDockersæ˜¯æœ‰èƒ½åŠ›æ‰“åŒ…åº”ç”¨ç¨‹åºåŠå…¶è™šæ‹Ÿå®¹å™¨ï¼Œå¯ä»¥åœ¨ä»»ä½•LinuxæœåŠ¡å™¨ä¸Šè¿è¡Œçš„ä¾èµ–æ€§å·¥å…·ï¼Œè¿™æœ‰åŠ©äºŽå®žçŽ°çµæ´»æ€§å’Œä¾¿æºæ€§ï¼Œåº”ç”¨ç¨‹åºåœ¨ä»»ä½•åœ°æ–¹éƒ½å¯ä»¥è¿è¡Œï¼Œæ— è®ºæ˜¯å…¬æœ‰äº‘ã€ç§æœ‰äº‘ã€å•æœºç­‰ã€‚â€&lt;/p>
&lt;/blockquote>
&lt;h2 id="å®‰è£…centosä¸­">å®‰è£…(Centosä¸­)&lt;/h2>
&lt;p>&lt;strong>åˆ‡æ¢åˆ°root&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">yum -y install docker
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="å¯åŠ¨">å¯åŠ¨&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">systemctl enable docker # å¼€æœºè‡ªåŠ¨å¯åŠ¨docker
systemctl start docker # å¯åŠ¨docker
systemctl restart docker # é‡å¯dokcer
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="å¸¸ç”¨å‘½ä»¤">å¸¸ç”¨å‘½ä»¤&lt;/h2>
&lt;h3 id="1-é•œåƒimages">1. é•œåƒ(IMAGES)&lt;/h3>
&lt;h4 id="11-èŽ·å–é•œåƒ">1.1 èŽ·å–é•œåƒ&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">docker pull NAME[:TAG]
ä¾‹:
docker pull centos:latest
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="12-æŸ¥çœ‹é•œåƒä¿¡æ¯">1.2 æŸ¥çœ‹é•œåƒä¿¡æ¯&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">docker images # åˆ—å‡ºæœ¬æœºä¸Šæ‰€æœ‰æ˜ åƒ
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="13-æœç´¢é•œåƒ">1.3 æœç´¢é•œåƒ&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">docker search ImageName
ä¾‹:
docker search centos
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="14-åˆ é™¤é•œåƒ">1.4 åˆ é™¤é•œåƒ&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">docker rmi æ ‡ç­¾/ID
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="15-ä¿å­˜é•œåƒ">1.5 ä¿å­˜é•œåƒ&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">docker save -o xxx.tar ImageName
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="16-è¯»å–é•œåƒ">1.6 è¯»å–é•œåƒ&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">docker load --input xxx.tar
docker load &amp;lt; xxx.tar
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="17-ä¸Šä¼ é•œåƒ">1.7 ä¸Šä¼ é•œåƒ&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">docker push ImageName
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="2-å®¹å™¨container">2. å®¹å™¨(CONTAINER)&lt;/h3>
&lt;blockquote>
&lt;p>å‚æ•°è¯´æ˜Ž:
-t è®©Dockeråˆ†é…ä¸€ä¸ªä¼ªç»ˆç«¯å¹¶ç»‘å®šåˆ°å®¹å™¨çš„æ ‡å‡†è¾“å…¥ä¸Š
-i è®©å®¹å™¨çš„æ ‡å‡†è¾“å…¥ä¿æŒæ‰“å¼€&lt;/p>
&lt;/blockquote>
&lt;h4 id="21-åˆ›å»ºå®¹å™¨">2.1 åˆ›å»ºå®¹å™¨&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">docker create -it centos #åˆ›å»ºä¸€ä¸ªåŸºäºŽcentosé•œåƒçš„å®¹å™¨
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="22-å¯åŠ¨å®¹å™¨">2.2 å¯åŠ¨å®¹å™¨&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">docker start CONTAINERID
docker restart CONTAINERID #é‡å¯å®¹å™¨
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="23-æ–°å»ºå¹¶å¯åŠ¨å®¹å™¨">2.3 æ–°å»ºå¹¶å¯åŠ¨å®¹å™¨&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">docker run -it centos
docker run -it --name mycentos centos #æŒ‡å®šå®¹å™¨åç§°ä¸ºmycentos
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="24-å®ˆæŠ¤æ€è¿è¡Œå®¹å™¨">2.4 å®ˆæŠ¤æ€è¿è¡Œå®¹å™¨&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">docker run -d tomcat #åŽå°è¿è¡Œtomcaté•œåƒçš„å®¹å™¨
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="25-åœæ­¢å®¹å™¨">2.5 åœæ­¢å®¹å™¨&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">docker stop CONTAINERID
docker kill CONTAINERID #å¼ºè¡Œåœæ­¢
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="26-åˆ é™¤å®¹å™¨">2.6 åˆ é™¤å®¹å™¨&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">docker rm CONTAINERID
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="27-è¿›å…¥å®¹å™¨">2.7 è¿›å…¥å®¹å™¨&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">docker attach CONTAINER_NAME #é€šè¿‡å®¹å™¨åæ¥è¿›å…¥å®¹å™¨ ä½¿ç”¨Ctrl+P Ctrl+Qæ¥é€€å‡º
docker exec -ti CONTAINERID /bin/bash #æ ¹æ®å®¹å™¨IDè¿›å…¥å®¹å™¨å¹¶å¯åŠ¨bash
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½¿ç”¨ NSENTER è¿›å…¥å®¹å™¨ è„šæœ¬:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="cp">#!/bin/bash
&lt;/span>&lt;span class="cp">&lt;/span>&lt;span class="nv">CNAME&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">$1&lt;/span>
&lt;span class="nv">CPID&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>docker inspect --format &lt;span class="s2">&amp;#34;{{.State.Pid}}&amp;#34;&lt;/span> &lt;span class="nv">$CNAME&lt;/span>&lt;span class="k">)&lt;/span>
nsenter --target &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$CPID&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> --mount --uts --ipc --net --pid
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½¿ç”¨:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">./in.sh CONTAINER_NAME/ID
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="28-æŸ¥çœ‹å®¹å™¨">2.8 æŸ¥çœ‹å®¹å™¨&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">docker ps #åˆ—å‡ºæ­£åœ¨è¿è¡Œçš„å®¹å™¨
docker ps -a #åˆ—å‡ºæ‰€æœ‰å®¹å™¨
docker ps -l #åˆ—å‡ºæœ€æ–°åˆ›å»ºçš„å®¹å™¨
docker inspect CONTAINERID #åˆ—å‡ºå®¹å™¨çš„è¯¦ç»†ä¿¡æ¯(JSONæ ¼å¼)
å…¶ä¸­ inspect å¯ä»¥ä½¿ç”¨ -format å‚æ•°æŒ‡å®šæ˜¾ç¤ºJSONä¸­çš„æŸé¡¹ä¿¡æ¯ ä¾‹:
docker inspect -f &amp;#34;{{.State.Pid}}&amp;#34; c4a2097de5c1 #èŽ·å–å®¹å™¨PID
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="29-è®¾ç½®å®¹å™¨åç§°">2.9 è®¾ç½®å®¹å™¨åç§°&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">docker run -it --name mytomcat tomcat
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="3-ç½‘ç»œ">3. ç½‘ç»œ&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">docker run -d -P --name mytomcat tomcat
ä½¿ç”¨ -P (å¤§å†™) å‚æ•°æ—¶,ä¼šå°†å®¹å™¨å†…ç«¯å£æ˜ å°„åˆ°ä¸»æœºçš„éšæœºç«¯å£ä¸Š
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">docker run -d -p 80:8080 --name mytomcat tomcat
ä½¿ç”¨ -p (å°å†™) å‚æ•°æ—¶,å†’å·(:)å·¦è¾¹ä¸ºä¸»æœºç«¯å£,å³è¾¹ä¸ºå®¹å™¨ç«¯å£ å³
å°†å®¹å™¨çš„8080ç«¯å£æ˜ å°„åˆ°ä¸»æœºçš„80ç«¯å£ä¸Š
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="4-æ•°æ®å·">4. æ•°æ®å·&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">docker run -d -P -v /home/ning/data:/data --name mytomcat tomcat
å°† /home/ning/dataæ˜ å°„åˆ°å®¹å™¨ /data ä¸Š
docker run -d -P -v /home/ning/data:/data:ro --name mytomcat tomcat
åŠ ä¸Š :ro å‚æ•° ä½¿å®¹å™¨/data ç›®å½•ä¸ºåªè¯»
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">docker run -d -P -volumes-from mytomcat --name tom1 tomcat
tom1å®¹å™¨æˆ–mytomcatå®¹å™¨ä»»ä½•ä¸€æ–¹å¯¹/dataç›®å½•çš„ä¿®æ”¹éƒ½ä¼šäº’ç›¸çœ‹åˆ°
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="5-æ—¥å¿—logs">5. æ—¥å¿—(LOGS)&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">docker logs [-f][-t][--tail] CONTAINER_NAME
-f --follows=true | false é»˜è®¤false æ˜¯å¦ä¸€ç›´è·Ÿè¸ªæ—¥å¿—å˜åŒ–å¹¶è¿”å›žç»“æžœ
-t --timestamps=true | false é»˜è®¤false æ˜¯å¦åœ¨è¿”å›žçš„ç»“æžœä¸ŠåŠ ä¸Šæ—¶é—´æˆ³
--tail=&amp;#34;all&amp;#34; è¿”å›žç»“å°¾å¤„å¤šå°‘æ•°é‡çš„æ—¥å¿—;ä¸æŒ‡å®šé»˜è®¤è¿”å›žæ‰€æœ‰æ—¥å¿—
ä¾‹: --tail 10 #åªæ˜¾ç¤ºæœ€æ–°çš„10æ¡æ—¥å¿—
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="6-æŸ¥çœ‹å®¹å™¨è¿›ç¨‹">6. æŸ¥çœ‹å®¹å™¨è¿›ç¨‹&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">docker top CONTAINER_NAME/ID
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>Web.xml</title><link>https://blog.itning.top/post/2017/04/21/web.xml/</link><pubDate>Fri, 21 Apr 2017 13:10:59 +0800</pubDate><guid>https://blog.itning.top/post/2017/04/21/web.xml/</guid><description>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">&amp;lt;!DOCTYPE web-app PUBLIC
&amp;#34;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&amp;#34;
&amp;#34;http://java.sun.com/dtd/web-app_2_3.dtd&amp;#34; &amp;gt;
&amp;lt;web-app&amp;gt;
&amp;lt;!-- spring --&amp;gt;
&amp;lt;context-param&amp;gt;
&amp;lt;param-name&amp;gt;contextConfigLocation&amp;lt;/param-name&amp;gt;
&amp;lt;param-value&amp;gt;classpath:applicationContext.xml&amp;lt;/param-value&amp;gt;
&amp;lt;/context-param&amp;gt;
&amp;lt;!-- ç¼–ç è¿‡æ»¤å™¨ --&amp;gt;
&amp;lt;filter&amp;gt;
&amp;lt;filter-name&amp;gt;CharacterEncodingFilter&amp;lt;/filter-name&amp;gt;
&amp;lt;filter-class&amp;gt;
org.springframework.web.filter.CharacterEncodingFilter
&amp;lt;/filter-class&amp;gt;
&amp;lt;init-param&amp;gt;
&amp;lt;param-name&amp;gt;encoding&amp;lt;/param-name&amp;gt;
&amp;lt;param-value&amp;gt;UTF-8&amp;lt;/param-value&amp;gt;
&amp;lt;/init-param&amp;gt;
&amp;lt;/filter&amp;gt;
&amp;lt;filter-mapping&amp;gt;
&amp;lt;filter-name&amp;gt;CharacterEncodingFilter&amp;lt;/filter-name&amp;gt;
&amp;lt;url-pattern&amp;gt;/*&amp;lt;/url-pattern&amp;gt;
&amp;lt;/filter-mapping&amp;gt;
&amp;lt;listener&amp;gt;
&amp;lt;listener-class&amp;gt;org.springframework.web.context.ContextLoaderListener&amp;lt;/listener-class&amp;gt;
&amp;lt;/listener&amp;gt;
&amp;lt;servlet&amp;gt;
&amp;lt;servlet-name&amp;gt;DispatcherServlet&amp;lt;/servlet-name&amp;gt;
&amp;lt;servlet-class&amp;gt;org.springframework.web.servlet.DispatcherServlet&amp;lt;/servlet-class&amp;gt;
&amp;lt;init-param&amp;gt;
&amp;lt;param-name&amp;gt;contextConfigLocation&amp;lt;/param-name&amp;gt;
&amp;lt;param-value&amp;gt;classpath:spring-mvc.xml&amp;lt;/param-value&amp;gt;
&amp;lt;/init-param&amp;gt;
&amp;lt;/servlet&amp;gt;
&amp;lt;servlet-mapping&amp;gt;
&amp;lt;servlet-name&amp;gt;DispatcherServlet&amp;lt;/servlet-name&amp;gt;
&amp;lt;url-pattern&amp;gt;/&amp;lt;/url-pattern&amp;gt;
&amp;lt;/servlet-mapping&amp;gt;
&amp;lt;welcome-file-list&amp;gt;
&amp;lt;welcome-file&amp;gt;index.jsp&amp;lt;/welcome-file&amp;gt;
&amp;lt;/welcome-file-list&amp;gt;
&amp;lt;/web-app&amp;gt;
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>åŸºäºŽspringframeworkä¸­HandlerExceptionResolveræŽ¥å£çš„ç»Ÿä¸€å¼‚å¸¸å¤„ç†</title><link>https://blog.itning.top/post/2017/03/29/%E5%9F%BA%E4%BA%8Espringframework%E4%B8%ADhandlerexceptionresolver%E6%8E%A5%E5%8F%A3%E7%9A%84%E7%BB%9F%E4%B8%80%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/</link><pubDate>Wed, 29 Mar 2017 17:49:49 +0800</pubDate><guid>https://blog.itning.top/post/2017/03/29/%E5%9F%BA%E4%BA%8Espringframework%E4%B8%ADhandlerexceptionresolver%E6%8E%A5%E5%8F%A3%E7%9A%84%E7%BB%9F%E4%B8%80%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/</guid><description>&lt;blockquote>
&lt;p>ç³»ç»Ÿä¸­å¼‚å¸¸ç±»åž‹æœ‰å“ªäº›ï¼Ÿ
åŒ…æ‹¬é¢„æœŸå¯èƒ½å‘ç”Ÿçš„å¼‚å¸¸ã€è¿è¡Œæ—¶å¼‚å¸¸ï¼ˆRuntimeExceptionï¼‰ï¼Œè¿è¡Œæ—¶å¼‚å¸¸ä¸æ˜¯é¢„æœŸä¼šå‘ç”Ÿçš„ã€‚
é’ˆå¯¹é¢„æœŸå¯èƒ½å‘ç”Ÿçš„å¼‚å¸¸ï¼Œåœ¨ä»£ç æ‰‹åŠ¨å¤„ç†å¼‚å¸¸å¯ä»¥try/catchæ•èŽ·ï¼Œå¯ä»¥å‘ä¸ŠæŠ›å‡ºã€‚
é’ˆå¯¹è¿è¡Œæ—¶å¼‚å¸¸ï¼Œåªèƒ½é€šè¿‡è§„èŒƒä»£ç è´¨é‡ã€åœ¨ç³»ç»Ÿæµ‹è¯•æ—¶è¯¦ç»†æµ‹è¯•ç­‰æŽ’é™¤è¿è¡Œæ—¶å¼‚å¸¸ã€‚&lt;/p>
&lt;/blockquote>
&lt;h4 id="1å®šä¹‰å¼‚å¸¸ç±»ç»§æ‰¿exception">1.å®šä¹‰å¼‚å¸¸ç±»ç»§æ‰¿Exception&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">//ç™»å½•å¼‚å¸¸ï¼ˆè´¦å·ä¸å­˜åœ¨ å¯†ç é”™è¯¯..ï¼‰
public class LoginException extends Exception{
private String errorMessage;
public LoginException(String message) {
super(message);
this.errorMessage=message;
}
public String getErrorMessage() {
return errorMessage;
}
public void setErrorMessage(String errorMessage) {
this.errorMessage = errorMessage;
}
}
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="2å¼‚å¸¸å¤„ç†ç»Ÿä¸€å¼‚å¸¸å¤„ç†å™¨å®žçŽ°handlerexceptionresolveræŽ¥å£">2.å¼‚å¸¸å¤„ç†ï¼ˆç»Ÿä¸€å¼‚å¸¸å¤„ç†å™¨å®žçŽ°HandlerExceptionResolveræŽ¥å£ï¼‰&lt;/h4>
&lt;blockquote>
&lt;p>å‰ç«¯æŽ§åˆ¶å™¨DispatcherServletåœ¨è¿›è¡ŒHandlerMappingã€è°ƒç”¨HandlerAdapteræ‰§è¡ŒHandlerè¿‡ç¨‹ä¸­ï¼Œå¦‚æžœé‡åˆ°å¼‚å¸¸ï¼Œè¿›è¡Œå¼‚å¸¸å¤„ç†ã€‚&lt;/p>
&lt;/blockquote>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">public class ExceptionResolver implements HandlerExceptionResolver{
public ModelAndView resolveException(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Object o, Exception e) {
//æ‰“å°å¼‚å¸¸ä¿¡æ¯
e.printStackTrace();
//æ‰€æœ‰å¼‚å¸¸ç±»å£°æ˜Ž
LoginException loginException;
DefaultException defaultException;
//
String errorMessage;
if(e instanceof LoginException){
loginException=(LoginException)e;
errorMessage=loginException.getErrorMessage();
}
else {
defaultException = new DefaultException(&amp;#34;æœªçŸ¥é”™è¯¯&amp;#34;);
errorMessage=defaultException.getErrorMessage();
}
httpServletRequest.setAttribute(&amp;#34;errorMessage&amp;#34;,errorMessage);
try {
//è½¬å‘åˆ°é”™è¯¯é¡µé¢
httpServletRequest.getRequestDispatcher(&amp;#34;error.jsp&amp;#34;).forward(httpServletRequest,httpServletResponse);
} catch (ServletException e1) {
e1.printStackTrace();
} catch (IOException e1) {
e1.printStackTrace();
}
return new ModelAndView();
}
}
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="3åœ¨springmvcé…ç½®æ–‡ä»¶ä¸­é…ç½®å¼‚å¸¸å¤„ç†bean">3.åœ¨SpringMVCé…ç½®æ–‡ä»¶ä¸­é…ç½®å¼‚å¸¸å¤„ç†bean&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">&amp;lt;bean class=&amp;#34;com.ning.exception.ExceptionResolver&amp;#34;/&amp;gt;
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="4åœ¨å¯èƒ½å‘ç”Ÿå¼‚å¸¸çš„ä½ç½®æŠ›å‡ºè‡ªå®šä¹‰å¼‚å¸¸">4.åœ¨å¯èƒ½å‘ç”Ÿå¼‚å¸¸çš„ä½ç½®æŠ›å‡ºè‡ªå®šä¹‰å¼‚å¸¸&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">throw new LoginException(&amp;#34;ç™»é™†å¤±è´¥&amp;#34;);
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>æ ¹æ®ä¸åŒçš„å¼‚å¸¸ç±»åž‹è¿›è¡Œå¼‚å¸¸å¤„ç†ã€‚
ç³»ç»Ÿè‡ªå®šä¹‰å¼‚å¸¸ç±»ï¼Œåœ¨controlleræ–¹æ³•ä¸­ã€serviceæ–¹æ³•ä¸­æ‰‹åŠ¨æŠ›å‡ºæ­¤ç±»å¼‚å¸¸ã€‚
é’ˆå¯¹ç³»ç»Ÿè‡ªå®šä¹‰çš„å¼‚å¸¸ï¼Œå°±å¯ä»¥ç›´æŽ¥ä»Žå¼‚å¸¸ç±»ä¸­èŽ·å–å¼‚å¸¸ä¿¡æ¯ï¼Œå°†å¼‚å¸¸å¤„ç†åœ¨é”™è¯¯é¡µé¢å±•ç¤ºã€‚
é’ˆå¯¹éžè‡ªå®šä¹‰å¼‚å¸¸ï¼Œå¯¹è¿™ç±»é‡æ–°æž„é€ æˆä¸€ä¸ªè‡ªå®šä¹‰å¼‚å¸¸ï¼Œå¼‚å¸¸ä¿¡æ¯ä¸ºâ€œæœªçŸ¥é”™è¯¯â€ï¼Œæ­¤ç±»é”™è¯¯éœ€è¦åœ¨ç³»ç»Ÿæµ‹è¯•é˜¶æ®µåŽ»æŽ’é™¤ã€‚
åœ¨ç»Ÿä¸€å¼‚å¸¸å¤„ç†å™¨ä¸­å®žçŽ°ä¸Šè¾¹çš„é€»è¾‘ã€‚&lt;/p>
&lt;/blockquote></description></item><item><title>C++ æž„é€ å‡½æ•° ç¬”è®°</title><link>https://blog.itning.top/post/2016/10/06/c-%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0-%E7%AC%94%E8%AE%B0/</link><pubDate>Thu, 06 Oct 2016 21:34:05 +0800</pubDate><guid>https://blog.itning.top/post/2016/10/06/c-%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0-%E7%AC%94%E8%AE%B0/</guid><description>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-c++" data-lang="c++">&lt;span class="c1">//main.cpp
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;iostream&amp;gt;
&lt;/span>&lt;span class="cp">
&lt;/span>&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;#34;ClassT.h&amp;#34;
&lt;/span>&lt;span class="cp">
&lt;/span>&lt;span class="cp">&lt;/span>&lt;span class="k">using&lt;/span> &lt;span class="k">namespace&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kt">int&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="n">Anmial&lt;/span> &lt;span class="n">pig&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s">&amp;#34;å“ˆå“ˆ&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">pig&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kt">void&lt;/span> &lt;span class="n">Anmial&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="n">cout&lt;/span>&lt;span class="o">&amp;lt;&amp;lt;&lt;/span>&lt;span class="s">&amp;#34; Anmialç±»ä¸­çš„run()æ–¹æ³•&amp;#34;&lt;/span>&lt;span class="o">&amp;lt;&amp;lt;&lt;/span>&lt;span class="n">endl&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="n">cout&lt;/span>&lt;span class="o">&amp;lt;&amp;lt;&lt;/span>&lt;span class="n">i_&lt;/span>&lt;span class="o">&amp;lt;&amp;lt;&lt;/span>&lt;span class="n">s_&lt;/span>&lt;span class="o">&amp;lt;&amp;lt;&lt;/span>&lt;span class="n">endl&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kt">void&lt;/span> &lt;span class="n">Anmial&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">eat&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="n">cout&lt;/span>&lt;span class="o">&amp;lt;&amp;lt;&lt;/span>&lt;span class="s">&amp;#34; Anmialç±»ä¸­çš„eat()æ–¹æ³•&amp;#34;&lt;/span>&lt;span class="o">&amp;lt;&amp;lt;&lt;/span>&lt;span class="n">endl&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kt">void&lt;/span> &lt;span class="n">Anmial&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">jump&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="n">cout&lt;/span>&lt;span class="o">&amp;lt;&amp;lt;&lt;/span>&lt;span class="s">&amp;#34; Anmialç±»ä¸­çš„jump()æ–¹æ³•&amp;#34;&lt;/span>&lt;span class="o">&amp;lt;&amp;lt;&lt;/span>&lt;span class="n">endl&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kt">void&lt;/span> &lt;span class="n">Anmial&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">sleep&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="n">cout&lt;/span>&lt;span class="o">&amp;lt;&amp;lt;&lt;/span>&lt;span class="s">&amp;#34; Anmialç±»ä¸­çš„sleep()æ–¹æ³•&amp;#34;&lt;/span>&lt;span class="o">&amp;lt;&amp;lt;&lt;/span>&lt;span class="n">endl&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="n">Anmial&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">Anmial&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">string&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="c1">//æž„é€ å‡½æ•°
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="p">{&lt;/span>
&lt;span class="n">i_&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="n">s_&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="n">cout&lt;/span>&lt;span class="o">&amp;lt;&amp;lt;&lt;/span>&lt;span class="s">&amp;#34;æž„é€ å‡½æ•°è¢«è°ƒç”¨&amp;#34;&lt;/span>&lt;span class="o">&amp;lt;&amp;lt;&lt;/span>&lt;span class="n">endl&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="n">Anmial&lt;/span>&lt;span class="o">::~&lt;/span>&lt;span class="n">Anmial&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="c1">//æžæž„å‡½æ•°
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="p">{&lt;/span>
&lt;span class="n">cout&lt;/span>&lt;span class="o">&amp;lt;&amp;lt;&lt;/span>&lt;span class="s">&amp;#34;æžæž„å‡½æ•°è¢«è°ƒç”¨&amp;#34;&lt;/span>&lt;span class="o">&amp;lt;&amp;lt;&lt;/span>&lt;span class="n">endl&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-c++" data-lang="c++">&lt;span class="c1">//ClassT.h
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="cp">#ifndef CLASST_H
&lt;/span>&lt;span class="cp">#define CLASST_H
&lt;/span>&lt;span class="cp">#include&lt;/span>&lt;span class="cpf">&amp;lt;string&amp;gt;
&lt;/span>&lt;span class="cp">
&lt;/span>&lt;span class="cp">&lt;/span>&lt;span class="k">class&lt;/span> &lt;span class="nc">Anmial&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="k">private&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="c1">//ç§æœ‰
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">i_&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">string&lt;/span> &lt;span class="n">s_&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">public&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="c1">//å…¬æœ‰
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="n">Anmial&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">string&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="o">~&lt;/span>&lt;span class="n">Anmial&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="kt">void&lt;/span> &lt;span class="nf">run&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="kt">void&lt;/span> &lt;span class="nf">jump&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="kt">void&lt;/span> &lt;span class="nf">eat&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="kt">void&lt;/span> &lt;span class="nf">sleep&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="p">};&lt;/span>
&lt;span class="cp">#endif &lt;/span>&lt;span class="c1">// CLASST_H
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ClassTest.exe&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-shell" data-lang="shell">æž„é€ å‡½æ•°è¢«è°ƒç”¨
Anmialç±»ä¸­çš„run&lt;span class="o">()&lt;/span>æ–¹æ³•
3å“ˆå“ˆ
æžæž„å‡½æ•°è¢«è°ƒç”¨
Process returned &lt;span class="m">0&lt;/span> &lt;span class="o">(&lt;/span>0x0&lt;span class="o">)&lt;/span> execution &lt;span class="nb">time&lt;/span> : 0.069 s
Press any key to &lt;span class="k">continue&lt;/span>.
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item></channel></rss>